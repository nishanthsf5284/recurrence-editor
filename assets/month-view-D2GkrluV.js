import{j as c,r as jt}from"./index-7s7xaQU8.js";import{r as e}from"./index-CC6F48bw.js";import{n as Ht,a as ye,o as po,q as zt,r as We,s as fr,t as Ps,v as _s,w as ho,x as wn,y as Tt,z as Ms,E as Eo,G as go,H as ps,I as F,c as bt,S as Mt,u as $e,p as Ot,J as mr,K as hs,M as pr,N as ut,L as hr,Q as jn,A as Ut,T as Hs,X as Nn,d as js,Y as To,i as Co,Z as At,e as $s,b as Do,_ as vo,B as nt,V as Qe,C as Ct,$ as $n,a0 as Er,a1 as yo,f as ft,a2 as bo,a3 as ln,a4 as Ro,a5 as So,a6 as ot,a7 as Hn,a8 as gr,a9 as Tr,aa as Cr,ab as Ze,ac as Ke,ad as Dr,l as wo,ae as st,af as No,ag as Xe,ah as Ao,ai as os,D as Xn,aj as Vs,ak as Ve,al as Oo,h as Lo,k as xo,j as Ws,am as Io,R as ko,an as Po,ao as Fs,ap as fn,aq as _o,ar as Mo,as as Ho}from"./recurrence-editor-DcHlfCnG.js";const Es=e.createContext(void 0),Et=()=>{const o=e.useContext(Es);if(o===void 0)throw new Error("useSchedulerRenderDatesContext must be used within a Scheduler");return o};Es.displayName="SchedulerRenderDatesContext";const gs=e.createContext(void 0),$t=()=>{const o=e.useContext(gs);if(o===void 0)throw new Error("useSchedulerEventsContext must be used within a Scheduler");return o};gs.displayName="SchedulerEventsContext";function Bs(o){return o!=null&&typeof o=="object"&&!Array.isArray(o)&&o.constructor===Object}function vr(o,n){const s={...o};for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t],i=s[t];if(typeof r>"u")continue;Bs(r)&&Bs(i)?s[t]=vr(i,r):s[t]=r}return s}function yr(o,n){return vr(o,n)}class ht{static getViewsInfo(n,s){const t=[],r=new Set;return e.Children.forEach(n,i=>{if(e.isValidElement(i)){const a=i.type,l=i.props||{};let m=null;switch(a.displayName){case"DayView":m="Day";break;case"WeekView":m="Week";break;case"WorkWeekView":m="WorkWeek";break;case"MonthView":m="Month";break}if(m){const u=l.name||l.displayName||m;r.has(u)||(r.add(u),t.push({viewType:m,name:u,displayName:l.displayName||s(m.toLowerCase()),interval:l.interval||1,component:i}))}}}),t}static findViewByNameOrType(n,s){const t=n.find(i=>i.name===s);if(t)return t;const r=s;return n.find(i=>i.viewType===r)||null}static getDefaultView(n){return n.length>0?n[0]:void 0}static isViewAvailable(n,s){const t=n==null?void 0:n();return Array.isArray(t)&&t.some(r=>r.viewType===s)}static isDayViewAvailable(n){return ht.isViewAvailable(n,"Day")}}const je=(()=>{function o(i){return i?"__eventList"in i?i.__eventList.events||[]:(i.__eventList={},i.__eventList.events=[]):null}function n(i,a,l,m,u){if(!i)return null;const f=o(i);let p=u?po(l,u):l;m&&(p=p.bind(m));const h=a.split(" ");for(let E=0;E<h.length;E++){f.push({name:h[parseInt(E.toString(),10)],listener:l,debounce:p});const g=ye.isIE?null:{passive:!1};i.addEventListener(h[parseInt(E.toString(),10)],p,g)}return p}function s(i,a,l){if(!i)return null;const m=o(i),u=a.split(" ");for(let f=0;f<u.length;f++){let p=-1,h=null;m&&m.length!==0&&m.some((E,g)=>E.name===u[parseInt(f.toString(),10)]&&E.listener===l?(p=g,h=E.debounce||null,!0):!1),p!==-1&&m.splice(p,1),h&&i.removeEventListener(u[parseInt(f.toString(),10)],h)}}function t(i){if(!i)return null;const a=o(i),l=Ht([],void 0,a);for(let m=0;m<l.length;m++){const u=l[parseInt(m.toString(),10)];i.removeEventListener(u.name,u.debounce),a.shift()}}function r(i,a,l){if(!i)return null;const m=o(i);for(const u of m)u.name===a&&u.debounce(l)}return{add:n,clearEvents:t,remove:s,trigger:r}})(),jo=()=>{let o=[];const n={};function s(u,f,p,h){if(We(f))return;const E=p||{};m(u)?n[`${u}`]=[{handler:f,context:E,id:h}]:h&&!o.includes(h)?(o.push(h),n[`${u}`].push({handler:f,context:E,id:h})):n[`${u}`].some(g=>g.handler===f)||n[`${u}`].push({handler:f,context:E})}function t(u,f,p){if(m(u))return;const h=zt(u,n);if(f)for(let E=0;E<h.length;E++){const g=h[parseInt(E.toString(),10)];if(p&&g.id===p){h.splice(E,1),o=o.filter(C=>C!==p);break}else if(f===g.handler){h.splice(E,1);break}}else delete n[`${u}`]}function r(u,f,p,h){if(m(u)){p&&p(f);return}f&&(f={...f,name:u});const E=zt(u,n).slice(0);for(const g of E)try{g.handler(f)}catch(C){h&&h(C)}p&&p(f)}function i(u){try{JSON.parse(u)}catch{return!1}return!0}function a(){Object.keys(n).forEach(u=>{delete n[`${u}`]}),o=[]}function l(){const u=n.notifyExternalChange;if(u){for(let f=0;f<u.length;f++){const p=u[parseInt(f.toString(),10)],h=p.context;h&&h.detectFunction&&h.randomId&&h.isReactMock&&(t("notifyExternalChange",p.handler,h.randomId),f--)}n.notifyExternalChange.length||delete n.notifyExternalChange}}function m(u){return!n[`${u}`]||n[`${u}`].length===0}return{isJson:i,on:s,off:t,notify:r,destroy:a,ranArray:o,boundedEvents:n,offIntlEvents:l}},$o=new RegExp("]");function Vo(o,n){const t={isDestroyed:!1,isProtectedOnChange:!0,modelObserver:jo(),...o};return t.element=e.useRef(null),t.addEventListener=(r,i)=>{t.modelObserver.on(r,i)},t.removeEventListener=(r,i)=>{t.modelObserver.off(r,i)},t.trigger=(r,i,a,l)=>{if(t.isDestroyed!==!0){const m=t.isProtectedOnChange;t.isProtectedOnChange=!1;const u=t.modelObserver.notify(r,i,a,l);if($o.test(r)){const f=zt(r,t);f&&f.call(t,i),a&&a.call(t,i)}return t.isProtectedOnChange=m,u}},t.destroy=()=>{t.modelObserver.destroy(),t.isDestroyed=!0},e.useLayoutEffect(()=>{t.isDestroyed=!1},[]),t}let An,On,Us,zs;function Ys(o,n,s,t,r){let i,a,l=0,m=0,u;if(typeof o==="string"?u=fr(o):u=o,u){const p=u.getBoundingClientRect();i=u.scrollWidth?u.scrollWidth:p.right-p.left,a=u.scrollHeight?o&&!We(n)&&n.classList.contains("sf-treeview")?u.clientHeight:u.scrollHeight:p.bottom-p.top;const h=["Top","Left","Bottom","Right"],E=getComputedStyle(u);for(let g=0;g<h.length;g++){const C=h[parseInt(g.toString(),10)],D=E["border"+C+"Width"],P=E["padding"+C],R=C.toLowerCase();s[`${R}`]=isNaN(parseFloat(D))?0:parseFloat(D),t[`${R}`]=isNaN(parseFloat(P))?0:parseFloat(P)}o&&!We(n)&&n.classList.contains("sf-treeview")?l=p.top+document.scrollingElement.scrollTop:l=p.top,m=p.left,r.left=m+s.left+t.left,r.top=u.offsetTop+s.top+t.top,r.right=m+i-(s.right+t.right),r.bottom=l+a-(s.bottom+t.bottom)}}function Ks(o){const n=document.body,s=document.documentElement;return Math.max(n["scroll"+o],s["scroll"+o],n["offset"+o],s["offset"+o],s["client"+o])}function qn(o){for(On=o.offsetTop,An=o.offsetLeft,Us=o.offsetWidth,zs=o.offsetHeight;o.offsetParent;)o=o.offsetParent,On+=o.offsetTop,An+=o.offsetLeft;return On>=window.pageYOffset&&An>=window.pageXOffset&&On+zs<=window.pageYOffset+window.innerHeight&&An+Us<=window.pageXOffset+window.innerWidth}function an(o){return o.type.indexOf("touch")>-1?o.changedTouches[0]:o}function Gn(o){if(We(o))return{left:0,top:0};const n=o.getBoundingClientRect(),s=getComputedStyle(o);return{left:n.left+window.pageXOffset-parseInt(s.marginLeft,10),top:n.top+window.pageYOffset-parseInt(s.marginTop,10)}}function Xs(o){const n=o.clientX>0?o.clientX:0,s=o.clientY>0?o.clientY:0;return document.elementsFromPoint(n,s)}function qs(o,n){const s=n?[...o].reverse():o;for(const i of s){const l=window.getComputedStyle(i).overflowY;if((l==="auto"||l==="scroll")&&i.scrollHeight>i.clientHeight)return i}const t=document.scrollingElement;return window.getComputedStyle(t).overflowY==="visible"?(t.style.overflow="auto",t):null}const Wo=e.createContext(void 0),Fo=()=>{const o=e.useContext(Wo);if(o)return o},Bo={left:0,top:0,bottom:0,right:0},Zn={isDragged:!1};function Uo(o){return{left:0,top:0,...o}}function Yt(o,n){const s=Fo(),t={cursorAt:Uo({}),clone:!1,dragArea:null,isDragScroll:!1,isReplaceDragEle:!1,isPreventSelect:!0,distance:1,handle:"",abort:"",helper:null,scope:"default",dragTarget:"",dragDirection:null,queryPositionInfo:null,enableTailMode:!1,skipDistanceCheck:!1,preventDefault:!0,enableAutoScroll:!1,enableTapHold:!1,tapHoldThreshold:750,enableScrollHandler:!1,element:o,...n},r=e.useRef(t);let i,a,l,m,u,f,p,h=Yt.getDefaultPosition(),E=Yt.getDefaultPosition();const g=Yt.getDefaultPosition();let C,D=0,P=0,R=0,v=!1,O=null,A,V,L=!1,y=0,S,T,N,_,x=0,M=0,Z=0,ie=0;const pe={};function Y(b){let z;!We(r.current.handle)&&r.current.handle!==""&&(z=fr(r.current.handle,o.current));const te=r.current.enableTapHold&&ye.isDevice&&ye.isTouch?H:J;b?je.remove(z||o.current,ye.isSafari()?"touchstart":ye.touchStartEvent,te):je.add(z||o.current,ye.isSafari()?"touchstart":ye.touchStartEvent,te)}function H(b){const z=b.currentTarget;O=setTimeout(()=>{L=!0,U(),J(b,z)},r.current.tapHoldThreshold),je.add(document,ye.isSafari()?"touchmove":ye.touchMoveEvent,U,this),je.add(document,ye.isSafari()?"touchend":ye.touchEndEvent,U,this)}function k(b){ps(b)?(je.add(document,ye.isSafari()?"touchmove":ye.touchMoveEvent,Q,this),je.add(document,ye.isSafari()?"touchend":ye.touchEndEvent,ne,this),I(!1,o.current,b)):(Y(),document.body.classList.remove("sf-prevent-select"))}function U(){clearTimeout(O),je.remove(document,ye.isSafari()?"touchmove":ye.touchMoveEvent,U),je.remove(document,ye.isSafari()?"touchend":ye.touchEndEvent,U)}function oe(){x=0,M=0}function J(b,z){if(o.current=Ps(o),V=b.target,ee())return;if(ee(!0),L=!1,i=b.currentTarget||z,v=!1,r.current.abort){let ue=r.current.abort;typeof ue=="string"&&(ue=[ue]);for(let Ce=0;Ce<ue.length;Ce++)if(!We(Tt(b.target,ue[`${Ce}`]))){ee()&&ee(!0);return}}r.current.preventDefault&&!wn(b.changedTouches)&&b.type!=="touchstart"&&b.preventDefault(),o.current.setAttribute("aria-grabbed","true");const te=an(b);if(a={x:te.pageX,y:te.pageY},!r.current.clone){const ue=o.current.getBoundingClientRect();oe(),l=te.pageX-(ue.left+x),m=te.pageY-(ue.top+M)}L?w(b):(je.add(document,ye.isSafari()?"touchmove":ye.touchMoveEvent,w,this),je.add(document,ye.isSafari()?"touchend":ye.touchEndEvent,t.intDestroy,this)),Y(!0),b.type!=="touchstart"&&r.current.isPreventSelect&&document.body.classList.add("sf-prevent-select"),L=!1,je.trigger(document.documentElement,ye.isSafari()?"touchstart":ye.touchStartEvent,b)}function w(b){U(),document.scrollingElement&&(Z=document.scrollingElement.scrollLeft,ie=document.scrollingElement.scrollTop);const z=!wn(b.changedTouches);if(z&&b.changedTouches.length!==1)return;const te=an(b);let ue;const Ce=getComputedStyle(o.current);u={left:parseInt(Ce.marginLeft,10),top:parseInt(Ce.marginTop,10),right:parseInt(Ce.marginRight,10),bottom:parseInt(Ce.marginBottom,10)};let j=o.current;if(r.current.clone&&r.current.dragTarget){const ve=Tt(b.target,r.current.dragTarget);We(ve)||(j=ve)}r.current.isReplaceDragEle&&(j=G(b.target,j)),f=Gn(j),p=Pe(b,r.current.isDragScroll);const ae=a.x-te.pageX,Ne=a.y-te.pageY;if(Math.sqrt(ae*ae+Ne*Ne)>=r.current.distance||L){const ve=Ue(b);if(!ve)return;z&&b.preventDefault();const W=T=ve;if(_=Gn(W.offsetParent),r.current&&r.current.onDragStart){const Se=Re(b),ge={event:b,element:j,target:Se,bindEvents:null,dragElement:W};if(r.current.onDragStart(ge),ge.cancel){t.intDestroy();return}}r.current.dragArea?Ys(r.current.dragArea,T,E,g,h):(h={left:0,right:0,bottom:0,top:0},E={top:0,left:0}),ue={left:p.left-_.left,top:p.top-_.top},r.current.clone&&!r.current.enableTailMode&&(D=p.left-f.left,y=p.top-f.top),oe();const X=getComputedStyle(j),de=parseFloat(X.marginTop);r.current.clone&&de!==0&&(ue.top+=de),r.current.enableScrollHandler&&!r.current.clone&&(ue.top-=M,ue.left-=x);const Ee=fe({top:`${ue.top-y}px`,left:`${ue.left-D}px`});r.current.dragArea&&typeof r.current.dragArea!="string"&&r.current.dragArea.classList.contains("sf-kanban-content")&&r.current.dragArea.style.position==="relative"&&(ue.top+=r.current.dragArea.scrollTop),A={top:ue.top,left:ue.left},Ms(W,B({position:"absolute",left:Ee.left,top:Ee.top})),je.remove(document,ye.isSafari()?"touchmove":ye.touchMoveEvent,w),je.remove(document,ye.isSafari()?"touchend":ye.touchEndEvent,t.intDestroy),k(W)}}function Q(b){if(!wn(b.changedTouches)&&b.changedTouches.length!==1)return;r.current.clone&&b.changedTouches&&ye.isDevice&&ye.isTouch&&b.preventDefault();let z,te;p=Pe(b,r.current.isDragScroll);const ue=Ks("Height");ue<p.top&&(p.top=ue);const Ce=Ks("Width");if(Ce<p.left&&(p.left=Ce),r.current&&r.current.onDrag){const ke=Re(b);r.current.onDrag({event:b,element:o.current,target:ke})}const j=q(b);if(j.target&&j.instance){let ke=!0;N&&(N.instance!==j.instance?le(b,j):ke=!1),ke&&(j.instance.dragData[r.current.scope]=pe[r.current.scope],j.instance.intOver(b,j.target),N=j)}else N&&le(b,j);const ae=pe[r.current.scope].helper;_=Gn(ae.offsetParent);const Ne=_.left,ce=_.top,ve=an(b),W=ve.pageX,X=ve.pageY,de=p.left-D,Ee=p.top-y,Se=getComputedStyle(ae);if(r.current.dragArea){if(r.current.enableAutoScroll&&Ys(r.current.dragArea,ae,E,g,h),C!==W||r.current.skipDistanceCheck){const ke=ae.offsetWidth+(parseFloat(Se.marginLeft)+parseFloat(Se.marginRight));h.left>de&&de>0?z=h.left:h.right+window.pageXOffset<de+ke&&de>0?z=de-(de-h.right)+window.pageXOffset-ke:z=de<0?h.left:de}if(S!==X||r.current.skipDistanceCheck){const ke=ae.offsetHeight+(parseFloat(Se.marginTop)+parseFloat(Se.marginBottom));h.top>Ee&&Ee>0?te=h.top:h.bottom+window.pageYOffset<Ee+ke&&Ee>0?te=Ee-(Ee-h.bottom)+window.pageYOffset-ke:te=Ee<0?h.top:Ee}}else z=de,te=Ee;const ge=ce+E.top,Ae=Ne+E.left;v&&(We(te)&&(te=R),We(z)&&(z=P));let we,_e;if(ae.classList.contains("sf-treeview"))r.current.dragArea?(h.top=r.current.clone?h.top:0,we=te-ge<0?h.top:te-E.top,_e=z-Ae<0?h.left:z-E.left):(we=te-E.top,_e=z-E.left);else if(r.current.dragArea){const ke=ae.classList.contains("sf-dialog");h.top=r.current.clone?h.top:0,we=te-ge<0?h.top:te-ge,_e=z-Ae<0?ke?z-(Ae-E.left):A.left:z-Ae}else we=te-ge,_e=z-Ae;const be=parseFloat(getComputedStyle(o.current).marginTop);if(be>0&&(r.current.clone&&(we+=be,Ee<0&&(be+Ee>=0?we=be+Ee:we-=be),r.current.dragArea&&(we=h.bottom<we?h.bottom:we)),te-ge<0))if(Ee+be+(ae.offsetHeight-ge)>=0){const ke=h.top+Ee-ge;ke+be+ge<0?we-=be+ge:we=ke}else we-=be+ge;if(r.current.dragArea&&ae.classList.contains("sf-treeview")){const ke=ae.offsetHeight+(parseFloat(Se.marginTop)+parseFloat(Se.marginBottom));we=we+ke>h.bottom?h.bottom-ke:we}r.current.enableScrollHandler&&!r.current.clone&&(we-=M,_e-=x),r.current.dragArea&&typeof r.current.dragArea!="string"&&r.current.dragArea.classList.contains("sf-kanban-content")&&r.current.dragArea.style.position==="relative"&&(we+=r.current.dragArea.scrollTop);const Me=fe({top:we+"px",left:_e+"px"});Ms(ae,B(Me)),!qn(ae)&&r.current.enableAutoScroll&&!ae.classList.contains("sf-treeview")&&ae.scrollIntoView();let He=document.querySelectorAll(":hover");if(r.current.enableAutoScroll&&ae.classList.contains("sf-treeview")){He.length===0&&(He=Xs(b));let ke=qs(He,!1);qn(ae)?K(ke,we):qn(ae)||(He=[].slice.call(document.querySelectorAll(":hover")),He.length===0&&(He=Xs(b)),ke=qs(He,!0),K(ke,we))}v=!0,P=z,R=te,p.left=z,p.top=te,C=W,S=X}function ne(b){if(v=!1,Z=0,ie=0,!wn(b.changedTouches)&&b.changedTouches.length!==1)return;if(["touchend","pointerup","mouseup"].indexOf(b.type)!==-1){if(r.current&&r.current.onDragStop){const ue=Re(b);r.current.onDragStop({event:b,element:o.current,target:ue,helper:T})}t.intDestroy()}else o.current.setAttribute("aria-grabbed","false");const te=q(b);te.target&&te.instance&&(te.instance.dragStopCalled=!0,te.instance.dragData[r.current.scope]=pe[r.current.scope],te.instance.intDrop(b,te.target)),I(!0),document.body.classList.remove("sf-prevent-select")}function se(){Y(),ye.isIE&&_s([t.element.current],"sf-block-touch"),pe[r.current.scope]={}}t.intDestroy=()=>{v=!1,Y(),document.body.classList.remove("sf-prevent-select"),o.current.setAttribute("aria-grabbed","false"),je.remove(document,ye.isSafari()?"touchmove":ye.touchMoveEvent,w),je.remove(document,ye.isSafari()?"touchend":ye.touchEndEvent,ne),je.remove(document,ye.isSafari()?"touchend":ye.touchEndEvent,t.intDestroy),je.remove(document,ye.isSafari()?"touchmove":ye.touchMoveEvent,Q),ee()&&ee(!0)},t.destroy=()=>{Y(!0)};function le(b,z){N.instance.intOut(b,z.target),N.instance.dragData[r.current.scope]=null,N=null}function Re(b){const z=an(b);let te;const ue=T.style.pointerEvents||"",Ce=b.type.indexOf("pointer")!==-1&&ye.info.name==="safari"&&parseInt(ye.info.version,10)>12;return go(b.target,T)||b.type.indexOf("touch")!==-1||Ce?(T.style.pointerEvents="none",te=document.elementFromPoint(z.clientX,z.clientY),T.style.pointerEvents=ue):te=b.target,te}function Pe(b,z){const te=b.srcElement!==void 0?b.srcElement:b.target,ue=an(b);let Ce,j;const ae=We(te.offsetParent);if(z){if(Ce=r.current.clone?ue.pageX:ue.pageX+(ae?0:te.offsetParent.scrollLeft)-l,j=r.current.clone?ue.pageY:ue.pageY+(ae?0:te.offsetParent.scrollTop)-m,!r.current.clone){const Ne=te.offsetParent;if(!ae&&Ne){const ce=Ne.scrollLeft,ve=Ne.scrollTop,W=ce-Z,X=ve-ie;Ce=Ce-W,j=j-X}}}else if(Ce=r.current.clone?ue.pageX:ue.pageX+window.pageXOffset-l,j=r.current.clone?ue.pageY:ue.pageY+window.pageYOffset-m,document.scrollingElement&&!r.current.clone){const Ne=document.scrollingElement,ce=Ne.scrollLeft,ve=Ne.scrollTop,W=ce-Z,X=ve-ie;Ce=Ce-W,j=j-X}return{left:Ce-(u.left+r.current.cursorAt.left),top:j-(u.top+r.current.cursorAt.top)}}function Ue(b){let z;return r.current.clone?r.current&&r.current.helper?z=r.current.helper({sender:b,element:i}):(z=Eo("div",{className:"sf-drag-helper sf-block-touch",innerHTML:"Draggable"}),document.body.appendChild(z)):z=t.element.current,z}function I(b,z,te){pe[r.current.scope]=b?null:{draggable:z,helper:te,draggedElement:t.element.current}}function q(b){const z=Re(b);let te=me(z);if(!te&&z&&!We(z.parentNode)){const ue=Tt(z.parentNode,".sf-droppable")||z.parentElement;ue&&(te=me(ue))}return{target:z,instance:te}}function me(b){let z,te;if(s){const{getAllDroppables:ue}=s;z=ue();for(const Ce in z)if(Object.prototype.hasOwnProperty.call(z,Ce)){const j=z[`${Ce}`];if(j.element&&j.element.current===b){te=j;break}}}else return;return te}function ee(b){return b&&(Zn.isDragged=!Zn.isDragged),Zn.isDragged}function fe(b){return r.current&&r.current.queryPositionInfo?r.current.queryPositionInfo(b):b}function B(b){const z={...b};return r.current.dragDirection&&(r.current.dragDirection==="x"?delete z.top:r.current.dragDirection==="y"&&delete z.left),z}function K(b,z){if(b===document.scrollingElement)b.clientHeight+b.scrollTop-T.clientHeight<z&&b.getBoundingClientRect().height+_.top>z?b.scrollTop+=T.clientHeight:b.scrollTop>z-T.clientHeight&&(b.scrollTop-=T.clientHeight);else if(b){const te=document.scrollingElement.scrollTop,ue=T.clientHeight;b.clientHeight+b.getBoundingClientRect().top-ue+te<z?b.scrollTop+=T.clientHeight:b.getBoundingClientRect().top>z-ue-te&&(b.scrollTop-=T.clientHeight)}}function G(b,z){let te;return!We(V)&&V!==b?te=V:te=We(z)?b:z,te}return e.useLayoutEffect(()=>{if(t.element.current=Ps(t.element),!!t.element.current)return r.current={...t,...n},_s([t.element.current],["sf-lib","sf-draggable"]),se(),()=>{t.element.current&&ho([t.element.current],["sf-lib","sf-draggable"]),t.destroy()}}),t}Yt.getDefaultPosition=()=>Ht({},Bo);const zo=/(Up|Down)/;function Vt(o,n){const s=Vo(),t={...n};let r=!1,i={clientX:0,clientY:0},a=null,l={clientX:0,clientY:0},m="",u=!1,f=!1,p={originalEvent:null},h=0,E=0,g="",C=0,D=!0,P=null,R=null,v=0;e.useLayoutEffect(()=>(O(),()=>{V(),s.destroy()}),[]);function O(){o.current&&(A(),ye.isIE&&o.current.classList.add("sf-block-touch"))}function A(){je.add(o.current,ye.touchStartEvent,y,void 0)}function V(){je.remove(o.current,ye.touchStartEvent,y)}function L(k){const U=getComputedStyle(k),oe=U.overflow+U.overflowX+U.overflowY;return/(auto|scroll)/.test(oe)}function y(k){if(D===!0){const U=H(k);k.changedTouches!==void 0&&(D=!1),r=!1,g="",i=l={clientX:U.clientX,clientY:U.clientY},a=U,u=f=!1,C=Date.now(),R=setTimeout(()=>{N(k)},t.tapHoldThreshold?t.tapHoldThreshold:750),je.add(o.current,ye.touchMoveEvent,S,void 0),je.add(o.current,ye.touchEndEvent,_,void 0),je.add(o.current,ye.touchCancelEvent,T,void 0)}}function S(k){const U=H(k);r=!(U.clientX===i.clientX&&U.clientY===i.clientY);let oe={};if(r){clearTimeout(R),ie(k);const J={startEvents:a,originalEvent:k,startX:i.clientX,startY:i.clientY,distanceX:h,distanceY:E,scrollDirection:m,velocity:pe(U)};oe=Ht(oe,{},J),s.trigger("scroll",oe,t.scroll),l={clientX:U.clientX,clientY:U.clientY}}}function T(k){clearTimeout(R),clearTimeout(P),v=0,x(k),je.remove(o.current,ye.touchCancelEvent,T)}function N(k){v=0,D=!0,je.remove(o.current,ye.touchMoveEvent,S),je.remove(o.current,ye.touchEndEvent,_);const U={originalEvent:k};s.trigger("tapHold",U,t.tapHold),je.remove(o.current,ye.touchCancelEvent,T)}function _(k){x(k),r||typeof t.tap=="function"&&(s.trigger("tap",{originalEvent:k,tapCount:++v},t.tap),P=setTimeout(()=>{v=0},t.tapThreshold?t.tapThreshold:350)),M()}function x(k){clearTimeout(R),clearTimeout(P);const U=H(k);let oe=U.clientX-i.clientX,J=U.clientY-i.clientY;oe=Math.floor(oe<0?-1*oe:oe),J=Math.floor(J<0?-1*J:J),r=oe>1||J>1,/Firefox/.test(ye.userAgent)&&U.clientX===0&&U.clientY===0&&k.type==="mouseup"&&(r=!1),Z(k);const Q={originalEvent:k,startEvents:a,startX:i.clientX,startY:i.clientY,distanceX:h,distanceY:E,swipeDirection:g,velocity:pe(U)};if(r){const ne=t.swipeSettings?t.swipeSettings.swipeThresholdDistance:50,se=Ht(void 0,p,Q);let le=!1;const Re=L(o.current),Pe=zo.test(g);ne&&(ne<h&&!Pe||ne<E&&Pe)&&(Re?le=Y(o.current,Pe):le=!0),le&&s.trigger("swipe",se,t.swipe)}M()}function M(){setTimeout(()=>{D=!0},typeof t.tap!="function"?0:20),je.remove(o.current,ye.touchMoveEvent,S),je.remove(o.current,ye.touchEndEvent,_),je.remove(o.current,ye.touchCancelEvent,T)}function Z(k){const U=H(k);p={originalEvent:k},h=Math.abs(Math.abs(U.clientX)-Math.abs(i.clientX)),E=Math.abs(Math.abs(U.clientY)-Math.abs(i.clientY)),g=h>E?U.clientX>i.clientX?"Right":"Left":U.clientY<i.clientY?"Up":"Down"}function ie(k){const U=H(k);p={originalEvent:k},h=Math.abs(Math.abs(U.clientX)-Math.abs(l.clientX)),E=Math.abs(Math.abs(U.clientY)-Math.abs(l.clientY)),(h>E||u)&&!f?(m=U.clientX>l.clientX?"Right":"Left",u=!0):(m=U.clientY<l.clientY?"Up":"Down",f=!0)}function pe(k){const U=k.clientX,oe=k.clientY,J=Date.now(),w=U-i.clientX,Q=oe-i.clientY,ne=J-C;return Math.sqrt(w*w+Q*Q)/ne}function Y(k,U){const oe=["scroll","offset"],J=U?["Height","Top"]:["Width","Left"];return k[oe[0]+J[0]]<=k[oe[1]+J[0]]?!0:k[oe[0]+J[1]]===0||k[oe[1]+J[0]]+k[oe[0]+J[1]]>=k[oe[0]+J[0]]}function H(k){return k.changedTouches&&k.changedTouches.length!==0?k.changedTouches[0]:k}return t}class Jn{static addWorkDays(n,s,t,r){if(s<=0)return new Date(n);let i=new Date(n),a=0;for(;a<s;){const l=F.addDays(i,t);F.isWorkDay(l,r)&&(a+=1),i=l}return i}static navigate(n,s){const{currentDate:t,viewType:r,interval:i,showWeekend:a,workDays:l}=s;switch(r){case"Day":return a===!1?this.addWorkDays(t,i,n,l):F.addDays(t,n*i);case"Week":case"WorkWeek":return F.addDays(t,n*7*i);case"Month":return F.addMonths(t,n*i);default:return F.addDays(t,n)}}static navigateToPrevious(n){return this.navigate(-1,n)}static navigateToNext(n){return this.navigate(1,n)}static navigateToToday(){return new Date}}const Yo=c.jsx("path",{d:"M11.5 10.0858L5.50003 4.08582L4.08582 5.50003L11.5 12.9142L18.9142 5.50003L17.5 4.08582L11.5 10.0858ZM11.5 17.0858L5.50003 11.0858L4.08582 12.5L11.5 19.9142L18.9142 12.5L17.5 11.0858L11.5 17.0858Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),br=bt(Yo),Ko=c.jsx("path",{d:"M5 7.08578L12 14.0858L19 7.08578L20.4142 8.5L12 16.9142L3.58578 8.5L5 7.08578Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Bn=bt(Ko),Xo=c.jsx("path",{d:"M6.41418 12L12.4142 6L11 4.58578L3.58575 12L11 19.4142L12.4142 18L6.41418 12ZM13.4142 12L19.4142 6L18 4.58578L10.5858 12L18 19.4142L19.4142 18L13.4142 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ts=bt(Xo),qo=c.jsx("path",{d:"M10.5858 12L4.58582 18L6.00003 19.4142L13.4142 12L6.00003 4.58575L4.58582 5.99997L10.5858 12ZM17.5858 12L11.5858 18L13 19.4142L20.4142 12L13 4.58575L11.5858 5.99997L17.5858 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Cs=bt(qo),Go=c.jsx("path",{d:"M11.5 6.91418L17.5 12.9142L18.9142 11.5L11.5 4.08575L4.08575 11.5L5.49997 12.9142L11.5 6.91418ZM11.5 13.9142L17.5 19.9142L18.9142 18.5L11.5 11.0858L4.08575 18.5L5.49997 19.9142L11.5 13.9142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Rr=bt(Go),Zo=c.jsx("path",{d:"M6.00003 16.4142L12 10.4142L18 16.4142L19.4142 15L12 7.58578L4.58582 15L6.00003 16.4142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Sr=bt(Zo),Jo=c.jsx("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13 11.382V5H11V12.618L16.4472 15.3416L17.3416 13.5528L13 11.382Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Qo=bt(Jo),ei=c.jsx("path",{d:"M6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM4.9681 6.38231C3.73647 7.92199 3 9.87499 3 12C3 16.9706 7.02944 21 12 21C14.125 21 16.078 20.2635 17.6177 19.0319L4.9681 6.38231ZM12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),ti=bt(ei),ni=c.jsx("path",{d:"M17 9C17 9.59519 16.7516 10.6096 16.1971 11.9583C15.6652 13.2521 14.932 14.6644 14.1531 15.9825C13.4 17.257 12.6299 18.4 12 19.2216C11.3701 18.4 10.5999 17.257 9.84685 15.9825C9.06796 14.6644 8.33481 13.2521 7.80291 11.9583C7.24843 10.6096 7 9.59519 7 9C7 6.23858 9.23858 4 12 4C14.7614 4 17 6.23858 17 9ZM19 9C19 13 13 22 12 22C11 22 5 13 5 9C5 5.13401 8.13401 2 12 2C15.866 2 19 5.13401 19 9ZM12 11.5C13.3807 11.5 14.5 10.3807 14.5 9C14.5 7.61929 13.3807 6.5 12 6.5C10.6193 6.5 9.5 7.61929 9.5 9C9.5 10.3807 10.6193 11.5 12 11.5Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),si=bt(ni),ri=c.jsx("path",{d:"M3 3C3 1.89543 3.89543 1 5 1H13.5858C14.1162 1 14.6249 1.21071 15 1.58579L20.4142 7C20.7893 7.37507 21 7.88378 21 8.41421V21C21 22.1046 20.1046 23 19 23H5C3.89543 23 3 22.1046 3 21V3ZM5 3L13 3V9H19V21H5V3ZM11 6H7V8H11V6ZM7 11H11V13H7V11ZM17 13V11H13V13H17ZM7 16H11V18H7V16ZM17 18V16H13V18H17Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),oi=bt(ri),ii=c.jsx("path",{d:"M8 1V3H16V1H18V3H20C21.1046 3 22 3.89543 22 5V8V9V10V11.7546C21.3984 11.2724 20.7257 10.8753 20 10.5815V10H4V21H9.58152C9.87526 21.7257 10.2724 22.3984 10.7546 23H4C2.89543 23 2 22.1046 2 21V10V9V8V5C2 3.89543 2.89543 3 4 3H6V1H8ZM4 8H20V5H18H16H8H6H4V8ZM13 18C13 15.7909 14.7909 14 17 14C19.2091 14 21 15.7909 21 18C21 20.2091 19.2091 22 17 22C14.7909 22 13 20.2091 13 18ZM17 12C13.6863 12 11 14.6863 11 18C11 21.3137 13.6863 24 17 24C20.3137 24 23 21.3137 23 18C23 14.6863 20.3137 12 17 12ZM18 15V17H20V19H16V15H18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Gs=bt(ii);var Zs;(function(o){o.Success="Success",o.Warning="Warning",o.Error="Error"})(Zs||(Zs={}));const is=e.forwardRef((o,n)=>{const{disabled:s=!1,onChange:t,onBlur:r,onFocus:i,clearButton:a=!1,labelMode:l="Never",className:m="",id:u,readOnly:f=!1,value:p,defaultValue:h,width:E,placeholder:g="",variant:C,size:D=Mt.Medium,color:P,prefix:R,suffix:v,...O}=o,V=e.useRef(u||`default_${e.useId()}`).current,L=p!==void 0,[y,S]=e.useState(L?p:h||""),[T,N]=e.useState(!1),_=e.useRef(null),{locale:x,dir:M}=$e(),Z={clearButton:a,labelMode:l,disabled:s,readOnly:f,variant:C,size:D,color:P,value:p},ie=()=>pe(ut.INPUTGROUP,ut.WRAPPER,l!=="Never"?ut.FLOATINPUT:"",m,M==="rtl"?ut.RTL:"",s?ut.DISABLE:"",T?ut.TEXTBOX_FOCUS:"",y!==""?ut.VALIDINPUT:"",C&&C.toLowerCase()!=="standard"?C.toLowerCase()==="outlined"?"sf-outline":`sf-${C.toLowerCase()}`:"",D&&D.toLowerCase()!=="small"?`sf-${D.toLowerCase()}`:"",P?`sf-${P.toLowerCase()}`:"",R?"sf-has-prefix":"","sf-control"),pe=(...Q)=>Q.filter(Boolean).join(" "),Y=ie();e.useEffect(()=>{Ot("textbox")},[]),e.useEffect(()=>{L&&S(p||"")},[p,L]),e.useImperativeHandle(n,()=>({...Z,element:_.current}));const H=e.useCallback((Q,ne)=>{L||S(Q),t&&t({event:ne,value:Q})},[t,L]),k=e.useCallback(Q=>{const ne=Q.target.value;H(ne,Q)},[H]),U=e.useCallback(Q=>{N(!0),i&&i(Q)},[i]),oe=e.useCallback(()=>{L||(S(""),_.current&&(_.current.value="")),t&&t({value:"",event:void 0})},[L,t]),J=e.useCallback(Q=>{N(!1),r&&r(Q)},[r]),w=L?p:y;return c.jsxs("div",{className:Y,style:{width:E||"100%"},children:[R&&c.jsx("span",{className:"sf-input-icon sf-no-hover",children:R}),c.jsx(mr,{id:V,floatLabelType:l,ref:_,...O,readOnly:f,value:L?w:void 0,defaultValue:L?void 0:y||"",disabled:s,placeholder:l==="Never"?g:void 0,className:"sf-textbox sf-lib sf-ellipsis",onChange:k,"aria-label":l==="Never"?"textbox":void 0,onFocus:U,onBlur:J}),hs(l||"Never",T||w!=="",w,g,V),a&&pr(T?w:"",oe,a,"textbox",x),v&&c.jsx("span",{className:"sf-input-icon sf-no-hover",children:v})]})}),li="sf-multi-line-input",ai="sf-auto-width";var It;(function(o){o.None="None",o.Both="Both",o.Horizontal="Horizontal",o.Vertical="Vertical"})(It||(It={}));const ci={[It.None]:"sf-resize-none",[It.Both]:"sf-resize-xy",[It.Horizontal]:"sf-resize-x",[It.Vertical]:"sf-resize-y"},ui=e.forwardRef((o,n)=>{const{readOnly:s=!1,value:t,defaultValue:r,labelMode:i="Never",placeholder:a="",disabled:l=!1,width:m,resizeMode:u=It.Both,maxLength:f,cols:p=null,rows:h=null,clearButton:E=!1,autoResize:g=!1,className:C="",size:D=Mt.Medium,variant:P,onChange:R,onBlur:v,onFocus:O,...A}=o,V=t!==void 0,[L,y]=e.useState(r||""),S=V?t:L,T=`textArea_${e.useId()}`,[N,_]=e.useState(!1),x=e.useMemo(()=>A.id||T,[A.id]),M=e.useRef(null),Z=e.useRef(null),ie=e.useRef(null),pe=e.useRef(null),{locale:Y,dir:H}=$e(),k={clearButton:E,labelMode:i,disabled:l,readOnly:s,resizeMode:u};e.useEffect(()=>{Ot("textarea")},[]),e.useEffect(()=>{V&&y(t||"")},[V,t]);const U=()=>oe(ut.INPUTGROUP,ut.WRAPPER,i!=="Never"?ut.FLOATINPUT:"",li,C,H==="rtl"?ut.RTL:"",l?ut.DISABLE:"",N?ut.TEXTBOX_FOCUS:"",S!==""?ut.VALIDINPUT:"",P&&P.toLowerCase()!=="standard"?P.toLowerCase()==="outlined"?"sf-outline":`sf-${P.toLowerCase()}`:"",ai,D&&D.toLowerCase()!=="small"?`sf-${D.toLowerCase()}`:"","sf-control"),oe=(...I)=>I.filter(Boolean).join(" "),J=U();e.useImperativeHandle(n,()=>({...k,element:M.current}));const w=e.useCallback(I=>{I&&(I.style.height="auto",I.style.height=`${I.scrollHeight}px`)},[]),Q=e.useCallback(()=>{!g||!M.current||(Z.current!==null&&(cancelAnimationFrame(Z.current),Z.current=null),Z.current=requestAnimationFrame(()=>{w(M.current)}))},[g,w]),ne=I=>{const q=Array.isArray(I.contentBoxSize)?I.contentBoxSize[0]:I.contentBoxSize;if(q&&typeof q.inlineSize=="number")return q.inlineSize;const me=I.contentRect.width;return typeof me=="number"?me:null};e.useEffect(()=>()=>{Z.current!==null&&(cancelAnimationFrame(Z.current),Z.current=null)},[]),e.useEffect(()=>{if(!g||!M.current)return;let I=!1;const q=()=>{I||(I=!0,requestAnimationFrame(()=>{I=!1,M.current&&Q()}))};if("ResizeObserver"in window){const fe=K=>{const G=K[0];if(!G)return;const b=ne(G);b!==null&&pe.current===b||(pe.current=b,q())},B=new ResizeObserver(fe);return B.observe(M.current),ie.current=B,()=>{B.disconnect(),ie.current=null,pe.current=null}}const me=M.current.ownerDocument?M.current.ownerDocument.defaultView:null;if(!me)return;const ee=()=>{q()};return me.addEventListener("resize",ee),()=>{me.removeEventListener("resize",ee)}},[g,Q]),e.useLayoutEffect(()=>{!g||!M.current||Q()},[g,S,m,h,p]);const se=e.useCallback(I=>{const q=I.target.value;V||y(q),R&&R({event:I,value:q}),g&&Q()},[V,R,L,t,g,Q]),le=e.useCallback(I=>{_(!0),O&&O(I)},[O]),Re=e.useCallback(I=>{_(!1),v&&v(I)},[v]),Pe=e.useCallback(()=>{V||(y(""),M.current&&(M.current.value="")),R&&R({value:"",event:void 0}),g&&Q()},[R,V,Q]),Ue=I=>ci[`${I}`];return c.jsxs("div",{className:J,children:[c.jsx("textarea",{ref:M,id:x,value:V?t:void 0,defaultValue:V?void 0:r,onChange:se,onFocus:le,onBlur:Re,readOnly:s,placeholder:i==="Never"?a:void 0,disabled:l,maxLength:f,cols:p??void 0,rows:h??void 0,...A,style:{width:m?typeof m=="number"?`${m}px`:m:void 0,resize:u==="None"||g?"none":void 0,overflowY:g?"hidden":void 0},className:`sf-textarea sf-lib sf-input ${Ue(u)}`,"aria-labelledby":`label_${x}`}),hs(i,N||S!=="",S,a,x),E&&pr(S&&N?S.toString():"",Pe,E,"textarea",Y)]})}),Bt={EMAIL:/^(?!.*\.\.)[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,URL:/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(\/[^\s]*)?$/,DATE_ISO:/^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/,DIGITS:/^[0-9]*$/,PHONE:/^[+]?[0-9]{9,13}$/,CREDIT_CARD:/^\d{13,16}$/},wr=e.createContext(null),di=wr.Provider,Nr=e.forwardRef((o,n)=>{const{rules:s,onSubmit:t,onReset:r,children:i,onFormStateChange:a,initialValues:l={},validateOnChange:m=!1,className:u="",...f}=o,p=e.useRef(null),{locale:h,dir:E}=$e(),g=e.useRef({values:{...l},errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),C=e.useCallback(()=>{a&&(T.current=ne(),a(T.current))},[a]),D=e.useCallback((I,q)=>{g.current={...g.current,values:{...g.current.values,[I]:q},modified:{...g.current.modified,[I]:!0}}},[]),P=e.useCallback(I=>{g.current={...g.current,touched:{...g.current.touched,[I]:!0}}},[]),R=e.useCallback(I=>{g.current={...g.current,visited:{...g.current.visited,[I]:!0}}},[]),v=e.useCallback((I,q)=>{const me={...g.current.errors};q?me[I]=q:delete me[I],g.current={...g.current,errors:me}},[]),O=e.useCallback(I=>{g.current={...g.current,submitted:I}},[]),A=e.useCallback(I=>{g.current={values:I,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}},C()},[C]),V=e.useCallback(()=>{const I={};Object.keys(g.current.values).forEach(q=>{I[q]=!0}),g.current={...g.current,touched:I}},[]),L=e.useCallback(()=>{const I={};Object.keys(g.current.values).forEach(q=>{I[q]=!0}),g.current={...g.current,visited:I}},[]),y=e.useCallback(I=>{const q={...g.current.errors};Object.entries(I).forEach(([me,ee])=>{ee?q[me]=ee:delete q[me]}),g.current={...g.current,errors:q},C()},[C]),S=e.useRef(s),T=e.useRef(null),N=e.useRef(null),_={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date (ISO).",creditCard:"Please enter valid card number.",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",equalTo:"Please enter the same value again."},x=e.useRef({}),M=I=>{x.current[I]=!0};e.useEffect(()=>(N.current=hr("formValidator",_,h),()=>{N.current=null}),[h]),e.useEffect(()=>(C(),Z(),Ot("formValidator"),()=>{N.current=null,S.current={},x.current={},p.current&&(p.current=null),T.current=null}),[]),e.useEffect(()=>{S.current=s},[s]);const Z=()=>{if(Object.keys(l).length>0){const I={};for(const q in l)if(Object.prototype.hasOwnProperty.call(l,q)&&Object.prototype.hasOwnProperty.call(S.current,q)){const me=Y(q,l[q]);me?I[q]=me:I[q]=null}Object.keys(I).length>0&&y(I)}},ie=(I,q)=>{var ee;let me=(ee=N.current)==null?void 0:ee.getConstant(I);return Array.isArray(q)?q.forEach((fe,B)=>{const K=`{${B}}`;me.includes(K)&&(me=me.replace(K,String(fe)))}):me=me.replace("{0}",String(q)),me},pe=I=>{if(!Bt.CREDIT_CARD.test(I))return!1;const q=I.replace(/[\s-]/g,"");let me=0,ee=!1;for(let fe=q.length-1;fe>=0;fe--){let B=parseInt(q.charAt(fe),10);ee&&(B*=2,B>9&&(B-=9)),me+=B,ee=!ee}return me%10===0},Y=(I,q)=>{const me=S.current[I];if(!me||!x.current[I])return null;const ee=q==null||q.toString().trim()==="",fe=me.required!=null&&me.required[0]!==!1;if(ee&&!fe)return null;for(const B in me)if(Object.prototype.hasOwnProperty.call(me,B)){const K=me[B];if(!K)continue;let G=!0,b=null,z;if(B==="customValidator"&&typeof K=="function"){const te=K(q);if(te)return te;continue}if(Array.isArray(K)&&(b=K[0],z=K[1],B==="required"&&b===!1)||B!=="required"&&(q===""||q===null||q===void 0))continue;switch(B){case"required":G=!ee;break;case"email":G=Bt.EMAIL.test(q);break;case"url":G=Bt.URL.test(q);break;case"date":G=!isNaN(Date.parse(q));break;case"dateIso":G=Bt.DATE_ISO.test(q);break;case"number":G=!isNaN(Number(q))&&String(q).indexOf(" ")===-1;break;case"digits":G=Bt.DIGITS.test(q);break;case"creditCard":G=pe(q);break;case"minLength":G=String(q).length>=Number(b);break;case"maxLength":G=String(q).length<=Number(b);break;case"rangeLength":Array.isArray(b)&&(G=String(q).length>=b[0]&&String(q).length<=b[1]);break;case"min":G=Number(q)>=Number(b);break;case"max":G=Number(q)<=Number(b);break;case"range":Array.isArray(b)&&(G=Number(q)>=b[0]&&Number(q)<=b[1]);break;case"regex":b instanceof RegExp?G=b.test(q):typeof b=="string"&&(G=new RegExp(b).test(q));break;case"tel":G=Bt.PHONE.test(q);break;case"equalTo":typeof b=="string"&&(G=q===g.current.values[b]);break}if(!G)return z||ie(B,b)}return null},H=()=>{const I={},q=Object.keys(S.current);for(const me of q){const ee=Y(me,g.current.values[me]);g.current.values[me]||D(me,g.current.values[me]),ee&&(I[me]=ee)}return I},k=()=>{const I=H();for(const me in I)Object.prototype.hasOwnProperty.call(I,me)&&v(me,I[me]);const q=Object.keys(S.current);for(const me of q)I[me]||v(me,null);return Object.keys(I).length===0&&(g.current={...g.current,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),C(),Object.keys(I).length===0},U=I=>{I==null||I.preventDefault();const q=k();V(),L(),O(!0),C(),q&&(t==null||t(g.current.values))},oe=(I,{value:q})=>{if(D(I,q),m){const me=Y(I,q);v(I,me)}C()},J=I=>{P(I);const q=Y(I,g.current.values[I]);v(I,q),C()},w=I=>{A({...l}),r==null||r(I)},Q=()=>{w()},ne=()=>{const I=g.current;return{values:I.values,errors:I.errors,submitted:I.submitted,touched:I.touched,visited:I.visited,modified:I.modified,valid:Object.keys(S.current).reduce((q,me)=>(q[me]=!I.errors[me],q),{}),allowSubmit:Object.keys(I.errors).length===0,onChange:oe,onBlur:J,onFocus:Pe,onFormReset:w,onSubmit:U,fieldNames:Object.keys(x.current).reduce((q,me)=>(q[me]=me,q),{})}},se=I=>{const q=Y(I,g.current.values[I]);return v(I,q),C(),!q},le=e.useMemo(()=>({rules:s,initialValues:l,validateOnChange:m}),[s,l,m]);e.useImperativeHandle(n,()=>({...le,validate:k,reset:Q,validateField:se,element:p.current}),[le]);const Re=e.useMemo(()=>["sf-control sf-form-validator",E==="rtl"?"sf-rtl":"",u].filter(Boolean).join(" "),[E,u]),Pe=I=>{R(I),C()},Ue={registerField:M};return c.jsx(di,{value:Ue,children:c.jsx("form",{ref:p,className:Re,onSubmit:U,onReset:w,noValidate:!0,...f,children:i})})});Nr.displayName="Form";const wt=o=>{const{name:n,children:s}=o;if(!n)return null;const t=e.useContext(wr);return t?(t.registerField&&t.registerField(n),c.jsx(c.Fragment,{children:s})):null};wt.displayName="FormField";const fi=1500,mi=500,Js=0,Qs=8,pi=2,St=2,hi="sf-control sf-tooltip",Ei="sf-bigger",gi="sf-tooltip-close",Qn="sf-tooltip-wrap",Ti="sf-tooltip-content sf-content",er="sf-tooltip-arrow",Ci="sf-tooltip-arrow-outer",Di="sf-tooltip-arrow-inner",Ln="bottom",es="top",ts="left",xn="right",tr="sf-popup",nr="sf-lib",vi="M10.5858 12.0001L2.58575 4.00003L3.99997 2.58582L12 10.5858L20 2.58582L21.4142 4.00003L13.4142 12.0001L21.4142 20L20 21.4142L12 13.4143L4.00003 21.4142L2.58581 20L10.5858 12.0001Z",yi="M20.7929 7H3.20712C2.76167 7 2.53858 7.53857 2.85356 7.85355L11.6465 16.6464C11.8417 16.8417 12.1583 16.8417 12.3536 16.6464L21.1465 7.85355C21.4614 7.53857 21.2384 7 20.7929 7Z",bi="M20.7929 17H3.20712C2.76167 17 2.53858 16.4615 2.85356 16.1465L11.6465 7.3536C11.8417 7.15834 12.1583 7.15834 12.3536 7.3536L21.1465 16.1465C21.4614 16.4615 21.2384 17 20.7929 17Z",Ri="M7 20.7928L7 3.20706C7 2.76161 7.53857 2.53852 7.85355 2.8535L16.6464 11.6464C16.8417 11.8417 16.8417 12.1582 16.6464 12.3535L7.85355 21.1464C7.53857 21.4614 7 21.2383 7 20.7928Z",Si="M17 3.20718L17 20.793C17 21.2384 16.4614 21.4615 16.1464 21.1465L7.35354 12.3536C7.15828 12.1584 7.15828 11.8418 7.35354 11.6465L16.1464 2.85363C16.4614 2.53864 17 2.76173 17 3.20718Z",Ar=e.forwardRef((o,n)=>{const{width:s="auto",height:t="auto",position:r="TopCenter",offsetX:i=0,offsetY:a=0,arrow:l=!0,windowCollision:m=!1,arrowPosition:u="Auto",opensOn:f="Auto",followCursor:p=!1,sticky:h=!1,animation:E={open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:g=0,closeDelay:C=0,children:D,target:P,content:R,container:v,className:O,open:A,onClose:V,onOpen:L,title:y,style:S,onFilterTarget:T,...N}=o,[_,x]=e.useState(!0),[M,Z]=e.useState(!1),[ie,pe]=e.useState(void 0),[Y,H]=e.useState(null),[k,U]=e.useState(!1),[oe,J]=e.useState(Ln),[w,Q]=e.useState({top:0,left:0}),[ne,se]=e.useState({}),[le,Re]=e.useState({top:"",left:""}),[Pe,Ue]=e.useState({style:S}),I=e.useRef(null),q=e.useRef({show:null,hide:null,autoClose:null}),me=e.useRef({x:"Center",y:"Top"}),ee=e.useRef(null),fe=e.useRef({event:null,target:null}),B=e.useRef(!0),K=e.useRef(null),G=e.useRef(null),b=e.useRef(null),z=e.useRef(null),te=e.useRef({event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null}),ue=e.useRef(typeof document<"u"?document.body:null),Ce=e.useRef(A),j=e.useRef(!1);ye.isDevice&&(ee.current=Vt(G));const ae={width:"auto",height:"auto",position:"TopCenter",offsetX:0,offsetY:0,arrow:!0,windowCollision:!1,arrowPosition:"Auto",opensOn:"Auto",followCursor:!1,sticky:!1,animation:{open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:0,closeDelay:0,target:P,content:R,container:v,open:A};e.useEffect(()=>{ce(),ve(r),I.current&&I.current.element&&K.current&&Se(K.current)},[r]),e.useEffect(()=>{I.current&&I.current.element&&K.current&&Se(K.current)},[u]),e.useEffect(()=>{var $,re;I.current&&I.current.element&&K.current&&(gn(K.current),qt(K.current,($=te.current)==null?void 0:$.event,(re=te.current)==null?void 0:re.showAnimation))},[_,K.current]),e.useEffect(()=>(En(),Je(f),()=>{xt(f)}),[f,P]),e.useEffect(()=>{if(!(typeof document>"u"))return document.addEventListener("wheel",Fe),document.addEventListener("scroll",Fe),document.addEventListener("touchend",tn),document.addEventListener("keydown",Rn),window.addEventListener("resize",Ee),()=>{typeof document>"u"||(document.removeEventListener("wheel",Fe),document.removeEventListener("scroll",Fe),document.removeEventListener("touchend",tn),document.removeEventListener("keydown",Rn),window.removeEventListener("resize",Ee))}},[ae]),e.useEffect(()=>{var $,re,Te,he,De,Le;!A&&Ce.current===A||(Ce.current=A,A?($=te.current)!=null&&$.showTarget?(Xt((re=te.current)==null?void 0:re.showTarget,te.current.event,te.current.showAnimation),te.current={...te.current,showTarget:null}):gt(P!=null&&P.current?P==null?void 0:P.current:G.current,E.open):(Te=te.current)!=null&&Te.hideAnimation?(lt(),Qt((he=te.current)==null?void 0:he.hideAnimation,(De=te.current)==null?void 0:De.hideTarget,(Le=te.current)==null?void 0:Le.hideEvent),te.current={...te.current,hideEvent:null,hideAnimation:null,hideTarget:null}):Dt(E.close))},[A]),e.useLayoutEffect(()=>(Ot("tooltip"),Ne(),()=>{clearTimeout(q.current.show),clearTimeout(q.current.hide),clearTimeout(q.current.autoClose),q.current={show:null,hide:null,autoClose:null},I.current=null,ee.current=null,te.current={event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null},fe.current={event:null,target:null},p&&K.current&&(K.current.removeEventListener("mousemove",at),K.current.removeEventListener("touchstart",at),K.current.removeEventListener("mouseenter",at)),K.current=null,G.current=null,z.current=null,ue.current=null,b.current=null}),[]),e.useImperativeHandle(n,()=>({...ae,animation:E,openTooltip:($,re)=>{if(We(re)&&(re=E==null?void 0:E.open),We($)&&($=G.current),$){if($.style.display==="none")return;gt($,re)}},closeTooltip:$=>{$||($=E==null?void 0:E.close),Dt($)},refresh:()=>{var $;I.current&&I.current.element&&Se(K.current?K.current:G.current),!We(o.target)&&!We(($=o.target)==null?void 0:$.current)&&(xt(f),Je(f))},element:G.current}));const Ne=e.useCallback(()=>{ce()},[ae]),ce=()=>{if(!r)return;let $=null,re=null;r.indexOf("Top")===0||r.indexOf("Bottom")===0?[re,$]=r.split(/(?=[A-Z])/):[$,re]=r.split(/(?=[A-Z])/),me.current.x=$,me.current.y=re},ve=e.useCallback($=>{let re;if(!We($))return $.indexOf("Right")===0?re=ts:$.indexOf("Bottom")===0?re=es:$.indexOf("Left")===0?re=xn:re=Ln,J(re),re},[]),W=$=>{var Te,he;if(p&&((Te=te.current)!=null&&Te.event)){at((he=te.current)==null?void 0:he.event);return}const re=de($);Q(re)},X=$=>{var he,De;if(!$)return{x:1,y:1};const re={x:1,y:1},Te=$.closest('[style*="transform: scale"]');if(Te&&Te!==((he=I.current)==null?void 0:he.element)&&Te.contains((De=I.current)==null?void 0:De.element)){const Ie=window.getComputedStyle(Te).getPropertyValue("transform");if(Ie!=="none"){const Be=Ie.match(/scale\(([\d., ]+)\)/);if(Be){const Oe=Be[1].split(",").map(parseFloat);re.x=Oe[0],re.y=Oe.length>1?Oe[1]:Oe[0]}else{const Oe=Ie.match(/matrix\(([^)]+)\)/);if(Oe){const Ye=Oe[1].split(",").map(parseFloat);re.x=Ye[0],re.y=Ye[3]}}}}return re},de=$=>{var Ye,qe,tt,ct,yt;I.current&&I.current.element&&(I.current.element.style.visibility="hidden",I.current.element.style.display="block");const re=(Ye=G.current)==null?void 0:Ye.closest('[style*="zoom"]');re&&I.current&&I.current.element&&!re.contains((qe=I.current)==null?void 0:qe.element)&&(I.current.element.style.zoom=getComputedStyle(re).zoom);const Te=js($,(tt=me.current.x)==null?void 0:tt.toLowerCase(),(ct=me.current.y)==null?void 0:ct.toLowerCase(),B.current||(yt=ue.current)==null?void 0:yt.getBoundingClientRect()),he=X($),De=we(r,he.x,he.y),Le=Cn(Te,De),Ie=Le[0],Be=Le[1],Oe=Dn($,Ie,Be);return Oe.left=Oe.left/he.x,Oe.top=Oe.top/he.y,!B.current&&ue.current&&(Oe.left-=window.scrollX*2,Oe.top-=window.scrollY*2),I.current&&I.current.element&&(I.current.element.style.display="",p&&(I.current.element.style.visibility="visible")),Oe},Ee=()=>{Se(K.current)},Se=$=>{if(I.current&&I.current.element&&$){const re=de($);Q(re),I.current.element.style.visibility="visible"}},ge=()=>{p||Se(K.current)},Ae=()=>{var re;Ft();const $=e.createRef();$.current=(re=I.current)==null?void 0:re.element,Ut.stop($.current),j.current=!1,x(!0)},we=($,re,Te)=>{var tt,ct,yt,pt,Ge,Rt,rn,Ls,xs,Is;const he={top:0,left:0};let De,Le,Ie,Be,Oe,Ye,qe;if(re!==1||Te!==1){const ks=(ct=(tt=I.current)==null?void 0:tt.element)==null?void 0:ct.getBoundingClientRect();let on;Ie=Math.round(ks.width),Be=Math.round(ks.height),b.current&&(on=b.current.getBoundingClientRect()),De=on?Math.round(on.width):0,Le=on?Math.round(on.height):0,Oe=l?Js:Qs,Ye=Le/2+St+(Be-((yt=I.current)==null?void 0:yt.element).clientHeight*Te),qe=De/2+St+(Ie-((pt=I.current)==null?void 0:pt.element).clientWidth*re)}else Ie=((Ge=I.current)==null?void 0:Ge.element).offsetWidth,Be=((Rt=I.current)==null?void 0:Rt.element).offsetHeight,De=b.current?b.current.offsetWidth:0,Le=b.current?b.current.offsetHeight:0,Oe=l?Js:Qs,Ye=Le/2+St+(((rn=I.current)==null?void 0:rn.element).offsetHeight-((Ls=I.current)==null?void 0:Ls.element).clientHeight),qe=De/2+St+(((xs=I.current)==null?void 0:xs.element).offsetWidth-((Is=I.current)==null?void 0:Is.element).clientWidth);switch(p&&(Oe+=pi),$){case"RightTop":he.left+=De+Oe,he.top-=Be-Ye;break;case"RightCenter":he.left+=De+Oe,he.top-=Be/2;break;case"RightBottom":he.left+=De+Oe,he.top-=Ye;break;case"BottomRight":he.top+=Le+Oe,he.left-=qe;break;case"BottomCenter":he.top+=Le+Oe,he.left-=Ie/2;break;case"BottomLeft":he.top+=Le+Oe,he.left-=Ie-qe;break;case"LeftBottom":he.left-=De+Ie+Oe,he.top-=Ye;break;case"LeftCenter":he.left-=De+Ie+Oe,he.top-=Be/2;break;case"LeftTop":he.left-=De+Ie+Oe,he.top-=Be-Ye;break;case"TopLeft":he.top-=Be+Le+Oe,he.left-=Ie-qe;break;case"TopRight":he.top-=Be+Le+Oe,he.left-=qe;break;default:he.top-=Be+Le+Oe,he.left-=Ie/2;break}return he.left+=i,he.top+=a,he},_e=($,re,Te,he)=>{var tt,ct,yt,pt;if(l===!1||b.current===null)return;const De=ve(re);let Le,Ie;const Be=((tt=I.current)==null?void 0:tt.element).clientWidth,Oe=((ct=I.current)==null?void 0:ct.element).clientHeight,Ye=b.current.offsetWidth,qe=b.current.offsetHeight;if(De===Ln||De===es){if(De===Ln?(Ie="99.9%",Re(Ge=>({...Ge,top:`-${qe-2}px`}))):(Ie=-(qe-1)+"px",Re(Ge=>({...Ge,top:`-${qe-6}px`}))),$){const Ge=Te!=="Center"||Be>$.offsetWidth||p;Ge&&Te==="Left"||!Ge&&u==="End"?Le=Be-Ye-St+"px":Ge&&Te==="Right"||!Ge&&u==="Start"?Le=St+"px":Ge&&(u==="End"||u==="Start")?Le=u==="End"?$.offsetWidth+(((yt=I.current)==null?void 0:yt.element).offsetWidth-$.offsetWidth)/2-Ye/2-St+"px":(((pt=I.current)==null?void 0:pt.element).offsetWidth-$.offsetWidth)/2-Ye/2+St+"px":Le=Be/2-Ye/2+"px"}}else{De===xn?(Le="99.9%",Re(Rt=>({...Rt,left:`-${Ye-2}px`}))):(Le=-(Ye-1)+"px",Re(Rt=>({...Rt,left:`${-Ye+(Ye-2)}px`})));const Ge=he!=="Center"||Oe>$.offsetHeight||p;Ge&&he==="Top"||!Ge&&u==="End"?Ie=Oe-qe-St+"px":Ge&&he==="Bottom"||!Ge&&u==="Start"?Ie=St+"px":Ie=Oe/2-qe/2+"px"}b.current.style.top=Ie,b.current.style.left=Le},be=()=>{var re;if(K.current&&!We(K.current.getAttribute("title"))&&(K.current.setAttribute("data-content",K.current.getAttribute("title")),K.current.removeAttribute("title")),e.isValidElement(R))return R;let $="";return typeof R=="function"?$=R():(re=K==null?void 0:K.current)!=null&&re.getAttribute("data-content")&&($=K.current.getAttribute("data-content")),$},Me=($,re)=>{const Te=($.getAttribute("aria-describedby")||"").split(/\s+/);Te.indexOf(re)<0&&Te.push(re),To($,{"aria-describedby":Te.join(" ").trim(),"data-tooltip-id":re})},He=$=>{const re=$.getAttribute("data-tooltip-id"),Te=($.getAttribute("aria-describedby")||"").split(/\s+/),he=Te.indexOf(re);he!==-1&&Te.splice(he,1),$.removeAttribute("data-tooltip-id");const De=Te.join(" ").trim();De?$.setAttribute("aria-describedby",De):$.removeAttribute("aria-describedby")},ke=e.useCallback($=>{$&&(clearTimeout(q.current.autoClose),rt($.originalEvent))},[]),et=()=>{if(h)return;const $=()=>{sn()};q.current.autoClose=setTimeout($,fi)},it=$=>{var he;let re;if((he=o.target)!=null&&he.current?re=o.target.current.contains($.target)?o.target.current:void 0:re=T?$.target:G.current,We(re))return;const Te=$;!I.current||I.current&&re!==K.current?Te.type==="mousedown"&&Te.button===2||rt($):h||Dt(E.close,$,re)},rt=$=>{var Te,he,De,Le;let re;if(T){if(!(T==null?void 0:T($.target)))return;re=$.target}else(Te=o.target)!=null&&Te.current?re=o.target.current.contains($.target)?o.target.current:void 0:re=G.current;if(!(We(re)||I.current&&re===K.current&&!p)){if(I.current&&((he=I.current.element)!=null&&he.getAttribute("sf-animation-id"))){const Ie=C+((De=E==null?void 0:E.close)!=null&&De.delay?E.close.delay:0)+((Le=E==null?void 0:E.close)!=null&&Le.duration?E.close.duration:0);setTimeout(()=>{Wt(re),gt(re,E.open,$)},Ie);return}Wt(re),gt(re,E.open,$)}},mt=$=>{fe.current.event=$},lt=()=>{fe.current.target&&(fe.current.target.removeEventListener("mousemove",mt),fe.current.target.removeEventListener("touchstart",mt))},gt=($,re,Te)=>{clearTimeout(q.current.show),clearTimeout(q.current.hide),g&&p&&(lt(),fe.current.target=$,fe.current.target.addEventListener("mousemove",mt),fe.current.target.addEventListener("touchstart",mt)),te.current={...te.current,event:Te,showAnimation:re,showTarget:$},L==null||L(Te),(We(A)||A)&&Xt($,Te,re)},Xt=($,re,Te)=>{var he,De,Le;if(K.current=$,x(!1),We(I.current)){const Ie=(he=G.current)!=null&&he.getAttribute("id")?jn((De=G.current)==null?void 0:De.getAttribute("id")):jn("tooltip");Ue(Be=>({...Be,id:Ie+"_content"}))}else if($){_e($,r,me.current.x,me.current.y),Me($,Pe==null?void 0:Pe.id);const Ie=e.createRef();Ie.current=(Le=I.current)==null?void 0:Le.element,Ut.stop(Ie.current),Se($),qt($,re,Te)}},En=()=>{(v==null?void 0:v.current)instanceof HTMLElement&&(B.current=!1,ue.current=v.current),ue.current||(ue.current=typeof document<"u"?document.body:null)},gn=$=>{var re;if($){En(),Me($,Pe==null?void 0:Pe.id),l&&ve(r),W($),_e($,r,me.current.x,me.current.y);const Te=e.createRef();Te.current=(re=I.current)==null?void 0:re.element,Ut.stop(Te.current),Se($)}},qt=($,re,Te)=>{$&&Tn($,Te,re)},Tn=($,re,Te)=>{const he={name:re.effect==="None"&&Hs==="Enable"?"FadeIn":E.open.effect,duration:re.duration,delay:re.delay,timingFunction:"ease-out"};if(g>0){const De=()=>{var Le;p&&($.addEventListener("mousemove",at),$.addEventListener("touchstart",at),$.addEventListener("mouseenter",at)),(Le=I.current)!=null&&Le.element&&(H($),pe(Ie=>({show:he,hide:Ie==null?void 0:Ie.hide})),Z(!0),fe.current.event&&p&&at(fe.current.event))};q.current.show=setTimeout(De,g)}else I.current&&(H($),pe(De=>({show:he,hide:De==null?void 0:De.hide})),Z(!0));Te&&nn(Te,$)},Gt=($,re)=>{var Le;const Te={left:$,top:re,position:r,horizontal:me.current.x,vertical:me.current.y},he=Pt(),De=Co((Le=I.current)==null?void 0:Le.element,he?he.current:null,h&&r.indexOf("Right")>=0?z.current.offsetWidth+$:$,re);return De.length>0&&(Te.horizontal=De.indexOf("left")>=0?"Right":De.indexOf("right")>=0?"Left":me.current.x,Te.vertical=De.indexOf("top")>=0?"Bottom":De.indexOf("bottom")>=0?"Top":me.current.y),Te},Cn=($,re)=>[B.current?$.left+re.left:$.left-ue.current.getBoundingClientRect().left+re.left+window.pageXOffset+ue.current.scrollLeft,B.current?$.top+re.top:$.top-ue.current.getBoundingClientRect().top+re.top+window.pageYOffset+ue.current.scrollTop],Dn=($,re,Te)=>{var qe,tt,ct,yt;const he=Gt(re,Te);let De=he.position;me.current.y!==he.vertical&&(De=(r==null?void 0:r.indexOf("Bottom"))===0||(r==null?void 0:r.indexOf("Top"))===0?he.vertical+me.current.x:me.current.x+he.vertical),me.current.x!==he.horizontal&&(De.indexOf("Left")===0&&(he.vertical=De==="LeftTop"||De==="LeftCenter"?"Top":"Bottom",De=he.vertical+"Left"),De.indexOf("Right")===0&&(he.vertical=De==="RightTop"||De==="RightCenter"?"Top":"Bottom",De=he.vertical+"Right"),he.horizontal=me.current.x);const Le=he.vertical,Ie=he.horizontal;if(he.position!==De){const pt=js($,Ie.toLowerCase(),Le.toLowerCase(),B.current||(qe=ue.current)==null?void 0:qe.getBoundingClientRect());_e($,De,Ie,Le);const Ge=X($),Rt=we(De,Ge.x,Ge.y);B.current||(Rt.top-=vn("TopBottom",De,a),Rt.left-=vn("RightLeft",De,i)),he.position=De;const rn=Cn(pt,Rt);he.left=rn[0],he.top=rn[1]}else _e($,De,Ie,Le);const Be={left:he.left,top:he.top},Oe=Pt(),Ye=B.current?Do((tt=I.current)==null?void 0:tt.element,Oe?Oe.current:null,{X:!0,Y:m},Be):Be;if(l&&b.current!=null&&(De.indexOf("Bottom")===0||De.indexOf("Top")===0)){let pt=parseInt(b.current.style.left,10)-(Ye.left-he.left);pt<0?pt=0:pt+b.current.offsetWidth>((ct=I.current)==null?void 0:ct.element).clientWidth&&(pt=((yt=I.current)==null?void 0:yt.element).clientWidth-b.current.offsetWidth),b.current.style.left=pt.toString()+"px"}return Be.left=Ye.left,Be.top=Ye.top,Be},vn=($,re,Te)=>$.indexOf(r.split(/(?=[A-Z])/)[0])!==-1&&$.indexOf(re.split(/(?=[A-Z])/)[0])!==-1?2*Te:0,Pt=()=>!m&&(P!=null&&P.current)?G:null,Dt=($,re,Te)=>{if(C>0){clearTimeout(q.current.hide),clearTimeout(q.current.show);const he=()=>{C&&I.current&&I.current.element&&k||Zt($,re,Te)};q.current.hide=setTimeout(he,C)}else Zt($,re,Te)},Zt=($,re,Te)=>{var De,Le,Ie;let he;if(re?he=(De=o.target)!=null&&De.current||T?Te||re.target:G.current:he=K.current,te.current={...te.current,hideEvent:re,hideAnimation:$,hideTarget:he},I.current&&((Le=I.current.element)!=null&&Le.getAttribute("sf-animate"))){const Be=e.createRef();Be.current=(Ie=I.current)==null?void 0:Ie.element,Ut.stop(Be.current,{end:()=>{Jt($,he,re)}})}else Jt($,he,re)},Jt=($,re,Te)=>{V==null||V(Te),We(A)?(lt(),Qt($,re,Te)):A&&!V?x(!1):A||(lt(),Qt($,re,Te))},Qt=($,re,Te)=>{re&&Te&&Wt(re);const he={name:$.effect==="None"&&Hs==="Enable"?"FadeOut":E.close.effect,duration:$.duration,delay:$.delay,timingFunction:"ease-in"};I.current&&(pe(De=>({hide:he,show:De==null?void 0:De.show})),Z(!1))},Wt=$=>{Sn($),We($.getAttribute("data-content"))||($.setAttribute("title",$.getAttribute("data-content")),$.removeAttribute("data-content")),He($)},Ft=()=>{const $=K.current;$&&Wt($),_&&(Re({top:"",left:""}),I.current=null)},yn=()=>{I.current&&I.current.element&&U(!0)},bn=$=>{U(!1),Dt(E.close,$,K.current)},vt=$=>{const re=$.relatedTarget;if(re){const Te=Tt(re,`.${Qn}.${nr}.${tr}`);Te?(p&&at($),Te.addEventListener("mouseleave",en)):(Dt(E.close,$,K.current),C===0&&E.close.effect==="None"&&Ft())}else Dt(E.close,$,K.current),Ft()},en=$=>{var re,Te;(Te=(re=I.current)==null?void 0:re.element)==null||Te.removeEventListener("mouseleave",en),(!$.relatedTarget||Tt($.relatedTarget,".sf-tooltip")!==G.current)&&(Dt(E.close,$,K.current),Ft())},at=$=>{var qe;let re=0,Te=0;if($.type.indexOf("touch")>-1?($.preventDefault(),re=$.touches[0].pageX,Te=$.touches[0].pageY):(re=$.pageX,Te=$.pageY),We(I.current))return;I.current&&(I.current.element.style.display="block");const he=e.createRef();he.current=(qe=I.current)==null?void 0:qe.element,Ut.stop(he.current),_e($.target,r,me.current.x,me.current.y);const De=X($.target),Le=we(r,De.x,De.y),Ie=re+Le.left+i,Be=Te+Le.top+a,Oe=Gt(Ie,Be);if(me.current.x!==Oe.horizontal||me.current.y!==Oe.vertical){const tt=(r==null?void 0:r.indexOf("Bottom"))===0||(r==null?void 0:r.indexOf("Top"))===0?Oe.vertical+Oe.horizontal:Oe.horizontal+Oe.vertical;Oe.position=tt,_e($.target,Oe.position,Oe.horizontal,Oe.vertical);const ct=we(Oe.position,De.x,De.y);Oe.left=re+ct.left-i,Oe.top=Te+ct.top-a}const Ye={position:"absolute",left:Oe.left+"px",top:Oe.top+"px",zIndex:1e3,width:Nn(s),height:Nn(t),display:"block"};Q(Oe),Ue(tt=>({...tt,style:{...(tt==null?void 0:tt.style)||{},...Ye}}))},Rn=$=>{I.current&&I.current.element&&$.key==="Escape"&&sn()},tn=$=>{I.current&&I.current.element&&Tt($.target,".sf-tooltip")===null&&!h&&!f.includes("Focus")&&sn()},Fe=$=>{I.current&&I.current.element&&!h&&!p&&!j.current&&(Tt($.target,`.${Qn}.${nr}.${tr}`)||(Z(re=>(re||x(!0),re)),j.current=!0,sn()))},Je=$=>{var he,De;const re=Lt($),Te={};for(const Le of re){if(Le==="Custom")return;Le==="Focus"&&(!We(o.target)&&!We((he=o.target)==null?void 0:he.current)?(De=o.target)==null||De.current.addEventListener("focus",rt):Te.onFocus=rt),Le==="Click"&&(Te.onMouseDown=it),Le==="Hover"&&(ye.isDevice?(ee.current&&(ee.current.tapHoldThreshold=mi,ee.current.tapHold=ke),Te.onTouchEnd=et):Te.onMouseOver=rt)}se(Te)},Lt=$=>$?($==="Auto"&&($=ye.isDevice?"Hover":"Hover Focus"),$.split(" ")):[],nn=($,re)=>{var Te;I.current&&I.current.element&&(h||($.type==="focus"&&(!We(o.target)&&!We((Te=o.target)==null?void 0:Te.current)||T?re.addEventListener("blur",vt):se(he=>({...he,onBlur:vt}))),$.type==="mouseover"&&re.addEventListener("mouseleave",vt),C&&(I.current.element.addEventListener("mouseenter",yn),I.current.element.addEventListener("mouseleave",bn))),p&&g===0&&(re.addEventListener("mousemove",at),re.addEventListener("mouseenter",at)))},xt=$=>{var Te,he;const re=Lt($);for(const De of re){if(De==="Custom")return;De==="Focus"&&!We(o.target)&&!We((Te=o.target)==null?void 0:Te.current)&&G.current&&((he=o.target)==null||he.current.removeEventListener("focus",rt)),De==="Hover"&&ee.current&&ee.current.destroy&&ee.current.destroy()}},Sn=$=>{if(!h){const re=Lt(f);for(const Te of re)Te==="Focus"&&($.removeEventListener("blur",vt),se(he=>{const De={...he};return delete De.onBlur,De})),Te==="Hover"&&!ye.isDevice&&$.removeEventListener("mouseleave",vt);C&&($.removeEventListener("mouseenter",yn),$.removeEventListener("mouseleave",bn))}p&&($.removeEventListener("mousemove",at),$.removeEventListener("mouseenter",vt))},sn=()=>{Dt(E.close)},fo=e.useMemo(()=>{switch(oe){case es:return bi;case xn:return Ri;case ts:return Si;default:return yi}},[oe]),mo=()=>c.jsxs(At,{ref:I,open:M,role:"tooltip","aria-hidden":!1,animation:ie,relativeElement:Y,targetRef:K,position:{X:w.left,Y:w.top},viewPortElementRef:ue.current?ue:void 0,width:Nn(s),height:Nn(t),onOpen:ge,onClose:Ae,className:[Qn,O,ye.isDevice?Ei:""].filter(Boolean).join(" "),...Pe,...N,children:[c.jsx("div",{className:Ti,children:be()}),l&&c.jsxs("div",{ref:b,className:`${er} ${er}-${oe} sf-pos-absolute sf-overflow-hidden ${oe===ts||oe===xn?"sf-tooltip-arrow-x":"sf-tooltip-arrow-y"}`,children:[c.jsx("div",{className:`${Ci}-${oe} sf-pos-absolute`}),c.jsx("div",{className:`${Di}-${oe} sf-pos-absolute`,style:le,children:c.jsx($s,{d:fo})})]}),h&&c.jsx("div",{ref:z,className:`${gi}`,role:"button","aria-label":"Close Tooltip",onClick:()=>{sn()},children:c.jsx($s,{d:vi})})]});return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:G,className:[hi,O].filter(Boolean).join(" "),title:y,...ne,children:D}),!_&&ue.current&&jt.createPortal(mo(),ue.current)]})});e.memo(Ar);const cn=20,mn=e.forwardRef((o,n)=>{const{open:s,header:t,footer:r,modal:i=!0,onClose:a,onDragStart:l,onDrag:m,onDragStop:u,onResizeStart:f,onResize:p,onResizeStop:h,closeIcon:E=!0,initialFocusRef:g,draggable:C=!1,resizable:D=!1,resizeHandles:P=["SouthEast"],position:R="Center",animation:v={effect:"Fade",duration:400,delay:0},target:O=typeof document<"u"?document.body:void 0,fullScreen:A=!1,className:V="",children:L,style:y,id:S=`dialog_${e.useId()}`,...T}=o,N=e.useRef(null),_=e.useRef(null),x=e.useRef(null),[M,Z]=e.useState({internalOpen:s,dynamicMaxHeight:""}),{internalOpen:ie,dynamicMaxHeight:pe}=M,{locale:Y}=$e(),H=e.useMemo(()=>({handle:".sf-dlg-header-content",clone:!1,dragArea:O&&O instanceof HTMLElement?O:typeof document<"u"?document.body:void 0,abort:".sf-dlg-closeicon-btn",isDragScroll:!0,dragStart:ce=>{if(!C){ce.cancel=!0;return}l&&l(ce)},drag:ce=>{C&&m&&m(ce.event)},dragStop:ce=>{C&&u&&u(ce.event)}}),[C,O,l,m,u]),k=e.useRef(null),U=e.useRef(Yt({current:C?k.current:null},H)),oe=e.useMemo(()=>{const ce=(X,de)=>X===void 0?de:X,ve=A&&typeof window<"u"?window.innerWidth:typeof window<"u"?window.innerWidth-cn*2:800,W=A&&typeof window<"u"?window.innerHeight:typeof window<"u"?window.innerHeight-cn*2:600;return{minWidth:ce(y==null?void 0:y.minWidth,100),minHeight:ce(y==null?void 0:y.minHeight,100),maxWidth:ce(y==null?void 0:y.maxWidth,ve),maxHeight:ce(y==null?void 0:y.maxHeight,W)}},[y==null?void 0:y.minWidth,y==null?void 0:y.minHeight,y==null?void 0:y.maxWidth,y==null?void 0:y.maxHeight,A]),J=e.useMemo(()=>({enabled:D&&!A,handles:P,boundary:O&&O instanceof HTMLElement?O:void 0,minWidth:oe.minWidth,minHeight:oe.minHeight,maxWidth:oe.maxWidth,maxHeight:oe.maxHeight,onResizeStart:f,onResize:p,onResizeStop:h}),[D,P,O,oe]),{renderResizeHandles:w}=vo(k,J);e.useEffect(()=>(Ot("dialog"),()=>{var ce,ve,W;U.current&&((ce=U.current.element)!=null&&ce.current)&&((W=(ve=U.current).destroy)==null||W.call(ve)),k.current=null,U.current=null,N.current=null,_.current=null,x.current=null,typeof window<"u"&&window.removeEventListener("resize",se)}),[]);const Q=e.useCallback(()=>{let ce=[];if(k.current){const ve=['a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','details:not([tabindex="-1"])','[contenteditable]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(","),W=k.current.querySelectorAll(ve);ce=Array.from(W).filter(X=>!X.hasAttribute("disabled"))}return ce},[k,L,s]);e.useEffect(()=>{if(s){if(typeof document>"u"||typeof window>"u")return;if(x.current=document.activeElement,i){const ce=O&&O instanceof HTMLElement?O:document.body,ve={overflow:ce.style.overflow,paddingRight:ce.style.paddingRight},W=window.innerWidth-document.documentElement.clientWidth;return ce.style.overflow="hidden",ce.style.paddingRight=`${W}px`,()=>{ce.style.overflow=ve.overflow,ce.style.paddingRight=ve.paddingRight,x.current&&s&&x.current.focus()}}}else x.current&&(x.current.focus(),x.current=null);return()=>{x.current&&s&&x.current.focus()}},[ie,i]),e.useEffect(()=>{s&&Z(ce=>({...ce,internalOpen:!0}))},[s]);const ne=e.useCallback(()=>A?"100%":O&&O!==document.body&&typeof window<"u"?O.offsetHeight<window.innerHeight?O.offsetHeight-cn+"px":window.innerHeight-cn+"px":(typeof window<"u"?window.innerHeight-cn:600)+"px",[A,O]);e.useEffect(()=>{s&&Z(ce=>({...ce,dynamicMaxHeight:ne()}))},[s,ne]);const se=e.useCallback(()=>{Z(ce=>({...ce,dynamicMaxHeight:ne()}))},[ne]);e.useEffect(()=>{if(!(!s||!ie))return N.current&&Z(ce=>({...ce,dynamicMaxHeight:ne()})),typeof window<"u"&&window.addEventListener("resize",se),()=>{typeof window<"u"&&window.removeEventListener("resize",se)}},[s,ie,se,ne]);const le=e.useMemo(()=>({open:s,modal:i,draggable:C,resizable:D,resizeHandles:P,position:R,animation:v,target:O,fullScreen:A,closeIcon:E}),[s,i,C,D,P,R,v,O,A]);e.useImperativeHandle(n,()=>({...le,element:N.current}),[le]);const Re=e.useCallback(ce=>{ce.key==="Escape"&&a&&(ce.preventDefault(),a(ce),typeof document<"u"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur())},[a]),Pe=e.useCallback(ce=>{var W,X,de,Ee;if(!i)return;const ve=Q();if(ve.length!==0)switch(ce.key){case"Tab":{const Se=typeof document<"u"?document.activeElement:null,ge=ve.indexOf(Se);if(ge===-1){ce.preventDefault(),(X=(W=ve[ve.length-1])==null?void 0:W.focus)==null||X.call(W);return}ce.preventDefault();let Ae;ce.shiftKey?Ae=ge<=0?ve.length-1:ge-1:Ae=ge>=ve.length-1?0:ge+1,(Ee=(de=ve[Ae])==null?void 0:de.focus)==null||Ee.call(de);break}}},[i,Q]),Ue=e.useCallback(()=>{var ce;if(N.current&&Z(ve=>({...ve,dynamicMaxHeight:ne()})),g!=null&&g.current)"element"in g.current&&g.current.element?g.current.element.focus():g.current.focus();else{const W=Q().filter(X=>!_.current||_.current&&X!==_.current.element);W.length>0?W[0].focus():(ce=_.current)!=null&&ce.element&&_.current.element.focus()}},[g,ne,Q]),I=e.useCallback(()=>{N.current&&Z(ce=>({...ce,internalOpen:!1}))},[]),q=e.useCallback(ce=>{a==null||a(ce)},[a]),me=e.useCallback(ce=>{i&&ce.target===ce.currentTarget&&(a==null||a(ce))},[i,a]),ee=e.useMemo(()=>hr("dialog",{close:"Close"},Y).getConstant("close"),[Y]),fe=e.useCallback(()=>c.jsx(nt,{ref:_,icon:typeof E=="boolean"?c.jsx($n,{"aria-label":ee}):E,title:ee,"aria-label":ee,color:Ct.Secondary,onClick:q,className:"sf-dlg-closeicon-btn",variant:Qe.Standard}),[E,q,i,ee]),B=(ce,ve)=>{const W={Fade:{show:"FadeIn",hide:"FadeOut"},FadeZoom:{show:"FadeZoomIn",hide:"FadeZoomOut"},FlipLeftDown:{show:"FlipLeftDownIn",hide:"FlipLeftDownOut"},FlipLeftUp:{show:"FlipLeftUpIn",hide:"FlipLeftUpOut"},FlipRightDown:{show:"FlipRightDownIn",hide:"FlipRightDownOut"},FlipRightUp:{show:"FlipRightUpIn",hide:"FlipRightUpOut"},FlipXDown:{show:"FlipXDownIn",hide:"FlipXDownOut"},FlipXUp:{show:"FlipXUpIn",hide:"FlipXUpOut"},FlipYLeft:{show:"FlipYLeftIn",hide:"FlipYLeftOut"},FlipYRight:{show:"FlipYRightIn",hide:"FlipYRightOut"},SlideBottom:{show:"SlideBottomIn",hide:"SlideBottomOut"},SlideLeft:{show:"SlideLeftIn",hide:"SlideLeftOut"},SlideRight:{show:"SlideRightIn",hide:"SlideRightOut"},SlideTop:{show:"SlideTopIn",hide:"SlideTopOut"},Zoom:{show:"ZoomIn",hide:"ZoomOut"},None:{show:"FadeIn",hide:"FadeOut"}},X={show:"FadeIn",hide:"FadeOut"},de=W[ce]||X;return ve?de.show:de.hide},K=e.useMemo(()=>["sf-control","sf-dialog",i?"sf-dlg-modal":"",A?"sf-dlg-fullscreen":"",D&&!A?"sf-dlg-resizable":"",V].filter(Boolean).join(" "),[i,A,V,D]),G=e.useMemo(()=>{if(y!=null&&y.top&&(y!=null&&y.left)||R===null)return;const[ce,ve]=R==null?void 0:R.split(/(?=[A-Z])/);return ce&&ve?`sf-dlg-${ce==null?void 0:ce.toLowerCase()}-${ve==null?void 0:ve.toLowerCase()}`:"sf-dlg-center"},[R,y]),b=e.useMemo(()=>{const[ce,ve]=R?R==null?void 0:R.split(/(?=[A-Z])/):[];return ce&&ve?{X:ce,Y:ve}:{X:"Center",Y:"Center"}},[R]),z=e.useMemo(()=>["sf-dlg-container",G].filter(Boolean).join(" "),[G]),te=e.useMemo(()=>{const ce={...y};return delete ce.zIndex,{maxHeight:A?"100%":pe,position:ce.left&&ce.top?"absolute":"relative",...!ce.left&&!ce.top?{top:"0px",left:"0px"}:{},...A?{width:"100vw",height:"100vh",maxWidth:"100%",maxHeight:"100%"}:{},...!A&&D?{minWidth:oe.minWidth,minHeight:oe.minHeight,maxWidth:oe.maxWidth,maxHeight:oe.maxHeight}:{},...ce}},[R,A,y,pe,D,oe]),{zIndexBase:ue,zIndexPopup:Ce,zIndexOverlay:j}=e.useMemo(()=>{let ce=typeof(y==null?void 0:y.zIndex)=="number"?y.zIndex:1e3;return ce===1e3&&N.current&&(ce=Er(N.current)),{zIndexBase:Math.max(2,ce),zIndexPopup:Math.max(3,ce+1),zIndexOverlay:Math.max(1,ce-1)}},[y==null?void 0:y.zIndex,s,ie,N.current]);if(!ie)return null;const ae=c.jsxs("div",{className:z,ref:N,style:{zIndex:ue,position:typeof document<"u"&&O!==document.body?"absolute":"fixed"},onKeyDown:Re,children:[c.jsxs(At,{ref:ce=>{k.current=ce==null?void 0:ce.element},open:s,position:b,zIndex:Ce,relateTo:O,onOpen:Ue,onClose:I,className:K,animation:{show:{name:B(v.effect,!0),duration:v.effect==="None"?0:v.duration,delay:v.delay,timingFunction:"ease-out"},hide:{name:B(v.effect,!1),duration:v.effect==="None"?0:v.duration,delay:v.delay,timingFunction:"ease-in"}},style:te,role:"dialog",id:S,...L&&{"aria-describedby":`${S}_dialog-content`},...t&&{"aria-labelledby":`${S}_dialog-header`},...!t&&{"aria-label":"Dialog"},"aria-modal":i?"true":"false",tabIndex:-1,onKeyDown:Pe,...T,children:[(t||E)&&c.jsxs("div",{className:"sf-dlg-header-content",id:`${S}_dialog-header`,children:[E&&fe(),t&&c.jsx("div",{className:"sf-dlg-header sf-ellipsis",id:`${S}_title`,children:t})]}),c.jsx("div",{className:"sf-dlg-content",id:`${S}_dialog-content`,children:L}),r&&c.jsx("div",{className:"sf-dlg-footer-content sf-content-end",children:r}),D&&!A&&w(c.jsx(yo,{fill:"currentColor"}))]}),i&&c.jsx("div",{className:"sf-dlg-overlay",style:{zIndex:j},onClick:me,role:"presentation"})]}),Ne=O&&O instanceof HTMLElement?O:typeof document<"u"?document.body:void 0;return jt.createPortal(ae,Ne)});mn.displayName="Dialog";e.memo(mn);const Kt=o=>o?o.getHours()*3600+o.getMinutes()*60+o.getSeconds():-1,Or=(o,n)=>o.getFullYear()===n.getFullYear()&&o.getMonth()===n.getMonth()&&o.getDate()===n.getDate(),Lr=(o,n,s)=>{if(!n&&!s)return!0;const t=Kt(o),r=!!n,i=!!s,a=r?Kt(n):-1,l=i?Kt(s):-1;return r&&i?Or(n,s)?a===l?t===a:a>l?!1:t>=a&&t<=l:a===l?t===a:a>l?t>=a||t<=l:t>=a&&t<=l:r?t>=a:i?t<=l:!0},wi=(o,n,s)=>!n&&!s?o:o.filter(t=>Lr(t,n??null,s??null)),Ni=(o,n,s)=>{const t=!!n,r=!!s;if(!t&&!r)return o;const i=Kt(o),a=t?Kt(n):-1,l=r?Kt(s):Number.MAX_SAFE_INTEGER;if(t&&r&&Or(n,s)&&a>l)return null;if(t&&i<a){const m=n,u=new Date(o);return u.setHours(m.getHours(),m.getMinutes(),m.getSeconds(),0),u}if(r&&i>l){const m=s,u=new Date(o);return u.setHours(m.getHours(),m.getMinutes(),m.getSeconds(),0),u}if(t&&r&&a>l&&i>l&&i<a){const m=a-i,u=i-l,f=m<=u?n:s,p=new Date(o);return p.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),p}return o},xr=e.forwardRef((o,n)=>{const{times:s,selected:t,onSelect:r,formatter:i,itemTemplate:a,idBase:l,listLabel:m="Time options",ariaHidden:u=!1,className:f="sf-timepicker-list",sizeClass:p="",isOpen:h=!1,dir:E="ltr"}=o,g=e.useRef(null),C=e.useRef([]),D=e.useRef(!1),[P,R]=e.useState(null),v=s.length,O=e.useCallback(Y=>i?i(Y):Y.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}),[i]),A=e.useCallback(()=>t?s.findIndex(Y=>Y.getHours()===t.getHours()&&Y.getMinutes()===t.getMinutes()):-1,[s,t]),V=e.useCallback(Y=>{if(Y==null||Y<0)return;const H=C.current[Y],k=g.current;if(!H||!k)return;const U=H.offsetTop,oe=H.offsetHeight||32,J=k.clientHeight||0,w=Math.max(0,U-Math.max(0,(J-oe)/2));k.scrollTop=w},[]),L=e.useCallback(()=>{const Y=A(),H=Y>=0?Y:s.length?0:null;if(H==null||H<0)return;const k=C.current[H],U=g.current;if(!k||!U)return;const oe=k.offsetTop,J=k.offsetHeight||32,w=Math.max(0,oe-Math.max(0,(U.clientHeight-J)/2));U.scrollTop=w,R(H)},[A,s.length]);e.useEffect(()=>{h&&!D.current&&(D.current=!0,L()),h||(D.current=!1,R(null))},[h,L]);const y=e.useCallback(()=>{if(!v)return;const Y=P!=null&&P>=0&&P<v?P:A(),H=Y<0?0:(Y+1)%v;R(H),V(H)},[v,P,A,V]),S=e.useCallback(()=>{if(!v)return;const Y=P!=null&&P>=0&&P<v?P:A(),H=Y<0?v-1:(Y-1+v)%v;R(H),V(H)},[v,P,A,V]),T=e.useCallback(()=>{v&&(R(0),V(0))},[v,V]),N=e.useCallback(()=>{v&&(R(v-1),V(v-1))},[v,V]),_=e.useCallback(()=>{if(!v)return;const Y=P!=null&&P>=0&&P<v?P:A();Y==null||Y<0||r(s[Y])},[v,P,A,r,s]),x=e.useCallback(Y=>{switch(Y.key){case"ArrowDown":Y.preventDefault(),y();break;case"ArrowUp":Y.preventDefault(),S();break;case"Home":Y.preventDefault(),T();break;case"End":Y.preventDefault(),N();break;case"Enter":Y.preventDefault(),_();break}},[y,S,T,N,_]);e.useImperativeHandle(n,()=>({ensureSelectedVisible:L,selectFocused:_,focusNext:y,focusPrev:S,focusFirst:T,focusLast:N,getFocusedIndex:()=>P,handleKeyDown:Y=>x(Y)}),[L,_,y,S,T,N,P,x]);const M=`${l}_options`,Z=e.useMemo(()=>P!=null&&P>=0&&P<v?`${l}_option_${P}`:void 0,[l,P,v]),ie=[f,p,"sf-ul",E==="rtl"?"sf-rtl":""].filter(Boolean).join(" "),pe=v===0;return c.jsx("ul",{ref:g,className:ie,role:"listbox","aria-label":m,"aria-activedescendant":Z,"aria-hidden":u,id:M,tabIndex:0,onMouseDown:Y=>Y.preventDefault(),onKeyDown:x,children:pe?c.jsx("li",{className:"sf-timepicker-item sf-timepicker-empty",role:"note",tabIndex:-1,children:"No available times"}):s.map((Y,H)=>{const k=O(Y),U=!!(t&&Y.getHours()===t.getHours()&&Y.getMinutes()===t.getMinutes()),oe=P===H,J=a?a(Y,U,oe,H):k;return c.jsx("li",{ref:w=>{C.current[H]=w},className:["sf-timepicker-item",U?"sf-active":"",oe?"sf-focus":""].filter(Boolean).join(" "),role:"option","data-value":k,id:`${l}_option_${H}`,"aria-selected":U,onClick:w=>r(Y,w),onFocus:()=>R(H),onBlur:()=>R(null),tabIndex:0,children:J},H)})})});xr.displayName="TimeList";function Ai(o){const{step:n,minTime:s,maxTime:t,locale:r,timeFormat:i}=o,[a,l]=e.useState([]),m=e.useRef(null);e.useEffect(()=>{const C=[],D=new Date;D.setHours(0,0,0,0);const P=new Date;P.setHours(23,59,59,999);const R=new Date(D);for(;R<=P;)C.push(new Date(R)),R.setMinutes(R.getMinutes()+n);l(C)},[n]);const u=e.useMemo(()=>wi(a,s,t),[a,s,t]),f=e.useCallback(C=>!C||isNaN(C.getTime())?"":ft(C,{format:i||"h:mm a",type:"time",locale:r||"en-US"}),[r,i]),p=e.useCallback((C,D=!1)=>{if(!C||!C.trim())return null;const P=C.replace(/(am|pm|Am|aM|pM|Pm)/g,v=>v.toUpperCase()).trim(),R=[i,"h:mm a","h:mm:ss a","HH:mm","HH:mm:ss"].filter(Boolean);for(const v of R){const O=bo(P,{format:v,type:"time",locale:r||"en-US"});if(O&&!isNaN(O.getTime())&&(!D||ft(O,{format:v,type:"time",locale:r||"en-US"}).trim()===P))return O}if(!D){const O=new Date().toLocaleDateString(r||"en-US"),A=new Date(`${O} ${P}`);if(!isNaN(A.getTime()))return A}return null},[r,i]),h=e.useCallback(C=>!C||isNaN(C.getTime())?!1:Lr(C,s||null,t||null),[s,t]),E=e.useCallback(()=>{var C,D;(D=(C=m.current)==null?void 0:C.ensureSelectedVisible)==null||D.call(C)},[]),g=e.useCallback((C,D)=>{D&&m.current&&typeof m.current.handleKeyDown=="function"&&m.current.handleKeyDown(C)},[]);return{displayedTimes:u,formatTime:f,parseTime:p,isValidTime:h,timeListRef:m,ensureSelectedVisible:E,forwardListKeyDown:g}}const ls=e.forwardRef((o,n)=>{const{value:s,id:t=`timepicker_${e.useId()}`,defaultValue:r,format:i="h:mm a",minTime:a,maxTime:l,step:m=30,placeholder:u="Choose a time",variant:f=Qe.Standard,size:p=Mt.Medium,readOnly:h=!1,disabled:E=!1,itemTemplate:g,clearButton:C=!0,className:D="",zIndex:P=1e3,strictMode:R=!1,open:v,timeIcon:O=!0,editable:A=!0,fullScreenMode:V=!1,pickerVariant:L=ln.Auto,openOnFocus:y=!1,required:S=!1,valid:T,validationMessage:N="",validityStyles:_=!0,labelMode:x="Never",onChange:M,onOpen:Z,onClose:ie,...pe}=o,[Y,H]=e.useState(s??r??null),[k,U]=e.useState(!1),oe=e.useRef(null),J=e.useRef(null),w=e.useRef(null),Q=e.useRef(null),{dir:ne,locale:se}=$e(),le=s!==void 0,Re=le?s||null:Y,Pe=L===ln.Popup||L===ln.Auto&&ye.isDevice,Ue=L===ln.Inline||L===ln.Auto&&!ye.isDevice,{displayedTimes:I,formatTime:q,parseTime:me,isValidTime:ee,timeListRef:fe,ensureSelectedVisible:B,forwardListKeyDown:K}=Ai({step:m,minTime:a,maxTime:l,locale:se,timeFormat:i}),G=e.useCallback((be,Me)=>{le||H(be),M&&M({value:be,event:Me})},[le,M,S,T]),b=Ro({locale:se,inputRef:J,placeholder:u,placeholderKey:"timepicker",disabled:E,readOnly:h,openOnFocus:y,strictMode:R,required:S,valid:T,validationMessage:N,value:Re,formatValue:q,parseInput:be=>me(be,!1),isValid:be=>ee(be),commitValue:G,onOpen:()=>{te()}}),{isOpen:z,showPopup:te,hidePopup:ue,togglePopup:Ce,zIndexPopup:j}=So({open:v,defaultOpen:!1,disabled:E,readOnly:h,onOpen:Z,onClose:ie,containerRef:oe,contentRefs:[w],extraInsideRefs:[Q],inputRef:J,baseZIndex:P}),ae=e.useCallback((be,Me)=>{le||b.setInputValue(q(be)),G(be,Me),ue()},[q,G,ue,le,b]),Ne=e.useCallback(()=>{Re?(b.setInputValue(q(Re)),b.setIsInputValid(!0)):(b.setInputValue(""),b.setIsInputValid(!S))},[R,Re,q,S,G,b]),ce=e.useCallback((be,Me)=>{const He=Ni(be,a??null,l??null);He?(b.setInputValue(q(He)),G(He,Me),b.setIsInputValid(!0)):(b.setInputValue(""),G(null,Me),b.setIsInputValid(!S))},[R,a,l,S,q,G,b]),ve=e.useCallback(be=>{const Me=b.inputValue;if(Me.trim()===""){b.inputValue!==""&&b.setInputValue(""),R&&S?Re?(b.setInputValue(q(Re)),b.setIsInputValid(!0)):b.setIsInputValid(!S):(G(null,be),b.setIsInputValid(!S));return}if(R){const ke=me(Me,!1);if(ke===null){Ne();return}if(ee(ke)){const it=q(ke);b.setInputValue(it),G(ke,be),b.setIsInputValid(!0)}else ce(ke,be);return}const He=me(Me,!0);He&&ee(He)?(G(He,be),b.setIsInputValid(!0)):b.setIsInputValid(!1)},[b,R,S,Re,me,ee,q,G,Ne,ce]),W=e.useCallback(be=>{switch(be.key){case"ArrowDown":(be.altKey||be.metaKey)&&(be.preventDefault(),te());break;case"ArrowUp":(be.altKey||be.metaKey)&&(be.preventDefault(),ue());break;case"Enter":z||(be.preventDefault(),ve(be));break}K(be,z)},[z,te,ue,ve,K]),X=e.useCallback(be=>{if(!be.trim())return!S;if(/^\d{1,2}$/.test(be)){const He=parseInt(be,10);return He>=0&&He<=23}if(/^\d{1,2}:$/.test(be)){const He=parseInt(be.split(":")[0],10);return He>=0&&He<=23}if(/^\d{1,2}:\d{1,2}$/.test(be)){const[He,ke]=be.split(":"),et=parseInt(He,10),it=parseInt(ke,10);return et>=0&&et<=23&&it>=0&&it<=59}const Me=me(be);return Me!==null&&ee(Me)},[me,ee,S]),de=e.useCallback(be=>{const Me=be.target.value;b.setInputValue(Me),T===void 0&&b.setIsInputValid(X(Me))},[T,X]);e.useEffect(()=>{Ot("timepicker")},[]);const Ee={placeholder:u,format:i,labelMode:x,disabled:E,readOnly:h,editable:A,openOnFocus:y,open:v,clearButton:C,zIndex:P,strictMode:R,value:Re,minTime:a,maxTime:l,step:m,required:S,valid:T,validationMessage:N,validityStyles:_};e.useImperativeHandle(n,()=>({...Ee,element:oe.current}),[Ee]);const Se=e.useCallback(()=>{var be;Ce(),U(!0),(be=J.current)==null||be.focus()},[Ce]),ge=e.useCallback(be=>{be.preventDefault(),b.handleClear(),ue()},[b,ue]),Ae=["sf-input-group sf-control","sf-timepicker",E?"sf-disabled":"",h?"sf-readonly":"",z||b.isFocused?"sf-input-focus":"",x!=="Never"?"sf-float-input":"",ne==="rtl"?"sf-rtl":"",p===Mt.Small?"sf-small":p===Mt.Large?"sf-large":"sf-medium",!b.isInputValid&&_?"sf-error":"",f&&f.toLowerCase()!=="standard"?f.toLowerCase()==="outlined"?"sf-outline":`sf-${f.toLowerCase()}`:"",D].filter(Boolean).join(" "),we=p.toLowerCase().substring(0,2),_e=e.useMemo(()=>c.jsx(xr,{ref:fe,times:I,selected:Re,onSelect:(be,Me)=>{ae(be,Me)},formatter:q,itemTemplate:g,idBase:`${t}`,className:"sf-timepicker-list",sizeClass:`sf-timepicker-list-${we}`,isOpen:z,dir:ne}),[I,Re,q,g,z,ne,ae,we,t,fe]);return c.jsxs("span",{ref:oe,className:Ae,...pe,children:[c.jsx(mr,{ref:J,id:t,className:"sf-timepicker",placeholder:x==="Never"?b.getPlaceholder:"",disabled:E,readOnly:h||!A,onFocus:b.handleInputFocus,onBlur:be=>{b.setIsFocused(!1),ve(be),ue()},value:b.inputValue,onChange:A&&!h&&!E?de:void 0,role:"combobox","aria-haspopup":"listbox",autoComplete:"off","aria-expanded":z,"aria-disabled":E,"aria-controls":z?`${t}_options`:void 0,"aria-label":b.getPlaceholder||"Time picker input",onKeyDown:W,tabIndex:0,required:S}),x!=="Never"&&hs(x,!1,b.inputValue,u,t),C&&b.inputValue&&(b.isFocused||z)&&c.jsx("span",{className:"sf-clear-icon sf-input-icon","aria-label":"clear time value",role:"button",onMouseDown:ge,children:c.jsx($n,{})}),c.jsx("span",{className:`sf-input-icon sf-time-icon sf-icons ${k?"sf-active":""}`,"aria-label":"select time",role:"button",onClick:Se,onMouseDown:be=>{be.preventDefault()},children:O===!0?c.jsx(Qo,{}):O}),z&&jt.createPortal(V&&ye.isDevice?c.jsxs("div",{ref:Q,className:"sf-timepicker-mob sf-control",style:{zIndex:P},role:"dialog","aria-modal":"true","aria-label":"Time selection",children:[c.jsxs("div",{className:"sf-timepicker-header",children:[c.jsx(nt,{variant:Qe.Standard,onClick:ue,children:c.jsx($n,{})}),c.jsx("span",{className:"sf-timepicker-title",children:"Select Time"})]}),_e]}):c.jsxs(c.Fragment,{children:[Pe&&c.jsxs("div",{className:"sf-timepicker-popup-wrap",style:{zIndex:j.toString()},children:[c.jsx("div",{className:"sf-overlay"}),c.jsx(At,{ref:w,className:"sf-timepicker sf-popup sf-content-center",open:z,zIndex:j,onOpen:()=>{B()},relateTo:document.body,style:{top:"0px",left:"0px",position:"relative"},position:{X:"center",Y:"center"},collision:{X:ot.Fit,Y:ot.Fit},"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:_e})]}),Ue&&c.jsx(At,{ref:w,className:"sf-timepicker sf-popup",open:z,zIndex:j,onOpen:()=>{B()},relateTo:oe.current,position:{X:"left",Y:"bottom"},collision:{X:ot.Flip,Y:ot.Flip},offsetY:4,"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:_e})]}),document.body)]})});ls.displayName="TimePicker";const d={ALL_DAY_APPOINTMENT_SECTION:"sf-all-day-appointment-section",ALL_DAY_APPOINTMENT:"sf-all-day-appointment",ALL_DAY_CONTAINER:"sf-all-day-container",ALL_DAY_CELL:"sf-all-day-cell",ALL_DAY_ROW:"sf-all-day-row",ALL_DAY_TIMEZONE_ROW:"sf-all-day-time-zone-row",APPOINTMENT:"sf-appointment",APPOINTMENT_ACTIVE:"sf-appointment-active",APPOINTMENT_COLLAPSE:"sf-appointment-collapse",APPOINTMENT_DETAILS:"sf-appointment-details",APPOINTMENT_EXPAND:"sf-appointment-expand",APPOINTMENT_WRAPPER:"sf-appointment-wrapper",BOTTOM_RESIZE_HANDLER:"sf-bottom-handler",BLOCK_INDICATOR:"sf-block-indicator",BLOCK_APPOINTMENT:"sf-block-appointment",CALENDAR_POPUP_CONTAINER:"sf-calendar-popup-container",CANCEL_EVENT:"sf-cancel-event",CELL_POPUP:"sf-cell-popup",CELL_TIME:"sf-cell-time",CONTENT_RIGHT:"sf-content-end sf-content-right",CONTENT_SECTION:"sf-content-section",CONTENT_TABLE:"sf-content-table",CONTENT_WRAP:"sf-content-wrap",CONTROL:"sf-control",CURRENT_TIME:"sf-current-time",CURRENT_TIMELINE:"sf-current-timeline",DATE_HEADER:"sf-date-header",DATE_HEADER_CONTAINER:"sf-date-header-container",DATEPICKER_BUTTON:"sf-datepicker-button",DAY_CLONE_CONTAINER:"sf-day-clone-container",DAY_VIEW:"sf-day-view",DAY_WRAPPER:"sf-day-wrapper",DIALOG:"sf-scheduler-dialog",DIALOG_CONTENT:"sf-dialog-content",DELETE_EVENT:"sf-delete-event",DESCRIPTION:"sf-description",DESCRIPTION_CONTAINER:"sf-description-container",DESCRIPTION_ROW:"sf-description-row",DISPLAY_FLEX:"sf-display-flex",DOWN_ARROW_ICON:"sf-down-icon",DRAGGING:"sf-dragging",DRAG_CLONE:"sf-drag-clone",SCHEDULER_CURSOR_MOVE:"sf-scheduler-cursor-move",SCHEDULER_CURSOR_NOT_ALLOWED:"sf-cursor-not-allowed",SCHEDULER_CURSOR_DEFAULT:"sf-cursor-default",EXTERNAL_DRAG_CLONE:"sf-external-drag-clone",EVENT_RESIZE_CLASS:"sf-event-resize",EVENT_CLONE:"sf-event-clone",EDIT_EVENT:"sf-edit-event",EDITOR_FIELDS_ROW:"sf-editor-fields-row",EDITOR_POPUP_REPEAT_MODE:"sf-editor-popup-repeat-mode",EDITOR_FIELD_CONTAINER:"sf-editor-field-container",ELLIPSIS:"sf-ellipsis",END_DATE_CONTAINER:"sf-end-date-container",END_TIME_CONTAINER:"sf-end-time-container",END_ROW:"sf-end-row",EVENT_ALLDAY:"sf-event-all-day",EVENT_CONTAINER:"sf-event-container",EVENT_DESCRIPTION:"sf-event-description",EVENT_END_DATE:"sf-event-end-date",EVENT_END_TIME:"sf-event-end-time",EVENT_LOCATION:"sf-event-location",EVENT_POPUP:"sf-event-popup",EVENT_START_DATE:"sf-event-start-date",EVENT_START_TIME:"sf-event-start-time",EVENT_SUBJECT:"sf-event-subject",EVENT_TIME:"sf-event-time",FORM_CONTAINER:"sf-form-container",HORIZONTAL_RESIZE_INNER:"sf-horizontal-resize",HEADER_CELLS:"sf-header-cells",HEADER_DATE:"sf-header-date",HEADER_DAY:"sf-header-day",HEADER_ROW:"sf-header-row",HEADER_SECTION:"sf-header-section",ICONS:"sf-icons",INDICATOR:"sf-indicator",LEFT_ARROW_ICON:"sf-left-icon",LEFT_INDENT:"sf-left-indent",LINK:"sf-link",LOCATION:"sf-location",LOCATION_CONTAINER:"sf-location-container",LEFT_RESIZE_HANDLER:"sf-left-handler",MAIN_SCROLL_CONTAINER:"sf-main-scroll-container",MONTH_VIEW:"sf-month-view",MONTH_EVENT:"sf-month-event",MORE_EVENT_CONTENT:"sf-more-event-content",MORE_EVENT_DATE_HEADER:"sf-more-event-date-header",MORE_EVENT_HEADER:"sf-more-event-header",MORE_EVENT_POPUP:"sf-more-event-popup",MORE_INDICATOR:"sf-more-indicator",MORE_POPUP_WRAPPER:"sf-more-popup-wrapper",MOB_RESIZE_DOT:"sf-mob-resize-dot",MOBILE_POPUP:"sf-mobile-popup",NEXT_ICON:"sf-next-icon",NO_POINTER:"sf-no-pointer",POPUP_CELL_HEADER:"sf-popup-cell-header",POPUP_CLOSE:"sf-popup-close",POPUP_CONTENT:"sf-quickinfo-popup-content",POPUP_CELL_SUBJECT:"sf-popup-cell-subject",POPUP_DESCRIPTION_TEXT:"sf-popup-description-text",POPUP_EVENT_SUBJECT:"sf-popup-event-subject",POPUP_FOOTER:"sf-quickinfo-popup-footer",POPUP_HEADER:"sf-quickinfo-popup-header",POPUP_HEADER_WRAP:"sf-header-icon-wrapper",POPUP_INPUT_WRAP:"sf-input-wrap",POPUP_LOCATION_TEXT:"sf-popup-location-text",POPUP_MORE_DETAILS:"sf-popup-more-details",POPUP_TIME_TEXT:"sf-popup-time-text",POPUP_WRAPPER:"sf-quickinfo-popup-wrapper",POSITION_ABSOLUTE:"sf-pos-absolute",PREVIOUS_ICON:"sf-previous-icon",PREVIOUS_TIMELINE:"sf-previous-timeline",QUICK_INFO_WRAPPER:"sf-quick-info-wrapper",RIGHT_ARROW_ICON:"sf-right-icon",RIGHT_SECTION:"sf-right-section",ROUND:"sf-round",RTL:"sf-rtl",RIGHT_RESIZE_HANDLER:"sf-right-handler",RESIZING:"sf-resizing",RESIZE_CONTAINER:"sf-resize-container",SAVE_EVENT:"sf-save-event",SCHEDULER:"sf-scheduler",SCHEDULER_CALENDAR:"sf-scheduler-calendar",SCHEDULER_TABLE:"sf-scheduler-table",SCHEDULER_TOOLBAR_CONTAINER:"sf-scheduler-toolbar-container",SCHEDULER_TOOLTIP_CONTENT:"sf-scheduler-tooltip-content",SCHEDULER_TOOLTIP_SUBJECT:"sf-scheduler-tooltip-subject",SCHEDULER_TOOLTIP_DATE:"sf-scheduler-tooltip-date",SCHEDULER_TOOLTIP_TIME:"sf-scheduler-tooltip-time",SELECTED_CELL:"sf-selected-cell",START_DATE_CONTAINER:"sf-start-date-container",START_TIME_CONTAINER:"sf-start-time-container",START_ROW:"sf-start-row",STICKY_HEADER:"sf-sticky-header",SUBJECT:"sf-subject",SUBJECT_CONTAINER:"sf-subject-container",TABLE_CONTAINER:"sf-table-container",TABLE_WRAP:"sf-table-wrap",TEXT_CENTER:"sf-text-center",TIME:"sf-time",TIME_CELLS_WRAP:"sf-time-cells-wrap",TIME_SLOT_CLONE_CONTAINER:"sf-time-slot-clone-container",TIME_SLOTS:"sf-time-slots",TITLE_LOCATION_ROW:"sf-title-location-row",TODAY:"sf-today",TODAY_BUTTON:"sf-today-button",TOP_RESIZE_HANDLER:"sf-top-handler",UP_ARROW_ICON:"sf-up-icon",VERTICAL_RESIZE_INNER:"sf-vertical-resize",VERTICAL_VIEW:"sf-vertical-view",VIEW_BUTTON:"sf-view-button",WEEK_NUMBER:"sf-week-number",WEEK_NUMBER_WRAPPER:"sf-week-number-wrapper",WEEK_VIEW:"sf-week-view",WORK_CELLS_CONTAINER:"sf-work-cells-container",WORK_CELLS_ROW:"sf-work-cells-row",WORK_WEEK_VIEW:"sf-work-week-view",WORK_CELLS:"sf-work-cells",WORK_DAYS:"sf-work-days"},Oi=o=>{const{className:n,selectedDate:s,view:t,onSelectedDateChange:r,onViewChange:i,viewComponents:a,defaultSelectedDate:l,defaultView:m}=o,u=o.selectedDate!==void 0,f=o.view!==void 0,p=e.useMemo(()=>{const ne=u?s:l,se=ne?new Date(ne):new Date;return isNaN(se.getTime())?new Date:se},[s,l,u]),h=e.useMemo(()=>f?t:m,[f,t,m]),[E,g]=e.useState(p),[C,D]=e.useState(h),P=e.useRef(h),[R,v]=e.useState([]),[O,A]=e.useState(!1),[V,L]=e.useState(Hn.Month);e.useEffect(()=>{u&&g(p)},[p,u]),e.useEffect(()=>{f&&D(h)},[h,f]);const y=e.useCallback(ne=>{f||D(ne),i&&i({value:ne})},[i,f]);e.useEffect(()=>{P.current!==t&&t!==C&&t&&a.some(le=>le.name===t)&&D(t),P.current=t||h},[t,C,a,h]),e.useEffect(()=>{if(C==="Week"&&a.length>0&&!a.some(se=>se.viewType==="Week")){y(a[0].name);return}},[C,a,y]),e.useEffect(()=>{const ne=ht.findViewByNameOrType(a,C);if(ne){const se=ne.viewType==="Month"?Hn.Year:Hn.Month;L(se)}},[a,C]);const{locale:S,dir:T}=$e(),N=e.useMemo(()=>{if(!R||R.length===0)return"";const ne=ht.findViewByNameOrType(a,C);if(!ne)return"";const se=ne.component.props;return ne.viewType==="Month"?F.getMonthRangeText(E,ne.interval,se.displayDate,se.numberOfWeeks,se.dateFormat||o.dateFormat,R,S):F.formatDateRange(S,R[0],R[R.length-1])},[R,a,C,E,S,o.dateFormat]),_=ne=>{u||g(ne),r&&r({value:ne})},x=e.useCallback(()=>{const ne=[];return a.forEach(se=>{ne.push({viewType:se.viewType,name:se.name,displayName:se.displayName,component:se.component,interval:se.interval})}),ne},[a]),M=ne=>{y(ne)},Z=()=>({height:o.height,width:o.width,selectedDate:E,view:C,eventSettings:o.eventSettings,timeScale:o.timeScale,workHours:o.workHours,startHour:o.startHour,endHour:o.endHour,showWeekend:o.showWeekend,firstDayOfWeek:o.firstDayOfWeek,workDays:o.workDays,showTimeIndicator:o.showTimeIndicator,dateFormat:o.dateFormat,timeFormat:o.timeFormat,showWeekNumber:o.showWeekNumber,eventOverlap:o.eventOverlap,rowAutoHeight:o.rowAutoHeight,readOnly:o.readOnly,cell:o.cell,dateHeader:o.dateHeader,headerIndent:o.headerIndent,editor:o.editor,onEditorSubmit:o.onEditorSubmit,showQuickInfoPopup:o.showQuickInfoPopup,header:o.header,keyboardNavigation:o.keyboardNavigation,onDataRequest:o.onDataRequest,onSelectedDateChange:ne=>_(ne.value),onViewChange:ne=>y(ne.value),onCellClick:o.onCellClick,onCellDoubleClick:o.onCellDoubleClick,onEventClick:o.onEventClick,onEventDoubleClick:o.onEventDoubleClick,onDataChangeStart:o.onDataChangeStart,onDataChangeComplete:o.onDataChangeComplete,eventDrag:o.eventDrag,eventResize:o.eventResize,onResizeStart:o.onResizeStart,onResizing:o.onResizing,onResizeStop:o.onResizeStop,onDragStart:o.onDragStart,onDrag:o.onDrag,onDragStop:o.onDragStop,onMoreEventsClick:o.onMoreEventsClick,weekRule:o.weekRule}),pe=(()=>{var Pe,Ue,I,q;const ne=ht.findViewByNameOrType(a,C);if(!ne)return{};const se=ne.component.props||{},le=yr(gr,Z());typeof le.eventDrag=="boolean"&&(le.eventDrag={enable:le.eventDrag});const Re={height:le.height,width:le.width,selectedDate:F.setValidDate(le.selectedDate),view:le.view,eventSettings:le.eventSettings,workHours:le.workHours,showTimeIndicator:le.showTimeIndicator,rowAutoHeight:le.rowAutoHeight,eventTemplate:se.eventTemplate,readOnly:se.readOnly??le.readOnly,header:le.header,showQuickInfoPopup:le.showQuickInfoPopup,displayDate:F.setValidDate(se.displayDate),numberOfWeeks:se.numberOfWeeks,weekDay:se.weekDay,showTrailingAndLeadingDates:se.showTrailingAndLeadingDates,cellHeader:se.cellHeader,interval:se.interval??ne.interval,displayName:se.displayName??ne.displayName,maxEventsPerRow:se.maxEventsPerRow,dateHeader:se.dateHeader??le.dateHeader,headerIndent:se.headerIndent??le.headerIndent,cell:se.cell??le.cell,timeScale:se.timeScale??le.timeScale,startHour:se.startHour??le.startHour,endHour:se.endHour??le.endHour,showWeekend:se.showWeekend??le.showWeekend,firstDayOfWeek:F.setValidFirstDayOfWeek(se.firstDayOfWeek,le.firstDayOfWeek),workDays:se.workDays??le.workDays,dateFormat:se.dateFormat??le.dateFormat,timeFormat:se.timeFormat??le.timeFormat,showWeekNumber:se.showWeekNumber??le.showWeekNumber,eventOverlap:se.eventOverlap??le.eventOverlap,editor:se.editor??le.editor,onEditorSubmit:le.onEditorSubmit,onDataRequest:le.onDataRequest,onSelectedDateChange:le.onSelectedDateChange,onViewChange:le.onViewChange,onCellClick:le.onCellClick,onCellDoubleClick:le.onCellDoubleClick,onEventClick:le.onEventClick,onEventDoubleClick:le.onEventDoubleClick,onDataChangeStart:le.onDataChangeStart,onDataChangeComplete:le.onDataChangeComplete,keyboardNavigation:le.keyboardNavigation,eventDrag:le.eventDrag,eventResize:le.eventResize,onResizeStart:le.onResizeStart,onResizing:le.onResizing,onResizeStop:le.onResizeStop,onDragStart:le.onDragStart,onDrag:le.onDrag,onDragStop:le.onDragStop,onMoreEventsClick:le.onMoreEventsClick,handleCurrentViewChange:y,getAvailableViews:x,weekRule:le.weekRule};return(Re.startHour!=="00:00"||Re.endHour!=="24:00")&&(Re.startHourTuple=[Number((Pe=Re.startHour)==null?void 0:Pe.split(":")[0]),Number((Ue=Re.startHour)==null?void 0:Ue.split(":")[1])],Re.endHourTuple=[Number((I=Re.endHour)==null?void 0:I.split(":")[0]),Number((q=Re.endHour)==null?void 0:q.split(":")[1])]),Re})();e.useEffect(()=>{const ne=ht.findViewByNameOrType(a,C);if(ne){const se=F.getRenderDates(ne.viewType,E,pe);v(se)}},[E,C,a]),e.useEffect(()=>{if(!ht.findViewByNameOrType(a,C)){const se=x();if(se.length>0){const le=se.find(Re=>Re.viewType==="Week")||se[0];y(le.name)}}},[C,a,y]);const Y=()=>{const ne=ht.findViewByNameOrType(a,C);return ne?ne.component:null},H=ne=>{const se=ht.findViewByNameOrType(a,C);if(!se)return;const le={currentDate:E,viewType:se.viewType,interval:se.interval,showWeekend:pe.showWeekend,workDays:pe.workDays},Re=ne==="next"?Jn.navigateToNext(le):Jn.navigateToPrevious(le);_(Re)},k=()=>{H("next")},U=()=>{H("previous")},oe=()=>{const ne=Jn.navigateToToday();_(ne)},J=e.useCallback(ne=>{if(ne.value){const se=Array.isArray(ne.value)?ne.value[0]:ne.value;_&&_(se),A(!1)}},[_]),w=()=>{A(!O)};return{classNames:e.useMemo(()=>{const ne=[d.CONTROL,d.SCHEDULER];return T==="rtl"&&ne.push(d.RTL),n&&ne.push(n),ne.join(" ")},[T,n]),selectedDate:E,view:C,renderDates:R,activeViewProps:pe,dateRangeText:N,showCalendar:O,calendarView:V,handleSelectedDateChange:_,handleCurrentViewChange:y,getAvailableViews:x,handleViewButtonClick:M,handlePreviousClick:U,handleNextClick:k,handleTodayClick:oe,handleDateDropdownClick:w,handleCalendarChange:J,renderCurrentView:Y}},Ds=(o,n,s)=>{e.useEffect(()=>{const t=r=>{var i;n&&o.current&&!o.current.contains(r.target)&&!((i=r.target)!=null&&i.closest(`.${d.POPUP_WRAPPER}`))&&s()};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[n,o])},Li="sf-hscroll",In="sf-rtl",Ir="sf-overlay",xi="sf-hscroll-bar",Ii="sf-hscroll-content",kr="sf-hscroll-arrow",Pr="sf-nav-right-arrow",_r="sf-nav-left-arrow",as="sf-hscroll-nav",ki="sf-scroll-right-nav",Pi="sf-scroll-left-nav",_i="sf-scroll-device",Mr=e.memo(e.forwardRef((o,n)=>{const{className:s="",scrollStep:t=void 0,isDisabled:r=!1,children:i,...a}=o,l=e.useRef(t),m=e.useRef(jn("hscroll")),[u,f]=e.useState(!0),[p,h]=e.useState(!1),{dir:E}=$e(),g=e.useRef(null),C=e.useRef(null),D=e.useRef(null),P=e.useRef(null),R=e.useRef(!1),v=e.useRef(null),O={scrollStep:t,isDisabled:r},A=e.useMemo(()=>({name:ye.info.name,isDevice:ye.isDevice,isMozilla:ye.info.name==="mozilla"}),[]);e.useEffect(()=>{(()=>{var k;typeof t!="number"||t<0?l.current=((k=C.current)==null?void 0:k.offsetWidth)||void 0:l.current=t})()},[t]);const V=e.useCallback((H,k)=>{C.current&&(k==="add"?C.current.scrollLeft+=H:C.current.scrollLeft-=H,E==="rtl"&&C.current.scrollLeft>0&&(C.current.scrollLeft=0))},[E]),L=e.useCallback((H,k,U)=>{if(U){V(H,k);return}const J=()=>{var ne;let w=H,Q=10;(ne=g.current)!=null&&ne.classList.contains(In)&&A.isMozilla&&(w=-H,Q=-10),w<10?cancelAnimationFrame(Q):(V(Q,k),H-=Q,requestAnimationFrame(J))};J()},[A.isMozilla,V]),y=e.useCallback((H,k,U)=>{const oe=g.current;let J=k.classList;if(!J.contains(as)){const w=k.closest("."+as);w&&(k=w)}J=k.querySelector(`.${kr}`).classList,oe.classList.contains(In)&&A.isMozilla&&(H=-H),!oe.classList.contains(In)||A.isMozilla?J.contains(Pr)?L(H,"add",U):L(H,"",U):J.contains(_r)?L(H,"add",U):L(H,"",U)},[A.isMozilla,L]),S=e.useCallback(H=>{if(H){const k=H.originalEvent.target,U=10,oe=()=>{y(U,k,!0)};P.current=window.setInterval(()=>{oe()},50)}},[y]),T=e.useCallback(H=>{if(H.key==="Enter"){const k=()=>{R.current=!0,y(10,H.target,!0)};v.current=window.setTimeout(()=>{k()},100)}},[y]),N=e.useCallback(H=>{H.key==="Enter"&&(R.current?R.current=!1:H.target.click(),clearTimeout(v.current))},[]),_=e.useCallback(()=>{clearInterval(P.current)},[]),x=e.useCallback(H=>{y(l.current,H.target,!1)},[y]),M=e.useCallback(H=>{if(H){const k=C.current;let U;typeof H.velocity=="number"&&typeof H.distanceX=="number"&&(H.velocity<=1?U=H.distanceX/(H.velocity*10):U=H.distanceX/H.velocity);let oe=.5;const J=()=>{const w=Math.sin(oe);w<=0?cancelAnimationFrame(w):(H.swipeDirection==="Left"?k.scrollLeft+=U*w:H.swipeDirection==="Right"&&(k.scrollLeft-=U*w),oe-=.5,requestAnimationFrame(J))};J()}},[]),Z=e.useCallback(H=>{if(H){const k=C.current;if(k&&typeof H.distanceX=="number"){const U=H.distanceX;H.scrollDirection==="Left"?k.scrollLeft=k.scrollLeft+U:H.scrollDirection==="Right"&&(k.scrollLeft=k.scrollLeft-U)}}},[]),ie=H=>{const k=H.target,U=k.offsetWidth;let oe=k.scrollLeft;oe<=0&&(oe=-oe),oe===0?(f(!0),h(!1),_()):Math.ceil(U+oe+.1)>=k.scrollWidth?(f(!1),h(!0),_()):(f(!1),h(!1))};e.useImperativeHandle(n,()=>({...O,element:g.current})),e.useEffect(()=>()=>{P.current&&clearInterval(P.current),v.current&&clearTimeout(v.current)},[]);const pe=e.useMemo(()=>({swipe:M,scroll:Z}),[M,Z]);D.current=Vt(g,pe);const Y=e.useMemo(()=>["sf-control","sf-lib",Li,E==="rtl"&&In,A.isDevice&&_i,r&&Ir,s].filter(Boolean).join(" "),[s,E,A.isDevice,r]);return c.jsxs("div",{ref:g,id:m.current,className:Y,...a,children:[c.jsx(cs,{direction:"left",id:m.current,isDisabled:r||u,onKeyPress:T,onKeyUp:N,onMouseUp:_,onClick:x,onTapHold:S}),c.jsx("div",{ref:C,className:`${xi} sf-display-flex`,style:{overflowX:"hidden"},onScroll:ie,children:c.jsx("div",{className:Ii,children:i})}),c.jsx(cs,{direction:"right",id:m.current,isDisabled:r||p,onKeyPress:T,onKeyUp:N,onMouseUp:_,onClick:x,onTapHold:S})]})}));Mr.displayName="HScrollComponent";const cs=e.memo(({direction:o,id:n,isDisabled:s,onKeyPress:t,onKeyUp:r,onMouseUp:i,onClick:a,onTapHold:l})=>{const m=o==="right",u=`sf-${n}_nav ${as} ${m?ki:Pi}`,f=`${m?Pr:_r} ${kr} sf-icons`,p=e.useRef(null),h=e.useMemo(()=>({tapHold:l,tapHoldThreshold:500}),[l]);return Vt(p,h),c.jsx("div",{ref:p,className:`${u} ${s?Ir:""}`,role:"button",id:`${n}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":s?"true":"false",tabIndex:s?-1:0,onKeyDown:t,onKeyUp:r,onMouseUp:i,onTouchEnd:i,onContextMenu:E=>E.preventDefault(),onClick:a,children:c.jsx("div",{className:f,children:m?c.jsx(Tr,{}):c.jsx(Cr,{})})})});cs.displayName="NavIcon";const Mi="sf-vscroll",Hi="sf-rtl",Hr="sf-overlay",ji="sf-vscroll-bar",$i="sf-vscroll-content",jr="sf-vscroll-arrow",$r="sf-nav-up-arrow",Vr="sf-nav-down-arrow",us="sf-vscroll-nav",Vi="sf-scroll-up-nav",Wi="sf-scroll-down-nav",Fi="sf-scroll-device",Wr=e.memo(e.forwardRef((o,n)=>{const{className:s="",scrollStep:t=void 0,isDisabled:r=!1,children:i,...a}=o,l=e.useRef(t),m=e.useRef(jn("vscroll")),[u,f]=e.useState(!0),[p,h]=e.useState(!1),{dir:E}=$e(),g=e.useRef(null),C=e.useRef(null),D=e.useRef(null),P=e.useRef(null),R=e.useRef(!1),v=e.useRef(null),O=e.useMemo(()=>({isDevice:ye.isDevice}),[]),A={scrollStep:t,isDisabled:r};e.useEffect(()=>{(()=>{var U;typeof t!="number"||t<0?l.current=((U=C.current)==null?void 0:U.offsetHeight)||void 0:l.current=t})()},[t]);const V=e.useCallback((k,U)=>{C.current&&(U==="add"?C.current.scrollTop+=k:C.current.scrollTop-=k)},[]),L=e.useCallback((k,U,oe)=>{if(oe){V(k,U);return}const w=()=>{k<10?cancelAnimationFrame(10):(V(10,U),k-=10,requestAnimationFrame(w))};w()},[V]),y=e.useCallback((k,U,oe)=>{let J=U.classList;if(!J.contains(us)){const Q=U.closest("."+us);Q&&(U=Q)}const w=U.querySelector(`.${jr}`);w&&(J=w.classList),J.contains(Vr)?L(k,"add",oe):J.contains($r)&&L(k,"",oe)},[L]),S=e.useCallback(k=>{if(k){const U=k.originalEvent.target,oe=10,J=()=>{y(oe,U,!0)};P.current=window.setInterval(()=>{J()},50)}},[y]),T=e.useCallback(k=>{if(k.key==="Enter"){const U=()=>{R.current=!0,y(10,k.target,!0)};v.current=window.setTimeout(()=>{U()},100)}},[y]),N=e.useCallback(k=>{k.key==="Enter"&&(R.current?R.current=!1:k.target.click(),v.current&&clearTimeout(v.current))},[]),_=e.useCallback(()=>{clearInterval(P==null?void 0:P.current)},[]),x=e.useCallback(k=>{y(l.current,k.target,!1)},[y,l]),M=e.useCallback(k=>{k.preventDefault(),L(l.current,k.deltaY>0?"add":"",!1)},[L,l]),Z=e.useCallback(k=>{if(k&&C.current){const U=C.current;let oe=0;typeof k.velocity=="number"&&typeof k.distanceY=="number"&&(k.velocity<=1?oe=k.distanceY/(k.velocity*10):oe=k.distanceY/k.velocity);let J=.5;const w=()=>{const Q=Math.sin(J);Q<=0?cancelAnimationFrame(Q):(k.swipeDirection==="Up"?U.scrollTop+=oe*Q:k.swipeDirection==="Down"&&(U.scrollTop-=oe*Q),J-=.02,requestAnimationFrame(w))};w()}},[]),ie=e.useCallback(k=>{if(k){const U=C.current;if(U&&typeof k.distanceY=="number"){const oe=k.distanceY;k.scrollDirection==="Up"?U.scrollTop=U.scrollTop+oe:k.scrollDirection==="Down"&&(U.scrollTop=U.scrollTop-oe)}}},[]),pe=e.useCallback(k=>{const U=k.target,oe=U.offsetHeight;let J=U.scrollTop;J<=0&&(J=-J),J===0?(f(!0),h(!1),_()):Math.ceil(oe+J+.1)>=U.scrollHeight?(f(!1),h(!0),_()):(f(!1),h(!1))},[_]);e.useImperativeHandle(n,()=>({...A,element:g.current})),e.useEffect(()=>()=>{P.current&&clearInterval(P.current),v.current&&clearTimeout(v.current)},[]);const Y=e.useMemo(()=>({scroll:ie,swipe:Z}),[Z,ie]);D.current=Vt(g,Y);const H=e.useMemo(()=>["sf-control","sf-lib",Mi,E==="rtl"&&Hi,O.isDevice&&Fi,r&&Hr,s].filter(Boolean).join(" "),[s,E,O.isDevice,r]);return c.jsxs("div",{ref:g,id:a.id||m.current,className:H,...a,onWheel:M,children:[c.jsx(ds,{direction:"up",id:m.current,isDisabled:r||u,onKeyPress:T,onKeyUp:N,onMouseUp:_,onClick:x,onTapHold:S}),c.jsx("div",{ref:C,className:ji,tabIndex:-1,style:{overflow:"hidden"},onScroll:pe,children:c.jsx("div",{className:$i,children:i})}),c.jsx(ds,{direction:"down",id:m.current,isDisabled:r||p,onKeyPress:T,onKeyUp:N,onMouseUp:_,onClick:x,onTapHold:S})]})}));Wr.displayName="VScrollComponent";const ds=e.memo(({direction:o,id:n,isDisabled:s,onKeyPress:t,onKeyUp:r,onMouseUp:i,onClick:a,onTapHold:l})=>{const m=o==="down",u=`sf-${n}_nav ${us} ${m?Wi:Vi}`,f=`${m?Vr:$r} ${jr} sf-icons`,p=e.useRef(null),h=e.useMemo(()=>({tapHold:l,tapHoldThreshold:500}),[l]);return Vt(p,h),c.jsx("div",{ref:p,className:`${u} ${s?Hr:""}`,role:"button",id:`${n}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":s?"true":"false",tabIndex:s?-1:0,onKeyDown:t,onKeyUp:r,onMouseUp:i,onTouchEnd:i,onContextMenu:E=>E.preventDefault(),onClick:a,children:c.jsx("div",{className:f,children:m?c.jsx(Bn,{}):c.jsx(Sr,{})})})});ds.displayName="NavIcon";const Bi="sf-toolbar-items",Ui="sf-toolbar-multirow-items",Fr=e.memo(o=>{const{children:n,onOverflowChange:s}=o,t=e.useRef(null);return e.useEffect(()=>{const r=e.Children.count(n);(We(t.current)||t.current!==r)&&(t.current=e.Children.count(n),s())},[s,n]),c.jsx("div",{className:`${Bi} ${Ui}`,children:n})});Fr.displayName="ToolbarMultiRow";const sr="sf-toolbar-items",zi="sf-hscroll-bar",Yi="sf-vscroll-bar",Ki="sf-hscroll-content",Xi="sf-vscroll-content",Br=e.memo(e.forwardRef((o,n)=>{const{toolbarRef:s,orientation:t,scrollStep:r,children:i,className:a,onOverflowChange:l}=o,m=e.useRef(null),u=e.useRef(null),f=e.useRef(null),[p,h]=e.useState(!1),[E,g]=e.useState(r),C=e.useCallback(A=>A.querySelector("."+(t===Ze.Vertical?Xi:Ki)),[t]),D=e.useCallback(()=>{let A=!1;if(s.current&&ps(s.current)){let V=s.current.querySelector(`.${sr}`);V=p?C(V):V;const L=t===Ze.Vertical,y=L?s.current.offsetHeight:s.current.offsetWidth;(L?V.scrollHeight:V.scrollWidth)>y?A=!0:A=!1}return A},[p,t,C]),P=e.useCallback((A=!0)=>{if(s.current){f.current&&clearTimeout(f.current);const V=D();V!==p&&h(V),V&&A&&(f.current=window.setTimeout(()=>{if(s.current){const L=t===Ze.Vertical?`.${Yi}`:`.${zi}`,y=s.current.querySelector(L);y&&g(t===Ze.Vertical?y.offsetHeight:y.offsetWidth)}},500))}},[D,t,p]),R=e.useRef(P);e.useEffect(()=>{R.current=P},[P]);const v=e.useCallback(()=>{R.current()},[]);e.useEffect(()=>{if(s.current){let A=!0;m.current=new ResizeObserver(()=>{if(A){A=!1;return}R.current()}),m.current.observe(s.current)}return()=>{var A;(A=m.current)==null||A.disconnect(),m.current=null}},[]),e.useEffect(()=>{const A=e.Children.count(i);(We(u.current)||u.current!==A)&&(u.current=e.Children.count(i),l(),R.current(!1))},[i,l]),e.useEffect(()=>{l()},[p,l]),e.useImperativeHandle(n,()=>({refreshOverflow:v}),[v]);const O=e.useMemo(()=>{const A=[sr];return a&&A.push(a),A.join(" ")},[a]);return p?t===Ze.Horizontal?c.jsx(Mr,{scrollStep:E,className:O,children:i}):c.jsx(Wr,{scrollStep:E,className:O,children:i}):c.jsx("div",{className:O,children:i})}));Br.displayName="ToolbarScrollable";const qi="sf-toolbar-item",_t=e.memo(e.forwardRef((o,n)=>{const{className:s="",children:t,...r}=o,i=e.useRef(null),a=e.useMemo(()=>{const l=[qi];return s&&l.push(s),l.join(" ")},[s]);return e.useImperativeHandle(n,()=>({element:i.current})),c.jsx("div",{ref:i,className:a,...r,children:t})}));_t.displayName="ToolbarItem";const Gi="sf-toolbar-item",Zi="sf-toolbar-separator",Ur=e.memo(e.forwardRef((o,n)=>{const{className:s="",...t}=o,r=e.useRef(null),i=e.useMemo(()=>{const a=[Gi,Zi];return s&&a.push(s),a.join(" ")},[s]);return e.useImperativeHandle(n,()=>({element:r.current})),c.jsx("div",{ref:r,className:i,...t})}));Ur.displayName="ToolbarSeparator";const Ji="sf-toolbar-item",Qi="sf-toolbar-spacer",vs=e.memo(e.forwardRef((o,n)=>{const{className:s="",...t}=o,r=e.useRef(null),i=e.useMemo(()=>{const a=[Ji,Qi];return s&&a.push(s),a.join(" ")},[s]);return e.useImperativeHandle(n,()=>({element:r.current})),c.jsx("div",{ref:r,className:i,...t})}));vs.displayName="ToolbarSpacer";const kn="sf-toolbar-items",el="sf-popup-up-icon",tl="sf-popup-down-icon",nl="sf-popup-open",sl="sf-toolbar-hor-nav",rl="sf-nav-active",ol="sf-toolbar-popup-items",il="sf-hidden-popup",ll="sf-toolbar-extended-items",al="sf-extended-nav",cl="sf-toolbar-popup-overflow",Pn="sf-toolbar-separator",un="sf-toolbar-spacer",ns="sf-toolbar-item",ul="sf-toolbar-popup-icon sf-icon",zr=e.memo(e.forwardRef((o,n)=>{const{toolbarRef:s,orientation:t,overflowMode:r,isToolbarRefReady:i,children:a,className:l,collision:m,isPopupVisible:u,onPopupOpenChange:f,onOverflowChange:p}=o,h=e.useCallback(B=>e.Children.toArray(B).filter(K=>e.isValidElement(K)&&(K.type===_t||K.type===Ur||K.type===vs)).map((K,G)=>e.cloneElement(K,{key:K.key||G})),[]),E=e.useMemo(()=>h(a),[a,h]),g=e.useRef(null),C=e.useRef(e.Children.count(a)),D=e.useRef([...h(a)]),P=e.useRef([]),R=e.useRef(null),v=e.useRef(null),{dir:O}=$e(),[A,V]=e.useState([...D.current]),[L,y]=e.useState([]),[S,T]=e.useState(!1),[N,_]=e.useState(u),[x,M]=e.useState(!1),[Z,ie]=e.useState({maxHeight:""}),pe=e.useCallback(B=>{let K=0;return B&&(K=t===Ze.Vertical?B.offsetHeight:B.offsetWidth),K},[t]),Y=e.useCallback(B=>{let K=0;return B&&(K=t===Ze.Vertical?B.offsetTop:B.offsetLeft),K},[t]),H=e.useCallback(()=>R.current?pe(R.current):t===Ze.Horizontal?40:48,[pe,t]),k=e.useCallback(()=>s.current?s.current.offsetHeight:0,[r]),U=e.useCallback(()=>{let B=0;if(s.current){const K=window.getComputedStyle(s.current),G=parseFloat(K.width),b=parseFloat(K.borderRightWidth);B=G+b*2}return B},[]),oe=e.useCallback(()=>{var B;if(s.current&&((B=v.current)!=null&&B.element)){const K=v.current.element,G=s.current,b=K.offsetTop+K.offsetHeight+(G.getBoundingClientRect().top||0),z=window.scrollY||0;if(t===Ze.Horizontal&&window.innerHeight+z<b&&G.offsetTop<K.offsetHeight&&r===ze.Popup){let te=K.offsetHeight-(b-window.innerHeight-z+5);for(let ue=0;ue<K.childElementCount;ue++){const Ce=K.children[parseInt(ue.toString(),10)];if(Ce.offsetTop+Ce.offsetHeight>te){te=Ce.offsetTop;break}}ie(ue=>({...ue,maxHeight:`${te}px`}))}else if(t===Ze.Vertical){const te=G.getBoundingClientRect();ie(ue=>({...ue,maxHeight:`${te.top+G.offsetHeight}px`,bottom:"0"}))}}},[r,t]),J=e.useCallback(()=>{_(!1),ie({maxHeight:""})},[]),w=e.useCallback(B=>{if(s.current&&B&&ps(s.current)){const K=[...A],G=[...L],b=Array.from(B.children),z=pe(s.current),te=window.getComputedStyle(B),ue=parseInt(t===Ze.Vertical?te.paddingTop:te.paddingLeft,10);if(O==="rtl"&&t===Ze.Horizontal){const Ce=parseInt(te.gap,10)||0,j=b.length;let ae=0;b.forEach(W=>{ae+=pe(W)}),ae+=ue*2+Ce*(j-1);const Ne=ae>z,ce=G.length>0||Ne?H():0,ve=z-ce;if(ae>ve){let W=ae;for(let X=j-1;X>=0;X--){const de=b[parseInt(X.toString(),10)];if(W>ve||de.classList.contains(Pn)){const Ee=pe(de);W-=Ee+(X===0?0:Ce),G.unshift(K[parseInt(X.toString(),10)]),K.pop()}else break}}}else{let Ce=pe(b[b.length-1]),j=Y(b[b.length-1]);const ae=j+Ce+ue>z,Ne=G.length>0||ae?H():0,ce=z-Ne;for(let ve=b.length-1;ve>=0;ve--){const W=b[parseInt(ve.toString(),10)];if(Ce=pe(W),j=Y(W),j+Ce+ue>ce||W.classList.contains(Pn))G.unshift(K[parseInt(ve.toString(),10)]),K.pop();else break}}D.current=K,P.current=G}},[t,pe,Y,H,A,L,O]),Q=e.useCallback(()=>{A!==D.current&&(V(B=>B.length!==D.current.length?[...D.current]:B),y(B=>B.length!==P.current.length?[...P.current]:B))},[A]),ne=e.useCallback(()=>{if(s.current&&!x){const B=s.current.querySelector(`.${kn}`);r===ze.Popup&&_(K=>K&&!1),w(B),Q(),M(P.current.length>0)}},[w,x,Q,r]),se=e.useRef(ne);e.useLayoutEffect(()=>{se.current=ne},[ne]);const le=e.useCallback(B=>{let K=0;if(B){const G=Array.from(B.children),b=window.getComputedStyle(B),z=parseInt(b.gap,10)||0,te=parseInt(t===Ze.Vertical?b.paddingTop:b.paddingLeft,10);G.forEach(ue=>{K+=(ue.classList.contains(un)?0:pe(ue))+z}),G.length>0&&(K-=z),K+=te*2}return K},[pe,t]),Re=e.useCallback((B,K)=>{var Ce;const G=[].slice.call(K.querySelectorAll(`.${ns}`)),b=[...A],z=[...L],te=(Ce=s.current)==null?void 0:Ce.querySelector(`.${kn}`),ue=parseInt(window.getComputedStyle(te).gap,10)||0;for(let j=0;j<G.length;j++){const ae=G[parseInt(j.toString(),10)],Ne=ae.classList.contains(un),ce=b.length>0,ve=(Ne?0:pe(ae))+(ce?ue:0);let W=B>ve;if(Ne||ae.classList.contains(Pn)){let X=ve,de=j+1;for(;de<G.length;){const Ee=G[parseInt(de.toString(),10)],Se=Ee.classList.contains(un);if(X+=(Se?0:pe(Ee))+(ce?ue:0),!Ee.classList.contains(un)&&!Ee.classList.contains(Pn))break;de++}W=B>X}if(W)b.push(z[0]),z.shift(),B-=ve;else break}D.current=b,P.current=z},[pe,A,L]),Pe=e.useCallback(()=>{var B;if(s.current&&((B=v.current)!=null&&B.element)){const K=s.current.querySelector(`.${kn}`),G=pe(K),b=le(K),z=G-b,te=parseInt(window.getComputedStyle(K).gap,10)||0,ue=pe(v.current.element.querySelector(`.${ns}`))+te,Ce=z>ue,j=[].slice.call(v.current.element.querySelectorAll(`.${ns}`));let ae=0;j.forEach(ce=>{ae+=ce.classList.contains(un)?0:pe(ce)}),ae+=j.length*te,z+H()>ae?(D.current=[...E],P.current=[]):Ce&&Re(z,v.current.element)}},[pe,le,Re]),Ue=e.useCallback(()=>{r===ze.Popup&&N&&_(!1)},[r,N]),I=()=>{_(B=>!B)},q=e.useCallback(()=>{ne()},[ne]);e.useEffect(()=>{if(r===ze.Popup||r===ze.Extended){const B=K=>{if(r===ze.Popup&&v.current&&v.current.element){const G=!Tt(K.target,".sf-popup"),b=v.current.element.classList.contains(nl);G&&b&&_(!1)}};return document.addEventListener("click",B),document.addEventListener("scroll",B,!0),()=>{document.removeEventListener("click",B),document.removeEventListener("scroll",B,!0)}}},[r]),e.useEffect(()=>{f(N)},[N,f]),e.useEffect(()=>{_(B=>B!==u?u:B)},[u]),e.useEffect(()=>{p()},[A,p]),e.useLayoutEffect(()=>{s.current&&i&&!S&&(se.current(),T(!0))},[i,S]),e.useEffect(()=>{if(s.current){let B=!0;return g.current||(g.current=new ResizeObserver(()=>{if(B){B=!1;return}se.current()}),g.current.observe(s.current)),()=>{var K;(K=g.current)==null||K.disconnect(),g.current=null}}},[]),e.useLayoutEffect(()=>{x&&(Pe(),Q(),_(B=>B&&P.current.length<=0?!1:B),M(!1))},[x,Pe,Q]),e.useLayoutEffect(()=>{if(!S)return;const B=E.length;if(C.current!==B){C.current=B,D.current=[...E],P.current=[],V([...D.current]),y([]),_(!1),T(!1);return}const G=new Map(E.map(z=>[z.key,z])),b=z=>z.map(te=>G.get(te.key)||te);V(b),y(b)},[E,S]),e.useImperativeHandle(n,()=>({refreshOverflow:q}),[q]);const me=e.useMemo(()=>{const B=[kn];return L.length>0&&B.push(cl),B.join(" ")},[L]),ee=e.useMemo(()=>{const B=[sl];return r===ze.Extended&&B.push(al),N&&B.push(rl),B.join(" ")},[r,N]),fe=e.useMemo(()=>{const B=[ol];return r===ze.Extended&&B.push(ll),l&&B.push(l),x&&B.push(il),B.join(" ")},[r,l,x]);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:me,children:A}),L.length>0&&c.jsx("div",{ref:R,className:ee,tabIndex:0,role:"button","aria-haspopup":"true","aria-label":"overflow","aria-expanded":N?"true":"false",onClick:I,children:c.jsx("div",{className:`${N?el:tl} ${ul}`,children:N?c.jsx(Sr,{}):c.jsx(Bn,{})})}),L.length>0&&c.jsx(At,{ref:v,className:fe,relateTo:s.current,offsetY:t===Ze.Vertical?0:k(),open:N,onOpen:oe,onClose:J,targetType:"container",collision:{Y:m?ot.None:ot.None,X:ot.None},position:O==="rtl"?{X:"left",Y:"top"}:{X:"right",Y:"top"},width:r===ze.Extended&&t===Ze.Horizontal?U():void 0,offsetX:r===ze.Extended&&t===Ze.Horizontal?0:void 0,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},style:Z,onClick:Ue,children:L})]})}));zr.displayName="ToolbarPopup";var ze;(function(o){o.Scrollable="Scrollable",o.Popup="Popup",o.MultiRow="MultiRow",o.Extended="Extended"})(ze||(ze={}));const dl="sf-toolbar",fl="sf-toolbar-vertical",ml="sf-toolbar-items",pl="sf-rtl",rr="sf-hscroll-nav",dn="sf-toolbar-hor-nav",ss="sf-toolbar-popup-items",hl="sf-toolbar-extended",El="sf-toolbar-multirow",gl="sf-tbar-extended",Tl="sf-toolbar-popup",Yr=e.memo(e.forwardRef((o,n)=>{const{keyboardNavigation:s=!0,children:t,className:r="",collision:i=!0,orientation:a=Ze.Horizontal,overflowMode:l=ze.Scrollable,scrollStep:m=void 0,...u}=o,f=e.useRef(null),p=e.useRef({toolbar:[],popup:[]}),h=e.useRef(null),E=e.useRef(null),g=e.useRef(null),{dir:C}=$e(),[D,P]=e.useState(!1),[R,v]=e.useState(!1),O=e.useCallback(w=>w.hasAttribute("disabled")||w.getAttribute("aria-disabled")==="true"||w.classList.contains("sf-disabled"),[]),A=e.useCallback((w,Q,ne)=>{if(!w.length)return-1;const se=w.length;let le=Q,Re=0;for(;Re<se;){if(le=(le+ne+se)%se,!O(w[le]))return le;Re++}return-1},[O]),V=e.useCallback(()=>{if(s&&f.current){const w=se=>f.current?Array.from(f.current.querySelectorAll(`.${se} .sf-btn`)):[];p.current.toolbar=w(ml),(l===ze.Extended||l===ze.Popup)&&(p.current.popup=w(ss));let Q=0;h.current&&(Q=p.current.toolbar.indexOf(h.current),Q=Q===-1?0:Q);const ne=[...p.current.toolbar,...p.current.popup];Q>=0&&Q<ne.length&&O(ne[Q])&&(Q=A(ne,-1,1)),ne.forEach((se,le)=>{se.tabIndex=le===Q?0:-1,le===Q&&(h.current=se)})}},[s,l,O,A]),L=e.useCallback(w=>{const Q=!!Tt(w,"."+ss);return{isToolbar:!Q,items:Q?p.current.popup:p.current.toolbar,currentIndex:Q?p.current.popup.indexOf(w):p.current.toolbar.indexOf(w)}},[]),y=e.useCallback(w=>!We(Tt(w,"."+ss)),[]),S=e.useCallback(w=>!We(Tt(w,"."+dn)),[]),T=e.useCallback((w,Q)=>{const ne=Q?p.current.toolbar:p.current.popup;if(w>-1&&w<ne.length){ne.forEach(le=>{le.tabIndex=-1});const se=ne[parseInt(w.toString(),10)];se.tabIndex=0,se.focus(),Q&&(h.current=se)}},[]),N=e.useCallback((w,Q)=>{const{isToolbar:ne,items:se,currentIndex:le}=L(w);if(!se.length)return;let Re;switch(Q){case"next":Re=A(se,le,1);break;case"previous":Re=A(se,le,-1);break;case"first":Re=A(se,-1,1);break;case"last":Re=A(se,se.length,-1);break}Re!==-1&&T(Re,ne)},[L,T,A]),_=e.useCallback((w,Q)=>{if(a===Ze.Horizontal){const ne=w.classList.contains(dn),se=w.classList.contains(rr);if(Q==="ArrowRight"&&f.current===w){T(0,!0);return}(Q==="ArrowRight"||Q==="ArrowLeft")&&!ne&&!se&&N(w,Q==="ArrowRight"?"next":"previous")}},[T,N,a]),x=e.useCallback((w,Q)=>{const ne=a===Ze.Vertical,se=y(w),le=S(w);Q==="ArrowUp"&&!le&&(ne||se)?N(w,"previous"):Q==="ArrowDown"&&(le&&R&&p.current.popup.length>0?T(0,!1):(ne||se)&&N(w,"next"))},[y,S,R,T,N,a]),M=e.useCallback((w,Q)=>{N(w,Q==="Home"?"first":"last")},[N]),Z=e.useCallback(w=>{const Q=w.classList.contains(dn),ne=w.classList.contains(rr),se=f.current;if(!ne&&!Q&&se===w&&p.current.toolbar)if(h.current&&!O(h.current))h.current.focus();else{const le=A(p.current.toolbar,-1,1);le!==-1&&T(le,!0)}},[T,O,A]),ie=e.useCallback(w=>{w.classList.contains(dn)&&v(ne=>!ne)},[]),pe=e.useCallback(()=>{l===ze.Popup&&R&&v(!1)},[R,l]),Y=e.useCallback(w=>{if(!f.current||!s||["INPUT","TEXTAREA","SELECT"].includes(w.target.tagName))return;const Q=w.target;w.preventDefault();const se={ArrowRight:()=>_(Q,w.key),ArrowLeft:()=>_(Q,w.key),ArrowUp:()=>x(Q,w.key),ArrowDown:()=>x(Q,w.key),Home:()=>M(Q,w.key),End:()=>M(Q,w.key),Tab:()=>Z(Q),Enter:()=>ie(Q),Escape:()=>pe()}[w.key];se&&se()},[s,_,x,M,Z,ie,pe]),H=e.useCallback(w=>{if(!s||["INPUT","TEXTAREA","SELECT"].includes(w.target.tagName))return;const Q=l===ze.Popup&&R;w.key==="Tab"&&w.target.classList.contains(dn)&&Q&&v(!1),(w.key==="ArrowDown"||w.key==="ArrowUp"||w.key==="End"||w.key==="Home")&&w.preventDefault()},[s,l,R]),k=e.useCallback(w=>{v(w)},[]),U=e.useCallback(()=>{l===ze.Scrollable&&E.current?E.current.refreshOverflow():(l===ze.Popup||l===ze.Extended)&&g.current&&g.current.refreshOverflow()},[l]);e.useLayoutEffect(()=>{Ot("toolbar"),P(!0)},[]);const oe=e.useMemo(()=>{const w=["sf-control",dl,"sf-lib"];switch(C==="rtl"&&w.push(pl),l){case ze.MultiRow:w.push(El);break;case ze.Popup:w.push(Tl);break;case ze.Extended:w.push(hl),R&&w.push(gl);break}return a===Ze.Vertical&&w.push(fl),r&&w.push(r),w.join(" ")},[r,C,a,R,l]),J={keyboardNavigation:s,collision:i,orientation:a,overflowMode:l,scrollStep:m};return e.useImperativeHandle(n,()=>({...J,refreshOverflow:U,element:f.current})),c.jsx("div",{ref:f,className:oe,role:"toolbar","aria-orientation":a.toLowerCase(),onKeyDown:H,onKeyUp:Y,...u,children:(()=>{switch(l){case ze.Scrollable:return c.jsx(Br,{ref:E,toolbarRef:f,orientation:a,scrollStep:m,onOverflowChange:V,className:r,children:t},`scrollable-${a}-toolbar`);case ze.MultiRow:return c.jsx(Fr,{onOverflowChange:V,children:t});case ze.Popup:case ze.Extended:return c.jsx(zr,{ref:g,toolbarRef:f,isToolbarRefReady:D,orientation:a,overflowMode:l,collision:i,isPopupVisible:R,onPopupOpenChange:k,onOverflowChange:V,className:r,children:t},`${l===ze.Popup?"popup":"extended"}-${a}-toolbar`)}})()})}));Yr.displayName="Toolbar";const Kr=e.forwardRef((o,n)=>{var I,q,me;const{children:s,className:t="",icon:r,iconPosition:i=Ke.Left,items:a=[],popupWidth:l="auto",animation:m={show:{name:"SlideDown",duration:100,timingFunction:"ease"},hide:{name:"SlideUp",duration:100,timingFunction:"ease"}},disabled:u=!1,lazyOpen:f=!1,itemTemplate:p,target:h,relateTo:E,color:g,variant:C,size:D=Mt.Medium,onClose:P,onOpen:R,onSelect:v,...O}=o,A=e.useRef(null),V=e.useRef(null),L=e.useRef(null),y=e.useRef([]),[S,T]=e.useState(null),[N,_]=e.useState(!1),[x,M]=e.useState(a),{dir:Z}=$e(),[ie,pe]=e.useState(!1);e.useEffect(()=>{pe(!0)},[]);const Y=e.useRef(!0),H=e.useCallback((ee,fe)=>{ee.disabled||(_(!1),v&&v({event:fe,item:ee}))},[v]),k=(ee,fe)=>{Y&&fe(B=>ee.length!==B.length||ee.some((G,b)=>{const z=B[b];return G.id!==(z==null?void 0:z.id)||G.text!==(z==null?void 0:z.text)||G.url!==(z==null?void 0:z.url)||G.disabled!==(z==null?void 0:z.disabled)||typeof G.icon=="string"?G.icon!==(z==null?void 0:z.icon):!e.isValidElement(G.icon)})?ee:B)};e.useEffect(()=>(k(a,M),()=>{Y.current=!1}),[a]),e.useEffect(()=>{Ot("dropDownButton")},[]);const U=e.useMemo(()=>x.map((ee,fe)=>!ee.disabled&&!ee.hasSeparator?fe:-1).filter(ee=>ee>=0),[x]),oe=e.useCallback((ee,fe)=>{const B=U.length;if(!B)return-1;const K=U.indexOf(ee);if(K<0)return U[fe?0:B-1];const G=(K+(fe?1:-1)+B)%B;return U[G]},[U]),J=e.useCallback(ee=>ee!=null&&U.includes(ee)?ee:null,[U]),w=e.useCallback(ee=>{var B;const fe=J(ee);T(fe),fe!=null&&((B=y.current[fe])==null||B.focus())},[J]);e.useEffect(()=>{T(ee=>J(ee))},[x,J]),e.useEffect(()=>{const ee=B=>{var z,te;const K=(z=A.current)==null?void 0:z.element,G=(te=V.current)==null?void 0:te.element,b=B.target;K&&G&&!K.contains(b)&&!G.contains(b)&&(_(!1),P&&N&&P(B))},fe=B=>{var K,G;((B.altKey||B.metaKey)&&B.key==="ArrowUp"||B.key==="Escape"||B.key==="Esc")&&(B.preventDefault(),B.stopPropagation(),_(!1),P==null||P(B),(G=(K=A.current)==null?void 0:K.element)==null||G.focus())};return N&&(document.addEventListener("mousedown",ee),document.addEventListener("keydown",fe)),()=>{document.removeEventListener("mousedown",ee),document.removeEventListener("keydown",fe)}},[N,P]);const Q={iconPosition:i,icon:r,target:h,popupWidth:l,items:a,lazyOpen:f,relateTo:E,itemTemplate:p,color:g,variant:C,size:D},ne=((I=m.show)==null?void 0:I.name)!==void 0?{name:(q=m.show)==null?void 0:q.name,duration:m.show.duration,timingFunction:m.show.timingFunction}:null,se=ee=>{var fe,B;if(N)_(!1),P&&P(ee);else{if(ne){const G=Ut(ne);if(G.animate){const b=(B=(fe=V.current)==null?void 0:fe.element)==null?void 0:B.children[0];b&&G.animate(b,{begin:z=>{const te=z==null?void 0:z.element;if(te&&te.parentElement){const ue=te.parentElement,Ce=ue.style.display;ue.style.display="block",ue.style.maxHeight=ue.offsetHeight+"px",ue.style.display=Ce}}})}}_(!0),R&&R(ee);const K=J(S);w(K)}};e.useImperativeHandle(n,()=>{var ee;return{...Q,toggle:se,element:(ee=A.current)==null?void 0:ee.element}},[Q]);const le=e.useCallback(ee=>{var fe,B,K,G;switch(ee.key){case"ArrowDown":{if(ee.preventDefault(),ee.stopPropagation(),ee.altKey||ee.metaKey)se(ee);else{const b=oe(S??-1,!0);w(b)}break}case"ArrowUp":{if(ee.preventDefault(),ee.stopPropagation(),ee.altKey||ee.metaKey)_(!1),P==null||P(ee),(B=(fe=A.current)==null?void 0:fe.element)==null||B.focus();else{const b=oe(S??-1,!1);w(b)}break}case"Home":{N&&(ee.preventDefault(),w(U[0]??null));break}case"End":{N&&(ee.preventDefault(),w(U[U.length-1]??null));break}case"Enter":case" ":{if(ee.preventDefault(),N){const b=J(S);b!=null&&H(x[b],ee)}else se(ee);break}case"Escape":case"Esc":{ee.preventDefault(),N&&(_(!1),P==null||P(ee),(G=(K=A.current)==null?void 0:K.element)==null||G.focus());break}}},[N,S,U,oe,J,se,_,P,A,w,H,x]),Re=e.useCallback(ee=>{if(p)return p(ee);const fe=c.jsxs(c.Fragment,{children:[ee.icon&&c.jsx("span",{className:"sf-menu-icon",children:typeof ee.icon=="string"?c.jsx("span",{className:ee.icon}):ee.icon}),c.jsx("span",{children:ee.text})]});return ee.url?c.jsx("a",{href:ee.url,className:"sf-menu-link",children:fe}):fe},[p]),Pe=e.useCallback((ee,fe)=>{fe.stopPropagation();const B=fe.currentTarget,K=y.current.findIndex(G=>G===B);w(K),H(ee,fe)},[H,w]),Ue=e.useCallback(()=>c.jsx("ul",{role:"menu",tabIndex:0,"aria-label":"dropdown menu",ref:L,onKeyDown:le,onMouseDown:ee=>ee.preventDefault(),children:x.map((ee,fe)=>{const B=S===fe,K=`sf-item sf-ellipsis ${ee.hasSeparator?"sf-separator":""} ${ee.disabled?"sf-disabled":""} ${B?"sf-focused":""}`;return c.jsx("li",{ref:G=>{y.current[fe]=G},className:K,role:ee.hasSeparator?"separator":"menuitem","aria-label":ee.text,"aria-disabled":ee.disabled?"true":"false",onClick:ee.disabled||ee.hasSeparator?void 0:G=>Pe(ee,G),children:!ee.hasSeparator&&Re(ee)},ee.id||`item-${fe}`)})}),[x,Re,Pe,S,w,le]);return c.jsxs(c.Fragment,{children:[c.jsx(nt,{ref:A,className:`${t} sf-dropdown-btn sf-drp-btn-${D.toLowerCase().substring(0,2)} ${N?"sf-active":""}`,icon:r,color:g,dropIcon:!0,variant:C,size:D,iconPosition:i,disabled:u,onKeyDown:le,onClick:ee=>{ee.preventDefault(),se(ee)},"aria-haspopup":"true","aria-expanded":N?"true":"false",...O,children:s}),ie&&(N||!f)&&typeof document<"u"&&jt.createPortal(c.jsx(At,{open:N,ref:V,targetRef:h||A.current,relateTo:E||((me=A.current)==null?void 0:me.element),position:{X:"left",Y:"bottom"},animation:m,collision:Z==="rtl"?{X:ot.Fit,Y:ot.Flip}:{X:ot.Flip,Y:ot.Flip},width:l,className:`sf-dropdown-popup sf-drp-btn-${D.toLowerCase().substring(0,2)} ${l!=="auto"?"sf-dropdown-popup-width":""}`,onClose:()=>{var ee;_(!1),(ee=A.current)!=null&&ee.element&&A.current.element.focus()},onOpen:()=>{var ee;(ee=L.current)==null||ee.focus()},children:Ue()}),document.body)]})});e.memo(Kr);const Xr=o=>{const{onClick:n,ariaLabel:s,title:t,disabled:r=!1,icon:i=c.jsx(No,{}),text:a,color:l,variant:m,className:u}=o,{locale:f}=$e(),{getString:p}=st(f||"en-US");return ye.isDevice?c.jsx(nt,{icon:i,color:l||Ct.Secondary,variant:m||Qe.Standard,className:u||d.TODAY_BUTTON,onClick:n,"aria-label":s||p("today"),title:t||p("today"),disabled:r}):c.jsx(nt,{icon:i,variant:m||Qe.Outlined,color:l||Ct.Secondary,className:u||d.TODAY_BUTTON,onClick:n,"aria-label":s||p("today"),title:t,disabled:r,children:a||p("today")})},qr=o=>{const{onClick:n,ariaLabel:s,title:t,disabled:r=!1,icon:i=c.jsx(Cr,{}),color:a,variant:l,className:m}=o,{locale:u}=$e(),{getString:f}=st(u||"en-US");return c.jsx(nt,{className:m||d.PREVIOUS_ICON,icon:i,color:a||Ct.Secondary,variant:l||Qe.Standard,onClick:n,"aria-label":s||f("previous"),title:t,disabled:r})},Gr=o=>{const{onClick:n,ariaLabel:s,title:t,disabled:r=!1,icon:i=c.jsx(Tr,{}),color:a,variant:l,className:m}=o,{locale:u}=$e(),{getString:f}=st(u||"en-US");return c.jsx(nt,{className:m||d.NEXT_ICON,icon:i,color:a||Ct.Secondary,variant:l||Qe.Standard,onClick:n,"aria-label":s||f("next"),title:t,disabled:r})},Cl=(o,n)=>{const{onClick:s,ariaLabel:t,title:r,disabled:i=!1,dateRangeContent:a,showCalendar:l=!1,ariaExpanded:m,color:u,variant:f,icon:p=c.jsx(Bn,{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true"}),onKeyDown:h,className:E}=o;return c.jsx(nt,{ref:n,onClick:g=>{g.stopPropagation(),s==null||s(g)},"aria-haspopup":"dialog","aria-label":t,"aria-expanded":m!==void 0?m:l,className:E||d.DATEPICKER_BUTTON,color:u||Ct.Secondary,variant:f||Qe.Standard,iconPosition:Ke.Right,title:r,disabled:i,onKeyDown:h,icon:p,children:a})},ys=e.forwardRef(Cl);ys.displayName="DateRangeButton";const Zr=o=>{var p;const{items:n,currentView:s,onSelect:t,ariaLabel:r,title:i,disabled:a=!1,className:l,variant:m=Qe.Outlined,color:u=Ct.Secondary}=o,f=((p=n.find(h=>h.id===s))==null?void 0:p.text)||s;return c.jsx("div",{onClick:h=>h.stopPropagation(),children:c.jsx(Kr,{items:n,variant:m,className:l||d.VIEW_BUTTON,color:u,onSelect:t,"aria-label":r,title:i,disabled:a,children:f})})};Xr.displayName="TodayButton";qr.displayName="PreviousButton";Gr.displayName="NextButton";Zr.displayName="ViewButton";const Dl=({view:o,availableViews:n,onViewButtonClick:s,onPreviousClick:t,onNextClick:r,onTodayClick:i,onDateDropdownClick:a,dateRangeText:l,showCalendar:m=!1,selectedDate:u=new Date,firstDayOfWeek:f=0,calendarView:p=Hn.Month,handleCalendarChange:h,renderDates:E,customizeHeader:g})=>{var _,x;const C=e.useRef(null),D=e.useRef(null);Ds(D,!!m,()=>{m&&a&&a()});const P=(n||[]).map(M=>({id:M.name,text:M.displayName})),R=e.useCallback(M=>{var ie;const Z=(ie=M.item)==null?void 0:ie.id;Z&&s(Z)},[s]),v=P.map(M=>`${M.id}:${M.text}`).join("|"),A=E&&E.length>=2?`${(_=E[0])==null?void 0:_.toDateString()} - ${(x=E[E.length-1])==null?void 0:x.toDateString()}`:l;let V=l;const L=M=>[M.today,M.previous,M.next,M.dateRange,c.jsx(vs,{},"spacer"),M.viewSwitcher].filter(Boolean),y=M=>{var Z;return{today:(M==null?void 0:M.todayProps)!==null&&c.jsx(_t,{children:c.jsx(Xr,{onClick:i,...(M==null?void 0:M.todayProps)||{}})},"today"),previous:(M==null?void 0:M.previousProps)!==null&&c.jsx(_t,{children:c.jsx(qr,{onClick:t,...(M==null?void 0:M.previousProps)||{}})},"previous"),next:(M==null?void 0:M.nextProps)!==null&&c.jsx(_t,{children:c.jsx(Gr,{onClick:r,...(M==null?void 0:M.nextProps)||{}})},"next"),dateRange:(M==null?void 0:M.dateRangeProps)!==null&&c.jsx(_t,{children:c.jsx(ys,{ref:C,onClick:a,ariaLabel:A,dateRangeContent:V,showCalendar:m,onKeyDown:ie=>{ie.key==="Escape"&&m&&(a==null||a())},...(M==null?void 0:M.dateRangeProps)||{}})},"dateRange"),viewSwitcher:(M==null?void 0:M.viewSwitcherProps)!==null&&((n==null?void 0:n.length)??0)>1&&c.jsx(_t,{children:c.jsx(Zr,{items:P,currentView:o,onSelect:R,ariaLabel:((Z=n==null?void 0:n.find(ie=>ie.name===o))==null?void 0:Z.displayName)??o,...(M==null?void 0:M.viewSwitcherProps)||{}})},"viewSwitcher")}};let S,T=ze.Popup;const N=y();if(g){const M=g({}),Z=e.isValidElement(M)?M.props:{},ie=y(Z),pe={overflowMode:(Z==null?void 0:Z.overflowMode)??ze.Popup,today:ie.today,previous:ie.previous,next:ie.next,dateRange:ie.dateRange,viewSwitcher:ie.viewSwitcher,children:L(ie)},Y=g(pe);if(Y&&e.isValidElement(Y)){const H=Y.props;if(T=(H==null?void 0:H.overflowMode)??ze.Popup,H!=null&&H.dateRangeTemplate&&E&&E.length>=2&&(V=H.dateRangeTemplate({startDate:E[0],endDate:E[E.length-1],view:o})),H!=null&&H.children)H.children===pe.children?S=L(y(H)):S=H.children;else{const k=y(H);S=L(k)}}else S=L(N)}else S=L(N);return c.jsxs("div",{ref:D,className:d.SCHEDULER_TOOLBAR_CONTAINER,children:[c.jsx(Yr,{overflowMode:T,style:{width:"auto"},children:S},`tb-${v}-${l}`),m&&C.current&&c.jsx(At,{open:!0,relateTo:C.current.element,position:{X:"left",Y:"bottom"},collision:{X:ot.Fit,Y:ot.None},actionOnScroll:Dr.Hide,onClose:a,className:d.CALENDAR_POPUP_CONTAINER,viewPortElementRef:D,onKeyDown:M=>{M.key==="Escape"&&(a==null||a())},children:c.jsx(wo,{className:d.SCHEDULER_CALENDAR,value:u,onChange:h,showTodayButton:!0,firstDayOfWeek:f,start:p,depth:p})})]})};ys.__docgenInfo={description:"DateRange button component",methods:[],displayName:"DateRangeButton"};const Jr=(o,n,s)=>{const[t,r]=e.useState(!1),[i,a]=e.useState(null),l=vl(t),m=e.useRef(null),u=e.useRef(null),f=e.useRef(null),p=e.useRef(null),h=e.useCallback(()=>{r(!1)},[s]);Qr(h),e.useEffect(()=>{i&&(u.current=i.closest(".sf-scheduler"))},[i]);const E=e.useCallback(O=>{l&&typeof l=="object"&&"current"in l&&(l.current=O),m.current=O},[l]),g=e.useCallback(()=>{var O,A;(O=f.current)==null||O.hide(),(A=p.current)==null||A.hide()},[]),C=e.useCallback((O,A)=>{var V;(V=f.current)==null||V.handleCellClick(O,A)},[]),D=e.useCallback((O,A)=>{var V;(V=f.current)==null||V.handleEventClick(O,A)},[]),P=e.useCallback(()=>{g()},[]),R=e.useCallback(O=>{o&&o(O),!O.cancel&&O&&O.element&&(O.nativeEvent&&O.nativeEvent.stopPropagation(),C(O,O.element))},[o,C]),v=e.useCallback(O=>{n&&n(O),!O.cancel&&O&&O.data&&O.event.currentTarget&&D(O.data,O.event.currentTarget)},[n,D]);return{visible:t,setVisible:r,target:i,setTarget:a,containerRef:l,popupElement:m,schedulerElement:u,handleClose:h,handleRef:E,cellEditRef:f,eventEditRef:p,handleCellClick:C,handleEventClick:D,handleEditEvent:P,closeAllPopups:g,onCellClickHandler:R,onEventClickHandler:v}},Qr=o=>{e.useEffect(()=>{const n=s=>{s.key==="Escape"&&o()};return document==null||document.addEventListener("keydown",n),()=>{document==null||document.removeEventListener("keydown",n)}},[o])},vl=o=>{const n=e.useRef(null),s=e.useRef(null);return e.useEffect(()=>{if(o&&n.current){s.current=document==null?void 0:document.activeElement;const t=n.current.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'),r=t[0],i=t[t.length-1],a=l=>{i&&(document==null?void 0:document.activeElement)===i&&!l.shiftKey&&(l.preventDefault(),r.focus()),r&&(document==null?void 0:document.activeElement)===r&&l.shiftKey&&(l.preventDefault(),i.focus())};return document==null||document.addEventListener("keydown",a),()=>{var l;document==null||document.removeEventListener("keydown",a),(l=s.current)!=null&&l.focus&&s.current.focus()}}return()=>{}},[o]),n};class dt{static calculateEventPosition(n,s,t,r){const i=n.event.isAllDay&&n.event.isBlock?"0px":this.calculateTopPosition(n.startDate,s,t),a=this.calculateHeight(n,s,t,r);let l=96,m=n.event.isBlock?"1px":"0%";n.totalOverlapping>1&&(l=(l-n.totalOverlapping)/n.totalOverlapping,m=`${n.positionIndex*l+n.positionIndex}%`);const u=n.event.isBlock?"calc(100% - 2px)":`${l}%`;return{top:i,height:a,width:u,left:m}}static getOverflowDirection(n,s,t,r){var E,g;if(!n.totalSegments&&!t&&!r||!((E=n.event)!=null&&E.startTime)||!((g=n.event)!=null&&g.endTime)||!(s!=null&&s.length))return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:!1,isOverflowBottom:!1};const i=F.normalizeDate(n.event.startTime),a=F.normalizeDate(n.event.endTime),l=F.normalizeDate(s[0]),m=F.normalizeDate(s[s.length-1]);let u=n.isFirstDay===!1,f=n.isLastDay===!1;if(!i||!a||!l||!m)return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:u,isOverflowBottom:f};const p=i.getTime()<l.getTime(),h=a.getTime()>m.getTime();return t&&r&&(i.setHours(t[0],t[1],0,0),a.setHours(r[0],r[1],0,0),!u&&i>n.event.startTime&&(u=!0),!f&&a<n.event.endTime&&(f=!0)),{isOverflowLeft:p,isOverflowRight:h,isOverflowTop:u,isOverflowBottom:f}}static calculatePositionStyles(n,s,t,r,i){return n.totalSegments?{top:`${n.positionIndex*(Wn+pn)}px`,width:this.calculateEventWidth(n,s)}:!n.event.isBlock&&n.positionIndex!==void 0&&(n.event.isAllDay||n.isMonthEvent)?{top:`${n.positionIndex*(Wn+pn)}px`}:t&&r&&i?this.calculateEventPosition(n,t,r,i):{}}static calculateTopPosition(n,s,t){const r=F.getStartEndHours(t),i=r.getHours()*Xe+r.getMinutes(),l=n.getHours()*Xe+n.getMinutes()-i,u=ir/(s.interval/s.slotCount),f=l*u;return`${Math.max(0,f)}px`}static calculateHeight(n,s,t,r){const i=new Date(n.startDate),a=new Date(n.endDate);n.event.isBlock&&n.event.isAllDay&&(i.setHours(0,0,0,0),a.setDate(a.getDate()+1),a.setHours(0,0,0,0));const l=s.interval/s.slotCount,{schedulerStartMinutes:m,schedulerEndMinutes:u}=F.getSchedulerStartAndEndMinutes(t,r),f=i.getHours()*Xe+i.getMinutes(),p=Math.max(f,m),h=u-p;let E;if(F.isSameDay(i,a)){const C=i.getDate()!==a.getDate()?Ao:a.getHours()*Xe+a.getMinutes(),D=Math.min(C,u)-p;E=Math.max(1,Math.ceil(D/l));const P=Math.ceil(h/l);E=Math.min(E,P)}else E=Math.min(h/l);return`${E*ir-2}px`}static calculateEventWidth(n,s){const t=F.normalizeDate(n.event.startTime),r=F.normalizeDate(n.event.endTime),i=F.normalizeDate(s[0]),a=F.normalizeDate(s[s.length-1]),{isOverflowLeft:l,isOverflowRight:m}=this.getOverflowDirection(n,s);if(s.length<=7){const{visibleDayCount:u,startDayIndex:f}=F.getVisibleAndStartDays(s,t,r,n.event);if(u>0&&f!==-1)return`calc(${u*100}% - 4px)`}if(l&&m)return`${s.length*100}%`;if(l){const u=r.getTime()<=a.getTime()?r:a;return`${(Math.floor((u.getTime()-i.getTime())/os)+1)*100}%`}else return m?`${(Math.floor((a.getTime()-t.getTime())/os)+1)*100}%`:`${n.totalSegments?n.totalSegments*100:100}%`}static setIndexPosition(n,s,t){const r=F.generateDateKey(s),i=n.get(r)||[];for(;i.length<=t;)i.push(!1);return i.splice(t,1,!0),n.set(r,i),n}}const Vn=o=>{const n=o.closest(".sf-scheduler");if(n){const s=n.querySelector("."+d.SELECTED_CELL);s&&(s.classList.remove(d.SELECTED_CELL),s.removeAttribute("tabindex"))}o.classList.add(d.SELECTED_CELL),o.tabIndex=0,o.focus()},fs=(o,n,s)=>{if(!o||n<0||s<0)return null;const r=o.querySelectorAll(`.${d.WORK_CELLS_ROW}`).item(n);return r?r.querySelectorAll(`.${d.WORK_CELLS}`).item(s)??null:null},Un=o=>{const n=o.closest("."+d.SCHEDULER);n&&(n.querySelectorAll("."+d.APPOINTMENT+"."+d.APPOINTMENT_ACTIVE).forEach(t=>{t.classList.remove(d.APPOINTMENT_ACTIVE)}),Vn(n)),o.classList.add(d.APPOINTMENT_ACTIVE)},or=(o,n)=>{const s=n.querySelector("."+d.APPOINTMENT+"."+d.APPOINTMENT_ACTIVE),t=s==null?void 0:s.getAttribute("data-guid");return{data:xe.getEventByGuid(o,t),element:s}},yl=o=>{var t,r;let n;const s=((t=o==null?void 0:o.getAttribute)==null?void 0:t.call(o,"data-date"))??((r=o.dataset)==null?void 0:r.date)??void 0;if(s){const i=parseInt(s,10);n=new Date(i)}return n},bl=(o,n)=>{const s=Array.isArray(o)?o==null?void 0:o[0]:o,r=s.classList.contains(d.ALL_DAY_CELL)||s.classList.contains(d.WORK_DAYS)||!((n==null?void 0:n.enable)??!0),i=yl(s);let a;if(r)i&&(a=F.addDays(i,1));else if(i&&n){const l=n.interval/n.slotCount,m=new Date(i);m.setMinutes(m.getMinutes()+l),a=m}return{startTime:i,endTime:a??i,isAllDay:r,element:s}},Wn=24,pn=4,ir=40;class xe{static filterEventsByDateRange(n,s){if(!(n!=null&&n.length)||!(s!=null&&s.length))return[];const t=F.normalizeDate(s[0]),r=F.normalizeDate(s[s.length-1]);return n.filter(i=>{if(!i.startTime||!i.endTime)return!1;const a=F.normalizeDate(i.startTime);return!(F.normalizeDate(i.endTime)<t||a>r)})}static findNonConflictingPosition(n,s,t,r,i){let a=0,l=!1;for(;!l;){l=!0;for(const m of n){const u=F.normalizeDate(m);if(u>=s&&(u<t||u.getTime()===t.getTime()&&r)){const p=F.generateDateKey(m);if((i.get(p)||[]).findIndex((g,C)=>C===a&&g)!==-1){l=!1,a++;break}}}}return a}static mapEventData(n,s){if(!n||n.length===0)return[];const t=s||{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock"};return n.map(r=>{const i={};if(t.id&&Object.prototype.hasOwnProperty.call(r,t.id)&&(i.id=r[t.id]),t.subject&&Object.prototype.hasOwnProperty.call(r,t.subject)&&(i.subject=r[t.subject]),t.startTime&&Object.prototype.hasOwnProperty.call(r,t.startTime)){const m=r[t.startTime];m instanceof Date?i.startTime=m:(typeof m=="string"||typeof m=="number")&&(i.startTime=new Date(m))}if(t.endTime&&Object.prototype.hasOwnProperty.call(r,t.endTime)){const m=r[t.endTime];m instanceof Date?i.endTime=m:(typeof m=="string"||typeof m=="number")&&(i.endTime=new Date(m))}t.isAllDay&&Object.prototype.hasOwnProperty.call(r,t.isAllDay)&&(i.isAllDay=r[t.isAllDay]),t.location&&Object.prototype.hasOwnProperty.call(r,t.location)&&(i.location=r[t.location]),t.description&&Object.prototype.hasOwnProperty.call(r,t.description)&&(i.description=r[t.description]),t.isReadonly&&Object.prototype.hasOwnProperty.call(r,t.isReadonly)&&(i.isReadonly=r[t.isReadonly]),t.isBlock&&Object.prototype.hasOwnProperty.call(r,t.isBlock)&&(i.isBlock=r[t.isBlock]);const a=new Set(Object.values(t)),l=Object.fromEntries(Object.entries(r).filter(([m])=>!a.has(m)));return Object.assign(i,l),i.guid=xe.generateEventGuid(),i})}static sortEventsByStartTimeAndDuration(n){return[...n].sort((s,t)=>{if(!s.event.startTime||!t.event.startTime)return 0;const r=s.event.startTime.getTime()-t.event.startTime.getTime();if(r!==0)return r;const i=s.event.endTime?s.event.endTime.getTime()-s.event.startTime.getTime():0;return(t.event.endTime?t.event.endTime.getTime()-t.event.startTime.getTime():0)-i})}static calculateOverlappingEvents(n,s=!0){if(!n||n.length===0)return[];if(!s)return this.resolveOverlappingEvents(n);const t=this.sortEventsByStartTimeAndDuration(n);return this.identifyOverlapGroups(t)}static identifyOverlapGroups(n){const s=[];for(const t of n){let r=!1;for(const i of s)if(i.some(l=>this.eventsOverlap(t,l))){i.push(t),r=!0;break}r||s.push([t])}return this.convertOverlapGroupsToEventGroups(s)}static convertOverlapGroupsToEventGroups(n){return n.filter(t=>t.length>0).map(t=>{if(t.length===1)return[{...t[0],positionIndex:0,totalOverlapping:1}];const r=[...t].sort((l,m)=>!l.event.startTime||!m.event.startTime?0:l.event.startTime.getTime()-m.event.startTime.getTime()),i=[],a=[];return r.forEach(l=>{let m=i.findIndex(u=>u<=l.event.startTime);m===-1?(m=i.length,i.push(l.event.endTime)):i[parseInt(m.toString(),10)]=l.event.endTime,a.push(m)}),r.map((l,m)=>({...l,positionIndex:a[parseInt(m.toString(),10)],totalOverlapping:i.length}))})}static prioritizeEvents(n){return[...n].sort((s,t)=>{if(s.event.isAllDay&&!t.event.isAllDay)return-1;if(!s.event.isAllDay&&t.event.isAllDay)return 1;if(!s.event.startTime||!t.event.startTime||!s.event.endTime||!t.event.endTime)return 0;const r=s.event.endTime.getTime()-s.event.startTime.getTime(),i=t.event.endTime.getTime()-t.event.startTime.getTime();return r!==i?i-r:s.event.startTime.getTime()-t.event.startTime.getTime()})}static resolveOverlappingEvents(n){if(!n||n.length===0)return[];const s=this.prioritizeEvents(n),t=[],r=new Set;return s.forEach(i=>{if(r.has(i))return;const a=s.filter(m=>i!==m&&!r.has(m)&&this.eventsOverlap(i,m)),l=[{...i,positionIndex:0,totalOverlapping:1}];t.push(l),r.add(i),a.forEach(m=>{r.add(m)})}),t}static eventsOverlap(n,s){return!(n!=null&&n.event.startTime)||!(n!=null&&n.event.endTime)||!(s!=null&&s.event.startTime)||!(s!=null&&s.event.endTime)?!1:n.event.startTime<s.event.endTime&&n.event.endTime>s.event.startTime||s.event.startTime<n.event.endTime&&s.event.endTime>n.event.startTime}static checkEventOverlap(n,s,t=!0,r){const i=t?n.startTime:n[r.startTime],a=t?n.endTime:n[r.endTime];if(!i||!a)return!1;const l=F.normalizeDate(i),m=F.normalizeDate(a);return(s||[]).filter(f=>{if(f.isBlock||!f.startTime||!f.endTime)return!1;const p=F.normalizeDate(f.startTime);return!(F.normalizeDate(f.endTime)<l||p>m)}).some(f=>{const p=f.startTime,h=f.endTime,E=f.isAllDay;return f.id===n.id||f.id===n.Id||f.guid===n.guid||!p||!h?!1:E?i<=h&&a>=p:i<h&&a>p})}static isBlockRange(n,s,t=!0,r){const i=Array.isArray(n)?n:[n];if(i&&i.length===0)return!1;const a=(s==null?void 0:s.filter(l=>l.isBlock))||[];if(a&&a.length===0)return!1;for(const l of a){const m=l.startTime,u=l.endTime;if(!m||!u)continue;const f=l.isAllDay||xe.isMultiDayEvent(l);for(const p of i){const h=t?p.startTime:p[r.startTime],E=t?p.endTime:p[r.endTime];if(!h||!E)continue;let g;if(f){const C=F.normalizeDate(h),D=F.normalizeDate(E),P=F.normalizeDate(m),R=F.normalizeDate(u);g=C<=R&&P<=D}else g=h<u&&E>m;if(g)return!0}}return!1}static splitEventByDay(n,s){const t=[],r=F.normalizeDate(n.startTime),i=F.normalizeDate(n.endTime),a=s.filter(m=>{const u=F.normalizeDate(m);return u>=r&&u<=i}).length;let l=0;return s.forEach((m,u)=>{const f=F.normalizeDate(m);if(f>=r&&f<=i){const p=f.getTime()===r.getTime(),h=f.getTime()===i.getTime(),E=p?new Date(n.startTime):new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),g=h?new Date(n.endTime):new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0),C={event:n,startDate:E,endDate:g,isFirstDay:p,isLastDay:h,segmentIndex:l,totalSegments:a,columnIndex:u};t.push(C),l++}}),t}static isAlldayHasMoreEvents(n,s,t=2){let r=!1;return n.forEach(i=>{const a=F.generateDateKey(i);(s.get(a)||[]).length>t&&(r=!0)}),r}static isMultiDayEvent(n){if(!(n!=null&&n.startTime)||!(n!=null&&n.endTime))return!1;const s=new Date(n.startTime),t=new Date(n.endTime);if(F.isSameDay(s,t))return!1;if(n.isAllDay)return!0;const r=F.normalizeDate(s),i=F.normalizeDate(t),a=Math.round((i.getTime()-r.getTime())/os);return a<=0?!1:a>=2?!0:!F.isMidnight(t)}static getAriaLabel(n){const{subject:s,startTime:t,endTime:r}=n,i=t?t.toString():"",a=r?r.toString():"";return`${s} Begin From ${i} Ends At ${a}`}static generateEventGuid(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}static getEventClassNames(n){const s=[];return n.isBlock?s.push("sf-block-appointment"):(s.push("sf-appointment"),n.isReadonly&&s.push("sf-read-only")),s}static getEventsMap(n,s){const t=new Map;return n.forEach(r=>{const i=F.generateDateKey(r);t.set(i,[])}),s.forEach(r=>{if(!r.startDate)return;const i=F.generateDateKey(r.startDate),a=t.get(i)||[];a&&(a.push(r),t.set(i,a))}),t}static getMaxEventsInCell(n,s){let t=0;return s.forEach(r=>{var l;const i=F.generateDateKey(r),a=(l=n.get(i))==null?void 0:l.filter(m=>!m.event.isBlock);t=Math.max(t,a==null?void 0:a.length)}),t}static processDayEvents(n,s){if(!(n!=null&&n.length)||!(s!=null&&s.length))return[];const t=xe.filterEventsByDateRange(s,n),r=[];let i=new Map;return n.forEach(l=>{const m=F.generateDateKey(l);i.set(m,[])}),F.sortByTimeAndSpan(t).forEach(l=>{if(!l.startTime||!l.endTime)return;const m=xe.getEventClassNames(l),u=F.normalizeDate(l.startTime),f=F.normalizeDate(l.endTime),p=xe.isMultiDayEvent(l),h=p?F.getDaysCount(l.startTime,l.endTime,l.isAllDay):1,E=l.isAllDay?!0:!F.isMidnight(l.endTime),g=l.isBlock?null:xe.findNonConflictingPosition(n,u,f,E,i);if(p)for(const C of n){const D=F.normalizeDate(C);if(!(D>=u&&(D<f||D.getTime()===f.getTime()&&E)))continue;l.isBlock||(i=dt.setIndexPosition(i,C,g));const R=D.getTime()===u.getTime(),v=D.getTime()===f.getTime()&&E,O=Math.floor((D.getTime()-u.getTime())/(1e3*60*60*24)),A=n.findIndex(S=>{const T=F.normalizeDate(S);return T>=u&&(T<f||T.getTime()===f.getTime()&&E)})===n.findIndex(S=>F.normalizeDate(S).getTime()===D.getTime()),V=R?new Date(l.startTime.getTime()):new Date(D.getFullYear(),D.getMonth(),D.getDate(),0,0,0),L=v?new Date(l.endTime.getTime()):new Date(D.getFullYear(),D.getMonth(),D.getDate()+1,0,0,0),y=`${C.toISOString()}-${l.id}`;r.push({event:l,startDate:V,endDate:L,isFirstDay:R,isLastDay:v,isFirstSegmentInRenderRange:A,segmentIndex:O,totalSegments:h,positionIndex:g,eventClasses:m,eventKey:y,isMonthEvent:!0})}else{l.isBlock||(i=dt.setIndexPosition(i,u,g));const C=`${u.toISOString()}-${l.id}`;r.push({event:l,startDate:l.startTime,endDate:l.endTime,positionIndex:g,eventClasses:m,eventKey:C,isMonthEvent:!0})}}),r.sort((l,m)=>{const u=l.positionIndex??0,f=m.positionIndex??0;return u-f})}static cloneEventPosition(n,s,t,r,i=!1,a,l){const m=F.normalizeDate(s.startDate),u=F.normalizeDate(s.endDate),{visibleDayCount:f}=F.getVisibleAndStartDays(s.week,m,u,s.event),p=Math.max(0,t*f-pn);let h,E,g;if(r){const D=n==null?void 0:n.querySelector(`.${d.ALL_DAY_ROW}`);h=D.querySelectorAll(`.${d.ALL_DAY_CELL}`).item(s.columnIndex),E=D.offsetTop}else h=fs(n,s.rowIndex,s.columnIndex),a?E=h.querySelector(`.${d.APPOINTMENT_WRAPPER}`).offsetTop:(E=h==null?void 0:h.offsetTop,g=Math.max(0,l.offsetHeight));const C={top:`${E}px`,width:`${p}px`,height:`${g}px`};if(i){const D=h.parentElement?Math.max(0,h.parentElement.clientWidth-(h.offsetLeft+h.offsetWidth)):0;C.insetInlineStart=`${D}px`}else C.insetInlineStart=`${h.offsetLeft}px`;return C}static splitEventByWeek(n,s){const t=new Date(s.startTime),r=new Date(s.endTime),i=F.normalizeDate(t),a=F.normalizeDate(r),l=[];return n.forEach((m,u)=>{const f=F.normalizeDate(m[0]),p=F.normalizeDate(m[m.length-1]),h=F.addDays(p,1);if(!(t<=h&&r>=f))return;const g=i>=f&&i<=p,C=a>=f&&a<=p,D=g?t:f,P=C?r:h,R=m.map(y=>F.normalizeDate(y).getTime()),v=F.normalizeDate(D).getTime();let O=R.indexOf(v);O===-1&&(O=0);const A=i.getTime()<f.getTime(),V=a.getTime()>p.getTime(),L={event:s,startDate:D,endDate:P,week:m,rowIndex:u,columnIndex:O,isOverflowLeft:A,isOverflowRight:V};l.push(L)}),l}static processCloneEvent(n,s,t,r,i,a,l,m=!1,u,f){const p=l?[s]:F.getRenderWeeks(s,r,i),h=this.splitEventByWeek(p,t),E=xe.isMultiDayEvent(t);return h.forEach(g=>{var C;g.eventStyle=this.cloneEventPosition(n,g,a,l,m,u,f),g.totalSegments=E?F.getDaysCount(g.startDate,g.endDate,(C=g.event)==null?void 0:C.isAllDay):1}),h}static processTimeSlotCloneEvent(n,s,t,r,i,a,l,m=!1){const u=this.splitEventByDay(t,s);return u.forEach(f=>{const p=dt.calculateTopPosition(f.startDate,r,i),h=dt.calculateHeight(f,r,i,a),E=fs(n,0,f.columnIndex);if(f.eventStyle={top:p,height:h,width:`${l}px`},m){const g=E.parentElement?Math.max(0,E.parentElement.clientWidth-(E.offsetLeft+E.offsetWidth)):0;f.eventStyle.right=`${g}px`}else f.eventStyle.left=`${E.offsetLeft}px`}),u}static getEventByGuid(n,s){if(!(!(n!=null&&n.length)||!s))return n.find(t=>(t==null?void 0:t.guid)===s)}}const Rl=o=>{const{activeViewProps:n,renderDates:s}=o,{eventSettings:t,readOnly:r,onDataChangeStart:i,onDataChangeComplete:a,onError:l,onDataRequest:m}=n,[u,f]=e.useState(),p=e.useMemo(()=>(t==null?void 0:t.dataSource)instanceof Xn?t.dataSource:Array.isArray(t==null?void 0:t.dataSource)?new Xn(t.dataSource):new Xn([]),[t==null?void 0:t.dataSource]),h=e.useMemo(()=>(t==null?void 0:t.query)instanceof Vs?t==null?void 0:t.query:new Vs,[t==null?void 0:t.query]),E=(N,_)=>{const x=h.clone();return N&&_&&(x.addParams("StartDate",N.toISOString()),x.addParams("EndDate",_.toISOString())),x},g=N=>p.executeQuery(N),C=()=>t.query?t.query.clone().fromTable:null,D=N=>{const _={result:N.result,count:N.count};m&&m(_);const x=_.result,M=xe.mapEventData(x,t.fields);f(M)},P=N=>{l&&l(N)},R=e.useCallback(()=>{if(!s||s.length===0)return;const N=E(s[0],s[s.length-1]);g(N).then(x=>D(x)).catch(x=>P(x))},[s,g,E]),v=N=>(typeof N[t.fields.startTime]=="string"&&(N[t.fields.startTime]=F.getDateFromString(N[t.fields.startTime])),typeof N[t.fields.endTime]=="string"&&(N[t.fields.endTime]=F.getDateFromString(N[t.fields.endTime])),N),O=e.useCallback(N=>{var x;const _={cancel:!1,addedRecords:N.editParams.addedRecords,changedRecords:N.editParams.changedRecords,deletedRecords:N.editParams.deletedRecords};(x=p.dataSource)!=null&&x.offline?(a&&a(_),R()):N.promise.then(()=>{a&&a(_),R()}).catch(M=>{l&&l(M)})},[a,l,R,p]),A=e.useCallback(N=>{const _={addedRecords:[],changedRecords:[],deletedRecords:[]};let x;if(N.addedRecords instanceof Array){for(let Z of N.addedRecords){Z=v(Z);const ie=Ht({},Z,null,!0);_.addedRecords.push(ie)}x=p.saveChanges(_,t.fields.id,C(),E())}else{const Z=N.addedRecords;_.addedRecords.push(Z),x=p.insert(Z,C(),E())}O({cancel:!1,promise:x,editParams:_})},[p,t,C,E,O]),V=e.useCallback(N=>{let _;const x={addedRecords:[],changedRecords:[],deletedRecords:[]};N.deletedRecords.length>1?(x.deletedRecords=x.deletedRecords.concat(N.deletedRecords),_=p.saveChanges(x,t.fields.id,C(),E())):(x.deletedRecords.push(N.deletedRecords[0]),_=p.remove(t.fields.id,N.deletedRecords[0],C(),E())),O({cancel:!1,promise:_,editParams:x})},[p,t,C,E,O]),L=e.useCallback(N=>{let _;const x={addedRecords:[],changedRecords:[],deletedRecords:[]};if(N.changedRecords instanceof Array){for(let Z of N.changedRecords){Z=v(Z);const ie=Ht({},Z,null,!0);x.changedRecords.push(ie)}_=p.saveChanges(x,t.fields.id,C(),E())}else{const Z=N.changedRecords;x.changedRecords.push(Z),_=p.update(t.fields.id,Z,C(),E())}O({cancel:!1,promise:_,editParams:x})},[p,t,C,E,O,v]),y=e.useCallback(async N=>{if(t.allowAdding&&!r){const _=N instanceof Array?N:[N];if(_.length===0)return;const x={cancel:!1,addedRecords:_,changedRecords:[],deletedRecords:[]};i&&i(x),x.promise?x.promise.then(M=>{M&&A(x)}).catch(M=>{l&&l(M)}):A(x)}},[t,r,i,l,A]),S=e.useCallback(async N=>{if(t.allowDeleting&&!r){const _=N instanceof Array?N:[N];if(_.length===0)return;const x={cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:_};i&&i(x),x.promise?x.promise.then(M=>{M&&V(x)}).catch(M=>{l&&l(M)}):V(x)}},[t,r,i,l,V]),T=e.useCallback(async N=>{if(t.allowEditing&&!r){const _=N instanceof Array?N:[N];if(_.length===0)return;const x={cancel:!1,addedRecords:[],changedRecords:_,deletedRecords:[]};i&&i(x),x.promise?x.promise.then(M=>{M&&L(x)}).catch(M=>{l&&l(M)}):L(x)}},[t,r,i,l,L]);return e.useEffect(()=>{R()},[p,h,s]),{eventsData:u,addEvent:y,deleteEvent:S,saveEvent:T}},ms=(o,n="Close")=>c.jsx(nt,{className:`${d.POPUP_CLOSE} ${d.ROUND}`,onClick:o,"aria-label":n,icon:c.jsx($n,{}),color:Ct.Secondary,variant:Qe.Standard},"close-btn"),Sl=({visible:o,target:n,schedulerElement:s,popupPosition:t,onClose:r,onOpen:i,children:a})=>{if(!o||!n)return null;const{dir:l}=$e();return ye.isDevice?jt.createPortal(c.jsx("div",{className:`${d.CONTROL} ${d.POPUP_WRAPPER} ${d.MOBILE_POPUP}
                ${l==="rtl"?d.RTL:""}`,children:a}),document==null?void 0:document.body):c.jsx(At,{open:o,relateTo:n,position:t,collision:{X:ot.Flip,Y:ot.Fit},actionOnScroll:Dr.None,autoReposition:!0,onOpen:i,onClose:r,className:`${d.POPUP_WRAPPER}`,viewPortElementRef:s,zIndex:1003,children:a})},wl=(o,n)=>({show:()=>o(!0),hide:()=>o(!1),element:n.current}),bs=e.forwardRef((o,n)=>{const{onClose:s,onEditEvent:t,onMoreDetails:r}=o,{schedulerRef:i,eventSettings:a,showQuickInfoPopup:l,showDeleteAlert:m,view:u,readOnly:f,timeFormat:p}=Ve(),[h,E]=e.useState({}),[g,C]=e.useState({}),[D,P]=e.useState({}),[R,v]=e.useState(null),[O,A]=e.useState({X:"right",Y:"top"}),[V,L]=e.useState(!1),y=e.useRef(null),S=e.useRef(null),{visible:T,setVisible:N,target:_,setTarget:x,popupElement:M,schedulerElement:Z,handleClose:ie,closeAllPopups:pe,handleRef:Y}=Jr(s),{locale:H}=$e();Ds(M,T,ie);const{getString:k}=st(H||"en-US");e.useEffect(()=>{V&&(requestAnimationFrame(()=>{J()}),L(!1))},[V]),e.useImperativeHandle(n,()=>({...wl(N,M),handleCellClick:(I,q)=>{l&&(E(I),x(q),v("cell"),P({[a.fields.startTime]:I.startTime,[a.fields.endTime]:I.isAllDay?F.addDays(I.endTime,-1):I.endTime,[a.fields.isAllDay]:I.isAllDay}),oe(),N(!0))},handleEventClick:(I,q)=>{l&&(C(I),x(q),v("event"),oe(),N(!0),Un(q))},handleDelete:le}));const U=()=>{A((u==null?void 0:u.toLowerCase())==="day"?{X:"center",Y:"center"}:{X:"right",Y:"top"}),L(!0)},oe=()=>{(y||S)&&ie(),requestAnimationFrame(()=>{J()})},J=()=>{R==="cell"?y.current&&y.current.element&&y.current.element.focus():R==="event"&&S.current&&S.current.element&&S.current.element.focus()},w=e.useCallback(I=>{const q=I.value,me={...D,[a.fields.subject]:q};P(me)},[D]),Q=e.useCallback(()=>{var q,me;const I={...D,[a.fields.id]:xe.generateEventGuid(),[a.fields.subject]:D[a.fields.subject]||k("newEvent")};(me=(q=i==null?void 0:i.current)==null?void 0:q.addEvent)==null||me.call(q,I),ie(),pe()},[D,ie]),ne=e.useCallback(()=>{t(g),ie()},[g,ie,t]),se=e.useCallback(()=>{var q;const I={...h,[a.fields.subject]:(q=y==null?void 0:y.current)==null?void 0:q.value};r(I),ie()},[h,ie,r]),le=e.useCallback(()=>{const I=()=>{var q,me;R==="event"&&g&&((me=(q=i==null?void 0:i.current)==null?void 0:q.deleteEvent)==null||me.call(q,g)),ie(),pe()};m==null||m(I),N(!1)},[R,g,ie,pe,i,m]),Re=I=>q=>{(q.key==="Enter"||q.key===" "&&q.target.type==="button")&&(q.preventDefault(),I())},Pe=()=>{var I;return c.jsxs("div",{ref:Y,className:`${d.QUICK_INFO_WRAPPER} ${d.CELL_POPUP}`,children:[c.jsx("div",{className:d.POPUP_HEADER,children:c.jsx("div",{className:`${d.POPUP_HEADER_WRAP} ${d.CONTENT_RIGHT}`,children:ms(ie,k("close"))})}),c.jsxs("div",{className:`${d.POPUP_CONTENT}`,children:[c.jsx("div",{className:d.POPUP_INPUT_WRAP,children:c.jsx(is,{ref:y,className:d.POPUP_CELL_SUBJECT,placeholder:k("addTitle"),onKeyDown:Re(Q),onChange:w,value:D[(I=a==null?void 0:a.fields)==null?void 0:I.subject]||"",size:Mt.Large})}),h.startTime&&h.endTime&&c.jsxs("div",{className:`${d.CELL_TIME} ${d.DISPLAY_FLEX}`,children:[c.jsx(Gs,{}),c.jsx("span",{className:d.POPUP_TIME_TEXT,children:F.formatCellDateRange(new Date(h.startTime),new Date(h.endTime),H,p)})]})]}),c.jsxs("div",{className:`${d.POPUP_FOOTER} ${d.DISPLAY_FLEX}`,children:[c.jsx(nt,{className:d.POPUP_MORE_DETAILS,onClick:se,color:Ct.Primary,variant:Qe.Standard,children:k("moreDetails")}),c.jsx(nt,{className:d.SAVE_EVENT,onClick:Q,onKeyDown:Re(Q),color:Ct.Primary,variant:Qe.Standard,children:k("save")})]})]})},Ue=()=>c.jsxs("div",{ref:Y,className:`${d.QUICK_INFO_WRAPPER} ${d.EVENT_POPUP}`,children:[c.jsxs("div",{className:`${d.POPUP_HEADER} ${d.POPUP_CELL_HEADER} ${d.DISPLAY_FLEX}`,children:[c.jsx("div",{className:d.POPUP_EVENT_SUBJECT,children:g.subject||k("addTitle")}),c.jsx("div",{className:`${d.POPUP_HEADER_WRAP}`,children:ms(ie,k("close"))})]}),c.jsxs("div",{className:`${d.POPUP_CONTENT}`,children:[g.startTime&&g.endTime&&c.jsxs("div",{className:`${d.CELL_TIME} ${d.DISPLAY_FLEX}`,children:[c.jsx(Gs,{}),c.jsx("span",{className:d.POPUP_TIME_TEXT,children:F.formatPopupDateRange(g,H,p)})]}),g.location&&c.jsxs("div",{className:`${d.LOCATION} ${d.DISPLAY_FLEX}`,children:[c.jsx(si,{}),c.jsx("span",{className:d.POPUP_LOCATION_TEXT,children:g.location})]}),g.description&&c.jsxs("div",{className:`${d.DESCRIPTION} ${d.DISPLAY_FLEX}`,children:[c.jsx(oi,{}),c.jsx("span",{className:d.POPUP_DESCRIPTION_TEXT,children:g.description})]})]}),c.jsxs("div",{className:`${d.POPUP_FOOTER} ${d.DISPLAY_FLEX}`,children:[c.jsx(nt,{ref:S,className:d.EDIT_EVENT,disabled:!!(g!=null&&g.isReadonly)||f,onClick:ne,onKeyDown:Re(ne),color:Ct.Primary,variant:Qe.Standard,children:k("edit")}),c.jsx(nt,{className:d.DELETE_EVENT,disabled:!!(g!=null&&g.isReadonly)||f,onClick:le,onKeyDown:Re(le),color:Ct.Primary,variant:Qe.Standard,children:k("delete")})]})]});return c.jsx(Sl,{visible:T,target:_,popupPosition:O,schedulerElement:Z,onClose:ie,onOpen:U,children:R==="cell"?Pe():Ue()})});bs.displayName="QuickInfoPopup";bs.__docgenInfo={description:"Combined QuickInfoPopup component that handles both cell and event popups",methods:[],displayName:"QuickInfoPopup"};function Nl(){const{renderDates:o}=Et(),{showWeekNumber:n,workDays:s,weekRule:t,firstDayOfWeek:r}=Ve(),{locale:i}=$e(),[a,l]=e.useState(!0),[m,u]=e.useState(!1),f=o.length>0&&n?F.getWeekNumber(o[0],t,r):null,p=e.useCallback(g=>{u(g)},[]),h=e.useCallback(()=>{l(g=>!g)},[]);return{headerCells:o.map((g,C)=>{const D=F.isSameDay(g,new Date),P=F.isWeekend(g,s),R=ft(g,{type:"date",skeleton:"E",locale:i}),v=ft(g,{type:"date",skeleton:"d",locale:i}),O=["sf-header-cells",D?"sf-current-day":"",P?"sf-weekend":""].filter(Boolean).join(" ");return{date:g,dayName:R,dateNumber:v,isToday:D,isWeekend:P,className:O,key:`sf-header-cells-${C}`}}),isAllDayCollapsed:a,showAllDayToggle:m,weekNumber:f,toggleAllDayCollapse:h,handleMoreEventsChange:p}}function Rs(){const{onViewChange:o,onSelectedDateChange:n,getAvailableViews:s}=Ve();return{handleDateClick:e.useCallback((r,i)=>{r.preventDefault(),r.stopPropagation(),ht.isDayViewAvailable(s)&&(n({value:i}),o({value:"Day"}))},[n,o])}}const Al=()=>{const[o,n]=e.useState({date:null,events:[],visible:!1,target:null}),s=e.useRef(null),t=e.useRef(null),{locale:r}=$e(),{handleDateClick:i}=Rs(),{quickPopupRef:a}=Ve();e.useEffect(()=>{o.target&&(t.current=o.target.closest(".sf-scheduler"))},[o.target]);const l=()=>{n({date:null,events:[],target:null,visible:!1})};Qr(l);const m=(p,h)=>{var E;(E=a.current)==null||E.handleEventClick(p,h)},u=(p,h)=>{h&&(i(p,o.date),l())},f=(p,h,E)=>{n({date:p,events:h,target:E,visible:!0})};return{date:o.date,events:o.events,visible:o.visible,target:o.target,popupElement:s,schedulerElement:t,locale:r,handleClose:l,handleEventClick:m,handleNavigation:u,open:f}},Ss=e.forwardRef((o,n)=>{const{date:s,events:t,visible:r,target:i,popupElement:a,schedulerElement:l,locale:m,handleClose:u,handleEventClick:f,handleNavigation:p,open:h}=Al(),{eventTemplate:E,getAvailableViews:g}=Ve(),C=ht.isDayViewAvailable(g),{getString:D}=st(m||"en-US");e.useImperativeHandle(n,()=>({element:a.current,open:h})),Ds(a,r,u);const P=e.useCallback(v=>E?E(v):c.jsx("div",{className:`${d.SUBJECT} ${d.ELLIPSIS}`,children:v.subject||D("addTitle")}),[E]),R=()=>c.jsxs("div",{ref:a,className:d.MORE_EVENT_POPUP,children:[c.jsxs("div",{className:d.MORE_EVENT_HEADER,children:[c.jsxs("div",{className:`${d.MORE_EVENT_DATE_HEADER} ${C?d.LINK:""}`,onClick:v=>p(v,C),tabIndex:0,children:[ft(s,{format:"E",calendar:"gregorian",locale:m})," ",ft(s,{format:"d",calendar:"gregorian",locale:m})]}),c.jsx("div",{className:"sf-more-event-close",children:ms(u,D("close"))})]}),c.jsx("div",{className:d.MORE_EVENT_CONTENT,children:t.map(v=>c.jsx("div",{className:d.APPOINTMENT,onClick:O=>f(v,O.currentTarget),onKeyDown:O=>{(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),f(v,O.currentTarget))},"data-id":`Appointment_${v.id}`,"data-guid":v.guid,role:"button",tabIndex:0,children:P(v)},`eventId-${v.id}`))})]});return!r||!i?null:ye.isDevice?jt.createPortal(c.jsx("div",{className:`${d.CONTROL} ${d.MORE_POPUP_WRAPPER} ${d.MOBILE_POPUP}`,children:R()}),document==null?void 0:document.body):c.jsx(At,{open:r,relateTo:i,position:{X:"right",Y:"top"},collision:{X:ot.Flip,Y:ot.Flip},autoReposition:!0,onClose:u,className:d.MORE_POPUP_WRAPPER,viewPortElementRef:l||null,zIndex:1e3,children:R()})});Ss.displayName="MorePopup";Ss.__docgenInfo={description:"MorePopup component for displaying additional events in month view",methods:[],displayName:"MorePopup"};var Nt;(function(o){o.Left="left",o.Right="right",o.Up="up",o.Down="down"})(Nt||(Nt={}));const Ol=(o,n)=>{const{schedulerRef:s,keyboardNavigation:t,handleTodayClick:r,eventSettings:i,readOnly:a,showDeleteAlert:l,showQuickInfoPopup:m,getAvailableViews:u,handleCurrentViewChange:f,handlePreviousClick:p,handleNextClick:h}=o,E=(L,y)=>{L.getAttribute("tabindex")!=="0"&&L.setAttribute("tabindex","0"),L.focus(),y.preventDefault()},g=L=>{var T;const y=(T=s.current)==null?void 0:T.element,S=y==null?void 0:y.querySelector(`.${d.CONTENT_TABLE} .${d.WORK_CELLS}`);S&&(E(S,L),S.classList.add(d.SELECTED_CELL))},C=L=>{r&&(r(),L.preventDefault())},D=L=>{p&&(p(),L.preventDefault(),L.stopPropagation())},P=L=>{h&&(h(),L.preventDefault(),L.stopPropagation())},R=L=>{const y=L.code.replace("Digit",""),S=parseInt(y,10)-1;if(isNaN(S)||S<0)return;const T=u==null?void 0:u();if(!(!T||T.length===0)&&S<T.length){const N=T[parseInt(S.toString(),10)];f&&(f(N.name),L.preventDefault(),L.stopPropagation())}},v=L=>{var T,N,_,x,M;let y=document==null?void 0:document.activeElement;const S=(T=s.current)==null?void 0:T.element;if((!y||!((N=y.classList)!=null&&N.contains(d.APPOINTMENT))||Tt(y,"."+d.POPUP_WRAPPER))&&(y=or(n||[],S).element),y&&y.classList.contains(d.APPOINTMENT)){if(Un(y),a||i&&!i.allowDeleting)return;if(m&&((x=(_=o.quickPopupRef)==null?void 0:_.current)!=null&&x.element))(M=o.quickPopupRef)==null||M.current.handleDelete();else if(l){const Z=or(n||[],S).data,ie=Array.isArray(Z)?Z:[Z];l(()=>{ie.forEach(Y=>{var H,k;(k=(H=s==null?void 0:s.current)==null?void 0:H.deleteEvent)==null||k.call(H,Y)})})}L.preventDefault()}},O=(L,y,S,T,N,_)=>{let x=y,M=S;switch(L){case Nt.Left:{if(S>0)M=S-1;else if(y>0){x=y-1;const Z=N(x);M=Math.max(0,((Z==null?void 0:Z.length)??1)-1)}break}case Nt.Right:{S<((_==null?void 0:_.length)??0)-1?M=S+1:y<T.length-1&&(x=y+1,M=0);break}case Nt.Up:{if(y===0)return null;x=y-1;const Z=N(x);M=Math.min(S,Math.max(0,((Z==null?void 0:Z.length)??1)-1));break}case Nt.Down:{if(y>=T.length-1)return null;x=y+1;const Z=N(x);M=Math.min(S,Math.max(0,((Z==null?void 0:Z.length)??1)-1));break}}return{nextRow:x,nextCol:M}},A=(L,y)=>{var k,U,oe;const S=(k=s.current)==null?void 0:k.element,T=(oe=(U=y.target).closest)==null?void 0:oe.call(U,"."+d.WORK_CELLS_ROW),N=S.querySelectorAll(`.${d.WORK_CELLS_ROW}`),_=Array.prototype.indexOf.call(N,T),x=J=>{var w;return(w=N.item(J))==null?void 0:w.querySelectorAll(`.${d.WORK_CELLS}`)},M=x(_),Z=Array.prototype.indexOf.call(M,y.target);let ie=_,pe=Z;const Y=O(L,_,Z,N,x,M);if(!Y)return;ie=Y.nextRow,pe=Y.nextCol;const H=fs(S,ie,pe);H&&(Vn(H),y.preventDefault(),y.stopPropagation())};return L=>{var S,T,N,_;if(!t)return;const y=L.target;if(!(y&&["INPUT","TEXTAREA","SELECT"].indexOf(y.tagName)>-1&&y.closest(`.${d.POPUP_WRAPPER}`))){if(L.shiftKey&&L.altKey&&L.code==="KeyY"){C(L);return}if(L.altKey&&L.code>="Digit1"&&L.code<="Digit6"){R(L);return}switch(L.key){case"Home":{g(L);break}case"ArrowUp":{!L.ctrlKey&&!L.metaKey&&(S=y==null?void 0:y.closest)!=null&&S.call(y,"."+d.WORK_CELLS)&&A(Nt.Up,L);break}case"ArrowDown":{!L.ctrlKey&&!L.metaKey&&(T=y==null?void 0:y.closest)!=null&&T.call(y,"."+d.WORK_CELLS)&&A(Nt.Down,L);break}case"Delete":{v(L);break}case"ArrowLeft":{L.ctrlKey||L.metaKey?D(L):(N=y==null?void 0:y.closest)!=null&&N.call(y,"."+d.WORK_CELLS)&&A(Nt.Left,L);break}case"ArrowRight":{L.ctrlKey||L.metaKey?P(L):(_=y==null?void 0:y.closest)!=null&&_.call(y,"."+d.WORK_CELLS)&&A(Nt.Right,L);break}}}}},eo=e.createContext(void 0),Ll=({children:o})=>{const[n,s]=e.useState({visible:!1,guid:null,segments:[],isDayEvent:!1}),t=e.useCallback(a=>{s({visible:!0,guid:a==null?void 0:a.guid,segments:(a==null?void 0:a.segments)??[],isDayEvent:!!(a!=null&&a.isDayEvent)})},[]),r=e.useCallback(()=>{s({visible:!1,guid:null,segments:[],isDayEvent:!1})},[]),i=e.useMemo(()=>({...n,show:t,hide:r}),[n,t,r]);return c.jsx(eo.Provider,{value:i,children:o})},ws=()=>{const o=e.useContext(eo);if(!o)throw new Error("useCloneEventContext must be used within CloneEventProvider");return o},xl=o=>{const{event:n,eventStyle:s,totalSegments:t,isOverflowLeft:r=!1,isOverflowRight:i=!1}=o,{timeFormat:a}=Ve(),{locale:l}=$e(),m=g=>ft(g??new Date,{type:"time",skeleton:"short",format:a,locale:l}),u=g=>c.jsx("div",{className:`sf-indicator sf-icons sf-${g}-icon`,children:g==="left"?c.jsx(Ts,{}):c.jsx(Cs,{})}),f=g=>c.jsx("div",{className:d.TIME,children:g}),E=t?(()=>{const{subject:g,isAllDay:C,startTime:D,endTime:P}=n,R=r?u("left"):!C&&f(m(D)),v=i?u("right"):!C&&f(m(P));return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[R,c.jsx("div",{className:`${d.SUBJECT} ${d.TEXT_CENTER} ${d.ELLIPSIS}`,children:g||"Add title"}),v]})})():(()=>{const{subject:g,startTime:C,isAllDay:D}=n;return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[!D&&f(m(C)),c.jsx("div",{className:`${d.SUBJECT}`,children:g||"Add title"})]})})();return c.jsx("div",{className:`${d.APPOINTMENT} ${d.EVENT_CLONE}`,style:s,children:E})},Il=o=>{const{timeFormat:n,startHourTuple:s,endHourTuple:t}=Ve(),{renderDates:r}=Et(),{locale:i}=$e(),a=(f,p)=>{let h=n;h||(h=Oo({type:"time",skeleton:"short",format:n},!1));const E=ft(f,{type:"time",format:h,locale:i}),g=ft(p,{type:"time",format:h,locale:i});return`${E} - ${g}`},l=f=>{const{event:p}=f,h=p.startTime&&p.endTime?a(p.startTime,p.endTime):"";return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[c.jsx("div",{className:`${d.SUBJECT}`,children:p.subject||"Add title"}),p.location&&c.jsx("div",{className:`${d.EVENT_LOCATION} ${d.ELLIPSIS}`,children:p.location}),c.jsx("div",{className:`${d.EVENT_TIME} ${d.ELLIPSIS}`,children:h})]})},m=f=>{const{isOverflowTop:p,isOverflowBottom:h}=dt.getOverflowDirection(f,r,s,t);return c.jsxs(e.Fragment,{children:[p&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.UP_ARROW_ICON}`,children:c.jsx(Rr,{})}),l(f),h&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.DOWN_ARROW_ICON}`,children:c.jsx(br,{})})]})},u=o.totalSegments&&o.totalSegments>1||s||t?m(o):l(o);return c.jsx("div",{className:`${d.APPOINTMENT} ${d.EVENT_CLONE}`,style:o.eventStyle,children:u})},kl=()=>{var r,i,a,l;const o=ws(),{schedulerRef:n}=Ve();e.useEffect(()=>{const m=f=>{var E,g,C,D;const p=(f==null?void 0:f.detail)||{},h=(E=n.current)==null?void 0:E.element;h&&(p!=null&&p.container)&&(p.container===h||h.contains(p.container))&&o.show({guid:(g=p.payload)==null?void 0:g.guid,segments:(C=p.payload)==null?void 0:C.segments,isDayEvent:(D=p.payload)==null?void 0:D.isDayEvent})},u=f=>{var E;const p=(f==null?void 0:f.detail)||{},h=(E=n.current)==null?void 0:E.element;h&&(p!=null&&p.container)&&(p.container===h||h.contains(p.container))&&o.hide()};return window==null||window.addEventListener("showCloneEvent",m),window==null||window.addEventListener("hideCloneEvent",u),()=>{window==null||window.removeEventListener("showCloneEvent",m),window==null||window.removeEventListener("hideCloneEvent",u)}},[n,o]);const s=o.isDayEvent?(i=(r=n.current)==null?void 0:r.element)==null?void 0:i.querySelector(`.${d.DAY_CLONE_CONTAINER}`):(l=(a=n.current)==null?void 0:a.element)==null?void 0:l.querySelector(`.${d.TIME_SLOT_CLONE_CONTAINER}`),t=c.jsx(c.Fragment,{children:o.visible&&o.segments.map((m,u)=>o.isDayEvent?c.jsx(xl,{...m},`${m==null?void 0:m.guid}-${u}`):c.jsx(Il,{...m},`${m==null?void 0:m.guid}-${u}`))});return s?jt.createPortal(t,s):null},Pl=o=>{const{visible:n,onConfirm:s,onCancel:t,title:r,message:i,confirmText:a,showCancel:l=!0}=o,{locale:m}=$e(),{getString:u}=st(m||"en-US");return c.jsx(mn,{header:r||u("deleteEvent"),open:n,style:{maxWidth:"400px"},animation:{effect:"Zoom",duration:400,delay:1},footer:c.jsxs(c.Fragment,{children:[c.jsx(nt,{onClick:s,variant:Qe.Standard,children:a||u("delete")}),l&&c.jsx(nt,{onClick:t,variant:Qe.Standard,children:u("cancel")})]}),onClose:t,children:c.jsx("div",{children:i||u("confirmDeleteMessage")})})},to=e.createContext(null),Ns=()=>{const o=e.useContext(to);if(!o)throw new Error("useEditorContext must be used within EditorProvider");return o},_l=({editorState:o,children:n})=>c.jsx(to.Provider,{value:o,children:n}),Ml=o=>{const{locale:n}=$e(),{getString:s}=st(n||"en-US"),{schedulerRef:t,showDeleteAlert:r,eventSettings:i,eventOverlap:a,confirmationDialog:l,onEditorSubmit:m}=Ve(),{eventsData:u}=$t(),{data:f,action:p,originalData:h,startDateOnly:E,startTimeOnly:g,endDateOnly:C,endTimeOnly:D,slotDuration:P,validateRequiredFields:R}=Ns(),v=e.useCallback(()=>{var N,_,x,M,Z,ie;let y,S;if(f!=null&&f.isAllDay){const pe=E?F.normalizeDate(E):void 0,Y=C?F.normalizeDate(C):pe;y=pe,S=Y}else{const pe=(Y,H)=>F.combineDateAndTime(Y,H);if(y=pe(E,g)??(f==null?void 0:f.startTime),S=pe(C,D)??(f==null?void 0:f.endTime),y&&S&&S<=y){const Y=new Date(y);Y.setMinutes(Y.getMinutes()+P),S=Y}}const T={[((N=i==null?void 0:i.fields)==null?void 0:N.subject)||"subject"]:(f==null?void 0:f.subject)||s("newEvent"),[((_=i==null?void 0:i.fields)==null?void 0:_.startTime)||"startTime"]:y,[((x=i==null?void 0:i.fields)==null?void 0:x.endTime)||"endTime"]:S,[((M=i==null?void 0:i.fields)==null?void 0:M.isAllDay)||"isAllDay"]:!!(f!=null&&f.isAllDay),[((Z=i==null?void 0:i.fields)==null?void 0:Z.location)||"location"]:(f==null?void 0:f.location)||"",[((ie=i==null?void 0:i.fields)==null?void 0:ie.description)||"description"]:(f==null?void 0:f.description)||""};if(p==="Edit"&&h){const pe=new Set(["id","subject","startTime","endTime","isAllDay","location","description","isReadonly","isBlock"]),Y=new Set(Object.values(i==null?void 0:i.fields).filter(k=>{var U;return k!==((U=i==null?void 0:i.fields)==null?void 0:U.id)}));return{...Object.fromEntries(Object.entries(h).filter(([k])=>!pe.has(k)&&!Y.has(k))),...T,[i.fields.id]:h.id}}else return{...T,[i.fields.id]:xe.generateEventGuid()}},[f==null?void 0:f.isAllDay,E,g,C,D,P,f==null?void 0:f.startTime,f==null?void 0:f.endTime,i,f==null?void 0:f.subject,f==null?void 0:f.location,f==null?void 0:f.description,p,h]),O=e.useCallback(y=>!a&&xe.checkEventOverlap(y,u,!1,i.fields)?(l==null||l.show({title:s("eventOverlap"),message:s("overlapAlert"),confirmText:s("ok"),showCancel:!1,onConfirm:()=>l.hide()}),!1):xe.isBlockRange(y,u,!1,i.fields)?(l==null||l.show({title:s("alert"),message:s("blockAlert"),confirmText:s("ok"),showCancel:!1,onConfirm:()=>l.hide()}),!1):!0,[a,u,i,l]),A=e.useCallback(()=>{var T,N,_,x;const y=R(s);if(y){l==null||l.show({title:s("alert"),message:y,confirmText:s("ok"),showCancel:!1,onConfirm:()=>l.hide()});return}let S=v();if(m){const M={data:S,cancel:!1,requestType:p==="Edit"?"Edit":"Add",originalData:p==="Edit"?h:void 0};if(m(M),M.cancel)return;S=M.data}O(S)&&(p==="Edit"&&h?(N=(T=t==null?void 0:t.current)==null?void 0:T.saveEvent)==null||N.call(T,S):(x=(_=t==null?void 0:t.current)==null?void 0:_.addEvent)==null||x.call(_,S),o())},[R,v,O,p,h,t,o,l]),V=e.useCallback(()=>{if(!h)return;const y=()=>{var S,T;(T=(S=t==null?void 0:t.current)==null?void 0:S.deleteEvent)==null||T.call(S,h)};o(),r==null||r(y)},[h,t,o,r]),L=e.useCallback(()=>o(),[o]);return{handleSave:A,handleDelete:V,handleCancel:L,buildEventData:v,validateEventConflicts:O}},lr=[{name:"subject",visible:!0,className:d.SUBJECT_CONTAINER},{name:"location",visible:!0,className:d.LOCATION_CONTAINER},{name:"startDate",visible:!0,className:d.START_DATE_CONTAINER},{name:"startTime",visible:!0,className:d.START_TIME_CONTAINER},{name:"endDate",visible:!0,className:d.END_DATE_CONTAINER},{name:"endTime",visible:!0,className:d.END_TIME_CONTAINER},{name:"isAllDay",visible:!0,className:d.ALL_DAY_CONTAINER},{name:"description",visible:!0,className:d.DESCRIPTION_CONTAINER},{name:"repeatMode",visible:!0,className:d.REPEAT_MODE}],Hl=[["subject","location"],["startDate","startTime"],["endDate","endTime"],["isAllDay"],["repeatMode"],["description"]],jl=["Never","Daily","Weekly","Monthy","Annually","Custom"],$l=({fields:o})=>{const{locale:n}=$e(),{getString:s}=st(n||"en-US"),{dateFormat:t,timeFormat:r,timeScale:i}=Ve(),{data:a,startDateOnly:l,startTimeOnly:m,endDateOnly:u,endTimeOnly:f,slotDuration:p,repeatModeValue:h,handleSubjectChange:E,handleLocationChange:g,handleDescriptionChange:C,handleStartDateChange:D,handleStartTimeChange:P,handleEndDateChange:R,handleEndTimeChange:v,handleIsAllDayChange:O,handleRepeatModeChange:A,setSlotDuration:V}=Ns(),L=e.useMemo(()=>(i==null?void 0:i.interval)/(i==null?void 0:i.slotCount)||30,[i]);e.useEffect(()=>{V==null||V(L)},[L]);const y=(J={})=>{const w=J.props??{};return c.jsx(wt,{name:"subject",children:c.jsx(is,{placeholder:w.placeholder??s("title"),value:w.value??(a==null?void 0:a.subject),onChange:w.onChange??E,className:w.className??d.EVENT_SUBJECT,labelMode:w.labelMode??"Always",...w})})},S=(J={})=>{const w=J.props??{};return c.jsx(wt,{name:"location",children:c.jsx(is,{placeholder:w.placeholder??s("location"),value:w.value??(a==null?void 0:a.location),onChange:w.onChange??g,className:w.className??d.EVENT_LOCATION,labelMode:w.labelMode??"Always",...w})})},T=(J={})=>{const w=J.props??{};return c.jsx(wt,{name:"startDate",children:c.jsx(Ws,{placeholder:w.placeholder??s("startDate"),className:w.className??d.EVENT_START_DATE,labelMode:w.labelMode??"Always",value:w.value||l,format:w.format??t,onChange:w.onChange??D,strictMode:w.strictMode??!0,...w})})},N=(J={})=>{const w=J.props??{};return c.jsx(wt,{name:"startTime",children:c.jsx(ls,{placeholder:w.placeholder??s("startTime"),className:w.className??d.EVENT_START_TIME,labelMode:w.labelMode??"Always",step:w.step??p,value:w.value??m,format:w.format??r,onChange:w.onChange??P,strictMode:w.strictMode??!0,...w})})},_=(J={})=>{const w=J.props??{};return c.jsx(wt,{name:"endDate",children:c.jsx(Ws,{placeholder:w.placeholder??s("endDate"),className:w.className??d.EVENT_END_DATE,labelMode:w.labelMode??"Always",value:w.value??u,format:w.format??t,onChange:w.onChange??R,strictMode:w.strictMode??!0,...w})})},x=(J={})=>{const w=J.props??{};return c.jsx(wt,{name:"endTime",children:c.jsx(ls,{placeholder:w.placeholder??s("endTime"),className:w.className??d.EVENT_END_TIME,labelMode:w.labelMode??"Always",step:w.step??p,value:w.value??f,format:w.format??r,onChange:w.onChange??v,strictMode:w.strictMode??!0,...w})})},M=(J={})=>{const w=J.props??{};return c.jsx(wt,{name:"allDay",children:c.jsx(xo,{label:w.label??s("allDay"),className:w.className??d.EVENT_ALLDAY,checked:w.checked??(a==null?void 0:a.isAllDay),onChange:w.onChange??O,...w})})},Z=(J={})=>{const w=J.props??{};return c.jsx(wt,{name:"repeatMode",children:c.jsx(Lo,{dataSource:jl,value:w.value??h,placeholder:w.placeholder??s("repeat"),className:w.className??d.EDITOR_POPUP_REPEAT_MODE,labelMode:"Always",onChange:w.onChange??A,...w})})},ie=(J={})=>{const w=J.props??{};return c.jsx("div",{className:d.DESCRIPTION_ROW,children:c.jsx(wt,{name:"description",children:c.jsx(ui,{placeholder:w.placeholder??s("description"),className:w.className??d.EVENT_DESCRIPTION,labelMode:w.labelMode??"Always",value:w.description??(a==null?void 0:a.description),width:w.width??"100%",resizeMode:w.resizeMode??It.Vertical,onChange:w.onChange??C,...w})})})},pe={subject:y,location:S,startDate:T,startTime:N,endDate:_,endTime:x,isAllDay:M,repeatMode:Z,description:ie},Y=e.useMemo(()=>!o||o.length===0?lr:o.filter(J=>J.visible!==!1),[o]),H=e.useMemo(()=>{const J=[],w=new Map(Y.map(Q=>[Q.name,Q]));return Hl.forEach(Q=>{const ne=Q.map(se=>w.get(se)).filter(se=>!!se);ne.length>0&&J.push(ne)}),J},[Y]),k=J=>{var w;return(w=lr.find(Q=>Q.name===J))==null?void 0:w.className},U=e.useCallback(J=>{const w=[d.EDITOR_FIELD_CONTAINER,k(J.name),J.className].filter(Boolean).join(" ");if(J.component)return c.jsx("div",{className:w,children:J.component},J.name);const Q=pe[J.name];return Q?(J.name==="startTime"||J.name==="endTime")&&(a!=null&&a.isAllDay)?null:c.jsx("div",{className:w,children:Q(J)},J.name):null},[a==null?void 0:a.isAllDay,s,pe]);return!o||o.length===0?c.jsxs("div",{className:`${d.DIALOG_CONTENT} ${d.DISPLAY_FLEX}`,children:[c.jsxs("div",{className:`${d.TITLE_LOCATION_ROW} ${d.DISPLAY_FLEX} ${d.EDITOR_FIELDS_ROW}`,children:[c.jsx("div",{className:`${d.SUBJECT_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:y()}),c.jsx("div",{className:`${d.LOCATION_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:S()})]}),c.jsxs("div",{className:`${d.START_ROW} ${d.DISPLAY_FLEX} ${d.EDITOR_FIELDS_ROW}`,children:[c.jsx("div",{className:`${d.START_DATE_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:T()}),!(a!=null&&a.isAllDay)&&c.jsx("div",{className:`${d.START_TIME_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:N()})]}),c.jsxs("div",{className:`${d.END_ROW} ${d.DISPLAY_FLEX} ${d.EDITOR_FIELDS_ROW}`,children:[c.jsx("div",{className:`${d.END_DATE_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:_()}),!(a!=null&&a.isAllDay)&&c.jsx("div",{className:`${d.END_TIME_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:x()})]}),c.jsx("div",{className:`${d.ALL_DAY_TIMEZONE_ROW} ${d.DISPLAY_FLEX}`,children:c.jsx("div",{className:`${d.ALL_DAY_CONTAINER}`,children:M()})}),c.jsx("div",{className:`${d.REPEAT_MODE_ROW} ${d.DISPLAY_FLEX}`,children:c.jsx("div",{className:`${d.REPEAT_MODE}`,children:Z()})}),c.jsx("div",{className:d.DESCRIPTION_ROW,children:c.jsx("div",{className:d.DESCRIPTION_CONTAINER,children:ie()})})]}):c.jsx("div",{className:`${d.DIALOG_CONTENT} ${d.DISPLAY_FLEX}`,children:H.map((J,w)=>{const Q=J.map(U).filter(Boolean);return Q.length?c.jsx("div",{className:`${d.EDITOR_FIELDS_ROW} ${d.DISPLAY_FLEX}`,children:Q},`row-${w}`):null})})},Vl=({open:o,onClose:n,fields:s,action:t,children:r,dialogProps:i,className:a,style:l})=>{const{locale:m}=$e(),{getString:u}=st(m||"en-US"),{handleCancel:f,handleDelete:p,handleSave:h}=Ml(n),{recurrenceOpen:E,closeRecurrenceEditor:g,baseStart:C}=Ns(),D=Io(C),P=e.useMemo(()=>({repeatMode:D.repeatModeValue,interval:D.repeatCountValue,endType:D.repeatTypeValue,endCount:D.repeatTypeValue==="Count"?D.countValue:void 0,until:D.repeatTypeValue==="Until"?D.untilDate:null,locale:m,startTime:D.baseDate,weekDays:D.repeatModeValue==="Week(s)"?D.selectedWeekDays:void 0,monthDay:(D.repeatModeValue==="Month(s)"||D.repeatModeValue==="Year(s)")&&D.dayWeekMode==="day"?D.monthDateValue:void 0,month:D.repeatModeValue==="Year(s)"?D.monthValue:void 0,weekNumber:(D.repeatModeValue==="Month(s)"||D.repeatModeValue==="Year(s)")&&D.dayWeekMode==="week"?D.weekNumberValue:void 0,weekDay:(D.repeatModeValue==="Month(s)"||D.repeatModeValue==="Year(s)")&&D.dayWeekMode==="week"?D.weekDayValue:void 0}),[D,m]),[R,v]=e.useState("");e.useEffect(()=>{E&&v(D.generateRule(P))},[E,C,P,D]);const O=e.useCallback(L=>{v(L)},[]),A=e.useMemo(()=>i!=null&&i.header?i.header:u(t==="Edit"?"editEvent":"newEvent"),[i==null?void 0:i.header,t,u]),V=e.useMemo(()=>i!=null&&i.footer?i==null?void 0:i.footer:c.jsxs("div",{className:d.DIALOG_FOOTER,children:[t==="Edit"&&c.jsx(nt,{className:d.DELETE_EVENT,variant:Qe.Standard,onClick:p,children:u("delete")}),c.jsx(nt,{className:d.SAVE_EVENT,variant:Qe.Standard,onClick:h,children:u("save")}),c.jsx(nt,{className:d.CANCEL_EVENT,variant:Qe.Standard,onClick:f,children:u("cancel")})]}),[i==null?void 0:i.footer,t,p,h,f]);return c.jsxs(mn,{header:A,open:o,onClose:n,modal:(i==null?void 0:i.modal)??!0,style:{width:"500px",minHeight:"300px",...l},className:`${d.DIALOG} ${d.DIALOG_CONTAINER} ${a||""}`,footer:V,...i,children:[c.jsx("div",{className:d.FORM_CONTAINER,children:r||c.jsx(Nr,{rules:{},children:c.jsx($l,{fields:s})})}),E&&c.jsx(mn,{header:u("repeat"),open:o,onClose:g,modal:!0,style:{width:"500px",minHeight:"300px"},className:`${d.DIALOG} ${d.DIALOG_CONTAINER}`,footer:V,children:c.jsx(ko,{value:R,onChange:O,baseStart:C})})]})};function Wl(o,n){switch(n.type){case"setField":return{...o,[n.key]:n.value};case"setMany":return{...o,...n.payload};default:return o}}const Fl=(o,n,s)=>{const[t,r]=e.useState(!1),i={subject:"",location:"",description:"",startTime:void 0,endTime:void 0,isAllDay:!1,action:"Add",originalData:void 0},[a,l]=e.useReducer(Wl,i),m=e.useCallback(j=>l({type:"setField",key:"subject",value:j}),[l]),u=e.useCallback(j=>l({type:"setField",key:"location",value:j}),[l]),f=e.useCallback(j=>l({type:"setField",key:"description",value:j}),[l]),p=e.useCallback(j=>l({type:"setField",key:"startTime",value:j}),[l]),h=e.useCallback(j=>l({type:"setField",key:"endTime",value:j}),[l]),E=e.useCallback(j=>l({type:"setField",key:"isAllDay",value:j}),[l]),g=e.useCallback(j=>l({type:"setField",key:"action",value:j}),[l]),C=e.useCallback(j=>l({type:"setField",key:"originalData",value:j}),[l]),{eventSettings:D}=Ve(),P=e.useCallback(j=>{if(o==null||o(j),j.cancel)return;s==null||s();const ae=j.isAllDay?F.normalizeDate(j.startTime):j.startTime,Ne={startTime:ae,endTime:j.isAllDay?ae:j.endTime};l({type:"setMany",payload:{subject:"",location:"",description:"",isAllDay:j.isAllDay,action:"Add",startTime:Ne.startTime,endTime:Ne.endTime}}),r(!0)},[o,s]),R=e.useCallback(j=>{var W,X,de,Ee,Se,ge;if(n==null||n(j),j.cancel)return;s==null||s();const ae=!!((W=j==null?void 0:j.data)!=null&&W.isAllDay),Ne=ae?F.normalizeDate(j.data.startTime):(X=j==null?void 0:j.data)==null?void 0:X.startTime,ce=ae?F.normalizeDate(j.data.endTime):(de=j==null?void 0:j.data)==null?void 0:de.endTime,ve={startTime:Ne,endTime:ce};l({type:"setMany",payload:{action:"Edit",originalData:j==null?void 0:j.data,subject:((Ee=j==null?void 0:j.data)==null?void 0:Ee.subject)??"",location:((Se=j==null?void 0:j.data)==null?void 0:Se.location)??"",description:((ge=j==null?void 0:j.data)==null?void 0:ge.description)??"",isAllDay:ae,startTime:ve.startTime,endTime:ve.endTime}}),r(!0)},[n,s]),v=e.useCallback(()=>r(!1),[]),{subject:O,location:A,description:V,startTime:L,endTime:y,isAllDay:S,action:T,originalData:N}=a,[_,x]=e.useState(30),[M,Z]=e.useState(void 0),[ie,pe]=e.useState(void 0),[Y,H]=e.useState(void 0),[k,U]=e.useState(void 0),[oe,J]=e.useState(!1),[w,Q]=e.useState("Never"),[ne,se]=e.useState(!1);e.useEffect(()=>{if(!t)return;const j=L?new Date(L):void 0,ae=y?new Date(y):void 0;Z(j?F.normalizeDate(j):void 0),H(ae?F.normalizeDate(ae):void 0),J(!1),pe(L?new Date(L):ie),U(y?new Date(y):k)},[t,L,y]);const le=e.useCallback((j,ae)=>F.combineDateAndTime(j,ae),[]),Re=e.useCallback(j=>{Z(j==null?void 0:j.value)},[]),Pe=e.useCallback(j=>{const ae=j==null?void 0:j.value;if(pe(ae),!ae)return;const Ne=le(M,ae),ce=le(Y??M,k);if(!oe&&F.isMidnight(k)){const ve=new Date(ae);ve.setMinutes(ve.getMinutes()+_),U(ve)}else if(Ne&&ce&&ce<=Ne){const ve=new Date(ae);ve.setMinutes(ve.getMinutes()+_),U(ve)}},[M,Y,k,oe,_,le]),Ue=e.useCallback(j=>{H(j==null?void 0:j.value)},[]),I=e.useCallback(j=>{const ae=j==null?void 0:j.value;U(ae),J(!!ae)},[]),q=e.useCallback(j=>{if(E(j==null?void 0:j.value),T==="Add"&&(j==null?void 0:j.value)===!1)if(!oe&&F.isMidnight(k)){const ae=ie?new Date(ie):new Date(0);ie||ae.setHours(0,0,0,0),ae.setMinutes(ae.getMinutes()+_),U(ae)}else{const ae=le(M,ie),Ne=le(Y??M,k);if(ae&&Ne&&Ne<=ae){const ce=ie?new Date(ie):new Date(Ne);ce.setMinutes(ce.getMinutes()+_),U(ce)}}},[T,oe,k,ie,_,le,M,Y]),me=e.useCallback(j=>{m(j.value)},[]),ee=e.useCallback(j=>{u(j.value)},[]),fe=e.useCallback(()=>{se(!0)},[]),B=e.useCallback(()=>{se(!1)},[]),K=e.useCallback(j=>{const ae=j==null?void 0:j.value;Q(ae),ae==="Custom"&&fe()},[Q,fe]),G=e.useCallback(j=>{f(j==null?void 0:j.value)},[]),b=e.useCallback(j=>{g("Edit"),m(j==null?void 0:j.subject),u(j==null?void 0:j.location),f(j==null?void 0:j.description),p(j==null?void 0:j.startTime),h(j==null?void 0:j.endTime),E(!!(j!=null&&j.isAllDay)),C(j),r(!0)},[]),z=e.useCallback(j=>{if(g("Add"),m(j[D.fields.subject]??""),u(""),f(""),C(void 0),j!=null&&j.isAllDay){const ae=F.normalizeDate(j.startTime);p(ae),h(ae)}else p(j==null?void 0:j.startTime),h(j==null?void 0:j.endTime);E(!!(j!=null&&j.isAllDay)),r(!0)},[]),te=e.useCallback(j=>{if(!M||!Y)return j("invalidDateValue");if(!S&&(!ie||!k))return j("invalidTimeValue");let ae,Ne;return S?(ae=M?F.normalizeDate(M):void 0,Ne=Y?F.normalizeDate(Y):void 0):(ae=F.combineDateAndTime(M,ie),Ne=F.combineDateAndTime(Y,k)),ae&&Ne&&Ne<ae?j("invalidDateRange"):null},[M,ie,Y,k,S]),ue=e.useMemo(()=>S?M?F.normalizeDate(M):L:((ae,Ne)=>F.combineDateAndTime(ae,Ne))(M,ie)??L,[S,M,ie,L]);return{open:t,data:{subject:O,location:A,startTime:L,endTime:y,isAllDay:S,description:V},action:T,originalData:N,setOpen:r,onCellDoubleClickHandler:P,onEventDoubleClickHandler:R,onClose:v,startDateOnly:M,startTimeOnly:ie,endDateOnly:Y,endTimeOnly:k,slotDuration:_,baseStart:ue,repeatModeValue:w,recurrenceOpen:ne,setSlotDuration:x,handleSubjectChange:me,handleLocationChange:ee,handleDescriptionChange:G,handleStartDateChange:Re,handleStartTimeChange:Pe,handleEndDateChange:Ue,handleEndTimeChange:I,handleIsAllDayChange:q,handleRepeatModeChange:K,onEditEvent:b,onMoreDetails:z,closeRecurrenceEditor:B,validateRequiredFields:te}},Bl=()=>{const o=e.useRef({visible:!1}),n=e.useRef(null),s=e.useCallback(r=>{var i;o.current={...r,visible:!0},(i=n.current)==null||i.call(n,o.current)},[]),t=e.useCallback(()=>{var r;o.current.visible=!1,(r=n.current)==null||r.call(n,{...o.current})},[]);return{show:s,hide:t,setStateUpdater:r=>{n.current=r}}},Ul=({children:o,onTooltipOpen:n,content:s,...t})=>{const[r,i]=e.useState(null),{locale:a}=$e(),{getString:l}=st(a),{timeFormat:m}=Ve(),{eventsData:u}=$t(),f=e.useRef(u);e.useEffect(()=>{f.current=u},[u]);const p=E=>{const g=E.closest("."+d.APPOINTMENT);if(!g)return!1;const C=g==null?void 0:g.getAttribute("data-guid"),D=xe.getEventByGuid(f.current,C),P={cancel:!1,data:D};if(n==null||n(P),P.cancel)return!1;if(typeof s=="function"){const R=s({data:D});i(R)}else if(s!=null)i(s);else{const R=h(D);i(R)}return!0},h=e.useCallback(E=>{const g=E.subject??E.description??l("addTitle"),C=F.formatStartAndEndDateRange(E.startTime,E.endTime,a),D=F.formatTimeDisplay(E,a,m);return c.jsxs("div",{className:d.SCHEDULER_TOOLTIP_CONTENT,children:[c.jsx("div",{className:d.SCHEDULER_TOOLTIP_SUBJECT,children:g}),C?c.jsx("div",{className:d.SCHEDULER_TOOLTIP_DATE,children:C}):null,!E.isAllDay&&D?c.jsx("div",{className:d.SCHEDULER_TOOLTIP_TIME,children:D}):null]})},[l,m,a]);return c.jsx(Ar,{onFilterTarget:p,content:c.jsx(c.Fragment,{children:r}),...t,children:o})},no=e.forwardRef((o,n)=>{const{height:s,width:t,selectedDate:r,defaultSelectedDate:i,view:a,defaultView:l,eventSettings:m,timeScale:u,workHours:f,startHour:p,endHour:h,showWeekend:E,firstDayOfWeek:g,workDays:C,showTimeIndicator:D,showWeekNumber:P,dateFormat:R,timeFormat:v,dateHeader:O,cell:A,headerIndent:V,eventOverlap:L,rowAutoHeight:y,readOnly:S,showQuickInfoPopup:T,header:N,keyboardNavigation:_,onDataRequest:x,onSelectedDateChange:M,onViewChange:Z,onCellClick:ie,onCellDoubleClick:pe,onEventClick:Y,onEventDoubleClick:H,onDataChangeStart:k,onDataChangeComplete:U,eventDrag:oe,eventResize:J,onResizeStart:w,onResizing:Q,onResizeStop:ne,onDragStart:se,onDrag:le,onDragStop:Re,onError:Pe,onMoreEventsClick:Ue,eventTooltip:I,onTooltipOpen:q,onEditorSubmit:me,editor:ee,children:fe,className:B,weekRule:K,...G}=yr(gr,o),b=e.useRef(null),z=e.useRef(null),te=e.useRef(null),ue=Bl(),[Ce,j]=e.useState({visible:!1});e.useEffect(()=>{ue.setStateUpdater(j)},[]);const{cellEditRef:ae,handleClose:Ne,onCellClickHandler:ce,onEventClickHandler:ve}=Jr(ie,Y),W=Fl(pe,H,Ne),{open:X,data:de,originalData:Ee,action:Se,onClose:ge,onCellDoubleClickHandler:Ae,onEventDoubleClickHandler:we,onMoreDetails:_e,onEditEvent:be}=W,{locale:Me}=$e(),{getString:He}=st(Me||"en-US"),ke=e.useMemo(()=>ht.getViewsInfo(fe,He),[fe]),{classNames:et,selectedDate:it,view:rt,renderDates:mt,activeViewProps:lt,dateRangeText:gt,showCalendar:Xt,calendarView:En,handleViewButtonClick:gn,handlePreviousClick:qt,handleNextClick:Tn,handleTodayClick:Gt,handleDateDropdownClick:Cn,handleCalendarChange:Dn,renderCurrentView:vn}=Oi({className:B,selectedDate:r,defaultSelectedDate:i,view:a,defaultView:l,eventSettings:m,timeScale:u,workHours:f,startHour:p,endHour:h,showWeekend:E,firstDayOfWeek:g,workDays:C,showTimeIndicator:D,showWeekNumber:P,dateFormat:R,timeFormat:v,dateHeader:O,cell:A,headerIndent:V,editor:ee,eventOverlap:L,showQuickInfoPopup:T,header:N,keyboardNavigation:_,rowAutoHeight:y,readOnly:S,onEditorSubmit:me,onDataRequest:x,onSelectedDateChange:M,onViewChange:Z,onCellClick:ce,onCellDoubleClick:Ae,onEventClick:ve,onEventDoubleClick:we,onMoreEventsClick:Ue,onDataChangeStart:k,onDataChangeComplete:U,eventDrag:oe,eventResize:J,onResizeStart:w,onResizing:Q,onResizeStop:ne,onDragStart:se,onDrag:le,onDragStop:Re,viewComponents:ke,weekRule:K}),{eventsData:Pt,addEvent:Dt,deleteEvent:Zt,saveEvent:Jt}=Rl({activeViewProps:lt,renderDates:mt}),Qt=(Fe,Je)=>{var nn,xt;if((Sn=>!!Sn&&"guid"in Sn)(Fe)){Je&&((nn=ae.current)==null||nn.handleEventClick(Fe,Je));return}Fe&&(Fe!=null&&Fe.element)&&((xt=ae.current)==null||xt.handleCellClick(Fe,Fe==null?void 0:Fe.element))},Wt=(Fe,Je,Lt)=>{Fe==="Add"?_e(Je):Fe==="Edit"&&be(Je)},Ft=Fe=>{var xt;const Je=Fe&&"current"in Fe?Fe==null?void 0:Fe.current:Fe,Lt=(xt=Je==null?void 0:Je.getAttribute)==null?void 0:xt.call(Je,"data-guid");return xe.getEventByGuid(Pt,Lt)??null},yn=Fe=>{const Je=bl(Fe,u);return{startTime:Je.startTime,endTime:Je.endTime,isAllDay:Je.isAllDay,element:Je.element}},bn=lt.editor??ee??Vl,vt=e.useMemo(()=>({element:b.current,addEvent:Dt,deleteEvent:Zt,saveEvent:Jt,openEditor:Wt,closeEditor:()=>{ge()},getEventDetails:Ft,getCellDetails:yn,closeQuickInfoPopup:()=>{var Fe;(Fe=ae.current)==null||Fe.hide()},openQuickInfoPopup:Qt}),[Dt,Zt,Jt,b.current,Pt,ge]);e.useEffect(()=>{z.current=vt},[vt]),e.useEffect(()=>{Ot("scheduler")},[]),e.useImperativeHandle(n,()=>vt,[vt]);const en={...lt,handleCalendarChange:Dn,handleViewButtonClick:gn,handlePreviousClick:qt,handleNextClick:Tn,handleTodayClick:Gt,schedulerRef:z,morePopupRef:te,quickPopupRef:ae,keyboardNavigation:_,confirmationDialog:ue,showDeleteAlert:Fe=>{ue==null||ue.show({title:He("deleteEvent"),message:He("confirmDeleteMessage"),confirmText:He("delete"),showCancel:!0,onConfirm:()=>{Fe(),ue.hide()}})}},at=I===!0||typeof I=="object",Rn=typeof I=="object"?I:void 0,tn=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:d.TABLE_CONTAINER,children:c.jsx("div",{className:d.TABLE_WRAP,children:c.jsxs(Ll,{children:[c.jsx(kl,{}),vn()]})})}),c.jsx(Ss,{ref:te})]});return c.jsx("div",{ref:b,className:et,style:{height:s,width:t},tabIndex:0,role:"application","aria-label":"Scheduler",onKeyDown:Ol(en,Pt),...G,children:c.jsx(Po.Provider,{value:en,children:c.jsx(Es.Provider,{value:{renderDates:mt},children:c.jsxs(gs.Provider,{value:{eventsData:Pt},children:[N!==!1&&c.jsx(Dl,{view:rt,availableViews:ke,onViewButtonClick:gn,onPreviousClick:qt,onNextClick:Tn,onTodayClick:Gt,onDateDropdownClick:Cn,dateRangeText:gt,showCalendar:Xt,calendarView:En,selectedDate:it,firstDayOfWeek:lt.firstDayOfWeek,handleCalendarChange:Dn,renderDates:mt,customizeHeader:typeof N=="function"?N:void 0}),at?c.jsx(Ul,{...Rn||{},onTooltipOpen:q,children:tn}):tn,c.jsx(bs,{ref:ae,onClose:Ne,onEditEvent:be,onMoreDetails:_e}),c.jsx(_l,{editorState:W,children:c.jsx(bn,{open:X,onClose:ge,data:de,action:Se,originalData:Ee})}),c.jsx(Pl,{visible:Ce.visible,title:Ce.title,message:Ce.message,confirmText:Ce.confirmText,showCancel:Ce.showCancel,onConfirm:Ce.onConfirm||(()=>ue.hide()),onCancel:ue.hide})]})})})})});no.displayName="Scheduler";no.__docgenInfo={description:`The React Scheduler component that displays a list of events scheduled at specific dates and times, helping users plan and manage their schedule effectively.

\`\`\`typescript
import { Scheduler, DayView, WeekView, WorkWeekView, MonthView } from '@syncfusion/react-scheduler';

<Scheduler>
  <DayView />
  <WeekView />
  <WorkWeekView />
  <MonthView />
</Scheduler>
\`\`\``,methods:[],displayName:"Scheduler"};const zl=o=>c.jsx(c.Fragment,{children:o.children});zl.displayName="SchedulerHeader";const Yl=({showTimeIndicator:o,startHour:n,endHour:s,renderDates:t,onPositionUpdate:r})=>{const[i,a]=e.useState(0),[l,m]=e.useState(new Date),[u,f]=e.useState(!1),[p,h]=e.useState(!1),E=e.useRef(null),g=t.length>1,C=!!(t&&t.length>0),D=e.useCallback(()=>{const O=new Date,A=F.getStartEndHours(n),V=F.getStartEndHours(s),L=O.getHours()*Xe+O.getMinutes(),y=A.getHours()*Xe+A.getMinutes(),S=V.getHours()===0&&V.getMinutes()===0?Fs*Xe:V.getHours()*Xe+V.getMinutes();return L>=y&&L<=S},[n,s]),P=e.useCallback(()=>{const O=new Date,A=F.getStartEndHours(n),V=F.getStartEndHours(s),L=(O.getHours()-A.getHours())*Xe+(O.getMinutes()-A.getMinutes()),y=A.getHours()*Xe+A.getMinutes(),T=(V.getHours()===0&&V.getMinutes()===0?Fs*Xe:V.getHours()*Xe+V.getMinutes())-y,N=L/T*100;return Math.max(0,Math.min(100,N))},[n,s]),R=e.useCallback(()=>{const O=new Date,A=D();if(Math.abs(O.getTime()-l.getTime())>=fn&&m(O),p!==A&&h(A),u!==(A&&o)&&f(A&&o),!A)return;const V=P();Math.abs(V-i)>.1&&a(V)},[P,l,u,p,i,o,D]);e.useEffect(()=>{if(o)return R(),E.current=setInterval(()=>{R()},fn),()=>{E.current&&(clearInterval(E.current),E.current=null)}},[o,R]);const v=e.useCallback(()=>{const O=new Date,A=(t==null?void 0:t.length)>0&&t.some(L=>F.isSameDay(L,O));if(!C||!A)return{isMultiDayView:g,hasValidRenderDates:C,columns:[],isCurrentDayRendered:!1};if(!g){const L=t.length===1&&F.isSameDay(t[0],O);return{isMultiDayView:g,hasValidRenderDates:C,columns:[],isCurrentDayRendered:L}}const V=t.map((L,y)=>{const S=F.isSameDay(L,O),T=L<O&&!F.isSameDay(L,O);if(L>O&&!F.isSameDay(L,O)||!S&&!T)return null;const _=100/t.length,x=y*_;return{key:L.getTime(),isCurrentDay:S,leftPosition:x,columnWidth:_}}).filter(Boolean);return{isMultiDayView:g,hasValidRenderDates:C,columns:V,isCurrentDayRendered:A}},[g,C,t]);return e.useEffect(()=>{r&&r(i,u&&p&&v().isCurrentDayRendered)},[i,u,p,r,v]),{position:i,currentTime:l,isVisible:u,isWithinBounds:p,multiDayViewInfo:v(),updatePosition:R}},Kl=o=>{const{onPositionUpdate:n}=o,{renderDates:s}=Et(),{showTimeIndicator:t,startHour:r,endHour:i}=Ve(),{position:a,isVisible:l,isWithinBounds:m,multiDayViewInfo:u}=Yl({showTimeIndicator:t,startHour:r,endHour:i,renderDates:s,onPositionUpdate:n});return!l||!m||!u.isCurrentDayRendered?null:!u.isMultiDayView||!u.hasValidRenderDates?c.jsx("div",{className:d.CURRENT_TIMELINE,style:{top:`${a}%`}}):c.jsx(c.Fragment,{children:u.columns.map(f=>c.jsx("div",{className:f.isCurrentDay?d.CURRENT_TIMELINE:d.PREVIOUS_TIMELINE,style:{top:`${a}%`,width:`${f.columnWidth}%`,insetInlineStart:`${f.leftPosition}%`}},f.key))})},Xl=(o,n,s,t)=>{let r=0,i=!1;for(;!i;){i=!0;for(const a of o){const l=F.normalizeDate(a);if(l>=n&&l<=s){const m=F.generateDateKey(a);if((t.get(m)||[]).findIndex((p,h)=>h===r&&p)!==-1){i=!1,r++;break}}}}return r},ql=(o,n=2)=>{const{eventSettings:s}=Ve(),{renderDates:t}=Et(),{eventsData:r}=$t(),i=e.useMemo(()=>{if(!(t!=null&&t.length)||!(r!=null&&r.length))return[];const E=r.filter(v=>!v.startTime||!v.endTime||v.isBlock?!1:v.isAllDay&&!xe.isMultiDayEvent(v)),g=r.filter(v=>!v.startTime||!v.endTime?!1:s.spannedEventPlacement==="AllDayRow"?!v.isAllDay&&F.isLessthan24Hours(v.startTime,v.endTime)?!1:xe.isMultiDayEvent(v):v.isAllDay&&xe.isMultiDayEvent(v));let C=new Map;t.forEach(v=>{const O=F.generateDateKey(v);C.set(O,[])});const D=[],P=[...E,...g];return F.sortByTimeAndSpan(P).forEach(v=>{if(!v.startTime||!v.endTime)return;const O=F.normalizeDate(v.startTime),A=F.normalizeDate(v.endTime),V=xe.isMultiDayEvent(v),L=V?F.getDaysCount(O,A)+1:1,y=Xl(t,O,A,C),S=["sf-appointment"];if((v.isAllDay||L>1)&&S.push("sf-all-day-appointment"),v.isReadonly&&S.push("sf-read-only"),V)for(const T of t){const N=F.normalizeDate(T);if(N>=O&&N<=A){C=dt.setIndexPosition(C,T,y);const _=N.getTime()===O.getTime(),x=N.getTime()===A.getTime(),M=Math.floor((N.getTime()-O.getTime())/(1e3*60*60*24)),Z=t.findIndex(H=>{const k=F.normalizeDate(H);return k>=O&&k<=A})===t.findIndex(H=>F.normalizeDate(H).getTime()===N.getTime()),ie=_?new Date(v.startTime.getTime()):new Date(N.getFullYear(),N.getMonth(),N.getDate(),0,0,0),pe=x?new Date(v.endTime.getTime()):new Date(N.getFullYear(),N.getMonth(),N.getDate(),0,0,0),Y=`${T.toISOString()}-${v.id}`;D.push({event:v,startDate:ie,endDate:pe,isFirstDay:_,isLastDay:x,isFirstSegmentInRenderRange:Z,segmentIndex:M,totalSegments:L,positionIndex:y,eventClasses:S,eventKey:Y})}}else{C=dt.setIndexPosition(C,O,y);const T=`${O.toISOString()}-${v.id}`;D.push({event:v,startDate:v.startTime,endDate:v.endTime,positionIndex:y,eventClasses:S,eventKey:T})}}),D.sort((v,O)=>{const A=v.positionIndex??0,V=O.positionIndex??0;return A-V})},[r,t,s.spannedEventPlacement,s.fields]),a=e.useMemo(()=>xe.getEventsMap(t,i),[t,i]),l=e.useMemo(()=>xe.isAlldayHasMoreEvents(t,a,n),[a,n,t]),m=e.useMemo(()=>xe.getMaxEventsInCell(a,t),[a,t]),u=e.useMemo(()=>o?m>n?n-1:n:1/0,[o,m,n]),f=e.useCallback(()=>{const E=xe.getMaxEventsInCell(a,t);return E>3&&!o?E*(Wn+pn):Math.min(3,E)*(Wn+pn)},[o,a,t]),p=e.useCallback(E=>[...a.get(E)||[]].sort((D,P)=>(D.positionIndex??0)-(P.positionIndex??0)).slice(0,u),[a,u]),h=e.useCallback(E=>{const g=a.get(E)||[];return Math.max(0,g.length-u)},[a,u]);return{allDayRowEvents:i,eventsByDate:a,hasEventsExceedingMaxCount:l,maxEventsInAnyColumn:m,visibleEventLimit:u,calculateHeight:f,getVisibleEvents:p,getHiddenEventCount:h}},Gl=o=>{const{eventInfo:n,renderDates:s}=o,t=e.useMemo(()=>({...n.event}),[n]),r=e.useMemo(()=>dt.getOverflowDirection(n,s),[n.event.startTime,n.event.endTime,s,n]),i=e.useMemo(()=>dt.calculatePositionStyles(n,s),[n,s]);return{processedEvent:t,overflowDirection:r,positionStyle:i}};class kt{constructor(){Object.defineProperty(this,"isActionPerformed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"removeDocListenersRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cellWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scrollInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slotInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isMonthView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isAllDaySource",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"cloneRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"eventsData",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"eventSettings",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"minScrollSpeed",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"minScrollThreshold",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"enableScroll",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"currentCell",{enumerable:!0,configurable:!0,writable:!0,value:null})}performAutoScrolling(n,s){var O,A;const{clientX:t,clientY:r}=this.getPointerCoordinates(n);if(t==null||r==null)return;const i=s==null?void 0:s.closest(`.${d.CONTENT_WRAP}, .${d.CONTENT_TABLE}, .${d.WORK_CELLS_CONTAINER}`),a=(O=s==null?void 0:s.closest(`.${d.SCHEDULER}`))==null?void 0:O.querySelector(`.${d.MAIN_SCROLL_CONTAINER}`),l=[i,a].filter(Boolean);if(l.length===0)return;const m=l.find(V=>V.scrollHeight>V.clientHeight)||null,u=l.find(V=>V.scrollWidth>V.clientWidth)||null;if(!m&&!u)return;const f=((A=m||u)==null?void 0:A.closest(`.${d.SCHEDULER}`))||(s==null?void 0:s.closest(`.${d.SCHEDULER}`)),p=f==null?void 0:f.querySelector(`.${d.STICKY_HEADER}, .${d.HEADER_SECTION}, .${d.HEADER_ROW}`),h=m?m.getBoundingClientRect():null,E=u?u.getBoundingClientRect():null,g=(p==null?void 0:p.getBoundingClientRect().bottom)??(h?h.top:E?E.top:0);this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);const C=(V,L=this.minScrollThreshold)=>{if(V>L||V<0)return 0;const y=Math.floor((1-V/L)*this.minScrollSpeed);return isFinite(y)?y:0},D=()=>{let V=0;if(m&&h){const L=Math.max(0,m.scrollHeight-m.clientHeight),y=Math.max(0,r-g),S=Math.max(0,u?u.offsetHeight-u.clientHeight:0,m?m.offsetHeight-m.clientHeight:0),T=h.bottom-S,N=Math.max(0,T-r),_=this.minScrollThreshold+S,x=m.scrollTop<=0,M=Math.ceil(m.scrollTop)>=L;y<this.minScrollThreshold&&!x?V=-C(y):N<_&&!M&&(V=C(N,_))}return V},P=()=>{let V=0;if(u&&E){const L=Math.max(0,u.scrollWidth-u.clientWidth),y=Math.max(0,t-E.left),S=Math.max(0,E.right-t),T=u.scrollLeft<=0,N=u.scrollLeft>=L;y<this.minScrollThreshold&&!T?V=-C(y):S<this.minScrollThreshold&&!N&&(V=C(S))}return V},R=D(),v=P();if(R!==0||v!==0){const V=()=>{let L=!1;if(!(!this.currentCell&&kt.currentActionName!=="resize")&&!this.isAllDaySource){if(m&&R!==0){const y=Math.max(0,m.scrollHeight-m.clientHeight),S=Math.max(0,Math.min(y,m.scrollTop+R));S!==m.scrollTop&&(m.scrollTop=S,L=!0)}if(u&&v!==0){const y=Math.max(0,u.scrollWidth-u.clientWidth),S=Math.max(0,Math.min(y,u.scrollLeft+v));S!==u.scrollLeft&&(u.scrollLeft=S,L=!0)}if(!L){this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);return}this.scrollInterval=requestAnimationFrame(V)}};this.scrollInterval=requestAnimationFrame(V)}}getPointerCoordinates(n){if(!n)return{clientX:null,clientY:null};let s=null,t=null;return n.touches&&n.touches.length>0?(s=n.touches[0].clientX,t=n.touches[0].clientY):n.changedTouches&&n.changedTouches.length>0?(s=n.changedTouches[0].clientX,t=n.changedTouches[0].clientY):n.clientX!=null&&n.clientY!=null&&(s=n.clientX,t=n.clientY),{clientX:s,clientY:t}}getContentWrap(n){return n?n.closest(`.${d.CONTENT_WRAP}, .${d.CONTENT_TABLE}, .${d.WORK_CELLS_CONTAINER}, .${d.DATE_HEADER_CONTAINER}`):null}getCurrentTargetDate(n,s){var a,l;if(!n&&!s)return null;let t=null;const r=(a=n||s)==null?void 0:a.closest(`.${d.SCHEDULER}`),i=s==null?void 0:s.closest(`.${d.ALL_DAY_ROW}`);if(r&&i&&s){const u=Array.from(i.querySelectorAll(`.${d.ALL_DAY_CELL}`)).indexOf(s),f=r.querySelector(`.${d.CONTENT_TABLE}, .${d.WORK_CELLS_ROW}`),h=(l=(f?Array.from(f.querySelectorAll(`.${d.WORK_CELLS}`)):[])[u])==null?void 0:l.getAttribute("data-date");h&&(t=Number(h))}return t}getCell(n,s,t){const r=document==null?void 0:document.elementsFromPoint(n,s);for(const i of r){const a=i.classList.contains(`${d.WORK_CELLS}`)||i.classList.contains(`${d.ALL_DAY_CELL}`)?i:null;if(a&&(t||!(this!=null&&this.isAllDaySource)||i.classList.contains(d.ALL_DAY_CELL)))return a}return null}getCellUnderPointer(n){const{clientX:s,clientY:t}=this.getPointerCoordinates(n);return s==null||t==null?null:this.getCell(s,t,!0)}getCellUnderClone(n){if(!this.cloneRef||!n)return null;const s=this.getContentWrap(n),t=s==null?void 0:s.getBoundingClientRect();if(!s||!t)return null;const r=(C,D=0)=>isFinite(C)?C:D,i=s.scrollLeft||0;let a=0,l=0;const m=s.querySelector(`.${d.ALL_DAY_ROW}`);if(!m)return null;const u=Array.from(m.querySelectorAll(`.${d.ALL_DAY_CELL}`));if(u.length===0)return null;const f=u[0],p=Math.max(1,f.offsetWidth||this.cellWidth||1),h=r(parseFloat(this.direction==="rtl"?this.cloneRef.style.right:this.cloneRef.style.left||"0"),0),E=Math.max(1,Math.ceil(this.cloneRef.offsetWidth/p));a=this.direction==="rtl"?t.right-h-this.cloneRef.offsetWidth/E+i:t.left+h+this.cloneRef.offsetWidth/E-i;const g=Math.max(0,f.offsetHeight);return l=t.top+m.offsetTop+g/2,this.getCell(a,l,!1)}cloneFromSource(n,s){const t=n.cloneNode(!0);return t.classList.add(d.DRAG_CLONE,d.NO_POINTER,d.POSITION_ABSOLUTE),s!=null&&s.externalDragAndDrop&&(t.classList.add(d.EXTERNAL_DRAG_CLONE,d.CONTROL),t.style.zIndex=Er(t).toString()),t}suppressEvent(n){var s,t;(this.isActionPerformed||kt.currentActionName==="resize")&&(kt.currentActionName="",(s=n==null?void 0:n.preventDefault)==null||s.call(n),(t=n==null?void 0:n.stopPropagation)==null||t.call(n))}addDocSuppressors(){const n=["click"],s=t=>this.suppressEvent(t);n.forEach(t=>document==null?void 0:document.addEventListener(t,s,!0)),this.removeDocListenersRef=()=>{this.removeDocListenersRef&&(n.forEach(t=>document==null?void 0:document.removeEventListener(t,s,!0)),this.removeDocListenersRef=void 0)}}updateDatasource(n,s,t,r){var a;const i={};if(Array.isArray(this.eventsData)||n||this.eventSettings){const l=this.eventSettings.fields;i[l.id]=n.id,i[l.subject]=n.subject,i[l.startTime]=s,i[l.endTime]=t,i[l.isAllDay]=n.isAllDay,(a=r==null?void 0:r.current)!=null&&a.saveEvent&&r.current.saveEvent(i)}return i}setCursorClass(n){document!=null&&document.body&&(document.body.classList.remove(d.SCHEDULER_CURSOR_MOVE,d.SCHEDULER_CURSOR_NOT_ALLOWED,d.SCHEDULER_CURSOR_DEFAULT),n==="move"?document.body.classList.add(d.SCHEDULER_CURSOR_MOVE):n==="notAllowed"?document.body.classList.add(d.SCHEDULER_CURSOR_NOT_ALLOWED):document.body.classList.add(d.SCHEDULER_CURSOR_DEFAULT))}}Object.defineProperty(kt,"currentActionName",{enumerable:!0,configurable:!0,writable:!0,value:""});function Zl({ref:o,data:n,containerProps:s}){const t=Ve(),{timeScale:r,startHour:i,endHour:a,schedulerRef:l,eventSettings:m,showWeekend:u,workDays:f,onDragStart:p,onDrag:h,onDragStop:E,eventOverlap:g,confirmationDialog:C,eventDrag:D}=t,P=e.useMemo(()=>({...n,startTime:new Date(n==null?void 0:n.startTime),endTime:new Date(n==null?void 0:n.endTime)}),[n]),{getString:R}=st(),v=D,{dir:O}=$e(),{eventsData:A}=$t(),{renderDates:V}=Et(),L=ws(),y=e.useRef(null),S=y,T=e.useRef(null),N=e.useRef({}),_=e.useRef({minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}),x=e.useRef(null),M=e.useRef(0),Z=e.useRef(0),ie=e.useRef(!0),pe=e.useRef(null),Y=e.useRef(!1),H=e.useRef(null),k=e.useRef(null),U=e.useRef(!1);Vt(y,{tapHold:()=>{ie.current=!1}}),e.useEffect(()=>{r&&T.current&&(T.current.slotInterval=r.interval/r.slotCount)},[r]);const oe=e.useCallback(W=>{y.current=W,typeof o=="function"?o(W):o&&(o.current=W)},[o,L]),J=e.useCallback(W=>{if(!W||!T.current)return{};const X=T.current.getContentWrap(W),de=X?X.getBoundingClientRect():null,Ee=W.getBoundingClientRect(),Se=de?Math.round(Ee.left-de.left+((X==null?void 0:X.scrollLeft)||0)):W.offsetLeft,ge=de?Math.round(Ee.top-de.top+((X==null?void 0:X.scrollTop)||0)):W.offsetTop;return{left:Se,top:ge}},[L]),w=e.useCallback(()=>{var W,X;M.current=0,Z.current=0,N.current={},pe.current=null,Y.current=!1,T.current&&(T.current.setCursorClass("default"),T.current.isActionPerformed=!1,T.current.enableScroll=!0,T.current.scrollInterval!=null&&(cancelAnimationFrame(T.current.scrollInterval),T.current.scrollInterval=null),(X=(W=T.current)==null?void 0:W.removeDocListenersRef)==null||X.call(W)),x.current!=null&&(cancelAnimationFrame(x.current),x.current=null),_.current={minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}},[]);e.useEffect(()=>()=>{w()},[w]);const Q=()=>{if(x.current=null,!T.current||T.current.scrollInterval==null)return;const W=N.current.lastDragEvent;if(W){let X=T.current.getCellUnderPointer(W);if(!X){const de=W.target||null;X=Ce(de)}if(X&&T.current.currentCell){let de=new Date(Number(X.getAttribute("data-date")));T.current.isAllDaySource&&(de=F.normalizeDate(de)),!T.current.isMonthView&&!T.current.isAllDaySource&&(K(X),_.current.finalDragStartTime&&(de=_.current.finalDragStartTime)),q(de)}}T.current&&T.current.scrollInterval!=null&&(x.current=requestAnimationFrame(Q))},ne=e.useCallback(W=>{if(!T.current)return;const X=v.externalDragAndDrop&&T.current.getCellUnderPointer(W)||y.current;T.current.performAutoScrolling(W,X),T.current.scrollInterval!==null&&x.current===null&&!T.current.isMonthView&&(x.current=requestAnimationFrame(Q))},[J]),se=W=>{const X=T.current.getContentWrap(W);if(T.current.isAllDaySource=U.current=W.classList.contains(`${d.ALL_DAY_APPOINTMENT}`),T.current.isAllDaySource){const de=xe.getEventByGuid(A,n.guid);de.endTime=new Date(F.normalizeDate(de.endTime).getTime()+T.current.slotInterval*fn)}if(X){const de=X.querySelector(`.${d.WORK_CELLS}[data-date], .${d.ALL_DAY_CELL}`);de&&(M.current=de.offsetHeight??0,T.current.cellWidth=de.offsetWidth??0)}return _.current.minutesPerPixel=M.current>0?T.current.slotInterval/M.current:0,T.current.isMonthView=!!(W!=null&&W.closest(`.${d.MONTH_VIEW}`)),W.draggable=!1,X},le=(W,X)=>{var de;if(T.current.cloneRef=W,v!=null&&v.externalDragAndDrop){T.current.isMonthView&&W.classList.add(`${d.MONTH_EVENT}`);const Ee=T.current.isMonthView||T.current.isAllDaySource;Ee||(W.style.height=y.current.style.height),W.style.width=`${Ee?y.current.clientWidth:T.current.cellWidth}px`}else W.style.width="1px",W.style.height="1px";(de=v.externalDragAndDrop&&(document==null?void 0:document.querySelector(v.eventDragArea))||X||(document==null?void 0:document.body))==null||de.appendChild(W)},Re=()=>{var de,Ee,Se,ge;const W=(Ee=T.current)==null?void 0:Ee.getContentWrap((de=T.current)==null?void 0:de.currentCell);return((Se=W==null?void 0:W.closest)==null?void 0:Se.call(W,`.${d.TABLE_WRAP}`))||H.current||((ge=l.current)==null?void 0:ge.element)||null},Pe=(W,X)=>{const de=Re();if(!de)return;const Ee={container:de,payload:{guid:n.guid,segments:W,isDayEvent:X}};window==null||window.dispatchEvent(new CustomEvent("showCloneEvent",{detail:Ee}))},Ue=()=>{T.current.currentCell=H.current=null;const W=document==null?void 0:document.querySelectorAll(`.${d.SCHEDULER}`);W.length&&W.forEach(X=>window==null?void 0:window.dispatchEvent(new CustomEvent("hideCloneEvent",{detail:{container:X}})))},I=W=>{if(!W)return 0;let X=Math.max(0,W.endTime.getTime()-W.startTime.getTime());return X===0&&W.startTime.getTime()===W.endTime.getTime()&&(X=T.current.slotInterval*fn),X},q=(W,X,de)=>{var _e,be;const Ee=v.externalDragAndDrop,Se=xe.getEventByGuid(A,n.guid);if(!Se||!T.current)return;let ge=V;if(W){const Me=I(Se);Se.startTime=new Date(W),Se.endTime=new Date(Se.startTime.getTime()+Me)}if(Ee&&W){const Me=F.normalizeDate(X??W).getTime();(!ge.some(ke=>F.normalizeDate(ke).getTime()===Me)||t.view!==k.current)&&(t.selectedDate=X??W,ge=F.getRenderDates(k.current,t.selectedDate,t,X,de))}const Ae=T.current.isMonthView||T.current.isAllDaySource;if(Ae||!r.enable){const Me=xe.processCloneEvent(Ee?H.current:(_e=l.current)==null?void 0:_e.element,ge,Se,u,f,T.current.cellWidth,T.current.isAllDaySource,O==="rtl",T.current.isMonthView,y.current);Ee?Pe(Me,Ae):L==null||L.show({guid:n.guid,segments:Me,isDayEvent:Ae});return}const we=xe.processTimeSlotCloneEvent(Ee?H.current:(be=l.current)==null?void 0:be.element,ge,Se,r,i,a,T.current.cellWidth,O==="rtl");Ee?Pe(we,!1):L==null||L.show({guid:n.guid,segments:we,isDayEvent:!1})},me=W=>{var Se,ge,Ae;if(!y.current||((Se=W.sender)==null?void 0:Se.type)==="touchmove"&&ie.current)return null;(Ae=(ge=T.current)==null?void 0:ge.cloneRef)!=null&&Ae.parentElement&&T.current.cloneRef.parentElement.removeChild(T.current.cloneRef),T.current=new kt,T.current.eventSettings=m,T.current.eventsData=A,T.current.direction=O,T.current.slotInterval=(r==null?void 0:r.interval)/(r==null?void 0:r.slotCount),k.current=t.view;const X=y.current,de=se(X),Ee=T.current.cloneFromSource(X,D);return le(Ee,de),Ee},ee=W=>{var Ee,Se,ge,Ae;if(!T.current)return;N.current={};const X=T.current;X.isActionPerformed=!0,G(W),X.addDocSuppressors(),(Ee=y.current)==null||Ee.classList.add(d.DRAGGING),T.current.setCursorClass("move"),N.current.lastDragEvent=W.event,fe(W);const de={...W,data:n};if(p==null||p(de),de.cancel){W.cancel=!0,z(),w(),T.current=null;return}if(D){const we=D;we.interval&&(Y.current=X.slotInterval!==we.interval,X.slotInterval=we.interval),X.enableScroll=((Se=we.scroll)==null?void 0:Se.enable)??!0,X.minScrollSpeed=((ge=we.scroll)==null?void 0:ge.scrollBy)??X.minScrollSpeed,X.minScrollThreshold=((Ae=we.scroll)==null?void 0:Ae.timeDelay)??X.minScrollThreshold,pe.current=we.excludeSelectors??null}},fe=W=>{try{const X=y.current;if(!X)return;const de=T.current.getContentWrap(X),Ee=de==null?void 0:de.getBoundingClientRect(),{clientY:Se,clientX:ge}=T.current.getPointerCoordinates(W.event);if(!de||!Ee||Se==null&&ge==null)return;const Ae=X.getBoundingClientRect(),we={top:de.scrollTop||0,left:de.scrollLeft||0};_.current.dragAnchorOffsetPx=Se!=null?Se-Ee.top+we.top-(Ae.top-Ee.top+we.top):null,_.current.dragAnchorOffsetX=ge!=null?ge-Ee.left+we.left-(Ae.left-Ee.left+we.left):null}catch{_.current.dragAnchorOffsetPx=_.current.dragAnchorOffsetX=null}},B=W=>{var X;!((X=T.current)!=null&&X.isAllDaySource)&&T.current.enableScroll&&ne(W.event)},K=W=>{var Se;if(!((Se=T.current)!=null&&Se.cloneRef&&W&&T.current))return;const X=T.current,de=X.getContentWrap(W);if((de==null?void 0:de.getBoundingClientRect())&&n){let ge=Number(W.getAttribute("data-date"));if(!ge||isNaN(ge))return;X.isAllDaySource&&(ge=Number(F.normalizeDate(new Date(ge))));let Ae=new Date;if(t.view===k.current)if(U.current&&!X.isAllDaySource)Ae=new Date(ge);else if(Y.current&&!X.isAllDaySource&&!X.isMonthView){const be=N.current.lastDragEvent,Me=be?X.getPointerCoordinates(be):{clientY:null},He=de==null?void 0:de.getBoundingClientRect(),ke=_.current.minutesPerPixel;let et=ge;if(He&&Me.clientY!=null&&ke>0){let it=Math.max(0,Math.round((Me.clientY-He.top+de.scrollTop)*ke));const rt=Math.max(0,X.slotInterval||0);rt>0&&(it=Math.floor(it/rt)*rt);const{schedulerStartMinutes:mt}=F.getSchedulerStartAndEndMinutes(i,a),lt=new Date(ge);lt.setHours(0,0,0,0),et=lt.getTime()+(mt+it)*6e4,et=et-Z.current}else et=ge-Z.current;Ae=new Date(et)}else X.isAllDaySource===U.current&&(ge=ge-Z.current),Ae=new Date(ge);else Ae=new Date(ge),v.externalDragAndDrop&&k.current==="Month"&&F.setHours(Ae,P.startTime);if(isNaN(Ae.getTime()))return;_.current.finalDragStartTime=new Date(Ae);const we=xe.getEventByGuid(A,n.guid),_e=I(we);_.current.finalDragEndTime=new Date(_.current.finalDragStartTime.getTime()+_e)}},G=W=>{const X=T.current.getCellUnderPointer(W.event);if(X&&T.current&&X&&n){const de=X.getAttribute("data-date");if(!de||isNaN(Number(de)))return;const Ee=xe.getEventByGuid(A,n.guid);if(!Ee)return;const Se=new Date(Ee.startTime).getTime();Z.current=Number(de)-Se}},b=W=>{var de,Ee,Se,ge,Ae,we,_e,be,Me,He,ke,et,it;if(!T.current)return;let X=T.current.getCellUnderPointer(W.event);if(X||(X=Ce(W.target)),v.externalDragAndDrop&&(Ue(),t.view!==k.current&&(T.current.cellWidth=((Ee=(de=W.target.closest(`.${d.SCHEDULER}`))==null?void 0:de.querySelector(`.${d.WORK_CELLS}[data-date], .${d.ALL_DAY_CELL}`))==null?void 0:Ee.clientWidth)??y.current.clientWidth),T.current.isMonthView=!!((Se=X||W.target)!=null&&Se.closest(`.${d.MONTH_VIEW}`)),(ge=X||W.target)!=null&&ge.closest(`.${d.DAY_VIEW}`)?k.current="Day":(Ae=X||W.target)!=null&&Ae.closest(`.${d.WEEK_VIEW}`)?k.current="Week":(we=X||W.target)!=null&&we.closest(`.${d.WORK_WEEK_VIEW}`)?k.current="WorkWeek":T.current.isMonthView&&(k.current="Month")),T.current.currentCell=X,T.current.isMonthView||(T.current.isAllDaySource=n.isAllDay=((_e=X||W.target)==null?void 0:_e.classList.contains(d.ALL_DAY_CELL))||!!((be=W.target)!=null&&be.closest(`.${d.DATE_HEADER_CONTAINER}`))),X){T.current.setCursorClass("move"),B(W),v.externalDragAndDrop&&(H.current=X.closest(`.${d.SCHEDULER}`),T.current.cloneRef.classList.add(d.DRAG_CLONE));let rt=new Date(Number(X.getAttribute("data-date"))),mt=rt,lt=rt;if(T.current.isMonthView){const gt=(Me=X.closest(`.${d.CONTENT_TABLE}`))==null?void 0:Me.querySelectorAll(`.${d.WORK_CELLS}`);rt=new Date(Number((He=gt[0])==null?void 0:He.getAttribute("data-date"))),lt=new Date(Number((ke=gt[(gt==null?void 0:gt.length)-1])==null?void 0:ke.getAttribute("data-date")))}N.current.lastDragEvent=W.event,K(X),_.current.finalDragStartTime&&(mt=_.current.finalDragStartTime),q(mt,rt,lt)}else v.externalDragAndDrop&&((it=(et=W.target)==null?void 0:et.closest)!=null&&it.call(et,`.${d.SCHEDULER_TOOLBAR_CONTAINER}, .${d.STICKY_HEADER}, .${d.HEADER_SECTION},
                .${d.HEADER_ROW}, .${d.LEFT_INDENT}`)&&(document!=null&&document.body)?T.current.setCursorClass("notAllowed"):document!=null&&document.body&&T.current.setCursorClass("default"),T.current.cloneRef.classList.remove(d.DRAG_CLONE));h==null||h({...W,data:n})},z=()=>{var W,X,de,Ee;(W=y.current)==null||W.removeAttribute("aria-grabbed"),(X=y.current)==null||X.classList.remove(d.DRAGGING),T.current.setCursorClass("default"),(Ee=(de=T.current)==null?void 0:de.cloneRef)!=null&&Ee.parentElement&&T.current.cloneRef.parentElement.removeChild(T.current.cloneRef)},te=()=>{T.current&&(T.current.cloneRef=null)},ue=W=>{var Ee,Se,ge,Ae,we,_e;let X=null,de=null;if((Ee=T.current)!=null&&Ee.isAllDaySource?X=((ge=T.current)==null?void 0:ge.getCellUnderClone((Se=T.current)==null?void 0:Se.cloneRef))||((Ae=T.current)==null?void 0:Ae.getCellUnderPointer(W.event)):X=(we=T.current)==null?void 0:we.getCellUnderPointer(W.event),X||(X=Ce(W.target)),X){const be=X.getAttribute("data-date");de=be?Number(be):(_e=T.current)==null?void 0:_e.getCurrentTargetDate(W.target,X)}return{cell:X,finalDropTimestamp:de}},Ce=W=>{if(!W)return null;const X=W.closest(`.${d.DATE_HEADER_CONTAINER}`);if(X){const de=W.closest(`.${d.HEADER_CELLS}`),Ee=X.querySelector(`.${d.HEADER_ROW}`),Se=X.querySelector(`.${d.ALL_DAY_ROW}`);if(Ee&&Se){const ge=Array.from(Ee.querySelectorAll(`.${d.HEADER_CELLS}`)),Ae=Array.from(Se.querySelectorAll(`.${d.ALL_DAY_CELL}`));let we=-1;if(de)we=ge.indexOf(de);else for(let _e=0;_e<ge.length;_e++)if(ge[_e].contains(W)){we=_e;break}if(we>=0&&Ae[we])return Ae[we];if(Ae.length)return Ae[0]}}return W.closest(`.${d.WORK_CELLS}, .${d.DAY_WRAPPER}, .${d.ALL_DAY_CELL}`)},j=(W,X)=>{var we,_e,be;const de=new Date(W.startTime),Ee=new Date(W.endTime),Se=Math.max(0,Ee.getTime()-de.getTime());let ge=new Date(X);(we=T.current)!=null&&we.isAllDaySource?F.setHours(ge,de):(_e=T.current)!=null&&_e.isMonthView?(ge=F.normalizeDate(ge),F.setHours(ge,de)):(X=X-Z.current,ge=new Date(X));const Ae=new Date(ge.getTime()+Se);return(be=T.current)!=null&&be.isAllDaySource&&F.setHours(Ae,Ee),{originalStart:de,originalEnd:Ee,durationMs:Se,newStartTime:ge,newEndTime:Ae}},ae=(W,X,de,Ee)=>{if(!T.current)return;const Se=T.current.updateDatasource(W,X,de,l);w(),Ee.cancel=!0,E==null||E({...Ee,data:Se})},Ne=e.useCallback(W=>{if(!pe.current)return!0;const X=pe.current.split(",");for(const de of X)if(W!=null&&W.classList.contains(de.trim()))return!1;return!0},[]),ce=W=>{if(!T.current)return;if(z(),W.element){const ge=W.element.closest(`.${d.TABLE_WRAP}`);ge&&(T.current.cloneRef=ge.querySelector(`.${d.APPOINTMENT}.${d.EVENT_CLONE}`))}const{cell:X,finalDropTimestamp:de}=ue(W);te(),v.externalDragAndDrop?Ue():L==null||L.hide();const Ee=Array.isArray(n)?n[0]:n,Se=(ge,Ae)=>{const we=xe.getEventByGuid(A,n.guid);we&&(we.startTime=P.startTime,we.endTime=P.endTime),w(),W.cancel=!0,ge!==null&&Ae!==null&&(C==null||C.show({title:R(ge),message:R(Ae),confirmText:R("ok"),showCancel:!1,onConfirm:()=>C.hide()})),E==null||E({...W,data:Ee}),T.current=null};if(!X){Se(null,null);return}if(Ne(X)){let ge,Ae;if(_.current.finalDragStartTime&&_.current.finalDragEndTime)ge=_.current.finalDragStartTime,Ae=_.current.finalDragEndTime;else if(X&&de){const{newStartTime:we,newEndTime:_e}=j(Ee,de);ge=we,Ae=_e}if(ge&&Ae){const we={...Ee,startTime:ge,endTime:Ae};if(!g&&xe.checkEventOverlap(we,A,!0)){Se("eventOverlap","overlapAlert");return}if(xe.isBlockRange(we,A,!0)){Se("alert","blockAlert");return}U.current&&T.current.isMonthView&&(n.isAllDay=!0),ae(Ee,ge,Ae,W);return}}else{const ge=xe.getEventByGuid(A,n.guid);ge.startTime=Ee.startTime,ge.endTime=Ee.endTime}w(),E==null||E({...W,data:n}),T.current=null};Yt(S,{clone:!0,cursorAt:v!=null&&v.externalDragAndDrop?{left:-20,top:-20}:{left:-5,top:-5},dragArea:(v==null?void 0:v.eventDragArea)??`.${d.CONTENT_WRAP}, .${d.CONTENT_TABLE}`,abort:`.${d.EVENT_RESIZE_CLASS}, .${d.LEFT_RESIZE_HANDLER}, .${d.RIGHT_RESIZE_HANDLER}, .${d.TOP_RESIZE_HANDLER}, .${d.BOTTOM_RESIZE_HANDLER}, .${d.BLOCK_APPOINTMENT}`,distance:5,helper:W=>me(W),onDragStart:W=>ee(W),onDrag:W=>b(W),onDragStop:W=>ce(W),enableTailMode:v==null?void 0:v.externalDragAndDrop});const ve={...s||{},onClick:W=>{var X,de,Ee;(X=T.current)==null||X.suppressEvent(W),!((de=T.current)!=null&&de.isActionPerformed)&&((Ee=s==null?void 0:s.onClick)==null||Ee.call(s,W))}};return{mergedRef:oe,composedProps:ve}}const zn=e.memo(e.forwardRef((o,n)=>{const{children:s,data:t,className:r,containerProps:i}=o,{mergedRef:a,composedProps:l}=Zl({ref:n,data:t,containerProps:i});return c.jsx("div",{ref:a,className:r,...l,children:s})}));zn.displayName="DraggableEvent";zn.__docgenInfo={description:"",methods:[],displayName:"DraggableEvent"};function Jl(o){var I,q,me,ee;const{onResizeStart:n,onResizing:s,onResizeStop:t,timeScale:r,startHour:i,endHour:a,schedulerRef:l,eventSettings:m,showWeekend:u,workDays:f,eventOverlap:p,confirmationDialog:h}=Ve(),{eventsData:E}=$t(),{renderDates:g}=Et(),C=ws(),{dir:D}=$e(),P=e.useRef(null),R=e.useRef(null),v=10,O=e.useRef(new Date),A=e.useRef(0),V=e.useRef(0),L=e.useRef(0),y=e.useRef(0),S=e.useRef(Ke.Right),T=e.useRef(void 0),N=e.useRef(void 0),_=e.useRef(null),x=e.useRef(void 0),{getString:M}=st(),Z=e.useRef(null);e.useEffect(()=>()=>{ne(),pe(),R.current=null,P.current=null},[]);const ie=()=>{je.add(document,"mousemove",se,!0),je.add(document,"touchmove",se,{capture:!0,passive:!1}),je.add(document,"mouseup",le,!0),je.add(document,"touchend",le,{capture:!0})},pe=()=>{je.remove(document,"mousemove",se),je.remove(document,"touchmove",se),je.remove(document,"mouseup",le),je.remove(document,"touchend",le)},Y=()=>{document.body.style.userSelect="none",document.body.style.cursor=S.current===Ke.Left||S.current===Ke.Right?"ew-resize":"ns-resize"},H=()=>{document.body.style.userSelect="",document.body.style.cursor=""},k=(fe,B)=>{const K=(B==null?void 0:B.offsetWidth)||0,G=fe.classList.contains(d.ALL_DAY_APPOINTMENT),b=!!fe.closest(`.${d.MONTH_VIEW}`),z=R.current.slotInterval;T.current=o!=null&&o.startTime?new Date(o.startTime):void 0,N.current=o!=null&&o.endTime?new Date(o.endTime):void 0,Ht(R.current,{cellWidth:K,isAllDaySource:G,isMonthView:b,slotInterval:z,interval:z},null,!0)},U=()=>{if(!P.current||!(P.current.offsetParent||P.current.parentElement))return;const B=R.current.cloneFromSource(P.current);R.current.cloneRef=B},oe=e.useCallback((fe,B)=>{var ue;const K=B.nativeEvent,G=(ue=B.target)==null?void 0:ue.closest(`.${d.APPOINTMENT}`);if(!G)return;R.current=new kt,R.current.slotInterval=r!=null&&r.interval&&(r!=null&&r.slotCount)?r.interval/r.slotCount:30,R.current.eventSettings=m,R.current.eventsData=E,R.current.isActionPerformed=!1,S.current=fe,R.current.direction=D,P.current=G,L.current=G.offsetTop,y.current=G.offsetHeight;const b=R.current.getCellUnderPointer(B.nativeEvent);k(G,b),S.current===Ke.Top?O.current=T.current:S.current===Ke.Bottom&&(O.current=N.current);const z=J(K),te=R.current.getPointerCoordinates(K);te.clientX!=null&&(A.current=te.clientX),te.clientY!=null&&(V.current=te.clientY),x.current=K,n==null||n(z),!z.cancel&&(z.interval&&(R.current.slotInterval=z.interval),Z.current={startTime:new Date(o.startTime),endTime:new Date(o.endTime)},ie())},[n,g,o]),J=fe=>({event:fe,cancel:!1,startTime:T.current,endTime:N.current,data:P.current?o:void 0,interval:R.current.slotInterval}),w=fe=>(R.current.performAutoScrolling(fe,P.current),R.current.scrollInterval!==null&&_.current===null&&(_.current=requestAnimationFrame(Ue)),!1),Q=(fe,B)=>{if(!R.current.isActionPerformed){if(Math.hypot(fe,B)<v)return;const G=P.current;if(!G)return;R.current.isActionPerformed=!0,R.current.addDocSuppressors(),G.classList.add(d.RESIZING),U(),document!=null&&document.body&&Y()}},ne=()=>{_.current!=null&&(cancelAnimationFrame(_.current),_.current=null)},se=e.useCallback(fe=>{var ue,Ce;if(!R.current)return;const B=R.current.getPointerCoordinates(fe),K=B.clientX-A.current,G=B.clientY-V.current;if(Q(K,G),!R.current.isActionPerformed)return;x.current=fe;const b=J(fe);if(s==null||s(b),b.cancel)return;kt.currentActionName="resize",b.startTime&&(T.current=b.startTime),b.endTime&&(N.current=b.endTime);const z=P.current;R.current.isAllDaySource||w(fe);const te=R.current.getCellUnderPointer(fe);R.current.cloneRef&&z&&r.enable&&!(R.current.isAllDaySource||R.current.isMonthView)&&Re(te),Pe(te),(ue=fe.preventDefault)==null||ue.call(fe),(Ce=fe==null?void 0:fe.stopPropagation)==null||Ce.call(fe)},[(I=R.current)==null?void 0:I.isActionPerformed,P.current,g,o,A.current,V.current,S.current,(q=R.current)==null?void 0:q.cloneRef,s]),le=e.useCallback(fe=>{var te,ue;if((te=P.current)==null||te.classList.remove(d.RESIZING),R.current.scrollInterval&&cancelAnimationFrame(R.current.scrollInterval),R.current.scrollInterval=null,ne(),pe(),document!=null&&document.body&&H(),R.current.cloneRef=null,(ue=C==null?void 0:C.hide)==null||ue.call(C),!R.current.isActionPerformed){R.current.isActionPerformed=!1;return}R.current.isActionPerformed=!1;const B=J(fe);if(t==null||t(B),B.cancel){const Ce=B.data;Ce&&(T.current=Ce.startTime,N.current=Ce.endTime);return}const K=Array.isArray(o)?o[0]:o,G={...K,startTime:new Date(K.startTime),endTime:new Date(K.endTime)};if(S.current===Ke.Top)F.setHours(G.startTime,O.current);else if(S.current===Ke.Bottom){const Ce=F.isMidnight(G.endTime),j=F.isMidnight(O.current);F.setHours(G.endTime,O.current);const ae=Ce&&!j?-1:!Ce&&j?1:0;G.endTime=F.addDays(G.endTime,ae)}if(R.current.isAllDaySource||R.current.isMonthView){const Ce=R.current.getCellUnderPointer(fe),j=(Ce==null?void 0:Ce.getAttribute("data-date"))??R.current.getCurrentTargetDate(fe.target,Ce);if(!j)return;let Ne=new Date(Number(j));if(S.current===Ke.Right){const ce=F.normalizeDate(G.startTime);Ne.getTime()<ce.getTime()&&(Ne=ce),F.setYear(G.endTime,Ne)}else if(S.current===Ke.Left){const ce=F.normalizeDate(G.endTime);Ne.getTime()>ce.getTime()&&(Ne=ce),F.setYear(G.startTime,Ne)}}const b={...G,startTime:G.startTime,endTime:G.endTime},z=(Ce,j)=>{var Ne;const ae=xe.getEventByGuid(E,o.guid);ae&&Z.current&&(ae.startTime=new Date(Z.current.startTime),ae.endTime=new Date(Z.current.endTime)),h==null||h.show({title:M(Ce),message:M(j),confirmText:M("ok"),showCancel:!1,onConfirm:()=>h.hide()}),(Ne=R.current)==null||Ne.updateDatasource(ae,ae.startTime,ae.endTime,l),R.current=null};if(!p&&xe.checkEventOverlap(b,E,!0)){z("eventOverlap","overlapAlert");return}if(xe.isBlockRange(b,E,!0)){z("alert","blockAlert");return}R.current.updateDatasource(G,G.startTime,G.endTime,l),R.current=null},[(me=R.current)==null?void 0:me.isActionPerformed,P.current,R,(ee=R.current)==null?void 0:ee.cloneRef,se,t]),Re=fe=>{const B=fe==null?void 0:fe.getAttribute("data-date");if(!B)return;const K=new Date(Number(B));let G=K.getHours()*Xe+K.getMinutes();const b=T.current?new Date(T.current):void 0,z=N.current?new Date(N.current):void 0;let te=!1,ue=!1;if(P.current.querySelector(".sf-indicator")&&(te=P.current.querySelector(".sf-indicator").classList.contains("sf-up-icon"),ue=P.current.querySelector(".sf-indicator").classList.contains("sf-down-icon")),S.current===Ke.Top){const Ce=z.getHours()*Xe+z.getMinutes();(ue||Ce>G||Ce===0)&&(b.setHours(K.getHours(),K.getMinutes()),O.current=b)}else if(S.current===Ke.Bottom){G=G+R.current.slotInterval;const Ce=b.getHours()*Xe+b.getMinutes();(te||Ce<G)&&(z.setHours(K.getHours(),K.getMinutes()+R.current.slotInterval),O.current=z)}},Pe=fe=>{var te,ue,Ce,j;if(!o.guid)return;const B=xe.getEventByGuid(E,o.guid);if(!B)return;const K={...B,startTime:new Date(B.startTime),endTime:new Date(B.endTime)},G=((te=R.current)==null?void 0:te.isMonthView)||((ue=R.current)==null?void 0:ue.isAllDaySource);if(!G&&r.enable){const ae={...K};if(S.current===Ke.Top)F.setHours(ae.startTime,O.current);else if(S.current===Ke.Bottom){const ce=F.isMidnight(ae.endTime),ve=F.isMidnight(O.current);F.setHours(ae.endTime,O.current);const W=ce&&!ve?-1:!ce&&ve?1:0;ae.endTime=F.addDays(ae.endTime,W)}const Ne=xe.processTimeSlotCloneEvent((Ce=l.current)==null?void 0:Ce.element,g,ae,r,i,a,R.current.cellWidth,D==="rtl");C==null||C.show({guid:o.guid,segments:Ne,isDayEvent:!1});return}let b=null;if(fe){const ae=fe.getAttribute("data-date");b=ae?new Date(Number(ae)):null}if(!b&&fe){const ae=R.current.getCurrentTargetDate(fe,fe);b=ae!=null?new Date(ae):null}if(b){const ae=F.normalizeDate(K.startTime),Ne=F.normalizeDate(K.endTime);S.current===Ke.Right?(b.getTime()<ae.getTime()&&(b=ae),F.setYear(K.endTime,b)):S.current===Ke.Left&&(b.getTime()>Ne.getTime()&&(b=new Date(Ne)),F.setYear(K.startTime,b))}const z=xe.processCloneEvent((j=l.current)==null?void 0:j.element,g,K,u,f,R.current.cellWidth,R.current.isAllDaySource,D==="rtl",R.current.isMonthView,P.current);C==null||C.show({guid:o.guid,segments:z,isDayEvent:G})},Ue=()=>{if(_.current=null,!R.current||R.current.scrollInterval==null)return;const fe=x.current;if(fe){let B=R.current.getCellUnderPointer(fe);if(!B){const K=fe.target||null;B=K==null?void 0:K.closest(`.${d.WORK_CELLS}, .${d.DAY_WRAPPER}, .${d.ALL_DAY_CELL}`)}B&&(R.current.cloneRef&&!(R.current.isAllDaySource||R.current.isMonthView)&&Re(B),Pe(B))}R.current&&R.current.scrollInterval!=null&&(_.current=requestAnimationFrame(Ue))};return{resizeStart:oe,onClick:fe=>{var B;(B=R.current)!=null&&B.suppressEvent&&R.current.suppressEvent(fe)}}}const _n=typeof document<"u"&&typeof window<"u",Mn=o=>{var n,s;o==null||o.stopPropagation(),o!=null&&o.nativeEvent&&((s=(n=o.nativeEvent).stopImmediatePropagation)==null||s.call(n))},Ql=o=>{switch(o){case Ke.Top:return d.TOP_RESIZE_HANDLER;case Ke.Bottom:return d.BOTTOM_RESIZE_HANDLER;case Ke.Left:return d.LEFT_RESIZE_HANDLER;default:return d.RIGHT_RESIZE_HANDLER}},ar=({dir:o,resizeStart:n,showResizeHandle:s})=>ye.isDevice&&!s?null:c.jsxs("div",{className:`${d.EVENT_RESIZE_CLASS} ${Ql(o)}`,onMouseDown:t=>{Mn(t),n==null||n(o,t)},onTouchStart:t=>{Mn(t),n==null||n(o,t)},children:[o===Ke.Top||o===Ke.Bottom?c.jsx("div",{className:d.VERTICAL_RESIZE_INNER}):c.jsx("div",{className:d.HORIZONTAL_RESIZE_INNER}),ye.isDevice&&s&&c.jsx("div",{className:d.MOB_RESIZE_DOT,onMouseDown:t=>{Mn(t),n==null||n(o,t)},onTouchStart:t=>{Mn(t),n==null||n(o,t)}})]}),hn=e.memo(({isVertical:o=!1,data:n,children:s,hasPrevious:t,hasNext:r})=>{const{eventResize:i}=Ve();if(!i)return c.jsx(c.Fragment,{children:s});const{resizeStart:a}=Jl(n),l=e.useRef(null),m=e.useRef(null),[u,f]=e.useState(!1);Vt(m,{tapHold:()=>{ye.isDevice&&f(!0)}}),e.useEffect(()=>{const g=m.current;if(!g)return;const C=D=>{D.preventDefault()};return g.addEventListener("contextmenu",C,!0),()=>{g.removeEventListener("contextmenu",C,!0)}},[]);const p=e.useCallback((g,C)=>{if(a(g,C),!ye.isDevice)return;const D=()=>{f(!1),_n&&(document.removeEventListener("mouseup",D,!0),document.removeEventListener("touchend",D,!0))};_n&&(document.addEventListener("mouseup",D,{capture:!0,once:!0}),document.addEventListener("touchend",D,{capture:!0,once:!0}))},[a]);e.useEffect(()=>{if(!ye.isDevice||!u)return;const g=C=>{const D=C.target;l.current&&D&&!l.current.contains(D)&&f(!1)};return _n&&(document.addEventListener("mousedown",g,!0),document.addEventListener("touchstart",g,!0)),()=>{_n&&(document.removeEventListener("mousedown",g,!0),document.removeEventListener("touchstart",g,!0))}},[u]);const h=o?Ke.Top:Ke.Left,E=o?Ke.Bottom:Ke.Right;return c.jsxs("div",{className:`${d.RESIZE_CONTAINER}`,ref:g=>{l.current=g,m.current=g?g.closest(`.${d.APPOINTMENT}`):null},children:[!t&&c.jsx(ar,{dir:h,resizeStart:p,showResizeHandle:u}),s,!r&&c.jsx(ar,{dir:E,resizeStart:p,showResizeHandle:u})]})});hn.displayName="ResizeHandlers";const Fn=o=>{const{weekRenderDates:n,isBlockedEvent:s,...t}=o,{renderDates:r}=Et(),{timeFormat:i,eventTemplate:a,onEventClick:l,onEventDoubleClick:m,eventDrag:u,eventResize:f=!0,quickPopupRef:p,readOnly:h}=Ve(),{locale:E}=$e(),{getString:g}=st(E||"en-US"),C=e.useRef(null),{processedEvent:D,overflowDirection:P,positionStyle:R}=Gl({eventInfo:t,renderDates:n||r}),{isOverflowLeft:v,isOverflowRight:O}=P,A=e.useCallback(H=>{if(s){H==null||H.preventDefault(),H==null||H.stopPropagation();return}if(Un(H.currentTarget),H.stopPropagation(),l){const k={event:H,data:t.event,element:H.currentTarget};l(k)}},[l,D]),V=e.useCallback(H=>{var k;if(t.event.isReadonly||h||s){H==null||H.preventDefault(),H==null||H.stopPropagation();return}if(H.stopPropagation(),m){(k=p==null?void 0:p.current)==null||k.hide();const U={event:H,data:t.event,element:H.currentTarget};m(U)}},[m,D]),L=H=>ft(H??new Date,{type:"time",skeleton:"short",format:i,locale:E}),y=H=>c.jsx("div",{className:`sf-indicator sf-icons sf-${H}-icon`,children:H==="left"?c.jsx(Ts,{}):c.jsx(Cs,{})}),S=H=>c.jsx("div",{className:d.TIME,children:H}),T=e.useCallback(()=>{const{subject:H,isAllDay:k,startTime:U,endTime:oe}=D;if(!t.totalSegments)return null;const J=()=>v?y("left"):!k&&S(L(U)),w=()=>O?y("right"):!k&&S(L(oe));return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[J(),c.jsx("div",{className:`${d.SUBJECT} ${d.TEXT_CENTER} ${d.ELLIPSIS}`,children:H||g("addTitle")}),w()]})},[D,t,E,i,v,O]),N=e.useCallback(()=>{const{subject:H,startTime:k,isAllDay:U}=D;return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[!U&&S(L(k)),c.jsx("div",{className:`${d.SUBJECT} ${d.ELLIPSIS}`,children:H||g("addTitle")})]})},[D]),_=e.useCallback(()=>{const{subject:H}=D;return c.jsx("div",{className:d.APPOINTMENT_DETAILS,children:c.jsx("div",{className:`${d.SUBJECT}`,children:H||g("addTitle")})})},[D]),x=e.useCallback(()=>a?a(D):s?_():t.totalSegments?T():N(),[a,D,T,N,_,t,v,O]),M={...t.eventStyle||{},...R},Z=t.eventClasses.join(" "),ie={"data-id":D.id,"aria-label":xe.getAriaLabel(D),"data-guid":t.event.guid,role:"button",tabIndex:0,onClick:A,onDoubleClick:V,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&(H.stopPropagation(),A(H))},style:M},pe=x(),Y=!s&&!t.event.isReadonly&&!h;return u!=null&&u.enable&&Y?c.jsx(zn,{data:D,className:Z,containerProps:ie,ref:C,children:f&&Y?c.jsx(hn,{data:D,hasPrevious:v,hasNext:O,children:pe}):c.jsx(c.Fragment,{children:pe})}):c.jsx("div",{ref:C,className:Z,...ie,children:f&&Y?c.jsx(hn,{data:D,hasPrevious:v,hasNext:O,children:pe}):c.jsx(c.Fragment,{children:pe})})};Fn.displayName="DayEvent";const Yn=()=>{const{timeScale:o,onCellClick:n,onCellDoubleClick:s,readOnly:t,quickPopupRef:r}=Ve(),i=e.useCallback((u,f,p)=>{const h=new Date(f);return!o.enable||p?(f.setHours(0,0,0,0),h.setDate(h.getDate()+1),h.setHours(0,0,0,0),p=!0):h.setTime(f.getTime()+o.interval/o.slotCount*fn),{cancel:!1,nativeEvent:u.nativeEvent,startTime:f,endTime:h,isAllDay:!!p,element:u.currentTarget}},[o]),a=e.useCallback((u,f,p)=>{var h,E;if(!((h=u.target)!=null&&h.classList.contains(d.DATE_HEADER)||(E=u.target)!=null&&E.classList.contains(d.HEADER_DATE)||t)&&(Vn(u.currentTarget),n)){const g=i(u,f,p);if(n(g),g.cancel)return}},[n,i]),l=e.useCallback((u,f,p)=>{var h;if(!t&&(Vn(u.currentTarget),s)){(h=r==null?void 0:r.current)==null||h.hide();const E=i(u,f,p);if(s(E),E.cancel)return}},[s,i]);return{handleCellClick:a,handleCellDoubleClick:l,handleKeyDown:(u,f)=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),a(u,f))}}},so=o=>{const{date:n,visibleEvents:s,hiddenEventCount:t,onMoreIndicatorClick:r}=o,{timeScale:i}=Ve(),{locale:a}=$e(),{getString:l}=st(a||"en-US"),{handleCellClick:m,handleCellDoubleClick:u}=Yn(),f=()=>t<=0?null:c.jsx("div",{className:`${d.MORE_INDICATOR} ${d.LINK}`,onClick:h=>{h==null||h.stopPropagation(),h==null||h.preventDefault(),r()},role:"button",tabIndex:0,"aria-label":`${t} more events`,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h==null||h.stopPropagation(),h==null||h.preventDefault(),r())},children:ye.isDevice?`+${t}`:`+${t} ${l("more")}`}),p=()=>s.map(h=>{const{totalSegments:E,isFirstSegmentInRenderRange:g,event:C,eventKey:D}=h;return E&&E>1&&g||(!E||E<=1)&&C.isAllDay&&!C.isBlock?c.jsx(Fn,{...h},D):null});return c.jsx("div",{className:d.ALL_DAY_CELL,"data-date":n.getTime(),onClick:h=>m(h,n,!0),onDoubleClick:h=>u(h,n,!0),onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),m(h,n,!0))},children:i.enable&&c.jsxs(c.Fragment,{children:[p(),f()]})},F.generateDateKey(n))};so.displayName="AllDayRowCell";const As=e.forwardRef((o,n)=>{const{isCollapsed:s,onCollapseChange:t,onMoreEventsChange:r}=o,{renderDates:i}=Et(),{timeScale:a}=Ve(),l=e.useRef(null),m=3,[u,f]=e.useState("auto"),{eventsByDate:p,hasEventsExceedingMaxCount:h,calculateHeight:E,getVisibleEvents:g,getHiddenEventCount:C}=ql(s,m),D=e.useCallback(()=>{t&&t()},[t]);e.useImperativeHandle(n,()=>({hasMoreEvents:h})),e.useEffect(()=>{r&&r(h)},[h,r]),e.useEffect(()=>{if(l.current)if(!a.enable)f("auto");else{const v=E();f(`${v}px`)}},[s,p,E]);const P=["sf-all-day-row",s?"sf-all-day-collapsed":"",h?"sf-has-more-events":""].filter(Boolean).join(" "),R=v=>{const O=F.generateDateKey(v),A=g(O),V=C(O);return c.jsx(so,{date:v,visibleEvents:A,hiddenEventCount:V,onMoreIndicatorClick:D},O)};return c.jsx("div",{ref:l,className:P,style:{height:u},children:i.map(R)})});As.displayName="AllDayRow";As.__docgenInfo={description:"",methods:[],displayName:"AllDayRow"};const ro=()=>{const{timeScale:o,dateHeader:n,headerIndent:s}=Ve(),{handleDateClick:t}=Rs(),{locale:r}=$e(),{getString:i}=st(r||"en-US"),{headerCells:a,isAllDayCollapsed:l,showAllDayToggle:m,weekNumber:u,toggleAllDayCollapse:f,handleMoreEventsChange:p}=Nl(),{handleCellClick:h,handleCellDoubleClick:E}=Yn(),g=D=>c.jsx("div",{className:D.className,onClick:P=>h(P,D.date,!0),onDoubleClick:P=>E(P,D.date,!0),children:n?n({date:D.date}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:d.HEADER_DAY,children:D.dayName}),c.jsx("div",{className:`${d.HEADER_DATE} ${D.isToday?d.TODAY:""}`,onClick:P=>t(P,D.date),children:D.dateNumber})]})},D.key),C=()=>c.jsx("div",{className:d.ALL_DAY_APPOINTMENT_SECTION,onClick:f,role:"button",tabIndex:0,"aria-label":i(l?"expandAllDaySection":"collapseAllDaySection"),onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&f()},children:c.jsx(Bn,{className:l?d.APPOINTMENT_EXPAND:d.APPOINTMENT_COLLAPSE})});return c.jsxs("div",{className:d.HEADER_SECTION,children:[o.enable&&c.jsxs("div",{className:d.LEFT_INDENT,children:[s?s({weekNumber:u}):c.jsx(c.Fragment,{children:u&&c.jsx("div",{className:d.WEEK_NUMBER,children:c.jsx("div",{title:`Week ${u}`,children:u})})}),m&&C()]}),c.jsx("div",{className:d.RIGHT_SECTION,children:c.jsx("div",{className:d.DATE_HEADER_CONTAINER,children:c.jsxs("div",{className:d.DATE_HEADER,children:[c.jsx("div",{className:d.HEADER_ROW,children:a.map(D=>g(D))}),c.jsx("div",{className:d.DAY_CLONE_CONTAINER}),c.jsx(As,{isCollapsed:l,onCollapseChange:f,onMoreEventsChange:p})]})})})]})};ro.displayName="DateHeader";const ea=o=>{const{currentTime:n=new Date,currentTimePosition:s=0,isTimeWithinBounds:t=!1}=o,{startHour:r,endHour:i,timeFormat:a,timeScale:l}=Ve(),{locale:m}=$e(),{hours:u,minutes:f}=F.parseTimeString(r),{hours:p,minutes:h}=F.parseTimeString(i),[E,g]=e.useState(null),[C,D]=e.useState(0),P=e.useMemo(()=>{const v=[],O=u*Xe+f,A=p*Xe+h;let V=O;for(;V<A;){for(let L=0;L<l.slotCount;L++){const y=V+L*(l.interval/l.slotCount);if(y>=A)break;const S=Math.floor(y/Xe),T=Math.floor(y%Xe),N=new Date;N.setHours(S,T,0,0);const _=L===0,x=L===l.slotCount-1,Z=y+l.interval/l.slotCount>=A,ie={date:N,type:_?"majorSlot":"minorSlot"};v.push({key:`${S}-${T}`,date:N,isMajorSlot:_,isLastSlotOfInterval:x,isLastSlotBeforeEnd:Z,label:ft(N,{type:"time",skeleton:"h",format:a,locale:m}),templateProps:ie,index:v.length})}V+=l.interval}return D(v.length),v},[u,f,p,h,a,l,m]);e.useEffect(()=>{if(!t){E!==null&&g(null);return}const v=100/C,O=Math.floor(s/v);O!==E&&g(O)},[s,E,C,t]);const R=ft(n,{type:"time",skeleton:"short",format:a,locale:m});return{timeSlots:P,totalSlots:C,hiddenSlotIndex:E,currentTimeString:R}},oo=o=>{const{currentTime:n,currentTimePosition:s=0,isTimeWithinBounds:t=!1}=o,{showTimeIndicator:r,timeScale:i}=Ve(),{timeSlots:a,hiddenSlotIndex:l,currentTimeString:m}=ea({currentTime:n,currentTimePosition:s,isTimeWithinBounds:t}),u=()=>a.map(f=>c.jsx("div",{className:`${d.TIME_SLOTS} ${f.isLastSlotOfInterval||f.isLastSlotBeforeEnd?"sf-time-cells":""} ${l===f.index?"sf-hide-children":""}`,children:f.isMajorSlot?i.majorSlot?i.majorSlot(f.templateProps):c.jsx("span",{children:f.label}):i.minorSlot?i.minorSlot(f.templateProps):null},f.key));return c.jsx("div",{className:d.LEFT_INDENT,children:c.jsxs("div",{className:d.TIME_CELLS_WRAP,children:[c.jsx("div",{className:d.SCHEDULER_TABLE,children:u()}),r&&t&&c.jsx("div",{className:d.CURRENT_TIME,style:{top:`${s}%`},children:m})]})})};oo.displayName="TimeCells";const ta=o=>{const{renderDates:n,workDays:s,workHours:t,cell:r,timeScale:i,startHour:a,endHour:l}=o,{hours:m,minutes:u}=F.parseTimeString(a||"00:00"),{hours:f,minutes:p}=l==="24:00"?{hours:24,minutes:0}:F.parseTimeString(l||"24:00"),h=g=>r?r({date:g,type:"workCell"}):null;return{workCellRows:e.useMemo(()=>{const g=[];if(i.enable){const C=m*Xe+u,D=f*Xe+p;let P=C;for(;P<D;){for(let R=0;R<i.slotCount;R++){const v=P+R*(i.interval/i.slotCount);if(v>=D)break;const O=Math.floor(v/Xe),A=Math.floor(v%Xe),L=!(R===i.slotCount-1),y=`${O}-${A}`,S=`${O}:${A.toString().padStart(2,"0")}`,T=n.map(N=>{const _=new Date(N);_.setHours(O,A,0,0);const x=F.isWorkHour(_,t,s),M=F.isSameDay(N,new Date),Z=F.isWeekend(N,s),ie=["sf-work-cells",L?"sf-alternate-cells":"",M?"sf-today":"",Z?"sf-weekend":"",x?"sf-work-hours":""].filter(Boolean).join(" ");return{date:_,className:ie,key:`${N.getTime()}-${O}-${A}`,dataAttributes:{date:_.getTime()},isWorkHour:x,isToday:M,isWeekend:Z,isAlternate:L}});g.push({key:y,dataAttribute:S,cells:T})}P+=i.interval}}else{const C=n.map(D=>{const P=new Date(D);P.setHours(0,0,0,0);const R=F.isSameDay(D,new Date),v=F.isWeekend(D,s),O=["sf-work-cells","sf-timescale-disabled-cell",R?"sf-today":"",v?"sf-weekend":""].filter(Boolean).join(" ");return{date:P,className:O,key:`${D.getTime()}-timescale-disabled`,dataAttributes:{date:P.getTime(),dateKey:F.generateDateKey(D)},isToday:R,isWeekend:v}});g.push({key:"disabled-timescale-row",cells:C})}return g},[n,i,m,u,f,p,s,t]),renderCellTemplate:h}},io=()=>{const{renderDates:o}=Et(),{workDays:n,workHours:s,cell:t,timeScale:r,startHour:i,endHour:a}=Ve(),{workCellRows:l,renderCellTemplate:m}=ta({renderDates:o,workDays:n,workHours:s,cell:t,timeScale:r,startHour:i,endHour:a}),{handleCellClick:u,handleCellDoubleClick:f,handleKeyDown:p}=Yn();return c.jsx("div",{className:d.CONTENT_TABLE,children:l.map(h=>c.jsx("div",{className:d.WORK_CELLS_ROW,"data-date":h.dataAttribute,children:h.cells.map(E=>c.jsx("div",{className:E.className,"data-date":E.dataAttributes.date,"data-date-key":E.dataAttributes.dateKey,onClick:g=>u(g,E.date),onDoubleClick:g=>f(g,E.date),onKeyDown:g=>{p(g,E.date)},children:m(E.date)},E.key))},h.key))})};io.displayName="WorkCells";const rs=118,cr=2,na=()=>{const{eventSettings:o,eventOverlap:n,timeFormat:s,timeScale:t,startHour:r,endHour:i,maxEventsPerRow:a=3,startHourTuple:l,endHourTuple:m}=Ve(),{renderDates:u}=Et(),{eventsData:f}=$t(),{locale:p,dir:h}=$e(),E=e.useCallback((C,D)=>{const P=(O,A)=>{if(l&&m){const V=F.normalizeDate(O),L=F.normalizeDate(F.isMidnight(A)?F.addDays(A,-1):A);return V==null||V.setHours(l[0],l[1],0,0),L==null||L.setHours(m[0],m[1],0,0),A>V&&O<L}else return!0};if(t!=null&&t.enable){const O=o.spannedEventPlacement||"AllDayRow",A=[];let V=D.filter(x=>!x.isAllDay&&!x.isBlock&&xe.isMultiDayEvent(x));O==="AllDayRow"&&(V=V.filter(x=>F.isLessthan24Hours(x.startTime,x.endTime))),V.forEach(x=>{const M=xe.splitEventByDay(x,[C]);A.push(...M.filter(Z=>P(Z.startDate,Z.endDate)))});const y=D.filter(x=>!x.isAllDay&&!x.isBlock&&!xe.isMultiDayEvent(x)&&F.isSameDay(new Date(x.startTime),C)&&P(x.startTime,x.endTime)).map(x=>({event:x,startDate:x.startTime,endDate:x.endTime}));A.push(...y);const S=xe.calculateOverlappingEvents(A,n),T=D.filter(x=>x.isBlock&&F.isSameDay(new Date(x.startTime),C)),N=[],_=(x,M={})=>{const{event:Z}=x;if(!Z.startTime||!Z.endTime)return;const ie=dt.calculateEventPosition(x,t,r,i),pe=`${C.toISOString()}-${Z.id}`,Y=F.formatTimeDisplay(Z,p,s),H=xe.getEventClassNames(Z),k={width:ie.width||"96%",height:`${ie.height}`,top:ie.top||"0px"};h==="rtl"?k.right=ie.left||"0%":k.left=ie.left||"0%",N.push({event:Z,timeDisplay:Y,eventKey:pe,eventClasses:H,eventStyle:k,...M})};return S.forEach(x=>{x.forEach(M=>{_(M,{totalOverlapping:M.totalOverlapping,totalSegments:M.totalSegments,isFirstDay:M.isFirstDay,isLastDay:M.isLastDay,positionIndex:M.positionIndex,segmentIndex:M.segmentIndex})})}),T.forEach(x=>{const M={event:x,startDate:x.startTime,endDate:x.endTime};_(M)}),N}const R=xe.processDayEvents(u,D),v=[];return R.forEach(O=>{if(!F.isSameDay(O.startDate,C)||!P(O.startDate,O.endDate))return;const A=`${O.startDate.toISOString()}-${O.event.id}`,V=F.formatTimeDisplay(O.event,p,s),L=dt.calculatePositionStyles(O,u).width,y=O.positionIndex??0,S={height:`${rs}px`,top:`${y*(rs+cr)}px`,width:L||"96%"};h==="rtl"?S.right="0%":S.left="0%",v.push({...O,timeDisplay:V,eventKey:A,eventStyle:S})}),v},[o,n,t,r,i,u,h,p,s]);return{dayWrappers:e.useMemo(()=>!u||u.length===0||!f||f.length===0?null:u.map(C=>{const D=F.generateDateKey(C),P=E(C,f);let R;return t.enable||(R=a*(rs+cr)),{key:D,dateTimestamp:C.getTime(),events:P,moreIndicatorTopPx:R}}),[u,o,n,t,s,r,i,p,f])}},ur=24,sa=124,dr=4,Os=(o,n)=>{const{height:s,rowAutoHeight:t,numberOfWeeks:r,eventSettings:i,schedulerRef:a}=Ve(),{eventsData:l}=$t(),m=e.useMemo(()=>xe.processDayEvents(o,l),[l,o]),u=e.useMemo(()=>xe.getEventsMap(o,m),[o,m]),f=e.useMemo(()=>{var T,N,_,x,M,Z,ie,pe,Y,H,k,U;const v=xe.getMaxEventsInCell(u,o),O=((_=(N=(T=a==null?void 0:a.current)==null?void 0:T.element)==null?void 0:N.querySelector("."+d.MONTH_VIEW+" ."+d.APPOINTMENT))==null?void 0:_.offsetHeight)??ur,A=((Z=(M=(x=a==null?void 0:a.current)==null?void 0:x.element)==null?void 0:M.querySelector("."+d.MONTH_VIEW+" ."+d.DATE_HEADER))==null?void 0:Z.offsetHeight)??0;let V=((Y=(pe=(ie=a==null?void 0:a.current)==null?void 0:ie.element)==null?void 0:pe.querySelector("."+d.MONTH_VIEW+" ."+d.WORK_CELLS_ROW))==null?void 0:Y.offsetHeight)??sa;const L=oe=>oe*O+(oe>0?oe-1:0)*dr;if(!t||v===0){if(v>=3){const oe=Math.min(v,n),J=L(oe)+A+(v>n?O:0)+dr;return`${Math.max(J,V)}px`}return`${V}px`}const y=((U=(k=(H=a==null?void 0:a.current)==null?void 0:H.element)==null?void 0:k.querySelector("."+d.SCHEDULER_TOOLBAR_CONTAINER))==null?void 0:U.offsetHeight)??0,S=L(v)+A+(t&&(i!=null&&i.ignoreWhitespace)?0:ur);if(s!=="auto"&&r&&t){const oe=parseInt(s,10)-y;V=parseInt(Math.abs(oe/r).toFixed(2),10)}return`${Math.max(S,V)}px`},[o,u,t,r]),p=e.useCallback(v=>{const O=E(v);return t?O:O.slice(0,n)},[u,n,t]),h=e.useCallback(v=>u.get(v).find(V=>V.event.isBlock&&(V.event.isAllDay||F.isFullDayEvent(V.startDate,V.endDate))),[u,n]),E=e.useCallback(v=>{var V;return[...(V=u.get(v))==null?void 0:V.filter(L=>!L.event.isBlock)].sort((L,y)=>(L.positionIndex||0)-(y.positionIndex||0))},[u]),g=e.useCallback(v=>{var A;if(h(v))return 0;const O=(A=u.get(v))==null?void 0:A.filter(V=>!V.event.isBlock);return Math.max(0,O.length-n)},[u,n]),C=e.useCallback(v=>g(v)>0,[g]),D=e.useCallback(v=>u.get(v).some(A=>A.event.isBlock&&!A.event.isAllDay&&!F.isFullDayEvent(A.startDate,A.endDate)),[u]),P=e.useCallback(v=>u.get(v).some(A=>A.event.isBlock&&(A.event.isAllDay||F.isFullDayEvent(A.startDate,A.endDate))),[u]);return{getVisibleEvents:p,getAlldayBlockEvent:h,getHiddenEventCount:g,getAllEventsForDate:E,hasMoreIndicator:C,hasBlockIndicator:D,hasAllDayBlock:P,calculatedRowHeight:f,sortEventsByTime:v=>v.sort((O,A)=>new Date(O.startTime).getTime()-new Date(A.startTime).getTime())}};function lo(o){const{onMoreEventsClick:n,morePopupRef:s}=Ve();return{handleMoreClick:e.useCallback((r,i)=>{var a;if(r&&typeof r.stopPropagation=="function"&&r.stopPropagation(),i&&r.target){const l=F.generateDateKey(i),u=o(l).map(p=>p.event),f={cancel:!1,data:u};if(n&&n(f),f.cancel)return;(a=s==null?void 0:s.current)==null||a.open(i,u,r.target)}},[o,n,s])}}const ao=o=>{const{date:n,count:s,onMoreClick:t,topPx:r}=o,{locale:i}=$e(),{getString:a}=st(i||"en-US"),l=r!==void 0?{top:`${r}px`}:void 0,m=u=>{if(u.key==="Enter"||u.key===" "){const f={...u,currentTarget:u.currentTarget,type:"click"};t(f,n)}};return c.jsxs("div",{className:`${d.MORE_INDICATOR} ${d.LINK}`,style:l,onClick:u=>t(u,n),onKeyDown:m,tabIndex:0,role:"button",children:["+",s," ",!ye.isDevice&&`${a("more")}`]})},co=e.memo(()=>{const{eventTemplate:o,onEventClick:n,onEventDoubleClick:s,eventDrag:t,eventResize:r=!0,maxEventsPerRow:i=3,timeScale:a,readOnly:l,quickPopupRef:m,startHourTuple:u,endHourTuple:f}=Ve(),{dayWrappers:p}=na(),{locale:h}=$e(),{getString:E}=st(h||"en-US"),{renderDates:g}=Et(),{getAllEventsForDate:C,getHiddenEventCount:D}=Os(g,i),{handleMoreClick:P}=lo(C),R=S=>{if(a.enable){const{isOverflowTop:T,isOverflowBottom:N}=dt.getOverflowDirection(S,g,u,f);return c.jsxs(e.Fragment,{children:[T&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.UP_ARROW_ICON}`,children:c.jsx(Rr,{})}),v(S),N&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.DOWN_ARROW_ICON}`,children:c.jsx(br,{})})]})}else{const{isOverflowLeft:T,isOverflowRight:N}=dt.getOverflowDirection(S,g);return c.jsxs(e.Fragment,{children:[T&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.LEFT_ARROW_ICON}`,children:c.jsx(Ts,{})}),v(S),N&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.RIGHT_ARROW_ICON}`,children:c.jsx(Cs,{})})]})}},v=S=>{const{event:T,timeDisplay:N}=S;return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[c.jsx("div",{className:`${d.SUBJECT}`,children:T.subject||E("addTitle")}),!T.isBlock&&T.location&&c.jsx("div",{className:`${d.EVENT_LOCATION} ${d.ELLIPSIS}`,children:T.location}),!T.isBlock&&c.jsx("div",{className:`${d.EVENT_TIME} ${d.ELLIPSIS}`,children:N})]})},O=S=>o?o(S.event):S.totalSegments||u||f?R(S):v(S),A=(S,T)=>{if(T.event.isBlock){S==null||S.preventDefault(),S==null||S.stopPropagation();return}if(Un(S.currentTarget),n){const N={event:S,data:T.event,element:S.currentTarget};n(N)}},V=(S,T)=>{var N;if(T.event.isReadonly||l||T.event.isBlock){S==null||S.preventDefault(),S==null||S.stopPropagation();return}if(s){(N=m==null?void 0:m.current)==null||N.hide();const _={event:S,data:T.event,element:S.currentTarget};s(_)}},L=(S,T)=>{(S.key==="Enter"||S.key===" ")&&A(S,T)};if(!p)return c.jsx("div",{className:d.EVENT_CONTAINER});const y=!(a&&a.enable);return c.jsx("div",{className:d.EVENT_CONTAINER,children:p.map(S=>{const T=S.events.filter(Y=>!Y.event.isBlock),N=S.events.filter(Y=>Y.event.isBlock),_=y?T.slice(0,i):T,x=new Date(S.dateTimestamp),M=F.generateDateKey(x),Z=y?D(M):0,ie=_.filter(Y=>Y.totalSegments&&Y.totalSegments>1&&Y.isFirstSegmentInRenderRange||!Y.totalSegments||Y.totalSegments<=1),pe=y?ie:[...N,...ie];return c.jsxs("div",{className:d.DAY_WRAPPER,"data-date":S.dateTimestamp,children:[pe.map(Y=>{const{isOverflowTop:H,isOverflowBottom:k}=dt.getOverflowDirection(Y,g,u,f),U=Y.eventClasses.join(" "),oe={style:Y.eventStyle,"data-id":String(Y.event.id),"data-guid":Y.event.guid,"aria-label":xe.getAriaLabel(Y.event),tabIndex:0,onClick:Q=>A(Q,Y),onDoubleClick:Q=>V(Q,Y),onKeyDown:Q=>L(Q,Y)},J=O(Y),w=!Y.event.isBlock&&!Y.event.isReadonly&&!l;return t!=null&&t.enable&&w?c.jsx(zn,{data:Y.event,className:U,containerProps:oe,children:r&&w?c.jsx(hn,{isVertical:a.enable,data:Y.event,hasPrevious:H,hasNext:k,children:J}):c.jsx(c.Fragment,{children:J})},Y.eventKey):c.jsx("div",{className:U,...oe,children:r&&w?c.jsx(hn,{isVertical:a.enable,data:Y.event,hasPrevious:H,hasNext:k,children:J}):c.jsx(c.Fragment,{children:J})},Y.eventKey)}),y&&Z>0&&c.jsx(ao,{date:new Date(S.dateTimestamp),count:Z,onMoreClick:P,topPx:S.moreIndicatorTopPx})]},S.key)})})});co.displayName="TimeSlotEvent";const ra=o=>{const{timeScale:n}=Ve(),[s,t]=e.useState(0),[r,i]=e.useState(new Date),[a,l]=e.useState(!1),m=e.useCallback((p,h)=>{t(p),i(new Date),l(h)},[]),u=e.useMemo(()=>{let p="";switch(o){case"Day":p=d.DAY_VIEW;break;case"Week":p=d.WEEK_VIEW;break;case"WorkWeek":p=d.WORK_WEEK_VIEW;break}return p},[o]),f=e.useMemo(()=>`${n.enable?"":"sf-timescale-disabled"}`,[n.enable]);return{currentTime:r,currentTimePosition:s,isTimeWithinBounds:a,viewClassName:u,contentSectionClassName:f,handleTimePositionUpdate:m}},Kn=o=>{const{viewType:n}=o,{timeScale:s,showTimeIndicator:t}=Ve(),{currentTime:r,currentTimePosition:i,isTimeWithinBounds:a,viewClassName:l,contentSectionClassName:m,handleTimePositionUpdate:u}=ra(n);return c.jsx("div",{className:`${d.VERTICAL_VIEW} ${l}`,children:c.jsxs("div",{className:d.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[c.jsx("div",{className:d.STICKY_HEADER,children:c.jsx(ro,{})}),c.jsxs("div",{className:`${d.CONTENT_SECTION} ${m}`,children:[s.enable&&c.jsx(oo,{currentTime:r,currentTimePosition:i,isTimeWithinBounds:a}),c.jsxs("div",{className:d.WORK_CELLS_CONTAINER,children:[c.jsx("div",{className:d.TIME_SLOT_CLONE_CONTAINER}),c.jsxs("div",{className:d.CONTENT_WRAP,children:[c.jsx(co,{}),c.jsx(io,{})]}),t&&s.enable&&c.jsx(Kl,{onPositionUpdate:u})]})]})]})})};Kn.displayName="VerticalView";const oa=()=>c.jsx(Kn,{viewType:"Day"});oa.displayName="DayView";const ia=()=>c.jsx(Kn,{viewType:"Week"});ia.displayName="WeekView";const la=()=>c.jsx(Kn,{viewType:"WorkWeek"});la.displayName="WorkWeekView";function aa(){const{locale:o}=$e(),{firstDayOfWeek:n,showWeekend:s,workDays:t}=Ve(),r=e.useCallback(()=>{const a=[],l="gregorian",m=ye.isDevice?"abbreviated":"wide",u=`days.stand-alone.${m}`;let f;if(!o||o==="en"||o==="en-US")f=zt(u,_o(l));else{const p=`main.${o}.dates.calendars.${l}.days.format.${m}`;f=zt(p,Mo)}for(const p of Object.keys(f))a.push(zt(p,f));return Array.from({length:7},(p,h)=>{const E=(h+n)%7;return a[E>=0&&E<a.length?E:0]})},[n,o]);return{weekdayHeaderCells:e.useCallback(()=>{const a=r(),l=new Date().getDay();if(s)return a.map((m,u)=>{const p=(u+n)%7===l;return{day:m,isCurrentDay:p,className:`sf-header-cells ${p?"sf-current-day":""}`,key:`header-${u}`}});{const m=[];for(let u=0;u<7;u++){const f=(u+n)%7;if(t.includes(f)){const p=f===l;m.push({day:a[u>=0&&u<a.length?u:0],isCurrentDay:p,className:`sf-header-cells ${p?"sf-current-day":""}`,key:`header-${u}`})}}return m}},[n,s,t,r])()}}const uo=()=>{const{showWeekNumber:o,weekDay:n}=Ve(),{weekdayHeaderCells:s}=aa(),t=r=>c.jsx("div",{className:r.className,children:n?n({day:r.day}):c.jsx("div",{className:d.HEADER_DAY,children:r.day})},r.key);return c.jsxs("div",{className:d.HEADER_SECTION,children:[o&&c.jsx("div",{className:d.LEFT_INDENT}),c.jsx("div",{className:d.RIGHT_SECTION,children:c.jsx("div",{className:d.DATE_HEADER_CONTAINER,children:c.jsx("div",{className:d.DATE_HEADER,children:c.jsx("div",{className:d.HEADER_ROW,children:s.map(r=>t(r))})})})})]})};uo.displayName="WeekDayHeader";function ca(){const{numberOfWeeks:o,interval:n,showTrailingAndLeadingDates:s=!0,showWeekend:t,workDays:r,weekRule:i,firstDayOfWeek:a}=Ve(),{renderDates:l}=Et(),{weeksToRender:m,weekNumbers:u}=e.useMemo(()=>{if(!l||l.length===0)return{weeksToRender:[],weekNumbers:[]};const E=[],g=[],C=t?Ho:r==null?void 0:r.length;for(let D=0;D<l.length;D+=C){const P=l.slice(D,D+C);if(P.length>0){E.push(P);const R=F.getWeekNumber(P[0],i,a);g.push(R)}}return{weeksToRender:E,weekNumbers:g}},[l,t,r,i,a]),f=e.useMemo(()=>!s&&!(o||n>1),[s,o,n]),p=e.useMemo(()=>o?{"--week-count":o}:void 0,[o]),h=e.useMemo(()=>[o&&"sf-custom-weeks",f&&"sf-hide-dates"].filter(Boolean).join(" "),[o,f]);return{weekNumbers:u,weeksToRender:m,contentTableStyle:p,additionalClass:h,hideOtherMonths:f}}function ua(o){const{weekRenderDates:n,rowIndex:s}=o,{selectedDate:t,workDays:r,showWeekend:i,maxEventsPerRow:a=3}=Ve(),{locale:l}=$e(),{renderDates:m}=Et(),{getAllEventsForDate:u}=Os(m,a),{handleMoreClick:f}=lo(u),p=e.useCallback(g=>{let C="sf-work-cells";return F.isWorkDay(g,r)&&(C+=" sf-work-days"),F.isToday(g)&&(C+=" sf-current-date"),F.isSameMonth(g,t)||(C+=" sf-other-month"),C},[r,t]),h=e.useCallback(g=>g.getDate()===1&&!ye.isDevice?ft(g,{type:"dateTime",format:"MMM d",locale:l}):ft(g,{type:"dateTime",format:"d",locale:l}),[l]);return{workCells:e.useCallback(()=>(i?n:n.filter(C=>F.isWorkDay(C,r))).map((C,D)=>({date:C,className:p(C),dateTimestamp:C.getTime(),displayText:h(C),key:`date-${s}-${D}`})),[n,p,h,i,r,s])(),handleMoreClick:f}}const da=o=>{const{weekRenderDates:n,hideOtherMonths:s,rowIndex:t,onHeightCalculated:r}=o,{maxEventsPerRow:i=2,cellHeader:a,cell:l,rowAutoHeight:m,getAvailableViews:u}=Ve(),{workCells:f,handleMoreClick:p}=ua(o),{handleCellClick:h,handleCellDoubleClick:E,handleKeyDown:g}=Yn(),{handleDateClick:C}=Rs(),{getVisibleEvents:D,getAlldayBlockEvent:P,getHiddenEventCount:R,hasMoreIndicator:v,hasBlockIndicator:O,hasAllDayBlock:A,calculatedRowHeight:V}=Os(n,i),L=T=>c.jsx(ao,{date:T,count:R(F.generateDateKey(T)),onMoreClick:p}),y=T=>{const N=F.generateDateKey(T),_=D(N);if(A(N)){const x=P(N);if(x&&(x.totalSegments&&x.totalSegments>1&&x.isFirstSegmentInRenderRange||!x.totalSegments||x.totalSegments<=1))return c.jsx(Fn,{...x,weekRenderDates:n,isBlockedEvent:!0},x.eventKey||x.event.guid)}return _.map(x=>{const{totalSegments:M,isFirstSegmentInRenderRange:Z,event:ie,eventKey:pe}=x;return!ie.isBlock&&(M&&M>1&&Z||!M||M<=1)?c.jsx(Fn,{...x,weekRenderDates:n},pe||x.event.guid):null})},S=()=>c.jsx("div",{className:`${d.ICONS} ${d.BLOCK_INDICATOR}`,children:c.jsx(ti,{})});return e.useEffect(()=>{r(t,V)},[V]),c.jsx("div",{className:d.WORK_CELLS_ROW,style:{height:m||i>=3?V:""},children:f.map(T=>{if(s&&T.className.includes("sf-other-month"))return c.jsx("div",{className:T.className},T.key);const N=F.generateDateKey(T.date),_=ht.isDayViewAvailable(u);return c.jsxs("div",{className:T.className,"data-date":T.dateTimestamp,onClick:x=>h(x,T.date,!0),onDoubleClick:x=>E(x,T.date,!0),onKeyDown:x=>{g(x,T.date)},children:[c.jsxs("div",{className:d.DATE_HEADER_CONTAINER,children:[c.jsx("div",{className:d.DATE_HEADER,children:a?a({date:T.date}):c.jsx("span",{className:_?d.LINK:"",onClick:x=>C(x,T.date),children:T.displayText})}),O(N)&&S()]}),c.jsxs("div",{className:d.APPOINTMENT_WRAPPER,children:[y(T.date),!m&&v(N)&&L(T.date)]}),l&&l({date:T.date,type:"monthCell"})]},T.key)})})},fa=()=>{const{showWeekNumber:o,numberOfWeeks:n,rowAutoHeight:s}=Ve(),{weekNumbers:t,weeksToRender:r,contentTableStyle:i,additionalClass:a,hideOtherMonths:l}=ca(),m=e.useRef(new Array(r.length).fill("124px")),[u,f]=e.useState([]),p=e.useCallback((E,g)=>{m.current[Number(E)]!==g&&(m.current[Number(E)]=g,f([...m.current]))},[r.length]);e.useEffect(()=>{m.current=new Array(r.length).fill("124px")},[r.length]);const h=e.useCallback(()=>t==null?void 0:t.map((E,g)=>c.jsx("div",{className:d.WEEK_NUMBER,title:`Week ${E}`,style:{height:s?u[Number(g)]:""},children:E},`week-${g}`)),[u,t]);return c.jsxs(c.Fragment,{children:[o&&c.jsx("div",{className:`sf-left-indent ${n?"sf-custom-weeks":""}`,style:n?{"--week-count":n}:void 0,children:c.jsx("div",{className:d.WEEK_NUMBER_WRAPPER,children:h()})}),c.jsxs("div",{className:`sf-content-table ${a}`,style:i,children:[c.jsx("div",{className:d.DAY_CLONE_CONTAINER}),r.map((E,g)=>c.jsx(da,{weekRenderDates:E,hideOtherMonths:l,rowIndex:g,onHeightCalculated:p},`week-${g}`))]})]})},ma=()=>c.jsx("div",{className:`${d.VERTICAL_VIEW} ${d.MONTH_VIEW}`,children:c.jsxs("div",{className:d.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[c.jsx("div",{className:d.STICKY_HEADER,children:c.jsx(uo,{})}),c.jsx("div",{className:d.CONTENT_SECTION,children:c.jsx("div",{className:d.WORK_CELLS_CONTAINER,children:c.jsx(fa,{})})})]})});ma.displayName="MonthView";export{oa as D,Nr as F,si as L,ma as M,ze as O,no as S,ls as T,ia as W,la as a,zl as b,_t as c,is as d,vs as e,Vt as f,Vl as g,wt as h,ui as i};

import{j as c,r as jt}from"./index-7s7xaQU8.js";import{r as e}from"./index-CC6F48bw.js";import{n as Ht,a as De,o as ho,q as Ut,r as We,s as fr,t as Ps,v as Ms,w as po,x as Rn,y as Tt,z as _s,E as go,G as Eo,H as hs,I as F,c as bt,S as _t,u as $e,p as At,J as mr,K as ps,M as hr,N as ut,L as pr,Q as jn,A as zt,T as Hs,X as xn,d as js,Y as To,i as Co,Z as Nt,e as $s,b as vo,_ as yo,B as nt,V as Je,C as Ct,$ as $n,a0 as gr,a1 as Do,f as ft,a2 as bo,a3 as ln,a4 as wo,a5 as So,a6 as ot,a7 as Hn,a8 as d,a9 as Er,aa as Tr,ab as Cr,ac as Ze,ad as Ke,ae as vr,l as Ro,af as st,ag as xo,ah as Xe,ai as No,aj as os,D as Xn,ak as Vs,al as Ve,am as Ao,h as Lo,k as ko,j as Ws,an as Oo,R as Io,ao as Po,ap as Fs,aq as fn,ar as Mo,as as _o,at as Ho}from"./recurrence-editor-52fV4iBy.js";const gs=e.createContext(void 0),gt=()=>{const o=e.useContext(gs);if(o===void 0)throw new Error("useSchedulerRenderDatesContext must be used within a Scheduler");return o};gs.displayName="SchedulerRenderDatesContext";const Es=e.createContext(void 0),$t=()=>{const o=e.useContext(Es);if(o===void 0)throw new Error("useSchedulerEventsContext must be used within a Scheduler");return o};Es.displayName="SchedulerEventsContext";function Bs(o){return o!=null&&typeof o=="object"&&!Array.isArray(o)&&o.constructor===Object}function yr(o,n){const s={...o};for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t],i=s[t];if(typeof r>"u")continue;Bs(r)&&Bs(i)?s[t]=yr(i,r):s[t]=r}return s}function Dr(o,n){return yr(o,n)}class pt{static getViewsInfo(n,s){const t=[],r=new Set;return e.Children.forEach(n,i=>{if(e.isValidElement(i)){const a=i.type,l=i.props||{};let m=null;switch(a.displayName){case"DayView":m="Day";break;case"WeekView":m="Week";break;case"WorkWeekView":m="WorkWeek";break;case"MonthView":m="Month";break}if(m){const u=l.name||l.displayName||m;r.has(u)||(r.add(u),t.push({viewType:m,name:u,displayName:l.displayName||s(m.toLowerCase()),interval:l.interval||1,component:i}))}}}),t}static findViewByNameOrType(n,s){const t=n.find(i=>i.name===s);if(t)return t;const r=s;return n.find(i=>i.viewType===r)||null}static getDefaultView(n){return n.length>0?n[0]:void 0}static isViewAvailable(n,s){const t=n==null?void 0:n();return Array.isArray(t)&&t.some(r=>r.viewType===s)}static isDayViewAvailable(n){return pt.isViewAvailable(n,"Day")}}const je=(()=>{function o(i){return i?"__eventList"in i?i.__eventList.events||[]:(i.__eventList={},i.__eventList.events=[]):null}function n(i,a,l,m,u){if(!i)return null;const f=o(i);let h=u?ho(l,u):l;m&&(h=h.bind(m));const p=a.split(" ");for(let g=0;g<p.length;g++){f.push({name:p[parseInt(g.toString(),10)],listener:l,debounce:h});const E=De.isIE?null:{passive:!1};i.addEventListener(p[parseInt(g.toString(),10)],h,E)}return h}function s(i,a,l){if(!i)return null;const m=o(i),u=a.split(" ");for(let f=0;f<u.length;f++){let h=-1,p=null;m&&m.length!==0&&m.some((g,E)=>g.name===u[parseInt(f.toString(),10)]&&g.listener===l?(h=E,p=g.debounce||null,!0):!1),h!==-1&&m.splice(h,1),p&&i.removeEventListener(u[parseInt(f.toString(),10)],p)}}function t(i){if(!i)return null;const a=o(i),l=Ht([],void 0,a);for(let m=0;m<l.length;m++){const u=l[parseInt(m.toString(),10)];i.removeEventListener(u.name,u.debounce),a.shift()}}function r(i,a,l){if(!i)return null;const m=o(i);for(const u of m)u.name===a&&u.debounce(l)}return{add:n,clearEvents:t,remove:s,trigger:r}})(),jo=()=>{let o=[];const n={};function s(u,f,h,p){if(We(f))return;const g=h||{};m(u)?n[`${u}`]=[{handler:f,context:g,id:p}]:p&&!o.includes(p)?(o.push(p),n[`${u}`].push({handler:f,context:g,id:p})):n[`${u}`].some(E=>E.handler===f)||n[`${u}`].push({handler:f,context:g})}function t(u,f,h){if(m(u))return;const p=Ut(u,n);if(f)for(let g=0;g<p.length;g++){const E=p[parseInt(g.toString(),10)];if(h&&E.id===h){p.splice(g,1),o=o.filter(C=>C!==h);break}else if(f===E.handler){p.splice(g,1);break}}else delete n[`${u}`]}function r(u,f,h,p){if(m(u)){h&&h(f);return}f&&(f={...f,name:u});const g=Ut(u,n).slice(0);for(const E of g)try{E.handler(f)}catch(C){p&&p(C)}h&&h(f)}function i(u){try{JSON.parse(u)}catch{return!1}return!0}function a(){Object.keys(n).forEach(u=>{delete n[`${u}`]}),o=[]}function l(){const u=n.notifyExternalChange;if(u){for(let f=0;f<u.length;f++){const h=u[parseInt(f.toString(),10)],p=h.context;p&&p.detectFunction&&p.randomId&&p.isReactMock&&(t("notifyExternalChange",h.handler,p.randomId),f--)}n.notifyExternalChange.length||delete n.notifyExternalChange}}function m(u){return!n[`${u}`]||n[`${u}`].length===0}return{isJson:i,on:s,off:t,notify:r,destroy:a,ranArray:o,boundedEvents:n,offIntlEvents:l}},$o=new RegExp("]");function Vo(o,n){const t={isDestroyed:!1,isProtectedOnChange:!0,modelObserver:jo(),...o};return t.element=e.useRef(null),t.addEventListener=(r,i)=>{t.modelObserver.on(r,i)},t.removeEventListener=(r,i)=>{t.modelObserver.off(r,i)},t.trigger=(r,i,a,l)=>{if(t.isDestroyed!==!0){const m=t.isProtectedOnChange;t.isProtectedOnChange=!1;const u=t.modelObserver.notify(r,i,a,l);if($o.test(r)){const f=Ut(r,t);f&&f.call(t,i),a&&a.call(t,i)}return t.isProtectedOnChange=m,u}},t.destroy=()=>{t.modelObserver.destroy(),t.isDestroyed=!0},e.useLayoutEffect(()=>{t.isDestroyed=!1},[]),t}let Nn,An,zs,Us;function Ys(o,n,s,t,r){let i,a,l=0,m=0,u;if(typeof o==="string"?u=fr(o):u=o,u){const h=u.getBoundingClientRect();i=u.scrollWidth?u.scrollWidth:h.right-h.left,a=u.scrollHeight?o&&!We(n)&&n.classList.contains("sf-treeview")?u.clientHeight:u.scrollHeight:h.bottom-h.top;const p=["Top","Left","Bottom","Right"],g=getComputedStyle(u);for(let E=0;E<p.length;E++){const C=p[parseInt(E.toString(),10)],v=g["border"+C+"Width"],P=g["padding"+C],w=C.toLowerCase();s[`${w}`]=isNaN(parseFloat(v))?0:parseFloat(v),t[`${w}`]=isNaN(parseFloat(P))?0:parseFloat(P)}o&&!We(n)&&n.classList.contains("sf-treeview")?l=h.top+document.scrollingElement.scrollTop:l=h.top,m=h.left,r.left=m+s.left+t.left,r.top=u.offsetTop+s.top+t.top,r.right=m+i-(s.right+t.right),r.bottom=l+a-(s.bottom+t.bottom)}}function Ks(o){const n=document.body,s=document.documentElement;return Math.max(n["scroll"+o],s["scroll"+o],n["offset"+o],s["offset"+o],s["client"+o])}function qn(o){for(An=o.offsetTop,Nn=o.offsetLeft,zs=o.offsetWidth,Us=o.offsetHeight;o.offsetParent;)o=o.offsetParent,An+=o.offsetTop,Nn+=o.offsetLeft;return An>=window.pageYOffset&&Nn>=window.pageXOffset&&An+Us<=window.pageYOffset+window.innerHeight&&Nn+zs<=window.pageXOffset+window.innerWidth}function an(o){return o.type.indexOf("touch")>-1?o.changedTouches[0]:o}function Gn(o){if(We(o))return{left:0,top:0};const n=o.getBoundingClientRect(),s=getComputedStyle(o);return{left:n.left+window.pageXOffset-parseInt(s.marginLeft,10),top:n.top+window.pageYOffset-parseInt(s.marginTop,10)}}function Xs(o){const n=o.clientX>0?o.clientX:0,s=o.clientY>0?o.clientY:0;return document.elementsFromPoint(n,s)}function qs(o,n){const s=n?[...o].reverse():o;for(const i of s){const l=window.getComputedStyle(i).overflowY;if((l==="auto"||l==="scroll")&&i.scrollHeight>i.clientHeight)return i}const t=document.scrollingElement;return window.getComputedStyle(t).overflowY==="visible"?(t.style.overflow="auto",t):null}const Wo=e.createContext(void 0),Fo=()=>{const o=e.useContext(Wo);if(o)return o},Bo={left:0,top:0,bottom:0,right:0},Zn={isDragged:!1};function zo(o){return{left:0,top:0,...o}}function Yt(o,n){const s=Fo(),t={cursorAt:zo({}),clone:!1,dragArea:null,isDragScroll:!1,isReplaceDragEle:!1,isPreventSelect:!0,distance:1,handle:"",abort:"",helper:null,scope:"default",dragTarget:"",dragDirection:null,queryPositionInfo:null,enableTailMode:!1,skipDistanceCheck:!1,preventDefault:!0,enableAutoScroll:!1,enableTapHold:!1,tapHoldThreshold:750,enableScrollHandler:!1,element:o,...n},r=e.useRef(t);let i,a,l,m,u,f,h,p=Yt.getDefaultPosition(),g=Yt.getDefaultPosition();const E=Yt.getDefaultPosition();let C,v=0,P=0,w=0,y=!1,A=null,N,V,L=!1,D=0,S,T,x,M,k=0,_=0,Z=0,ie=0;const he={};function Y(b){let U;!We(r.current.handle)&&r.current.handle!==""&&(U=fr(r.current.handle,o.current));const te=r.current.enableTapHold&&De.isDevice&&De.isTouch?H:Q;b?je.remove(U||o.current,De.isSafari()?"touchstart":De.touchStartEvent,te):je.add(U||o.current,De.isSafari()?"touchstart":De.touchStartEvent,te)}function H(b){const U=b.currentTarget;A=setTimeout(()=>{L=!0,z(),Q(b,U)},r.current.tapHoldThreshold),je.add(document,De.isSafari()?"touchmove":De.touchMoveEvent,z,this),je.add(document,De.isSafari()?"touchend":De.touchEndEvent,z,this)}function I(b){hs(b)?(je.add(document,De.isSafari()?"touchmove":De.touchMoveEvent,J,this),je.add(document,De.isSafari()?"touchend":De.touchEndEvent,ne,this),O(!1,o.current,b)):(Y(),document.body.classList.remove("sf-prevent-select"))}function z(){clearTimeout(A),je.remove(document,De.isSafari()?"touchmove":De.touchMoveEvent,z),je.remove(document,De.isSafari()?"touchend":De.touchEndEvent,z)}function oe(){k=0,_=0}function Q(b,U){if(o.current=Ps(o),V=b.target,ee())return;if(ee(!0),L=!1,i=b.currentTarget||U,y=!1,r.current.abort){let ue=r.current.abort;typeof ue=="string"&&(ue=[ue]);for(let Ce=0;Ce<ue.length;Ce++)if(!We(Tt(b.target,ue[`${Ce}`]))){ee()&&ee(!0);return}}r.current.preventDefault&&!Rn(b.changedTouches)&&b.type!=="touchstart"&&b.preventDefault(),o.current.setAttribute("aria-grabbed","true");const te=an(b);if(a={x:te.pageX,y:te.pageY},!r.current.clone){const ue=o.current.getBoundingClientRect();oe(),l=te.pageX-(ue.left+k),m=te.pageY-(ue.top+_)}L?R(b):(je.add(document,De.isSafari()?"touchmove":De.touchMoveEvent,R,this),je.add(document,De.isSafari()?"touchend":De.touchEndEvent,t.intDestroy,this)),Y(!0),b.type!=="touchstart"&&r.current.isPreventSelect&&document.body.classList.add("sf-prevent-select"),L=!1,je.trigger(document.documentElement,De.isSafari()?"touchstart":De.touchStartEvent,b)}function R(b){z(),document.scrollingElement&&(Z=document.scrollingElement.scrollLeft,ie=document.scrollingElement.scrollTop);const U=!Rn(b.changedTouches);if(U&&b.changedTouches.length!==1)return;const te=an(b);let ue;const Ce=getComputedStyle(o.current);u={left:parseInt(Ce.marginLeft,10),top:parseInt(Ce.marginTop,10),right:parseInt(Ce.marginRight,10),bottom:parseInt(Ce.marginBottom,10)};let j=o.current;if(r.current.clone&&r.current.dragTarget){const ye=Tt(b.target,r.current.dragTarget);We(ye)||(j=ye)}r.current.isReplaceDragEle&&(j=G(b.target,j)),f=Gn(j),h=Pe(b,r.current.isDragScroll);const ae=a.x-te.pageX,xe=a.y-te.pageY;if(Math.sqrt(ae*ae+xe*xe)>=r.current.distance||L){const ye=ze(b);if(!ye)return;U&&b.preventDefault();const W=T=ye;if(M=Gn(W.offsetParent),r.current&&r.current.onDragStart){const Se=we(b),Ee={event:b,element:j,target:Se,bindEvents:null,dragElement:W};if(r.current.onDragStart(Ee),Ee.cancel){t.intDestroy();return}}r.current.dragArea?Ys(r.current.dragArea,T,g,E,p):(p={left:0,right:0,bottom:0,top:0},g={top:0,left:0}),ue={left:h.left-M.left,top:h.top-M.top},r.current.clone&&!r.current.enableTailMode&&(v=h.left-f.left,D=h.top-f.top),oe();const X=getComputedStyle(j),de=parseFloat(X.marginTop);r.current.clone&&de!==0&&(ue.top+=de),r.current.enableScrollHandler&&!r.current.clone&&(ue.top-=_,ue.left-=k);const ge=fe({top:`${ue.top-D}px`,left:`${ue.left-v}px`});r.current.dragArea&&typeof r.current.dragArea!="string"&&r.current.dragArea.classList.contains("sf-kanban-content")&&r.current.dragArea.style.position==="relative"&&(ue.top+=r.current.dragArea.scrollTop),N={top:ue.top,left:ue.left},_s(W,B({position:"absolute",left:ge.left,top:ge.top})),je.remove(document,De.isSafari()?"touchmove":De.touchMoveEvent,R),je.remove(document,De.isSafari()?"touchend":De.touchEndEvent,t.intDestroy),I(W)}}function J(b){if(!Rn(b.changedTouches)&&b.changedTouches.length!==1)return;r.current.clone&&b.changedTouches&&De.isDevice&&De.isTouch&&b.preventDefault();let U,te;h=Pe(b,r.current.isDragScroll);const ue=Ks("Height");ue<h.top&&(h.top=ue);const Ce=Ks("Width");if(Ce<h.left&&(h.left=Ce),r.current&&r.current.onDrag){const Ie=we(b);r.current.onDrag({event:b,element:o.current,target:Ie})}const j=q(b);if(j.target&&j.instance){let Ie=!0;x&&(x.instance!==j.instance?le(b,j):Ie=!1),Ie&&(j.instance.dragData[r.current.scope]=he[r.current.scope],j.instance.intOver(b,j.target),x=j)}else x&&le(b,j);const ae=he[r.current.scope].helper;M=Gn(ae.offsetParent);const xe=M.left,ce=M.top,ye=an(b),W=ye.pageX,X=ye.pageY,de=h.left-v,ge=h.top-D,Se=getComputedStyle(ae);if(r.current.dragArea){if(r.current.enableAutoScroll&&Ys(r.current.dragArea,ae,g,E,p),C!==W||r.current.skipDistanceCheck){const Ie=ae.offsetWidth+(parseFloat(Se.marginLeft)+parseFloat(Se.marginRight));p.left>de&&de>0?U=p.left:p.right+window.pageXOffset<de+Ie&&de>0?U=de-(de-p.right)+window.pageXOffset-Ie:U=de<0?p.left:de}if(S!==X||r.current.skipDistanceCheck){const Ie=ae.offsetHeight+(parseFloat(Se.marginTop)+parseFloat(Se.marginBottom));p.top>ge&&ge>0?te=p.top:p.bottom+window.pageYOffset<ge+Ie&&ge>0?te=ge-(ge-p.bottom)+window.pageYOffset-Ie:te=ge<0?p.top:ge}}else U=de,te=ge;const Ee=ce+g.top,Ne=xe+g.left;y&&(We(te)&&(te=w),We(U)&&(U=P));let Re,Me;if(ae.classList.contains("sf-treeview"))r.current.dragArea?(p.top=r.current.clone?p.top:0,Re=te-Ee<0?p.top:te-g.top,Me=U-Ne<0?p.left:U-g.left):(Re=te-g.top,Me=U-g.left);else if(r.current.dragArea){const Ie=ae.classList.contains("sf-dialog");p.top=r.current.clone?p.top:0,Re=te-Ee<0?p.top:te-Ee,Me=U-Ne<0?Ie?U-(Ne-g.left):N.left:U-Ne}else Re=te-Ee,Me=U-Ne;const be=parseFloat(getComputedStyle(o.current).marginTop);if(be>0&&(r.current.clone&&(Re+=be,ge<0&&(be+ge>=0?Re=be+ge:Re-=be),r.current.dragArea&&(Re=p.bottom<Re?p.bottom:Re)),te-Ee<0))if(ge+be+(ae.offsetHeight-Ee)>=0){const Ie=p.top+ge-Ee;Ie+be+Ee<0?Re-=be+Ee:Re=Ie}else Re-=be+Ee;if(r.current.dragArea&&ae.classList.contains("sf-treeview")){const Ie=ae.offsetHeight+(parseFloat(Se.marginTop)+parseFloat(Se.marginBottom));Re=Re+Ie>p.bottom?p.bottom-Ie:Re}r.current.enableScrollHandler&&!r.current.clone&&(Re-=_,Me-=k),r.current.dragArea&&typeof r.current.dragArea!="string"&&r.current.dragArea.classList.contains("sf-kanban-content")&&r.current.dragArea.style.position==="relative"&&(Re+=r.current.dragArea.scrollTop);const _e=fe({top:Re+"px",left:Me+"px"});_s(ae,B(_e)),!qn(ae)&&r.current.enableAutoScroll&&!ae.classList.contains("sf-treeview")&&ae.scrollIntoView();let He=document.querySelectorAll(":hover");if(r.current.enableAutoScroll&&ae.classList.contains("sf-treeview")){He.length===0&&(He=Xs(b));let Ie=qs(He,!1);qn(ae)?K(Ie,Re):qn(ae)||(He=[].slice.call(document.querySelectorAll(":hover")),He.length===0&&(He=Xs(b)),Ie=qs(He,!0),K(Ie,Re))}y=!0,P=U,w=te,h.left=U,h.top=te,C=W,S=X}function ne(b){if(y=!1,Z=0,ie=0,!Rn(b.changedTouches)&&b.changedTouches.length!==1)return;if(["touchend","pointerup","mouseup"].indexOf(b.type)!==-1){if(r.current&&r.current.onDragStop){const ue=we(b);r.current.onDragStop({event:b,element:o.current,target:ue,helper:T})}t.intDestroy()}else o.current.setAttribute("aria-grabbed","false");const te=q(b);te.target&&te.instance&&(te.instance.dragStopCalled=!0,te.instance.dragData[r.current.scope]=he[r.current.scope],te.instance.intDrop(b,te.target)),O(!0),document.body.classList.remove("sf-prevent-select")}function se(){Y(),De.isIE&&Ms([t.element.current],"sf-block-touch"),he[r.current.scope]={}}t.intDestroy=()=>{y=!1,Y(),document.body.classList.remove("sf-prevent-select"),o.current.setAttribute("aria-grabbed","false"),je.remove(document,De.isSafari()?"touchmove":De.touchMoveEvent,R),je.remove(document,De.isSafari()?"touchend":De.touchEndEvent,ne),je.remove(document,De.isSafari()?"touchend":De.touchEndEvent,t.intDestroy),je.remove(document,De.isSafari()?"touchmove":De.touchMoveEvent,J),ee()&&ee(!0)},t.destroy=()=>{Y(!0)};function le(b,U){x.instance.intOut(b,U.target),x.instance.dragData[r.current.scope]=null,x=null}function we(b){const U=an(b);let te;const ue=T.style.pointerEvents||"",Ce=b.type.indexOf("pointer")!==-1&&De.info.name==="safari"&&parseInt(De.info.version,10)>12;return Eo(b.target,T)||b.type.indexOf("touch")!==-1||Ce?(T.style.pointerEvents="none",te=document.elementFromPoint(U.clientX,U.clientY),T.style.pointerEvents=ue):te=b.target,te}function Pe(b,U){const te=b.srcElement!==void 0?b.srcElement:b.target,ue=an(b);let Ce,j;const ae=We(te.offsetParent);if(U){if(Ce=r.current.clone?ue.pageX:ue.pageX+(ae?0:te.offsetParent.scrollLeft)-l,j=r.current.clone?ue.pageY:ue.pageY+(ae?0:te.offsetParent.scrollTop)-m,!r.current.clone){const xe=te.offsetParent;if(!ae&&xe){const ce=xe.scrollLeft,ye=xe.scrollTop,W=ce-Z,X=ye-ie;Ce=Ce-W,j=j-X}}}else if(Ce=r.current.clone?ue.pageX:ue.pageX+window.pageXOffset-l,j=r.current.clone?ue.pageY:ue.pageY+window.pageYOffset-m,document.scrollingElement&&!r.current.clone){const xe=document.scrollingElement,ce=xe.scrollLeft,ye=xe.scrollTop,W=ce-Z,X=ye-ie;Ce=Ce-W,j=j-X}return{left:Ce-(u.left+r.current.cursorAt.left),top:j-(u.top+r.current.cursorAt.top)}}function ze(b){let U;return r.current.clone?r.current&&r.current.helper?U=r.current.helper({sender:b,element:i}):(U=go("div",{className:"sf-drag-helper sf-block-touch",innerHTML:"Draggable"}),document.body.appendChild(U)):U=t.element.current,U}function O(b,U,te){he[r.current.scope]=b?null:{draggable:U,helper:te,draggedElement:t.element.current}}function q(b){const U=we(b);let te=me(U);if(!te&&U&&!We(U.parentNode)){const ue=Tt(U.parentNode,".sf-droppable")||U.parentElement;ue&&(te=me(ue))}return{target:U,instance:te}}function me(b){let U,te;if(s){const{getAllDroppables:ue}=s;U=ue();for(const Ce in U)if(Object.prototype.hasOwnProperty.call(U,Ce)){const j=U[`${Ce}`];if(j.element&&j.element.current===b){te=j;break}}}else return;return te}function ee(b){return b&&(Zn.isDragged=!Zn.isDragged),Zn.isDragged}function fe(b){return r.current&&r.current.queryPositionInfo?r.current.queryPositionInfo(b):b}function B(b){const U={...b};return r.current.dragDirection&&(r.current.dragDirection==="x"?delete U.top:r.current.dragDirection==="y"&&delete U.left),U}function K(b,U){if(b===document.scrollingElement)b.clientHeight+b.scrollTop-T.clientHeight<U&&b.getBoundingClientRect().height+M.top>U?b.scrollTop+=T.clientHeight:b.scrollTop>U-T.clientHeight&&(b.scrollTop-=T.clientHeight);else if(b){const te=document.scrollingElement.scrollTop,ue=T.clientHeight;b.clientHeight+b.getBoundingClientRect().top-ue+te<U?b.scrollTop+=T.clientHeight:b.getBoundingClientRect().top>U-ue-te&&(b.scrollTop-=T.clientHeight)}}function G(b,U){let te;return!We(V)&&V!==b?te=V:te=We(U)?b:U,te}return e.useLayoutEffect(()=>{if(t.element.current=Ps(t.element),!!t.element.current)return r.current={...t,...n},Ms([t.element.current],["sf-lib","sf-draggable"]),se(),()=>{t.element.current&&po([t.element.current],["sf-lib","sf-draggable"]),t.destroy()}}),t}Yt.getDefaultPosition=()=>Ht({},Bo);const Uo=/(Up|Down)/;function Vt(o,n){const s=Vo(),t={...n};let r=!1,i={clientX:0,clientY:0},a=null,l={clientX:0,clientY:0},m="",u=!1,f=!1,h={originalEvent:null},p=0,g=0,E="",C=0,v=!0,P=null,w=null,y=0;e.useLayoutEffect(()=>(A(),()=>{V(),s.destroy()}),[]);function A(){o.current&&(N(),De.isIE&&o.current.classList.add("sf-block-touch"))}function N(){je.add(o.current,De.touchStartEvent,D,void 0)}function V(){je.remove(o.current,De.touchStartEvent,D)}function L(I){const z=getComputedStyle(I),oe=z.overflow+z.overflowX+z.overflowY;return/(auto|scroll)/.test(oe)}function D(I){if(v===!0){const z=H(I);I.changedTouches!==void 0&&(v=!1),r=!1,E="",i=l={clientX:z.clientX,clientY:z.clientY},a=z,u=f=!1,C=Date.now(),w=setTimeout(()=>{x(I)},t.tapHoldThreshold?t.tapHoldThreshold:750),je.add(o.current,De.touchMoveEvent,S,void 0),je.add(o.current,De.touchEndEvent,M,void 0),je.add(o.current,De.touchCancelEvent,T,void 0)}}function S(I){const z=H(I);r=!(z.clientX===i.clientX&&z.clientY===i.clientY);let oe={};if(r){clearTimeout(w),ie(I);const Q={startEvents:a,originalEvent:I,startX:i.clientX,startY:i.clientY,distanceX:p,distanceY:g,scrollDirection:m,velocity:he(z)};oe=Ht(oe,{},Q),s.trigger("scroll",oe,t.scroll),l={clientX:z.clientX,clientY:z.clientY}}}function T(I){clearTimeout(w),clearTimeout(P),y=0,k(I),je.remove(o.current,De.touchCancelEvent,T)}function x(I){y=0,v=!0,je.remove(o.current,De.touchMoveEvent,S),je.remove(o.current,De.touchEndEvent,M);const z={originalEvent:I};s.trigger("tapHold",z,t.tapHold),je.remove(o.current,De.touchCancelEvent,T)}function M(I){k(I),r||typeof t.tap=="function"&&(s.trigger("tap",{originalEvent:I,tapCount:++y},t.tap),P=setTimeout(()=>{y=0},t.tapThreshold?t.tapThreshold:350)),_()}function k(I){clearTimeout(w),clearTimeout(P);const z=H(I);let oe=z.clientX-i.clientX,Q=z.clientY-i.clientY;oe=Math.floor(oe<0?-1*oe:oe),Q=Math.floor(Q<0?-1*Q:Q),r=oe>1||Q>1,/Firefox/.test(De.userAgent)&&z.clientX===0&&z.clientY===0&&I.type==="mouseup"&&(r=!1),Z(I);const J={originalEvent:I,startEvents:a,startX:i.clientX,startY:i.clientY,distanceX:p,distanceY:g,swipeDirection:E,velocity:he(z)};if(r){const ne=t.swipeSettings?t.swipeSettings.swipeThresholdDistance:50,se=Ht(void 0,h,J);let le=!1;const we=L(o.current),Pe=Uo.test(E);ne&&(ne<p&&!Pe||ne<g&&Pe)&&(we?le=Y(o.current,Pe):le=!0),le&&s.trigger("swipe",se,t.swipe)}_()}function _(){setTimeout(()=>{v=!0},typeof t.tap!="function"?0:20),je.remove(o.current,De.touchMoveEvent,S),je.remove(o.current,De.touchEndEvent,M),je.remove(o.current,De.touchCancelEvent,T)}function Z(I){const z=H(I);h={originalEvent:I},p=Math.abs(Math.abs(z.clientX)-Math.abs(i.clientX)),g=Math.abs(Math.abs(z.clientY)-Math.abs(i.clientY)),E=p>g?z.clientX>i.clientX?"Right":"Left":z.clientY<i.clientY?"Up":"Down"}function ie(I){const z=H(I);h={originalEvent:I},p=Math.abs(Math.abs(z.clientX)-Math.abs(l.clientX)),g=Math.abs(Math.abs(z.clientY)-Math.abs(l.clientY)),(p>g||u)&&!f?(m=z.clientX>l.clientX?"Right":"Left",u=!0):(m=z.clientY<l.clientY?"Up":"Down",f=!0)}function he(I){const z=I.clientX,oe=I.clientY,Q=Date.now(),R=z-i.clientX,J=oe-i.clientY,ne=Q-C;return Math.sqrt(R*R+J*J)/ne}function Y(I,z){const oe=["scroll","offset"],Q=z?["Height","Top"]:["Width","Left"];return I[oe[0]+Q[0]]<=I[oe[1]+Q[0]]?!0:I[oe[0]+Q[1]]===0||I[oe[1]+Q[0]]+I[oe[0]+Q[1]]>=I[oe[0]+Q[0]]}function H(I){return I.changedTouches&&I.changedTouches.length!==0?I.changedTouches[0]:I}return t}class Qn{static addWorkDays(n,s,t,r){if(s<=0)return new Date(n);let i=new Date(n),a=0;for(;a<s;){const l=F.addDays(i,t);F.isWorkDay(l,r)&&(a+=1),i=l}return i}static navigate(n,s){const{currentDate:t,viewType:r,interval:i,showWeekend:a,workDays:l}=s;switch(r){case"Day":return a===!1?this.addWorkDays(t,i,n,l):F.addDays(t,n*i);case"Week":case"WorkWeek":return F.addDays(t,n*7*i);case"Month":return F.addMonths(t,n*i);default:return F.addDays(t,n)}}static navigateToPrevious(n){return this.navigate(-1,n)}static navigateToNext(n){return this.navigate(1,n)}static navigateToToday(){return new Date}}const Yo=c.jsx("path",{d:"M11.5 10.0858L5.50003 4.08582L4.08582 5.50003L11.5 12.9142L18.9142 5.50003L17.5 4.08582L11.5 10.0858ZM11.5 17.0858L5.50003 11.0858L4.08582 12.5L11.5 19.9142L18.9142 12.5L17.5 11.0858L11.5 17.0858Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),br=bt(Yo),Ko=c.jsx("path",{d:"M5 7.08578L12 14.0858L19 7.08578L20.4142 8.5L12 16.9142L3.58578 8.5L5 7.08578Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Bn=bt(Ko),Xo=c.jsx("path",{d:"M6.41418 12L12.4142 6L11 4.58578L3.58575 12L11 19.4142L12.4142 18L6.41418 12ZM13.4142 12L19.4142 6L18 4.58578L10.5858 12L18 19.4142L19.4142 18L13.4142 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Ts=bt(Xo),qo=c.jsx("path",{d:"M10.5858 12L4.58582 18L6.00003 19.4142L13.4142 12L6.00003 4.58575L4.58582 5.99997L10.5858 12ZM17.5858 12L11.5858 18L13 19.4142L20.4142 12L13 4.58575L11.5858 5.99997L17.5858 12Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Cs=bt(qo),Go=c.jsx("path",{d:"M11.5 6.91418L17.5 12.9142L18.9142 11.5L11.5 4.08575L4.08575 11.5L5.49997 12.9142L11.5 6.91418ZM11.5 13.9142L17.5 19.9142L18.9142 18.5L11.5 11.0858L4.08575 18.5L5.49997 19.9142L11.5 13.9142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),wr=bt(Go),Zo=c.jsx("path",{d:"M6.00003 16.4142L12 10.4142L18 16.4142L19.4142 15L12 7.58578L4.58582 15L6.00003 16.4142Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Sr=bt(Zo),Qo=c.jsx("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13 11.382V5H11V12.618L16.4472 15.3416L17.3416 13.5528L13 11.382Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Jo=bt(Qo),ei=c.jsx("path",{d:"M6.38231 4.9681C7.92199 3.73647 9.87499 3 12 3C16.9706 3 21 7.02944 21 12C21 14.125 20.2635 16.078 19.0319 17.6177L6.38231 4.9681ZM4.9681 6.38231C3.73647 7.92199 3 9.87499 3 12C3 16.9706 7.02944 21 12 21C14.125 21 16.078 20.2635 17.6177 19.0319L4.9681 6.38231ZM12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),ti=bt(ei),ni=c.jsx("path",{d:"M17 9C17 9.59519 16.7516 10.6096 16.1971 11.9583C15.6652 13.2521 14.932 14.6644 14.1531 15.9825C13.4 17.257 12.6299 18.4 12 19.2216C11.3701 18.4 10.5999 17.257 9.84685 15.9825C9.06796 14.6644 8.33481 13.2521 7.80291 11.9583C7.24843 10.6096 7 9.59519 7 9C7 6.23858 9.23858 4 12 4C14.7614 4 17 6.23858 17 9ZM19 9C19 13 13 22 12 22C11 22 5 13 5 9C5 5.13401 8.13401 2 12 2C15.866 2 19 5.13401 19 9ZM12 11.5C13.3807 11.5 14.5 10.3807 14.5 9C14.5 7.61929 13.3807 6.5 12 6.5C10.6193 6.5 9.5 7.61929 9.5 9C9.5 10.3807 10.6193 11.5 12 11.5Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),si=bt(ni),ri=c.jsx("path",{d:"M3 3C3 1.89543 3.89543 1 5 1H13.5858C14.1162 1 14.6249 1.21071 15 1.58579L20.4142 7C20.7893 7.37507 21 7.88378 21 8.41421V21C21 22.1046 20.1046 23 19 23H5C3.89543 23 3 22.1046 3 21V3ZM5 3L13 3V9H19V21H5V3ZM11 6H7V8H11V6ZM7 11H11V13H7V11ZM17 13V11H13V13H17ZM7 16H11V18H7V16ZM17 18V16H13V18H17Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),oi=bt(ri),ii=c.jsx("path",{d:"M8 1V3H16V1H18V3H20C21.1046 3 22 3.89543 22 5V8V9V10V11.7546C21.3984 11.2724 20.7257 10.8753 20 10.5815V10H4V21H9.58152C9.87526 21.7257 10.2724 22.3984 10.7546 23H4C2.89543 23 2 22.1046 2 21V10V9V8V5C2 3.89543 2.89543 3 4 3H6V1H8ZM4 8H20V5H18H16H8H6H4V8ZM13 18C13 15.7909 14.7909 14 17 14C19.2091 14 21 15.7909 21 18C21 20.2091 19.2091 22 17 22C14.7909 22 13 20.2091 13 18ZM17 12C13.6863 12 11 14.6863 11 18C11 21.3137 13.6863 24 17 24C20.3137 24 23 21.3137 23 18C23 14.6863 20.3137 12 17 12ZM18 15V17H20V19H16V15H18Z",fillRule:"evenodd",clipRule:"evenodd",fill:"currentcolor"}),Gs=bt(ii);var Zs;(function(o){o.Success="Success",o.Warning="Warning",o.Error="Error"})(Zs||(Zs={}));const is=e.forwardRef((o,n)=>{const{disabled:s=!1,onChange:t,onBlur:r,onFocus:i,clearButton:a=!1,labelMode:l="Never",className:m="",id:u,readOnly:f=!1,value:h,defaultValue:p,width:g,placeholder:E="",variant:C,size:v=_t.Medium,color:P,prefix:w,suffix:y,...A}=o,V=e.useRef(u||`default_${e.useId()}`).current,L=h!==void 0,[D,S]=e.useState(L?h:p||""),[T,x]=e.useState(!1),M=e.useRef(null),{locale:k,dir:_}=$e(),Z={clearButton:a,labelMode:l,disabled:s,readOnly:f,variant:C,size:v,color:P,value:h},ie=()=>he(ut.INPUTGROUP,ut.WRAPPER,l!=="Never"?ut.FLOATINPUT:"",m,_==="rtl"?ut.RTL:"",s?ut.DISABLE:"",T?ut.TEXTBOX_FOCUS:"",D!==""?ut.VALIDINPUT:"",C&&C.toLowerCase()!=="standard"?C.toLowerCase()==="outlined"?"sf-outline":`sf-${C.toLowerCase()}`:"",v&&v.toLowerCase()!=="small"?`sf-${v.toLowerCase()}`:"",P?`sf-${P.toLowerCase()}`:"",w?"sf-has-prefix":"","sf-control"),he=(...J)=>J.filter(Boolean).join(" "),Y=ie();e.useEffect(()=>{At("textbox")},[]),e.useEffect(()=>{L&&S(h||"")},[h,L]),e.useImperativeHandle(n,()=>({...Z,element:M.current}));const H=e.useCallback((J,ne)=>{L||S(J),t&&t({event:ne,value:J})},[t,L]),I=e.useCallback(J=>{const ne=J.target.value;H(ne,J)},[H]),z=e.useCallback(J=>{x(!0),i&&i(J)},[i]),oe=e.useCallback(()=>{L||(S(""),M.current&&(M.current.value="")),t&&t({value:"",event:void 0})},[L,t]),Q=e.useCallback(J=>{x(!1),r&&r(J)},[r]),R=L?h:D;return c.jsxs("div",{className:Y,style:{width:g||"100%"},children:[w&&c.jsx("span",{className:"sf-input-icon sf-no-hover",children:w}),c.jsx(mr,{id:V,floatLabelType:l,ref:M,...A,readOnly:f,value:L?R:void 0,defaultValue:L?void 0:D||"",disabled:s,placeholder:l==="Never"?E:void 0,className:"sf-textbox sf-lib sf-ellipsis",onChange:I,"aria-label":l==="Never"?"textbox":void 0,onFocus:z,onBlur:Q}),ps(l||"Never",T||R!=="",R,E,V),a&&hr(T?R:"",oe,a,"textbox",k),y&&c.jsx("span",{className:"sf-input-icon sf-no-hover",children:y})]})}),li="sf-multi-line-input",ai="sf-auto-width";var Ot;(function(o){o.None="None",o.Both="Both",o.Horizontal="Horizontal",o.Vertical="Vertical"})(Ot||(Ot={}));const ci={[Ot.None]:"sf-resize-none",[Ot.Both]:"sf-resize-xy",[Ot.Horizontal]:"sf-resize-x",[Ot.Vertical]:"sf-resize-y"},ui=e.forwardRef((o,n)=>{const{readOnly:s=!1,value:t,defaultValue:r,labelMode:i="Never",placeholder:a="",disabled:l=!1,width:m,resizeMode:u=Ot.Both,maxLength:f,cols:h=null,rows:p=null,clearButton:g=!1,autoResize:E=!1,className:C="",size:v=_t.Medium,variant:P,onChange:w,onBlur:y,onFocus:A,...N}=o,V=t!==void 0,[L,D]=e.useState(r||""),S=V?t:L,T=`textArea_${e.useId()}`,[x,M]=e.useState(!1),k=e.useMemo(()=>N.id||T,[N.id]),_=e.useRef(null),Z=e.useRef(null),ie=e.useRef(null),he=e.useRef(null),{locale:Y,dir:H}=$e(),I={clearButton:g,labelMode:i,disabled:l,readOnly:s,resizeMode:u};e.useEffect(()=>{At("textarea")},[]),e.useEffect(()=>{V&&D(t||"")},[V,t]);const z=()=>oe(ut.INPUTGROUP,ut.WRAPPER,i!=="Never"?ut.FLOATINPUT:"",li,C,H==="rtl"?ut.RTL:"",l?ut.DISABLE:"",x?ut.TEXTBOX_FOCUS:"",S!==""?ut.VALIDINPUT:"",P&&P.toLowerCase()!=="standard"?P.toLowerCase()==="outlined"?"sf-outline":`sf-${P.toLowerCase()}`:"",ai,v&&v.toLowerCase()!=="small"?`sf-${v.toLowerCase()}`:"","sf-control"),oe=(...O)=>O.filter(Boolean).join(" "),Q=z();e.useImperativeHandle(n,()=>({...I,element:_.current}));const R=e.useCallback(O=>{O&&(O.style.height="auto",O.style.height=`${O.scrollHeight}px`)},[]),J=e.useCallback(()=>{!E||!_.current||(Z.current!==null&&(cancelAnimationFrame(Z.current),Z.current=null),Z.current=requestAnimationFrame(()=>{R(_.current)}))},[E,R]),ne=O=>{const q=Array.isArray(O.contentBoxSize)?O.contentBoxSize[0]:O.contentBoxSize;if(q&&typeof q.inlineSize=="number")return q.inlineSize;const me=O.contentRect.width;return typeof me=="number"?me:null};e.useEffect(()=>()=>{Z.current!==null&&(cancelAnimationFrame(Z.current),Z.current=null)},[]),e.useEffect(()=>{if(!E||!_.current)return;let O=!1;const q=()=>{O||(O=!0,requestAnimationFrame(()=>{O=!1,_.current&&J()}))};if("ResizeObserver"in window){const fe=K=>{const G=K[0];if(!G)return;const b=ne(G);b!==null&&he.current===b||(he.current=b,q())},B=new ResizeObserver(fe);return B.observe(_.current),ie.current=B,()=>{B.disconnect(),ie.current=null,he.current=null}}const me=_.current.ownerDocument?_.current.ownerDocument.defaultView:null;if(!me)return;const ee=()=>{q()};return me.addEventListener("resize",ee),()=>{me.removeEventListener("resize",ee)}},[E,J]),e.useLayoutEffect(()=>{!E||!_.current||J()},[E,S,m,p,h]);const se=e.useCallback(O=>{const q=O.target.value;V||D(q),w&&w({event:O,value:q}),E&&J()},[V,w,L,t,E,J]),le=e.useCallback(O=>{M(!0),A&&A(O)},[A]),we=e.useCallback(O=>{M(!1),y&&y(O)},[y]),Pe=e.useCallback(()=>{V||(D(""),_.current&&(_.current.value="")),w&&w({value:"",event:void 0}),E&&J()},[w,V,J]),ze=O=>ci[`${O}`];return c.jsxs("div",{className:Q,children:[c.jsx("textarea",{ref:_,id:k,value:V?t:void 0,defaultValue:V?void 0:r,onChange:se,onFocus:le,onBlur:we,readOnly:s,placeholder:i==="Never"?a:void 0,disabled:l,maxLength:f,cols:h??void 0,rows:p??void 0,...N,style:{width:m?typeof m=="number"?`${m}px`:m:void 0,resize:u==="None"||E?"none":void 0,overflowY:E?"hidden":void 0},className:`sf-textarea sf-lib sf-input ${ze(u)}`,"aria-labelledby":`label_${k}`}),ps(i,x||S!=="",S,a,k),g&&hr(S&&x?S.toString():"",Pe,g,"textarea",Y)]})}),Bt={EMAIL:/^(?!.*\.\.)[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,URL:/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(\/[^\s]*)?$/,DATE_ISO:/^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/,DIGITS:/^[0-9]*$/,PHONE:/^[+]?[0-9]{9,13}$/,CREDIT_CARD:/^\d{13,16}$/},Rr=e.createContext(null),di=Rr.Provider,xr=e.forwardRef((o,n)=>{const{rules:s,onSubmit:t,onReset:r,children:i,onFormStateChange:a,initialValues:l={},validateOnChange:m=!1,className:u="",...f}=o,h=e.useRef(null),{locale:p,dir:g}=$e(),E=e.useRef({values:{...l},errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),C=e.useCallback(()=>{a&&(T.current=ne(),a(T.current))},[a]),v=e.useCallback((O,q)=>{E.current={...E.current,values:{...E.current.values,[O]:q},modified:{...E.current.modified,[O]:!0}}},[]),P=e.useCallback(O=>{E.current={...E.current,touched:{...E.current.touched,[O]:!0}}},[]),w=e.useCallback(O=>{E.current={...E.current,visited:{...E.current.visited,[O]:!0}}},[]),y=e.useCallback((O,q)=>{const me={...E.current.errors};q?me[O]=q:delete me[O],E.current={...E.current,errors:me}},[]),A=e.useCallback(O=>{E.current={...E.current,submitted:O}},[]),N=e.useCallback(O=>{E.current={values:O,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}},C()},[C]),V=e.useCallback(()=>{const O={};Object.keys(E.current.values).forEach(q=>{O[q]=!0}),E.current={...E.current,touched:O}},[]),L=e.useCallback(()=>{const O={};Object.keys(E.current.values).forEach(q=>{O[q]=!0}),E.current={...E.current,visited:O}},[]),D=e.useCallback(O=>{const q={...E.current.errors};Object.entries(O).forEach(([me,ee])=>{ee?q[me]=ee:delete q[me]}),E.current={...E.current,errors:q},C()},[C]),S=e.useRef(s),T=e.useRef(null),x=e.useRef(null),M={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date (ISO).",creditCard:"Please enter valid card number.",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",equalTo:"Please enter the same value again."},k=e.useRef({}),_=O=>{k.current[O]=!0};e.useEffect(()=>(x.current=pr("formValidator",M,p),()=>{x.current=null}),[p]),e.useEffect(()=>(C(),Z(),At("formValidator"),()=>{x.current=null,S.current={},k.current={},h.current&&(h.current=null),T.current=null}),[]),e.useEffect(()=>{S.current=s},[s]);const Z=()=>{if(Object.keys(l).length>0){const O={};for(const q in l)if(Object.prototype.hasOwnProperty.call(l,q)&&Object.prototype.hasOwnProperty.call(S.current,q)){const me=Y(q,l[q]);me?O[q]=me:O[q]=null}Object.keys(O).length>0&&D(O)}},ie=(O,q)=>{var ee;let me=(ee=x.current)==null?void 0:ee.getConstant(O);return Array.isArray(q)?q.forEach((fe,B)=>{const K=`{${B}}`;me.includes(K)&&(me=me.replace(K,String(fe)))}):me=me.replace("{0}",String(q)),me},he=O=>{if(!Bt.CREDIT_CARD.test(O))return!1;const q=O.replace(/[\s-]/g,"");let me=0,ee=!1;for(let fe=q.length-1;fe>=0;fe--){let B=parseInt(q.charAt(fe),10);ee&&(B*=2,B>9&&(B-=9)),me+=B,ee=!ee}return me%10===0},Y=(O,q)=>{const me=S.current[O];if(!me||!k.current[O])return null;const ee=q==null||q.toString().trim()==="",fe=me.required!=null&&me.required[0]!==!1;if(ee&&!fe)return null;for(const B in me)if(Object.prototype.hasOwnProperty.call(me,B)){const K=me[B];if(!K)continue;let G=!0,b=null,U;if(B==="customValidator"&&typeof K=="function"){const te=K(q);if(te)return te;continue}if(Array.isArray(K)&&(b=K[0],U=K[1],B==="required"&&b===!1)||B!=="required"&&(q===""||q===null||q===void 0))continue;switch(B){case"required":G=!ee;break;case"email":G=Bt.EMAIL.test(q);break;case"url":G=Bt.URL.test(q);break;case"date":G=!isNaN(Date.parse(q));break;case"dateIso":G=Bt.DATE_ISO.test(q);break;case"number":G=!isNaN(Number(q))&&String(q).indexOf(" ")===-1;break;case"digits":G=Bt.DIGITS.test(q);break;case"creditCard":G=he(q);break;case"minLength":G=String(q).length>=Number(b);break;case"maxLength":G=String(q).length<=Number(b);break;case"rangeLength":Array.isArray(b)&&(G=String(q).length>=b[0]&&String(q).length<=b[1]);break;case"min":G=Number(q)>=Number(b);break;case"max":G=Number(q)<=Number(b);break;case"range":Array.isArray(b)&&(G=Number(q)>=b[0]&&Number(q)<=b[1]);break;case"regex":b instanceof RegExp?G=b.test(q):typeof b=="string"&&(G=new RegExp(b).test(q));break;case"tel":G=Bt.PHONE.test(q);break;case"equalTo":typeof b=="string"&&(G=q===E.current.values[b]);break}if(!G)return U||ie(B,b)}return null},H=()=>{const O={},q=Object.keys(S.current);for(const me of q){const ee=Y(me,E.current.values[me]);E.current.values[me]||v(me,E.current.values[me]),ee&&(O[me]=ee)}return O},I=()=>{const O=H();for(const me in O)Object.prototype.hasOwnProperty.call(O,me)&&y(me,O[me]);const q=Object.keys(S.current);for(const me of q)O[me]||y(me,null);return Object.keys(O).length===0&&(E.current={...E.current,errors:{},touched:{},visited:{},modified:{},submitted:!1,validated:{}}),C(),Object.keys(O).length===0},z=O=>{O==null||O.preventDefault();const q=I();V(),L(),A(!0),C(),q&&(t==null||t(E.current.values))},oe=(O,{value:q})=>{if(v(O,q),m){const me=Y(O,q);y(O,me)}C()},Q=O=>{P(O);const q=Y(O,E.current.values[O]);y(O,q),C()},R=O=>{N({...l}),r==null||r(O)},J=()=>{R()},ne=()=>{const O=E.current;return{values:O.values,errors:O.errors,submitted:O.submitted,touched:O.touched,visited:O.visited,modified:O.modified,valid:Object.keys(S.current).reduce((q,me)=>(q[me]=!O.errors[me],q),{}),allowSubmit:Object.keys(O.errors).length===0,onChange:oe,onBlur:Q,onFocus:Pe,onFormReset:R,onSubmit:z,fieldNames:Object.keys(k.current).reduce((q,me)=>(q[me]=me,q),{})}},se=O=>{const q=Y(O,E.current.values[O]);return y(O,q),C(),!q},le=e.useMemo(()=>({rules:s,initialValues:l,validateOnChange:m}),[s,l,m]);e.useImperativeHandle(n,()=>({...le,validate:I,reset:J,validateField:se,element:h.current}),[le]);const we=e.useMemo(()=>["sf-control sf-form-validator",g==="rtl"?"sf-rtl":"",u].filter(Boolean).join(" "),[g,u]),Pe=O=>{w(O),C()},ze={registerField:_};return c.jsx(di,{value:ze,children:c.jsx("form",{ref:h,className:we,onSubmit:z,onReset:R,noValidate:!0,...f,children:i})})});xr.displayName="Form";const Rt=o=>{const{name:n,children:s}=o;if(!n)return null;const t=e.useContext(Rr);return t?(t.registerField&&t.registerField(n),c.jsx(c.Fragment,{children:s})):null};Rt.displayName="FormField";const fi=1500,mi=500,Qs=0,Js=8,hi=2,St=2,pi="sf-control sf-tooltip",gi="sf-bigger",Ei="sf-tooltip-close",Jn="sf-tooltip-wrap",Ti="sf-tooltip-content sf-content",er="sf-tooltip-arrow",Ci="sf-tooltip-arrow-outer",vi="sf-tooltip-arrow-inner",Ln="bottom",es="top",ts="left",kn="right",tr="sf-popup",nr="sf-lib",yi="M10.5858 12.0001L2.58575 4.00003L3.99997 2.58582L12 10.5858L20 2.58582L21.4142 4.00003L13.4142 12.0001L21.4142 20L20 21.4142L12 13.4143L4.00003 21.4142L2.58581 20L10.5858 12.0001Z",Di="M20.7929 7H3.20712C2.76167 7 2.53858 7.53857 2.85356 7.85355L11.6465 16.6464C11.8417 16.8417 12.1583 16.8417 12.3536 16.6464L21.1465 7.85355C21.4614 7.53857 21.2384 7 20.7929 7Z",bi="M20.7929 17H3.20712C2.76167 17 2.53858 16.4615 2.85356 16.1465L11.6465 7.3536C11.8417 7.15834 12.1583 7.15834 12.3536 7.3536L21.1465 16.1465C21.4614 16.4615 21.2384 17 20.7929 17Z",wi="M7 20.7928L7 3.20706C7 2.76161 7.53857 2.53852 7.85355 2.8535L16.6464 11.6464C16.8417 11.8417 16.8417 12.1582 16.6464 12.3535L7.85355 21.1464C7.53857 21.4614 7 21.2383 7 20.7928Z",Si="M17 3.20718L17 20.793C17 21.2384 16.4614 21.4615 16.1464 21.1465L7.35354 12.3536C7.15828 12.1584 7.15828 11.8418 7.35354 11.6465L16.1464 2.85363C16.4614 2.53864 17 2.76173 17 3.20718Z",Nr=e.forwardRef((o,n)=>{const{width:s="auto",height:t="auto",position:r="TopCenter",offsetX:i=0,offsetY:a=0,arrow:l=!0,windowCollision:m=!1,arrowPosition:u="Auto",opensOn:f="Auto",followCursor:h=!1,sticky:p=!1,animation:g={open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:E=0,closeDelay:C=0,children:v,target:P,content:w,container:y,className:A,open:N,onClose:V,onOpen:L,title:D,style:S,onFilterTarget:T,...x}=o,[M,k]=e.useState(!0),[_,Z]=e.useState(!1),[ie,he]=e.useState(void 0),[Y,H]=e.useState(null),[I,z]=e.useState(!1),[oe,Q]=e.useState(Ln),[R,J]=e.useState({top:0,left:0}),[ne,se]=e.useState({}),[le,we]=e.useState({top:"",left:""}),[Pe,ze]=e.useState({style:S}),O=e.useRef(null),q=e.useRef({show:null,hide:null,autoClose:null}),me=e.useRef({x:"Center",y:"Top"}),ee=e.useRef(null),fe=e.useRef({event:null,target:null}),B=e.useRef(!0),K=e.useRef(null),G=e.useRef(null),b=e.useRef(null),U=e.useRef(null),te=e.useRef({event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null}),ue=e.useRef(typeof document<"u"?document.body:null),Ce=e.useRef(N),j=e.useRef(!1);De.isDevice&&(ee.current=Vt(G));const ae={width:"auto",height:"auto",position:"TopCenter",offsetX:0,offsetY:0,arrow:!0,windowCollision:!1,arrowPosition:"Auto",opensOn:"Auto",followCursor:!1,sticky:!1,animation:{open:{effect:"FadeIn",duration:150,delay:0},close:{effect:"FadeOut",duration:150,delay:0}},openDelay:0,closeDelay:0,target:P,content:w,container:y,open:N};e.useEffect(()=>{ce(),ye(r),O.current&&O.current.element&&K.current&&Se(K.current)},[r]),e.useEffect(()=>{O.current&&O.current.element&&K.current&&Se(K.current)},[u]),e.useEffect(()=>{var $,re;O.current&&O.current.element&&K.current&&(En(K.current),qt(K.current,($=te.current)==null?void 0:$.event,(re=te.current)==null?void 0:re.showAnimation))},[M,K.current]),e.useEffect(()=>(gn(),Qe(f),()=>{kt(f)}),[f,P]),e.useEffect(()=>{if(!(typeof document>"u"))return document.addEventListener("wheel",Fe),document.addEventListener("scroll",Fe),document.addEventListener("touchend",tn),document.addEventListener("keydown",wn),window.addEventListener("resize",ge),()=>{typeof document>"u"||(document.removeEventListener("wheel",Fe),document.removeEventListener("scroll",Fe),document.removeEventListener("touchend",tn),document.removeEventListener("keydown",wn),window.removeEventListener("resize",ge))}},[ae]),e.useEffect(()=>{var $,re,Te,pe,ve,Le;!N&&Ce.current===N||(Ce.current=N,N?($=te.current)!=null&&$.showTarget?(Xt((re=te.current)==null?void 0:re.showTarget,te.current.event,te.current.showAnimation),te.current={...te.current,showTarget:null}):Et(P!=null&&P.current?P==null?void 0:P.current:G.current,g.open):(Te=te.current)!=null&&Te.hideAnimation?(lt(),Jt((pe=te.current)==null?void 0:pe.hideAnimation,(ve=te.current)==null?void 0:ve.hideTarget,(Le=te.current)==null?void 0:Le.hideEvent),te.current={...te.current,hideEvent:null,hideAnimation:null,hideTarget:null}):vt(g.close))},[N]),e.useLayoutEffect(()=>(At("tooltip"),xe(),()=>{clearTimeout(q.current.show),clearTimeout(q.current.hide),clearTimeout(q.current.autoClose),q.current={show:null,hide:null,autoClose:null},O.current=null,ee.current=null,te.current={event:null,showAnimation:null,hideAnimation:null,hideEvent:null,hideTarget:null,showTarget:null},fe.current={event:null,target:null},h&&K.current&&(K.current.removeEventListener("mousemove",at),K.current.removeEventListener("touchstart",at),K.current.removeEventListener("mouseenter",at)),K.current=null,G.current=null,U.current=null,ue.current=null,b.current=null}),[]),e.useImperativeHandle(n,()=>({...ae,animation:g,openTooltip:($,re)=>{if(We(re)&&(re=g==null?void 0:g.open),We($)&&($=G.current),$){if($.style.display==="none")return;Et($,re)}},closeTooltip:$=>{$||($=g==null?void 0:g.close),vt($)},refresh:()=>{var $;O.current&&O.current.element&&Se(K.current?K.current:G.current),!We(o.target)&&!We(($=o.target)==null?void 0:$.current)&&(kt(f),Qe(f))},element:G.current}));const xe=e.useCallback(()=>{ce()},[ae]),ce=()=>{if(!r)return;let $=null,re=null;r.indexOf("Top")===0||r.indexOf("Bottom")===0?[re,$]=r.split(/(?=[A-Z])/):[$,re]=r.split(/(?=[A-Z])/),me.current.x=$,me.current.y=re},ye=e.useCallback($=>{let re;if(!We($))return $.indexOf("Right")===0?re=ts:$.indexOf("Bottom")===0?re=es:$.indexOf("Left")===0?re=kn:re=Ln,Q(re),re},[]),W=$=>{var Te,pe;if(h&&((Te=te.current)!=null&&Te.event)){at((pe=te.current)==null?void 0:pe.event);return}const re=de($);J(re)},X=$=>{var pe,ve;if(!$)return{x:1,y:1};const re={x:1,y:1},Te=$.closest('[style*="transform: scale"]');if(Te&&Te!==((pe=O.current)==null?void 0:pe.element)&&Te.contains((ve=O.current)==null?void 0:ve.element)){const Oe=window.getComputedStyle(Te).getPropertyValue("transform");if(Oe!=="none"){const Be=Oe.match(/scale\(([\d., ]+)\)/);if(Be){const Ae=Be[1].split(",").map(parseFloat);re.x=Ae[0],re.y=Ae.length>1?Ae[1]:Ae[0]}else{const Ae=Oe.match(/matrix\(([^)]+)\)/);if(Ae){const Ye=Ae[1].split(",").map(parseFloat);re.x=Ye[0],re.y=Ye[3]}}}}return re},de=$=>{var Ye,qe,tt,ct,Dt;O.current&&O.current.element&&(O.current.element.style.visibility="hidden",O.current.element.style.display="block");const re=(Ye=G.current)==null?void 0:Ye.closest('[style*="zoom"]');re&&O.current&&O.current.element&&!re.contains((qe=O.current)==null?void 0:qe.element)&&(O.current.element.style.zoom=getComputedStyle(re).zoom);const Te=js($,(tt=me.current.x)==null?void 0:tt.toLowerCase(),(ct=me.current.y)==null?void 0:ct.toLowerCase(),B.current||(Dt=ue.current)==null?void 0:Dt.getBoundingClientRect()),pe=X($),ve=Re(r,pe.x,pe.y),Le=Cn(Te,ve),Oe=Le[0],Be=Le[1],Ae=vn($,Oe,Be);return Ae.left=Ae.left/pe.x,Ae.top=Ae.top/pe.y,!B.current&&ue.current&&(Ae.left-=window.scrollX*2,Ae.top-=window.scrollY*2),O.current&&O.current.element&&(O.current.element.style.display="",h&&(O.current.element.style.visibility="visible")),Ae},ge=()=>{Se(K.current)},Se=$=>{if(O.current&&O.current.element&&$){const re=de($);J(re),O.current.element.style.visibility="visible"}},Ee=()=>{h||Se(K.current)},Ne=()=>{var re;Ft();const $=e.createRef();$.current=(re=O.current)==null?void 0:re.element,zt.stop($.current),j.current=!1,k(!0)},Re=($,re,Te)=>{var tt,ct,Dt,ht,Ge,wt,rn,Ls,ks,Os;const pe={top:0,left:0};let ve,Le,Oe,Be,Ae,Ye,qe;if(re!==1||Te!==1){const Is=(ct=(tt=O.current)==null?void 0:tt.element)==null?void 0:ct.getBoundingClientRect();let on;Oe=Math.round(Is.width),Be=Math.round(Is.height),b.current&&(on=b.current.getBoundingClientRect()),ve=on?Math.round(on.width):0,Le=on?Math.round(on.height):0,Ae=l?Qs:Js,Ye=Le/2+St+(Be-((Dt=O.current)==null?void 0:Dt.element).clientHeight*Te),qe=ve/2+St+(Oe-((ht=O.current)==null?void 0:ht.element).clientWidth*re)}else Oe=((Ge=O.current)==null?void 0:Ge.element).offsetWidth,Be=((wt=O.current)==null?void 0:wt.element).offsetHeight,ve=b.current?b.current.offsetWidth:0,Le=b.current?b.current.offsetHeight:0,Ae=l?Qs:Js,Ye=Le/2+St+(((rn=O.current)==null?void 0:rn.element).offsetHeight-((Ls=O.current)==null?void 0:Ls.element).clientHeight),qe=ve/2+St+(((ks=O.current)==null?void 0:ks.element).offsetWidth-((Os=O.current)==null?void 0:Os.element).clientWidth);switch(h&&(Ae+=hi),$){case"RightTop":pe.left+=ve+Ae,pe.top-=Be-Ye;break;case"RightCenter":pe.left+=ve+Ae,pe.top-=Be/2;break;case"RightBottom":pe.left+=ve+Ae,pe.top-=Ye;break;case"BottomRight":pe.top+=Le+Ae,pe.left-=qe;break;case"BottomCenter":pe.top+=Le+Ae,pe.left-=Oe/2;break;case"BottomLeft":pe.top+=Le+Ae,pe.left-=Oe-qe;break;case"LeftBottom":pe.left-=ve+Oe+Ae,pe.top-=Ye;break;case"LeftCenter":pe.left-=ve+Oe+Ae,pe.top-=Be/2;break;case"LeftTop":pe.left-=ve+Oe+Ae,pe.top-=Be-Ye;break;case"TopLeft":pe.top-=Be+Le+Ae,pe.left-=Oe-qe;break;case"TopRight":pe.top-=Be+Le+Ae,pe.left-=qe;break;default:pe.top-=Be+Le+Ae,pe.left-=Oe/2;break}return pe.left+=i,pe.top+=a,pe},Me=($,re,Te,pe)=>{var tt,ct,Dt,ht;if(l===!1||b.current===null)return;const ve=ye(re);let Le,Oe;const Be=((tt=O.current)==null?void 0:tt.element).clientWidth,Ae=((ct=O.current)==null?void 0:ct.element).clientHeight,Ye=b.current.offsetWidth,qe=b.current.offsetHeight;if(ve===Ln||ve===es){if(ve===Ln?(Oe="99.9%",we(Ge=>({...Ge,top:`-${qe-2}px`}))):(Oe=-(qe-1)+"px",we(Ge=>({...Ge,top:`-${qe-6}px`}))),$){const Ge=Te!=="Center"||Be>$.offsetWidth||h;Ge&&Te==="Left"||!Ge&&u==="End"?Le=Be-Ye-St+"px":Ge&&Te==="Right"||!Ge&&u==="Start"?Le=St+"px":Ge&&(u==="End"||u==="Start")?Le=u==="End"?$.offsetWidth+(((Dt=O.current)==null?void 0:Dt.element).offsetWidth-$.offsetWidth)/2-Ye/2-St+"px":(((ht=O.current)==null?void 0:ht.element).offsetWidth-$.offsetWidth)/2-Ye/2+St+"px":Le=Be/2-Ye/2+"px"}}else{ve===kn?(Le="99.9%",we(wt=>({...wt,left:`-${Ye-2}px`}))):(Le=-(Ye-1)+"px",we(wt=>({...wt,left:`${-Ye+(Ye-2)}px`})));const Ge=pe!=="Center"||Ae>$.offsetHeight||h;Ge&&pe==="Top"||!Ge&&u==="End"?Oe=Ae-qe-St+"px":Ge&&pe==="Bottom"||!Ge&&u==="Start"?Oe=St+"px":Oe=Ae/2-qe/2+"px"}b.current.style.top=Oe,b.current.style.left=Le},be=()=>{var re;if(K.current&&!We(K.current.getAttribute("title"))&&(K.current.setAttribute("data-content",K.current.getAttribute("title")),K.current.removeAttribute("title")),e.isValidElement(w))return w;let $="";return typeof w=="function"?$=w():(re=K==null?void 0:K.current)!=null&&re.getAttribute("data-content")&&($=K.current.getAttribute("data-content")),$},_e=($,re)=>{const Te=($.getAttribute("aria-describedby")||"").split(/\s+/);Te.indexOf(re)<0&&Te.push(re),To($,{"aria-describedby":Te.join(" ").trim(),"data-tooltip-id":re})},He=$=>{const re=$.getAttribute("data-tooltip-id"),Te=($.getAttribute("aria-describedby")||"").split(/\s+/),pe=Te.indexOf(re);pe!==-1&&Te.splice(pe,1),$.removeAttribute("data-tooltip-id");const ve=Te.join(" ").trim();ve?$.setAttribute("aria-describedby",ve):$.removeAttribute("aria-describedby")},Ie=e.useCallback($=>{$&&(clearTimeout(q.current.autoClose),rt($.originalEvent))},[]),et=()=>{if(p)return;const $=()=>{sn()};q.current.autoClose=setTimeout($,fi)},it=$=>{var pe;let re;if((pe=o.target)!=null&&pe.current?re=o.target.current.contains($.target)?o.target.current:void 0:re=T?$.target:G.current,We(re))return;const Te=$;!O.current||O.current&&re!==K.current?Te.type==="mousedown"&&Te.button===2||rt($):p||vt(g.close,$,re)},rt=$=>{var Te,pe,ve,Le;let re;if(T){if(!(T==null?void 0:T($.target)))return;re=$.target}else(Te=o.target)!=null&&Te.current?re=o.target.current.contains($.target)?o.target.current:void 0:re=G.current;if(!(We(re)||O.current&&re===K.current&&!h)){if(O.current&&((pe=O.current.element)!=null&&pe.getAttribute("sf-animation-id"))){const Oe=C+((ve=g==null?void 0:g.close)!=null&&ve.delay?g.close.delay:0)+((Le=g==null?void 0:g.close)!=null&&Le.duration?g.close.duration:0);setTimeout(()=>{Wt(re),Et(re,g.open,$)},Oe);return}Wt(re),Et(re,g.open,$)}},mt=$=>{fe.current.event=$},lt=()=>{fe.current.target&&(fe.current.target.removeEventListener("mousemove",mt),fe.current.target.removeEventListener("touchstart",mt))},Et=($,re,Te)=>{clearTimeout(q.current.show),clearTimeout(q.current.hide),E&&h&&(lt(),fe.current.target=$,fe.current.target.addEventListener("mousemove",mt),fe.current.target.addEventListener("touchstart",mt)),te.current={...te.current,event:Te,showAnimation:re,showTarget:$},L==null||L(Te),(We(N)||N)&&Xt($,Te,re)},Xt=($,re,Te)=>{var pe,ve,Le;if(K.current=$,k(!1),We(O.current)){const Oe=(pe=G.current)!=null&&pe.getAttribute("id")?jn((ve=G.current)==null?void 0:ve.getAttribute("id")):jn("tooltip");ze(Be=>({...Be,id:Oe+"_content"}))}else if($){Me($,r,me.current.x,me.current.y),_e($,Pe==null?void 0:Pe.id);const Oe=e.createRef();Oe.current=(Le=O.current)==null?void 0:Le.element,zt.stop(Oe.current),Se($),qt($,re,Te)}},gn=()=>{(y==null?void 0:y.current)instanceof HTMLElement&&(B.current=!1,ue.current=y.current),ue.current||(ue.current=typeof document<"u"?document.body:null)},En=$=>{var re;if($){gn(),_e($,Pe==null?void 0:Pe.id),l&&ye(r),W($),Me($,r,me.current.x,me.current.y);const Te=e.createRef();Te.current=(re=O.current)==null?void 0:re.element,zt.stop(Te.current),Se($)}},qt=($,re,Te)=>{$&&Tn($,Te,re)},Tn=($,re,Te)=>{const pe={name:re.effect==="None"&&Hs==="Enable"?"FadeIn":g.open.effect,duration:re.duration,delay:re.delay,timingFunction:"ease-out"};if(E>0){const ve=()=>{var Le;h&&($.addEventListener("mousemove",at),$.addEventListener("touchstart",at),$.addEventListener("mouseenter",at)),(Le=O.current)!=null&&Le.element&&(H($),he(Oe=>({show:pe,hide:Oe==null?void 0:Oe.hide})),Z(!0),fe.current.event&&h&&at(fe.current.event))};q.current.show=setTimeout(ve,E)}else O.current&&(H($),he(ve=>({show:pe,hide:ve==null?void 0:ve.hide})),Z(!0));Te&&nn(Te,$)},Gt=($,re)=>{var Le;const Te={left:$,top:re,position:r,horizontal:me.current.x,vertical:me.current.y},pe=Pt(),ve=Co((Le=O.current)==null?void 0:Le.element,pe?pe.current:null,p&&r.indexOf("Right")>=0?U.current.offsetWidth+$:$,re);return ve.length>0&&(Te.horizontal=ve.indexOf("left")>=0?"Right":ve.indexOf("right")>=0?"Left":me.current.x,Te.vertical=ve.indexOf("top")>=0?"Bottom":ve.indexOf("bottom")>=0?"Top":me.current.y),Te},Cn=($,re)=>[B.current?$.left+re.left:$.left-ue.current.getBoundingClientRect().left+re.left+window.pageXOffset+ue.current.scrollLeft,B.current?$.top+re.top:$.top-ue.current.getBoundingClientRect().top+re.top+window.pageYOffset+ue.current.scrollTop],vn=($,re,Te)=>{var qe,tt,ct,Dt;const pe=Gt(re,Te);let ve=pe.position;me.current.y!==pe.vertical&&(ve=(r==null?void 0:r.indexOf("Bottom"))===0||(r==null?void 0:r.indexOf("Top"))===0?pe.vertical+me.current.x:me.current.x+pe.vertical),me.current.x!==pe.horizontal&&(ve.indexOf("Left")===0&&(pe.vertical=ve==="LeftTop"||ve==="LeftCenter"?"Top":"Bottom",ve=pe.vertical+"Left"),ve.indexOf("Right")===0&&(pe.vertical=ve==="RightTop"||ve==="RightCenter"?"Top":"Bottom",ve=pe.vertical+"Right"),pe.horizontal=me.current.x);const Le=pe.vertical,Oe=pe.horizontal;if(pe.position!==ve){const ht=js($,Oe.toLowerCase(),Le.toLowerCase(),B.current||(qe=ue.current)==null?void 0:qe.getBoundingClientRect());Me($,ve,Oe,Le);const Ge=X($),wt=Re(ve,Ge.x,Ge.y);B.current||(wt.top-=yn("TopBottom",ve,a),wt.left-=yn("RightLeft",ve,i)),pe.position=ve;const rn=Cn(ht,wt);pe.left=rn[0],pe.top=rn[1]}else Me($,ve,Oe,Le);const Be={left:pe.left,top:pe.top},Ae=Pt(),Ye=B.current?vo((tt=O.current)==null?void 0:tt.element,Ae?Ae.current:null,{X:!0,Y:m},Be):Be;if(l&&b.current!=null&&(ve.indexOf("Bottom")===0||ve.indexOf("Top")===0)){let ht=parseInt(b.current.style.left,10)-(Ye.left-pe.left);ht<0?ht=0:ht+b.current.offsetWidth>((ct=O.current)==null?void 0:ct.element).clientWidth&&(ht=((Dt=O.current)==null?void 0:Dt.element).clientWidth-b.current.offsetWidth),b.current.style.left=ht.toString()+"px"}return Be.left=Ye.left,Be.top=Ye.top,Be},yn=($,re,Te)=>$.indexOf(r.split(/(?=[A-Z])/)[0])!==-1&&$.indexOf(re.split(/(?=[A-Z])/)[0])!==-1?2*Te:0,Pt=()=>!m&&(P!=null&&P.current)?G:null,vt=($,re,Te)=>{if(C>0){clearTimeout(q.current.hide),clearTimeout(q.current.show);const pe=()=>{C&&O.current&&O.current.element&&I||Zt($,re,Te)};q.current.hide=setTimeout(pe,C)}else Zt($,re,Te)},Zt=($,re,Te)=>{var ve,Le,Oe;let pe;if(re?pe=(ve=o.target)!=null&&ve.current||T?Te||re.target:G.current:pe=K.current,te.current={...te.current,hideEvent:re,hideAnimation:$,hideTarget:pe},O.current&&((Le=O.current.element)!=null&&Le.getAttribute("sf-animate"))){const Be=e.createRef();Be.current=(Oe=O.current)==null?void 0:Oe.element,zt.stop(Be.current,{end:()=>{Qt($,pe,re)}})}else Qt($,pe,re)},Qt=($,re,Te)=>{V==null||V(Te),We(N)?(lt(),Jt($,re,Te)):N&&!V?k(!1):N||(lt(),Jt($,re,Te))},Jt=($,re,Te)=>{re&&Te&&Wt(re);const pe={name:$.effect==="None"&&Hs==="Enable"?"FadeOut":g.close.effect,duration:$.duration,delay:$.delay,timingFunction:"ease-in"};O.current&&(he(ve=>({hide:pe,show:ve==null?void 0:ve.show})),Z(!1))},Wt=$=>{Sn($),We($.getAttribute("data-content"))||($.setAttribute("title",$.getAttribute("data-content")),$.removeAttribute("data-content")),He($)},Ft=()=>{const $=K.current;$&&Wt($),M&&(we({top:"",left:""}),O.current=null)},Dn=()=>{O.current&&O.current.element&&z(!0)},bn=$=>{z(!1),vt(g.close,$,K.current)},yt=$=>{const re=$.relatedTarget;if(re){const Te=Tt(re,`.${Jn}.${nr}.${tr}`);Te?(h&&at($),Te.addEventListener("mouseleave",en)):(vt(g.close,$,K.current),C===0&&g.close.effect==="None"&&Ft())}else vt(g.close,$,K.current),Ft()},en=$=>{var re,Te;(Te=(re=O.current)==null?void 0:re.element)==null||Te.removeEventListener("mouseleave",en),(!$.relatedTarget||Tt($.relatedTarget,".sf-tooltip")!==G.current)&&(vt(g.close,$,K.current),Ft())},at=$=>{var qe;let re=0,Te=0;if($.type.indexOf("touch")>-1?($.preventDefault(),re=$.touches[0].pageX,Te=$.touches[0].pageY):(re=$.pageX,Te=$.pageY),We(O.current))return;O.current&&(O.current.element.style.display="block");const pe=e.createRef();pe.current=(qe=O.current)==null?void 0:qe.element,zt.stop(pe.current),Me($.target,r,me.current.x,me.current.y);const ve=X($.target),Le=Re(r,ve.x,ve.y),Oe=re+Le.left+i,Be=Te+Le.top+a,Ae=Gt(Oe,Be);if(me.current.x!==Ae.horizontal||me.current.y!==Ae.vertical){const tt=(r==null?void 0:r.indexOf("Bottom"))===0||(r==null?void 0:r.indexOf("Top"))===0?Ae.vertical+Ae.horizontal:Ae.horizontal+Ae.vertical;Ae.position=tt,Me($.target,Ae.position,Ae.horizontal,Ae.vertical);const ct=Re(Ae.position,ve.x,ve.y);Ae.left=re+ct.left-i,Ae.top=Te+ct.top-a}const Ye={position:"absolute",left:Ae.left+"px",top:Ae.top+"px",zIndex:1e3,width:xn(s),height:xn(t),display:"block"};J(Ae),ze(tt=>({...tt,style:{...(tt==null?void 0:tt.style)||{},...Ye}}))},wn=$=>{O.current&&O.current.element&&$.key==="Escape"&&sn()},tn=$=>{O.current&&O.current.element&&Tt($.target,".sf-tooltip")===null&&!p&&!f.includes("Focus")&&sn()},Fe=$=>{O.current&&O.current.element&&!p&&!h&&!j.current&&(Tt($.target,`.${Jn}.${nr}.${tr}`)||(Z(re=>(re||k(!0),re)),j.current=!0,sn()))},Qe=$=>{var pe,ve;const re=Lt($),Te={};for(const Le of re){if(Le==="Custom")return;Le==="Focus"&&(!We(o.target)&&!We((pe=o.target)==null?void 0:pe.current)?(ve=o.target)==null||ve.current.addEventListener("focus",rt):Te.onFocus=rt),Le==="Click"&&(Te.onMouseDown=it),Le==="Hover"&&(De.isDevice?(ee.current&&(ee.current.tapHoldThreshold=mi,ee.current.tapHold=Ie),Te.onTouchEnd=et):Te.onMouseOver=rt)}se(Te)},Lt=$=>$?($==="Auto"&&($=De.isDevice?"Hover":"Hover Focus"),$.split(" ")):[],nn=($,re)=>{var Te;O.current&&O.current.element&&(p||($.type==="focus"&&(!We(o.target)&&!We((Te=o.target)==null?void 0:Te.current)||T?re.addEventListener("blur",yt):se(pe=>({...pe,onBlur:yt}))),$.type==="mouseover"&&re.addEventListener("mouseleave",yt),C&&(O.current.element.addEventListener("mouseenter",Dn),O.current.element.addEventListener("mouseleave",bn))),h&&E===0&&(re.addEventListener("mousemove",at),re.addEventListener("mouseenter",at)))},kt=$=>{var Te,pe;const re=Lt($);for(const ve of re){if(ve==="Custom")return;ve==="Focus"&&!We(o.target)&&!We((Te=o.target)==null?void 0:Te.current)&&G.current&&((pe=o.target)==null||pe.current.removeEventListener("focus",rt)),ve==="Hover"&&ee.current&&ee.current.destroy&&ee.current.destroy()}},Sn=$=>{if(!p){const re=Lt(f);for(const Te of re)Te==="Focus"&&($.removeEventListener("blur",yt),se(pe=>{const ve={...pe};return delete ve.onBlur,ve})),Te==="Hover"&&!De.isDevice&&$.removeEventListener("mouseleave",yt);C&&($.removeEventListener("mouseenter",Dn),$.removeEventListener("mouseleave",bn))}h&&($.removeEventListener("mousemove",at),$.removeEventListener("mouseenter",yt))},sn=()=>{vt(g.close)},fo=e.useMemo(()=>{switch(oe){case es:return bi;case kn:return wi;case ts:return Si;default:return Di}},[oe]),mo=()=>c.jsxs(Nt,{ref:O,open:_,role:"tooltip","aria-hidden":!1,animation:ie,relativeElement:Y,targetRef:K,position:{X:R.left,Y:R.top},viewPortElementRef:ue.current?ue:void 0,width:xn(s),height:xn(t),onOpen:Ee,onClose:Ne,className:[Jn,A,De.isDevice?gi:""].filter(Boolean).join(" "),...Pe,...x,children:[c.jsx("div",{className:Ti,children:be()}),l&&c.jsxs("div",{ref:b,className:`${er} ${er}-${oe} sf-pos-absolute sf-overflow-hidden ${oe===ts||oe===kn?"sf-tooltip-arrow-x":"sf-tooltip-arrow-y"}`,children:[c.jsx("div",{className:`${Ci}-${oe} sf-pos-absolute`}),c.jsx("div",{className:`${vi}-${oe} sf-pos-absolute`,style:le,children:c.jsx($s,{d:fo})})]}),p&&c.jsx("div",{ref:U,className:`${Ei}`,role:"button","aria-label":"Close Tooltip",onClick:()=>{sn()},children:c.jsx($s,{d:yi})})]});return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:G,className:[pi,A].filter(Boolean).join(" "),title:D,...ne,children:v}),!M&&ue.current&&jt.createPortal(mo(),ue.current)]})});e.memo(Nr);const cn=20,mn=e.forwardRef((o,n)=>{const{open:s,header:t,footer:r,modal:i=!0,onClose:a,onDragStart:l,onDrag:m,onDragStop:u,onResizeStart:f,onResize:h,onResizeStop:p,closeIcon:g=!0,initialFocusRef:E,draggable:C=!1,resizable:v=!1,resizeHandles:P=["SouthEast"],position:w="Center",animation:y={effect:"Fade",duration:400,delay:0},target:A=typeof document<"u"?document.body:void 0,fullScreen:N=!1,className:V="",children:L,style:D,id:S=`dialog_${e.useId()}`,...T}=o,x=e.useRef(null),M=e.useRef(null),k=e.useRef(null),[_,Z]=e.useState({internalOpen:s,dynamicMaxHeight:""}),{internalOpen:ie,dynamicMaxHeight:he}=_,{locale:Y}=$e(),H=e.useMemo(()=>({handle:".sf-dlg-header-content",clone:!1,dragArea:A&&A instanceof HTMLElement?A:typeof document<"u"?document.body:void 0,abort:".sf-dlg-closeicon-btn",isDragScroll:!0,dragStart:ce=>{if(!C){ce.cancel=!0;return}l&&l(ce)},drag:ce=>{C&&m&&m(ce.event)},dragStop:ce=>{C&&u&&u(ce.event)}}),[C,A,l,m,u]),I=e.useRef(null),z=e.useRef(Yt({current:C?I.current:null},H)),oe=e.useMemo(()=>{const ce=(X,de)=>X===void 0?de:X,ye=N&&typeof window<"u"?window.innerWidth:typeof window<"u"?window.innerWidth-cn*2:800,W=N&&typeof window<"u"?window.innerHeight:typeof window<"u"?window.innerHeight-cn*2:600;return{minWidth:ce(D==null?void 0:D.minWidth,100),minHeight:ce(D==null?void 0:D.minHeight,100),maxWidth:ce(D==null?void 0:D.maxWidth,ye),maxHeight:ce(D==null?void 0:D.maxHeight,W)}},[D==null?void 0:D.minWidth,D==null?void 0:D.minHeight,D==null?void 0:D.maxWidth,D==null?void 0:D.maxHeight,N]),Q=e.useMemo(()=>({enabled:v&&!N,handles:P,boundary:A&&A instanceof HTMLElement?A:void 0,minWidth:oe.minWidth,minHeight:oe.minHeight,maxWidth:oe.maxWidth,maxHeight:oe.maxHeight,onResizeStart:f,onResize:h,onResizeStop:p}),[v,P,A,oe]),{renderResizeHandles:R}=yo(I,Q);e.useEffect(()=>(At("dialog"),()=>{var ce,ye,W;z.current&&((ce=z.current.element)!=null&&ce.current)&&((W=(ye=z.current).destroy)==null||W.call(ye)),I.current=null,z.current=null,x.current=null,M.current=null,k.current=null,typeof window<"u"&&window.removeEventListener("resize",se)}),[]);const J=e.useCallback(()=>{let ce=[];if(I.current){const ye=['a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','details:not([tabindex="-1"])','[contenteditable]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])'].join(","),W=I.current.querySelectorAll(ye);ce=Array.from(W).filter(X=>!X.hasAttribute("disabled"))}return ce},[I,L,s]);e.useEffect(()=>{if(s){if(typeof document>"u"||typeof window>"u")return;if(k.current=document.activeElement,i){const ce=A&&A instanceof HTMLElement?A:document.body,ye={overflow:ce.style.overflow,paddingRight:ce.style.paddingRight},W=window.innerWidth-document.documentElement.clientWidth;return ce.style.overflow="hidden",ce.style.paddingRight=`${W}px`,()=>{ce.style.overflow=ye.overflow,ce.style.paddingRight=ye.paddingRight,k.current&&s&&k.current.focus()}}}else k.current&&(k.current.focus(),k.current=null);return()=>{k.current&&s&&k.current.focus()}},[ie,i]),e.useEffect(()=>{s&&Z(ce=>({...ce,internalOpen:!0}))},[s]);const ne=e.useCallback(()=>N?"100%":A&&A!==document.body&&typeof window<"u"?A.offsetHeight<window.innerHeight?A.offsetHeight-cn+"px":window.innerHeight-cn+"px":(typeof window<"u"?window.innerHeight-cn:600)+"px",[N,A]);e.useEffect(()=>{s&&Z(ce=>({...ce,dynamicMaxHeight:ne()}))},[s,ne]);const se=e.useCallback(()=>{Z(ce=>({...ce,dynamicMaxHeight:ne()}))},[ne]);e.useEffect(()=>{if(!(!s||!ie))return x.current&&Z(ce=>({...ce,dynamicMaxHeight:ne()})),typeof window<"u"&&window.addEventListener("resize",se),()=>{typeof window<"u"&&window.removeEventListener("resize",se)}},[s,ie,se,ne]);const le=e.useMemo(()=>({open:s,modal:i,draggable:C,resizable:v,resizeHandles:P,position:w,animation:y,target:A,fullScreen:N,closeIcon:g}),[s,i,C,v,P,w,y,A,N]);e.useImperativeHandle(n,()=>({...le,element:x.current}),[le]);const we=e.useCallback(ce=>{ce.key==="Escape"&&a&&(ce.preventDefault(),a(ce),typeof document<"u"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur())},[a]),Pe=e.useCallback(ce=>{var W,X,de,ge;if(!i)return;const ye=J();if(ye.length!==0)switch(ce.key){case"Tab":{const Se=typeof document<"u"?document.activeElement:null,Ee=ye.indexOf(Se);if(Ee===-1){ce.preventDefault(),(X=(W=ye[ye.length-1])==null?void 0:W.focus)==null||X.call(W);return}ce.preventDefault();let Ne;ce.shiftKey?Ne=Ee<=0?ye.length-1:Ee-1:Ne=Ee>=ye.length-1?0:Ee+1,(ge=(de=ye[Ne])==null?void 0:de.focus)==null||ge.call(de);break}}},[i,J]),ze=e.useCallback(()=>{var ce;if(x.current&&Z(ye=>({...ye,dynamicMaxHeight:ne()})),E!=null&&E.current)"element"in E.current&&E.current.element?E.current.element.focus():E.current.focus();else{const W=J().filter(X=>!M.current||M.current&&X!==M.current.element);W.length>0?W[0].focus():(ce=M.current)!=null&&ce.element&&M.current.element.focus()}},[E,ne,J]),O=e.useCallback(()=>{x.current&&Z(ce=>({...ce,internalOpen:!1}))},[]),q=e.useCallback(ce=>{a==null||a(ce)},[a]),me=e.useCallback(ce=>{i&&ce.target===ce.currentTarget&&(a==null||a(ce))},[i,a]),ee=e.useMemo(()=>pr("dialog",{close:"Close"},Y).getConstant("close"),[Y]),fe=e.useCallback(()=>c.jsx(nt,{ref:M,icon:typeof g=="boolean"?c.jsx($n,{"aria-label":ee}):g,title:ee,"aria-label":ee,color:Ct.Secondary,onClick:q,className:"sf-dlg-closeicon-btn",variant:Je.Standard}),[g,q,i,ee]),B=(ce,ye)=>{const W={Fade:{show:"FadeIn",hide:"FadeOut"},FadeZoom:{show:"FadeZoomIn",hide:"FadeZoomOut"},FlipLeftDown:{show:"FlipLeftDownIn",hide:"FlipLeftDownOut"},FlipLeftUp:{show:"FlipLeftUpIn",hide:"FlipLeftUpOut"},FlipRightDown:{show:"FlipRightDownIn",hide:"FlipRightDownOut"},FlipRightUp:{show:"FlipRightUpIn",hide:"FlipRightUpOut"},FlipXDown:{show:"FlipXDownIn",hide:"FlipXDownOut"},FlipXUp:{show:"FlipXUpIn",hide:"FlipXUpOut"},FlipYLeft:{show:"FlipYLeftIn",hide:"FlipYLeftOut"},FlipYRight:{show:"FlipYRightIn",hide:"FlipYRightOut"},SlideBottom:{show:"SlideBottomIn",hide:"SlideBottomOut"},SlideLeft:{show:"SlideLeftIn",hide:"SlideLeftOut"},SlideRight:{show:"SlideRightIn",hide:"SlideRightOut"},SlideTop:{show:"SlideTopIn",hide:"SlideTopOut"},Zoom:{show:"ZoomIn",hide:"ZoomOut"},None:{show:"FadeIn",hide:"FadeOut"}},X={show:"FadeIn",hide:"FadeOut"},de=W[ce]||X;return ye?de.show:de.hide},K=e.useMemo(()=>["sf-control","sf-dialog",i?"sf-dlg-modal":"",N?"sf-dlg-fullscreen":"",v&&!N?"sf-dlg-resizable":"",V].filter(Boolean).join(" "),[i,N,V,v]),G=e.useMemo(()=>{if(D!=null&&D.top&&(D!=null&&D.left)||w===null)return;const[ce,ye]=w==null?void 0:w.split(/(?=[A-Z])/);return ce&&ye?`sf-dlg-${ce==null?void 0:ce.toLowerCase()}-${ye==null?void 0:ye.toLowerCase()}`:"sf-dlg-center"},[w,D]),b=e.useMemo(()=>{const[ce,ye]=w?w==null?void 0:w.split(/(?=[A-Z])/):[];return ce&&ye?{X:ce,Y:ye}:{X:"Center",Y:"Center"}},[w]),U=e.useMemo(()=>["sf-dlg-container",G].filter(Boolean).join(" "),[G]),te=e.useMemo(()=>{const ce={...D};return delete ce.zIndex,{maxHeight:N?"100%":he,position:ce.left&&ce.top?"absolute":"relative",...!ce.left&&!ce.top?{top:"0px",left:"0px"}:{},...N?{width:"100vw",height:"100vh",maxWidth:"100%",maxHeight:"100%"}:{},...!N&&v?{minWidth:oe.minWidth,minHeight:oe.minHeight,maxWidth:oe.maxWidth,maxHeight:oe.maxHeight}:{},...ce}},[w,N,D,he,v,oe]),{zIndexBase:ue,zIndexPopup:Ce,zIndexOverlay:j}=e.useMemo(()=>{let ce=typeof(D==null?void 0:D.zIndex)=="number"?D.zIndex:1e3;return ce===1e3&&x.current&&(ce=gr(x.current)),{zIndexBase:Math.max(2,ce),zIndexPopup:Math.max(3,ce+1),zIndexOverlay:Math.max(1,ce-1)}},[D==null?void 0:D.zIndex,s,ie,x.current]);if(!ie)return null;const ae=c.jsxs("div",{className:U,ref:x,style:{zIndex:ue,position:typeof document<"u"&&A!==document.body?"absolute":"fixed"},onKeyDown:we,children:[c.jsxs(Nt,{ref:ce=>{I.current=ce==null?void 0:ce.element},open:s,position:b,zIndex:Ce,relateTo:A,onOpen:ze,onClose:O,className:K,animation:{show:{name:B(y.effect,!0),duration:y.effect==="None"?0:y.duration,delay:y.delay,timingFunction:"ease-out"},hide:{name:B(y.effect,!1),duration:y.effect==="None"?0:y.duration,delay:y.delay,timingFunction:"ease-in"}},style:te,role:"dialog",id:S,...L&&{"aria-describedby":`${S}_dialog-content`},...t&&{"aria-labelledby":`${S}_dialog-header`},...!t&&{"aria-label":"Dialog"},"aria-modal":i?"true":"false",tabIndex:-1,onKeyDown:Pe,...T,children:[(t||g)&&c.jsxs("div",{className:"sf-dlg-header-content",id:`${S}_dialog-header`,children:[g&&fe(),t&&c.jsx("div",{className:"sf-dlg-header sf-ellipsis",id:`${S}_title`,children:t})]}),c.jsx("div",{className:"sf-dlg-content",id:`${S}_dialog-content`,children:L}),r&&c.jsx("div",{className:"sf-dlg-footer-content sf-content-end",children:r}),v&&!N&&R(c.jsx(Do,{fill:"currentColor"}))]}),i&&c.jsx("div",{className:"sf-dlg-overlay",style:{zIndex:j},onClick:me,role:"presentation"})]}),xe=A&&A instanceof HTMLElement?A:typeof document<"u"?document.body:void 0;return jt.createPortal(ae,xe)});mn.displayName="Dialog";e.memo(mn);const Kt=o=>o?o.getHours()*3600+o.getMinutes()*60+o.getSeconds():-1,Ar=(o,n)=>o.getFullYear()===n.getFullYear()&&o.getMonth()===n.getMonth()&&o.getDate()===n.getDate(),Lr=(o,n,s)=>{if(!n&&!s)return!0;const t=Kt(o),r=!!n,i=!!s,a=r?Kt(n):-1,l=i?Kt(s):-1;return r&&i?Ar(n,s)?a===l?t===a:a>l?!1:t>=a&&t<=l:a===l?t===a:a>l?t>=a||t<=l:t>=a&&t<=l:r?t>=a:i?t<=l:!0},Ri=(o,n,s)=>!n&&!s?o:o.filter(t=>Lr(t,n??null,s??null)),xi=(o,n,s)=>{const t=!!n,r=!!s;if(!t&&!r)return o;const i=Kt(o),a=t?Kt(n):-1,l=r?Kt(s):Number.MAX_SAFE_INTEGER;if(t&&r&&Ar(n,s)&&a>l)return null;if(t&&i<a){const m=n,u=new Date(o);return u.setHours(m.getHours(),m.getMinutes(),m.getSeconds(),0),u}if(r&&i>l){const m=s,u=new Date(o);return u.setHours(m.getHours(),m.getMinutes(),m.getSeconds(),0),u}if(t&&r&&a>l&&i>l&&i<a){const m=a-i,u=i-l,f=m<=u?n:s,h=new Date(o);return h.setHours(f.getHours(),f.getMinutes(),f.getSeconds(),0),h}return o},kr=e.forwardRef((o,n)=>{const{times:s,selected:t,onSelect:r,formatter:i,itemTemplate:a,idBase:l,listLabel:m="Time options",ariaHidden:u=!1,className:f="sf-timepicker-list",sizeClass:h="",isOpen:p=!1,dir:g="ltr"}=o,E=e.useRef(null),C=e.useRef([]),v=e.useRef(!1),[P,w]=e.useState(null),y=s.length,A=e.useCallback(Y=>i?i(Y):Y.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}),[i]),N=e.useCallback(()=>t?s.findIndex(Y=>Y.getHours()===t.getHours()&&Y.getMinutes()===t.getMinutes()):-1,[s,t]),V=e.useCallback(Y=>{if(Y==null||Y<0)return;const H=C.current[Y],I=E.current;if(!H||!I)return;const z=H.offsetTop,oe=H.offsetHeight||32,Q=I.clientHeight||0,R=Math.max(0,z-Math.max(0,(Q-oe)/2));I.scrollTop=R},[]),L=e.useCallback(()=>{const Y=N(),H=Y>=0?Y:s.length?0:null;if(H==null||H<0)return;const I=C.current[H],z=E.current;if(!I||!z)return;const oe=I.offsetTop,Q=I.offsetHeight||32,R=Math.max(0,oe-Math.max(0,(z.clientHeight-Q)/2));z.scrollTop=R,w(H)},[N,s.length]);e.useEffect(()=>{p&&!v.current&&(v.current=!0,L()),p||(v.current=!1,w(null))},[p,L]);const D=e.useCallback(()=>{if(!y)return;const Y=P!=null&&P>=0&&P<y?P:N(),H=Y<0?0:(Y+1)%y;w(H),V(H)},[y,P,N,V]),S=e.useCallback(()=>{if(!y)return;const Y=P!=null&&P>=0&&P<y?P:N(),H=Y<0?y-1:(Y-1+y)%y;w(H),V(H)},[y,P,N,V]),T=e.useCallback(()=>{y&&(w(0),V(0))},[y,V]),x=e.useCallback(()=>{y&&(w(y-1),V(y-1))},[y,V]),M=e.useCallback(()=>{if(!y)return;const Y=P!=null&&P>=0&&P<y?P:N();Y==null||Y<0||r(s[Y])},[y,P,N,r,s]),k=e.useCallback(Y=>{switch(Y.key){case"ArrowDown":Y.preventDefault(),D();break;case"ArrowUp":Y.preventDefault(),S();break;case"Home":Y.preventDefault(),T();break;case"End":Y.preventDefault(),x();break;case"Enter":Y.preventDefault(),M();break}},[D,S,T,x,M]);e.useImperativeHandle(n,()=>({ensureSelectedVisible:L,selectFocused:M,focusNext:D,focusPrev:S,focusFirst:T,focusLast:x,getFocusedIndex:()=>P,handleKeyDown:Y=>k(Y)}),[L,M,D,S,T,x,P,k]);const _=`${l}_options`,Z=e.useMemo(()=>P!=null&&P>=0&&P<y?`${l}_option_${P}`:void 0,[l,P,y]),ie=[f,h,"sf-ul",g==="rtl"?"sf-rtl":""].filter(Boolean).join(" "),he=y===0;return c.jsx("ul",{ref:E,className:ie,role:"listbox","aria-label":m,"aria-activedescendant":Z,"aria-hidden":u,id:_,tabIndex:0,onMouseDown:Y=>Y.preventDefault(),onKeyDown:k,children:he?c.jsx("li",{className:"sf-timepicker-item sf-timepicker-empty",role:"note",tabIndex:-1,children:"No available times"}):s.map((Y,H)=>{const I=A(Y),z=!!(t&&Y.getHours()===t.getHours()&&Y.getMinutes()===t.getMinutes()),oe=P===H,Q=a?a(Y,z,oe,H):I;return c.jsx("li",{ref:R=>{C.current[H]=R},className:["sf-timepicker-item",z?"sf-active":"",oe?"sf-focus":""].filter(Boolean).join(" "),role:"option","data-value":I,id:`${l}_option_${H}`,"aria-selected":z,onClick:R=>r(Y,R),onFocus:()=>w(H),onBlur:()=>w(null),tabIndex:0,children:Q},H)})})});kr.displayName="TimeList";function Ni(o){const{step:n,minTime:s,maxTime:t,locale:r,timeFormat:i}=o,[a,l]=e.useState([]),m=e.useRef(null);e.useEffect(()=>{const C=[],v=new Date;v.setHours(0,0,0,0);const P=new Date;P.setHours(23,59,59,999);const w=new Date(v);for(;w<=P;)C.push(new Date(w)),w.setMinutes(w.getMinutes()+n);l(C)},[n]);const u=e.useMemo(()=>Ri(a,s,t),[a,s,t]),f=e.useCallback(C=>!C||isNaN(C.getTime())?"":ft(C,{format:i||"h:mm a",type:"time",locale:r||"en-US"}),[r,i]),h=e.useCallback((C,v=!1)=>{if(!C||!C.trim())return null;const P=C.replace(/(am|pm|Am|aM|pM|Pm)/g,y=>y.toUpperCase()).trim(),w=[i,"h:mm a","h:mm:ss a","HH:mm","HH:mm:ss"].filter(Boolean);for(const y of w){const A=bo(P,{format:y,type:"time",locale:r||"en-US"});if(A&&!isNaN(A.getTime())&&(!v||ft(A,{format:y,type:"time",locale:r||"en-US"}).trim()===P))return A}if(!v){const A=new Date().toLocaleDateString(r||"en-US"),N=new Date(`${A} ${P}`);if(!isNaN(N.getTime()))return N}return null},[r,i]),p=e.useCallback(C=>!C||isNaN(C.getTime())?!1:Lr(C,s||null,t||null),[s,t]),g=e.useCallback(()=>{var C,v;(v=(C=m.current)==null?void 0:C.ensureSelectedVisible)==null||v.call(C)},[]),E=e.useCallback((C,v)=>{v&&m.current&&typeof m.current.handleKeyDown=="function"&&m.current.handleKeyDown(C)},[]);return{displayedTimes:u,formatTime:f,parseTime:h,isValidTime:p,timeListRef:m,ensureSelectedVisible:g,forwardListKeyDown:E}}const ls=e.forwardRef((o,n)=>{const{value:s,id:t=`timepicker_${e.useId()}`,defaultValue:r,format:i="h:mm a",minTime:a,maxTime:l,step:m=30,placeholder:u="Choose a time",variant:f=Je.Standard,size:h=_t.Medium,readOnly:p=!1,disabled:g=!1,itemTemplate:E,clearButton:C=!0,className:v="",zIndex:P=1e3,strictMode:w=!1,open:y,timeIcon:A=!0,editable:N=!0,fullScreenMode:V=!1,pickerVariant:L=ln.Auto,openOnFocus:D=!1,required:S=!1,valid:T,validationMessage:x="",validityStyles:M=!0,labelMode:k="Never",onChange:_,onOpen:Z,onClose:ie,...he}=o,[Y,H]=e.useState(s??r??null),[I,z]=e.useState(!1),oe=e.useRef(null),Q=e.useRef(null),R=e.useRef(null),J=e.useRef(null),{dir:ne,locale:se}=$e(),le=s!==void 0,we=le?s||null:Y,Pe=L===ln.Popup||L===ln.Auto&&De.isDevice,ze=L===ln.Inline||L===ln.Auto&&!De.isDevice,{displayedTimes:O,formatTime:q,parseTime:me,isValidTime:ee,timeListRef:fe,ensureSelectedVisible:B,forwardListKeyDown:K}=Ni({step:m,minTime:a,maxTime:l,locale:se,timeFormat:i}),G=e.useCallback((be,_e)=>{le||H(be),_&&_({value:be,event:_e})},[le,_,S,T]),b=wo({locale:se,inputRef:Q,placeholder:u,placeholderKey:"timepicker",disabled:g,readOnly:p,openOnFocus:D,strictMode:w,required:S,valid:T,validationMessage:x,value:we,formatValue:q,parseInput:be=>me(be,!1),isValid:be=>ee(be),commitValue:G,onOpen:()=>{te()}}),{isOpen:U,showPopup:te,hidePopup:ue,togglePopup:Ce,zIndexPopup:j}=So({open:y,defaultOpen:!1,disabled:g,readOnly:p,onOpen:Z,onClose:ie,containerRef:oe,contentRefs:[R],extraInsideRefs:[J],inputRef:Q,baseZIndex:P}),ae=e.useCallback((be,_e)=>{le||b.setInputValue(q(be)),G(be,_e),ue()},[q,G,ue,le,b]),xe=e.useCallback(()=>{we?(b.setInputValue(q(we)),b.setIsInputValid(!0)):(b.setInputValue(""),b.setIsInputValid(!S))},[w,we,q,S,G,b]),ce=e.useCallback((be,_e)=>{const He=xi(be,a??null,l??null);He?(b.setInputValue(q(He)),G(He,_e),b.setIsInputValid(!0)):(b.setInputValue(""),G(null,_e),b.setIsInputValid(!S))},[w,a,l,S,q,G,b]),ye=e.useCallback(be=>{const _e=b.inputValue;if(_e.trim()===""){b.inputValue!==""&&b.setInputValue(""),w&&S?we?(b.setInputValue(q(we)),b.setIsInputValid(!0)):b.setIsInputValid(!S):(G(null,be),b.setIsInputValid(!S));return}if(w){const Ie=me(_e,!1);if(Ie===null){xe();return}if(ee(Ie)){const it=q(Ie);b.setInputValue(it),G(Ie,be),b.setIsInputValid(!0)}else ce(Ie,be);return}const He=me(_e,!0);He&&ee(He)?(G(He,be),b.setIsInputValid(!0)):b.setIsInputValid(!1)},[b,w,S,we,me,ee,q,G,xe,ce]),W=e.useCallback(be=>{switch(be.key){case"ArrowDown":(be.altKey||be.metaKey)&&(be.preventDefault(),te());break;case"ArrowUp":(be.altKey||be.metaKey)&&(be.preventDefault(),ue());break;case"Enter":U||(be.preventDefault(),ye(be));break}K(be,U)},[U,te,ue,ye,K]),X=e.useCallback(be=>{if(!be.trim())return!S;if(/^\d{1,2}$/.test(be)){const He=parseInt(be,10);return He>=0&&He<=23}if(/^\d{1,2}:$/.test(be)){const He=parseInt(be.split(":")[0],10);return He>=0&&He<=23}if(/^\d{1,2}:\d{1,2}$/.test(be)){const[He,Ie]=be.split(":"),et=parseInt(He,10),it=parseInt(Ie,10);return et>=0&&et<=23&&it>=0&&it<=59}const _e=me(be);return _e!==null&&ee(_e)},[me,ee,S]),de=e.useCallback(be=>{const _e=be.target.value;b.setInputValue(_e),T===void 0&&b.setIsInputValid(X(_e))},[T,X]);e.useEffect(()=>{At("timepicker")},[]);const ge={placeholder:u,format:i,labelMode:k,disabled:g,readOnly:p,editable:N,openOnFocus:D,open:y,clearButton:C,zIndex:P,strictMode:w,value:we,minTime:a,maxTime:l,step:m,required:S,valid:T,validationMessage:x,validityStyles:M};e.useImperativeHandle(n,()=>({...ge,element:oe.current}),[ge]);const Se=e.useCallback(()=>{var be;Ce(),z(!0),(be=Q.current)==null||be.focus()},[Ce]),Ee=e.useCallback(be=>{be.preventDefault(),b.handleClear(),ue()},[b,ue]),Ne=["sf-input-group sf-control","sf-timepicker",g?"sf-disabled":"",p?"sf-readonly":"",U||b.isFocused?"sf-input-focus":"",k!=="Never"?"sf-float-input":"",ne==="rtl"?"sf-rtl":"",h===_t.Small?"sf-small":h===_t.Large?"sf-large":"sf-medium",!b.isInputValid&&M?"sf-error":"",f&&f.toLowerCase()!=="standard"?f.toLowerCase()==="outlined"?"sf-outline":`sf-${f.toLowerCase()}`:"",v].filter(Boolean).join(" "),Re=h.toLowerCase().substring(0,2),Me=e.useMemo(()=>c.jsx(kr,{ref:fe,times:O,selected:we,onSelect:(be,_e)=>{ae(be,_e)},formatter:q,itemTemplate:E,idBase:`${t}`,className:"sf-timepicker-list",sizeClass:`sf-timepicker-list-${Re}`,isOpen:U,dir:ne}),[O,we,q,E,U,ne,ae,Re,t,fe]);return c.jsxs("span",{ref:oe,className:Ne,...he,children:[c.jsx(mr,{ref:Q,id:t,className:"sf-timepicker",placeholder:k==="Never"?b.getPlaceholder:"",disabled:g,readOnly:p||!N,onFocus:b.handleInputFocus,onBlur:be=>{b.setIsFocused(!1),ye(be),ue()},value:b.inputValue,onChange:N&&!p&&!g?de:void 0,role:"combobox","aria-haspopup":"listbox",autoComplete:"off","aria-expanded":U,"aria-disabled":g,"aria-controls":U?`${t}_options`:void 0,"aria-label":b.getPlaceholder||"Time picker input",onKeyDown:W,tabIndex:0,required:S}),k!=="Never"&&ps(k,!1,b.inputValue,u,t),C&&b.inputValue&&(b.isFocused||U)&&c.jsx("span",{className:"sf-clear-icon sf-input-icon","aria-label":"clear time value",role:"button",onMouseDown:Ee,children:c.jsx($n,{})}),c.jsx("span",{className:`sf-input-icon sf-time-icon sf-icons ${I?"sf-active":""}`,"aria-label":"select time",role:"button",onClick:Se,onMouseDown:be=>{be.preventDefault()},children:A===!0?c.jsx(Jo,{}):A}),U&&jt.createPortal(V&&De.isDevice?c.jsxs("div",{ref:J,className:"sf-timepicker-mob sf-control",style:{zIndex:P},role:"dialog","aria-modal":"true","aria-label":"Time selection",children:[c.jsxs("div",{className:"sf-timepicker-header",children:[c.jsx(nt,{variant:Je.Standard,onClick:ue,children:c.jsx($n,{})}),c.jsx("span",{className:"sf-timepicker-title",children:"Select Time"})]}),Me]}):c.jsxs(c.Fragment,{children:[Pe&&c.jsxs("div",{className:"sf-timepicker-popup-wrap",style:{zIndex:j.toString()},children:[c.jsx("div",{className:"sf-overlay"}),c.jsx(Nt,{ref:R,className:"sf-timepicker sf-popup sf-content-center",open:U,zIndex:j,onOpen:()=>{B()},relateTo:document.body,style:{top:"0px",left:"0px",position:"relative"},position:{X:"center",Y:"center"},collision:{X:ot.Fit,Y:ot.Fit},"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:Me})]}),ze&&c.jsx(Nt,{ref:R,className:"sf-timepicker sf-popup",open:U,zIndex:j,onOpen:()=>{B()},relateTo:oe.current,position:{X:"left",Y:"bottom"},collision:{X:ot.Flip,Y:ot.Flip},offsetY:4,"aria-modal":"true",role:"dialog","aria-label":"Time selection",children:Me})]}),document.body)]})});ls.displayName="TimePicker";const Ai=o=>{const{className:n,selectedDate:s,view:t,onSelectedDateChange:r,onViewChange:i,viewComponents:a,defaultSelectedDate:l,defaultView:m}=o,u=o.selectedDate!==void 0,f=o.view!==void 0,h=e.useMemo(()=>{const ne=u?s:l,se=ne?new Date(ne):new Date;return isNaN(se.getTime())?new Date:se},[s,l,u]),p=e.useMemo(()=>f?t:m,[f,t,m]),[g,E]=e.useState(h),[C,v]=e.useState(p),P=e.useRef(p),[w,y]=e.useState([]),[A,N]=e.useState(!1),[V,L]=e.useState(Hn.Month);e.useEffect(()=>{u&&E(h)},[h,u]),e.useEffect(()=>{f&&v(p)},[p,f]);const D=e.useCallback(ne=>{f||v(ne),i&&i({value:ne})},[i,f]);e.useEffect(()=>{P.current!==t&&t!==C&&t&&a.some(le=>le.name===t)&&v(t),P.current=t||p},[t,C,a,p]),e.useEffect(()=>{if(C==="Week"&&a.length>0&&!a.some(se=>se.viewType==="Week")){D(a[0].name);return}},[C,a,D]),e.useEffect(()=>{const ne=pt.findViewByNameOrType(a,C);if(ne){const se=ne.viewType==="Month"?Hn.Year:Hn.Month;L(se)}},[a,C]);const{locale:S,dir:T}=$e(),x=e.useMemo(()=>{if(!w||w.length===0)return"";const ne=pt.findViewByNameOrType(a,C);if(!ne)return"";const se=ne.component.props;return ne.viewType==="Month"?F.getMonthRangeText(g,ne.interval,se.displayDate,se.numberOfWeeks,se.dateFormat||o.dateFormat,w,S):F.formatDateRange(S,w[0],w[w.length-1])},[w,a,C,g,S,o.dateFormat]),M=ne=>{u||E(ne),r&&r({value:ne})},k=e.useCallback(()=>{const ne=[];return a.forEach(se=>{ne.push({viewType:se.viewType,name:se.name,displayName:se.displayName,component:se.component,interval:se.interval})}),ne},[a]),_=ne=>{D(ne)},Z=()=>({height:o.height,width:o.width,selectedDate:g,view:C,eventSettings:o.eventSettings,timeScale:o.timeScale,workHours:o.workHours,startHour:o.startHour,endHour:o.endHour,showWeekend:o.showWeekend,firstDayOfWeek:o.firstDayOfWeek,workDays:o.workDays,showTimeIndicator:o.showTimeIndicator,dateFormat:o.dateFormat,timeFormat:o.timeFormat,showWeekNumber:o.showWeekNumber,eventOverlap:o.eventOverlap,rowAutoHeight:o.rowAutoHeight,readOnly:o.readOnly,cell:o.cell,dateHeader:o.dateHeader,headerIndent:o.headerIndent,editor:o.editor,onEditorSubmit:o.onEditorSubmit,showQuickInfoPopup:o.showQuickInfoPopup,header:o.header,keyboardNavigation:o.keyboardNavigation,onDataRequest:o.onDataRequest,onSelectedDateChange:ne=>M(ne.value),onViewChange:ne=>D(ne.value),onCellClick:o.onCellClick,onCellDoubleClick:o.onCellDoubleClick,onEventClick:o.onEventClick,onEventDoubleClick:o.onEventDoubleClick,onDataChangeStart:o.onDataChangeStart,onDataChangeComplete:o.onDataChangeComplete,eventDrag:o.eventDrag,eventResize:o.eventResize,onResizeStart:o.onResizeStart,onResizing:o.onResizing,onResizeStop:o.onResizeStop,onDragStart:o.onDragStart,onDrag:o.onDrag,onDragStop:o.onDragStop,onMoreEventsClick:o.onMoreEventsClick,weekRule:o.weekRule}),he=(()=>{var Pe,ze,O,q;const ne=pt.findViewByNameOrType(a,C);if(!ne)return{};const se=ne.component.props||{},le=Dr(Er,Z());typeof le.eventDrag=="boolean"&&(le.eventDrag={enable:le.eventDrag});const we={height:le.height,width:le.width,selectedDate:F.setValidDate(le.selectedDate),view:le.view,eventSettings:le.eventSettings,workHours:le.workHours,showTimeIndicator:le.showTimeIndicator,rowAutoHeight:le.rowAutoHeight,eventTemplate:se.eventTemplate,readOnly:se.readOnly??le.readOnly,header:le.header,showQuickInfoPopup:le.showQuickInfoPopup,displayDate:F.setValidDate(se.displayDate),numberOfWeeks:se.numberOfWeeks,weekDay:se.weekDay,showTrailingAndLeadingDates:se.showTrailingAndLeadingDates,cellHeader:se.cellHeader,interval:se.interval??ne.interval,displayName:se.displayName??ne.displayName,maxEventsPerRow:se.maxEventsPerRow,dateHeader:se.dateHeader??le.dateHeader,headerIndent:se.headerIndent??le.headerIndent,cell:se.cell??le.cell,timeScale:se.timeScale??le.timeScale,startHour:se.startHour??le.startHour,endHour:se.endHour??le.endHour,showWeekend:se.showWeekend??le.showWeekend,firstDayOfWeek:F.setValidFirstDayOfWeek(se.firstDayOfWeek,le.firstDayOfWeek),workDays:se.workDays??le.workDays,dateFormat:se.dateFormat??le.dateFormat,timeFormat:se.timeFormat??le.timeFormat,showWeekNumber:se.showWeekNumber??le.showWeekNumber,eventOverlap:se.eventOverlap??le.eventOverlap,editor:se.editor??le.editor,onEditorSubmit:le.onEditorSubmit,onDataRequest:le.onDataRequest,onSelectedDateChange:le.onSelectedDateChange,onViewChange:le.onViewChange,onCellClick:le.onCellClick,onCellDoubleClick:le.onCellDoubleClick,onEventClick:le.onEventClick,onEventDoubleClick:le.onEventDoubleClick,onDataChangeStart:le.onDataChangeStart,onDataChangeComplete:le.onDataChangeComplete,keyboardNavigation:le.keyboardNavigation,eventDrag:le.eventDrag,eventResize:le.eventResize,onResizeStart:le.onResizeStart,onResizing:le.onResizing,onResizeStop:le.onResizeStop,onDragStart:le.onDragStart,onDrag:le.onDrag,onDragStop:le.onDragStop,onMoreEventsClick:le.onMoreEventsClick,handleCurrentViewChange:D,getAvailableViews:k,weekRule:le.weekRule};return(we.startHour!=="00:00"||we.endHour!=="24:00")&&(we.startHourTuple=[Number((Pe=we.startHour)==null?void 0:Pe.split(":")[0]),Number((ze=we.startHour)==null?void 0:ze.split(":")[1])],we.endHourTuple=[Number((O=we.endHour)==null?void 0:O.split(":")[0]),Number((q=we.endHour)==null?void 0:q.split(":")[1])]),we})();e.useEffect(()=>{const ne=pt.findViewByNameOrType(a,C);if(ne){const se=F.getRenderDates(ne.viewType,g,he);y(se)}},[g,C,a]),e.useEffect(()=>{if(!pt.findViewByNameOrType(a,C)){const se=k();if(se.length>0){const le=se.find(we=>we.viewType==="Week")||se[0];D(le.name)}}},[C,a,D]);const Y=()=>{const ne=pt.findViewByNameOrType(a,C);return ne?ne.component:null},H=ne=>{const se=pt.findViewByNameOrType(a,C);if(!se)return;const le={currentDate:g,viewType:se.viewType,interval:se.interval,showWeekend:he.showWeekend,workDays:he.workDays},we=ne==="next"?Qn.navigateToNext(le):Qn.navigateToPrevious(le);M(we)},I=()=>{H("next")},z=()=>{H("previous")},oe=()=>{const ne=Qn.navigateToToday();M(ne)},Q=e.useCallback(ne=>{if(ne.value){const se=Array.isArray(ne.value)?ne.value[0]:ne.value;M&&M(se),N(!1)}},[M]),R=()=>{N(!A)};return{classNames:e.useMemo(()=>{const ne=[d.CONTROL,d.SCHEDULER];return T==="rtl"&&ne.push(d.RTL),n&&ne.push(n),ne.join(" ")},[T,n]),selectedDate:g,view:C,renderDates:w,activeViewProps:he,dateRangeText:x,showCalendar:A,calendarView:V,handleSelectedDateChange:M,handleCurrentViewChange:D,getAvailableViews:k,handleViewButtonClick:_,handlePreviousClick:z,handleNextClick:I,handleTodayClick:oe,handleDateDropdownClick:R,handleCalendarChange:Q,renderCurrentView:Y}},vs=(o,n,s)=>{e.useEffect(()=>{const t=r=>{var i;n&&o.current&&!o.current.contains(r.target)&&!((i=r.target)!=null&&i.closest(`.${d.POPUP_WRAPPER}`))&&s()};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[n,o])},Li="sf-hscroll",On="sf-rtl",Or="sf-overlay",ki="sf-hscroll-bar",Oi="sf-hscroll-content",Ir="sf-hscroll-arrow",Pr="sf-nav-right-arrow",Mr="sf-nav-left-arrow",as="sf-hscroll-nav",Ii="sf-scroll-right-nav",Pi="sf-scroll-left-nav",Mi="sf-scroll-device",_r=e.memo(e.forwardRef((o,n)=>{const{className:s="",scrollStep:t=void 0,isDisabled:r=!1,children:i,...a}=o,l=e.useRef(t),m=e.useRef(jn("hscroll")),[u,f]=e.useState(!0),[h,p]=e.useState(!1),{dir:g}=$e(),E=e.useRef(null),C=e.useRef(null),v=e.useRef(null),P=e.useRef(null),w=e.useRef(!1),y=e.useRef(null),A={scrollStep:t,isDisabled:r},N=e.useMemo(()=>({name:De.info.name,isDevice:De.isDevice,isMozilla:De.info.name==="mozilla"}),[]);e.useEffect(()=>{(()=>{var I;typeof t!="number"||t<0?l.current=((I=C.current)==null?void 0:I.offsetWidth)||void 0:l.current=t})()},[t]);const V=e.useCallback((H,I)=>{C.current&&(I==="add"?C.current.scrollLeft+=H:C.current.scrollLeft-=H,g==="rtl"&&C.current.scrollLeft>0&&(C.current.scrollLeft=0))},[g]),L=e.useCallback((H,I,z)=>{if(z){V(H,I);return}const Q=()=>{var ne;let R=H,J=10;(ne=E.current)!=null&&ne.classList.contains(On)&&N.isMozilla&&(R=-H,J=-10),R<10?cancelAnimationFrame(J):(V(J,I),H-=J,requestAnimationFrame(Q))};Q()},[N.isMozilla,V]),D=e.useCallback((H,I,z)=>{const oe=E.current;let Q=I.classList;if(!Q.contains(as)){const R=I.closest("."+as);R&&(I=R)}Q=I.querySelector(`.${Ir}`).classList,oe.classList.contains(On)&&N.isMozilla&&(H=-H),!oe.classList.contains(On)||N.isMozilla?Q.contains(Pr)?L(H,"add",z):L(H,"",z):Q.contains(Mr)?L(H,"add",z):L(H,"",z)},[N.isMozilla,L]),S=e.useCallback(H=>{if(H){const I=H.originalEvent.target,z=10,oe=()=>{D(z,I,!0)};P.current=window.setInterval(()=>{oe()},50)}},[D]),T=e.useCallback(H=>{if(H.key==="Enter"){const I=()=>{w.current=!0,D(10,H.target,!0)};y.current=window.setTimeout(()=>{I()},100)}},[D]),x=e.useCallback(H=>{H.key==="Enter"&&(w.current?w.current=!1:H.target.click(),clearTimeout(y.current))},[]),M=e.useCallback(()=>{clearInterval(P.current)},[]),k=e.useCallback(H=>{D(l.current,H.target,!1)},[D]),_=e.useCallback(H=>{if(H){const I=C.current;let z;typeof H.velocity=="number"&&typeof H.distanceX=="number"&&(H.velocity<=1?z=H.distanceX/(H.velocity*10):z=H.distanceX/H.velocity);let oe=.5;const Q=()=>{const R=Math.sin(oe);R<=0?cancelAnimationFrame(R):(H.swipeDirection==="Left"?I.scrollLeft+=z*R:H.swipeDirection==="Right"&&(I.scrollLeft-=z*R),oe-=.5,requestAnimationFrame(Q))};Q()}},[]),Z=e.useCallback(H=>{if(H){const I=C.current;if(I&&typeof H.distanceX=="number"){const z=H.distanceX;H.scrollDirection==="Left"?I.scrollLeft=I.scrollLeft+z:H.scrollDirection==="Right"&&(I.scrollLeft=I.scrollLeft-z)}}},[]),ie=H=>{const I=H.target,z=I.offsetWidth;let oe=I.scrollLeft;oe<=0&&(oe=-oe),oe===0?(f(!0),p(!1),M()):Math.ceil(z+oe+.1)>=I.scrollWidth?(f(!1),p(!0),M()):(f(!1),p(!1))};e.useImperativeHandle(n,()=>({...A,element:E.current})),e.useEffect(()=>()=>{P.current&&clearInterval(P.current),y.current&&clearTimeout(y.current)},[]);const he=e.useMemo(()=>({swipe:_,scroll:Z}),[_,Z]);v.current=Vt(E,he);const Y=e.useMemo(()=>["sf-control","sf-lib",Li,g==="rtl"&&On,N.isDevice&&Mi,r&&Or,s].filter(Boolean).join(" "),[s,g,N.isDevice,r]);return c.jsxs("div",{ref:E,id:m.current,className:Y,...a,children:[c.jsx(cs,{direction:"left",id:m.current,isDisabled:r||u,onKeyPress:T,onKeyUp:x,onMouseUp:M,onClick:k,onTapHold:S}),c.jsx("div",{ref:C,className:`${ki} sf-display-flex`,style:{overflowX:"hidden"},onScroll:ie,children:c.jsx("div",{className:Oi,children:i})}),c.jsx(cs,{direction:"right",id:m.current,isDisabled:r||h,onKeyPress:T,onKeyUp:x,onMouseUp:M,onClick:k,onTapHold:S})]})}));_r.displayName="HScrollComponent";const cs=e.memo(({direction:o,id:n,isDisabled:s,onKeyPress:t,onKeyUp:r,onMouseUp:i,onClick:a,onTapHold:l})=>{const m=o==="right",u=`sf-${n}_nav ${as} ${m?Ii:Pi}`,f=`${m?Pr:Mr} ${Ir} sf-icons`,h=e.useRef(null),p=e.useMemo(()=>({tapHold:l,tapHoldThreshold:500}),[l]);return Vt(h,p),c.jsx("div",{ref:h,className:`${u} ${s?Or:""}`,role:"button",id:`${n}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":s?"true":"false",tabIndex:s?-1:0,onKeyDown:t,onKeyUp:r,onMouseUp:i,onTouchEnd:i,onContextMenu:g=>g.preventDefault(),onClick:a,children:c.jsx("div",{className:f,children:m?c.jsx(Tr,{}):c.jsx(Cr,{})})})});cs.displayName="NavIcon";const _i="sf-vscroll",Hi="sf-rtl",Hr="sf-overlay",ji="sf-vscroll-bar",$i="sf-vscroll-content",jr="sf-vscroll-arrow",$r="sf-nav-up-arrow",Vr="sf-nav-down-arrow",us="sf-vscroll-nav",Vi="sf-scroll-up-nav",Wi="sf-scroll-down-nav",Fi="sf-scroll-device",Wr=e.memo(e.forwardRef((o,n)=>{const{className:s="",scrollStep:t=void 0,isDisabled:r=!1,children:i,...a}=o,l=e.useRef(t),m=e.useRef(jn("vscroll")),[u,f]=e.useState(!0),[h,p]=e.useState(!1),{dir:g}=$e(),E=e.useRef(null),C=e.useRef(null),v=e.useRef(null),P=e.useRef(null),w=e.useRef(!1),y=e.useRef(null),A=e.useMemo(()=>({isDevice:De.isDevice}),[]),N={scrollStep:t,isDisabled:r};e.useEffect(()=>{(()=>{var z;typeof t!="number"||t<0?l.current=((z=C.current)==null?void 0:z.offsetHeight)||void 0:l.current=t})()},[t]);const V=e.useCallback((I,z)=>{C.current&&(z==="add"?C.current.scrollTop+=I:C.current.scrollTop-=I)},[]),L=e.useCallback((I,z,oe)=>{if(oe){V(I,z);return}const R=()=>{I<10?cancelAnimationFrame(10):(V(10,z),I-=10,requestAnimationFrame(R))};R()},[V]),D=e.useCallback((I,z,oe)=>{let Q=z.classList;if(!Q.contains(us)){const J=z.closest("."+us);J&&(z=J)}const R=z.querySelector(`.${jr}`);R&&(Q=R.classList),Q.contains(Vr)?L(I,"add",oe):Q.contains($r)&&L(I,"",oe)},[L]),S=e.useCallback(I=>{if(I){const z=I.originalEvent.target,oe=10,Q=()=>{D(oe,z,!0)};P.current=window.setInterval(()=>{Q()},50)}},[D]),T=e.useCallback(I=>{if(I.key==="Enter"){const z=()=>{w.current=!0,D(10,I.target,!0)};y.current=window.setTimeout(()=>{z()},100)}},[D]),x=e.useCallback(I=>{I.key==="Enter"&&(w.current?w.current=!1:I.target.click(),y.current&&clearTimeout(y.current))},[]),M=e.useCallback(()=>{clearInterval(P==null?void 0:P.current)},[]),k=e.useCallback(I=>{D(l.current,I.target,!1)},[D,l]),_=e.useCallback(I=>{I.preventDefault(),L(l.current,I.deltaY>0?"add":"",!1)},[L,l]),Z=e.useCallback(I=>{if(I&&C.current){const z=C.current;let oe=0;typeof I.velocity=="number"&&typeof I.distanceY=="number"&&(I.velocity<=1?oe=I.distanceY/(I.velocity*10):oe=I.distanceY/I.velocity);let Q=.5;const R=()=>{const J=Math.sin(Q);J<=0?cancelAnimationFrame(J):(I.swipeDirection==="Up"?z.scrollTop+=oe*J:I.swipeDirection==="Down"&&(z.scrollTop-=oe*J),Q-=.02,requestAnimationFrame(R))};R()}},[]),ie=e.useCallback(I=>{if(I){const z=C.current;if(z&&typeof I.distanceY=="number"){const oe=I.distanceY;I.scrollDirection==="Up"?z.scrollTop=z.scrollTop+oe:I.scrollDirection==="Down"&&(z.scrollTop=z.scrollTop-oe)}}},[]),he=e.useCallback(I=>{const z=I.target,oe=z.offsetHeight;let Q=z.scrollTop;Q<=0&&(Q=-Q),Q===0?(f(!0),p(!1),M()):Math.ceil(oe+Q+.1)>=z.scrollHeight?(f(!1),p(!0),M()):(f(!1),p(!1))},[M]);e.useImperativeHandle(n,()=>({...N,element:E.current})),e.useEffect(()=>()=>{P.current&&clearInterval(P.current),y.current&&clearTimeout(y.current)},[]);const Y=e.useMemo(()=>({scroll:ie,swipe:Z}),[Z,ie]);v.current=Vt(E,Y);const H=e.useMemo(()=>["sf-control","sf-lib",_i,g==="rtl"&&Hi,A.isDevice&&Fi,r&&Hr,s].filter(Boolean).join(" "),[s,g,A.isDevice,r]);return c.jsxs("div",{ref:E,id:a.id||m.current,className:H,...a,onWheel:_,children:[c.jsx(ds,{direction:"up",id:m.current,isDisabled:r||u,onKeyPress:T,onKeyUp:x,onMouseUp:M,onClick:k,onTapHold:S}),c.jsx("div",{ref:C,className:ji,tabIndex:-1,style:{overflow:"hidden"},onScroll:he,children:c.jsx("div",{className:$i,children:i})}),c.jsx(ds,{direction:"down",id:m.current,isDisabled:r||h,onKeyPress:T,onKeyUp:x,onMouseUp:M,onClick:k,onTapHold:S})]})}));Wr.displayName="VScrollComponent";const ds=e.memo(({direction:o,id:n,isDisabled:s,onKeyPress:t,onKeyUp:r,onMouseUp:i,onClick:a,onTapHold:l})=>{const m=o==="down",u=`sf-${n}_nav ${us} ${m?Wi:Vi}`,f=`${m?Vr:$r} ${jr} sf-icons`,h=e.useRef(null),p=e.useMemo(()=>({tapHold:l,tapHoldThreshold:500}),[l]);return Vt(h,p),c.jsx("div",{ref:h,className:`${u} ${s?Hr:""}`,role:"button",id:`${n}_nav_${o}`,"aria-label":`Scroll ${o}`,"aria-disabled":s?"true":"false",tabIndex:s?-1:0,onKeyDown:t,onKeyUp:r,onMouseUp:i,onTouchEnd:i,onContextMenu:g=>g.preventDefault(),onClick:a,children:c.jsx("div",{className:f,children:m?c.jsx(Bn,{}):c.jsx(Sr,{})})})});ds.displayName="NavIcon";const Bi="sf-toolbar-items",zi="sf-toolbar-multirow-items",Fr=e.memo(o=>{const{children:n,onOverflowChange:s}=o,t=e.useRef(null);return e.useEffect(()=>{const r=e.Children.count(n);(We(t.current)||t.current!==r)&&(t.current=e.Children.count(n),s())},[s,n]),c.jsx("div",{className:`${Bi} ${zi}`,children:n})});Fr.displayName="ToolbarMultiRow";const sr="sf-toolbar-items",Ui="sf-hscroll-bar",Yi="sf-vscroll-bar",Ki="sf-hscroll-content",Xi="sf-vscroll-content",Br=e.memo(e.forwardRef((o,n)=>{const{toolbarRef:s,orientation:t,scrollStep:r,children:i,className:a,onOverflowChange:l}=o,m=e.useRef(null),u=e.useRef(null),f=e.useRef(null),[h,p]=e.useState(!1),[g,E]=e.useState(r),C=e.useCallback(N=>N.querySelector("."+(t===Ze.Vertical?Xi:Ki)),[t]),v=e.useCallback(()=>{let N=!1;if(s.current&&hs(s.current)){let V=s.current.querySelector(`.${sr}`);V=h?C(V):V;const L=t===Ze.Vertical,D=L?s.current.offsetHeight:s.current.offsetWidth;(L?V.scrollHeight:V.scrollWidth)>D?N=!0:N=!1}return N},[h,t,C]),P=e.useCallback((N=!0)=>{if(s.current){f.current&&clearTimeout(f.current);const V=v();V!==h&&p(V),V&&N&&(f.current=window.setTimeout(()=>{if(s.current){const L=t===Ze.Vertical?`.${Yi}`:`.${Ui}`,D=s.current.querySelector(L);D&&E(t===Ze.Vertical?D.offsetHeight:D.offsetWidth)}},500))}},[v,t,h]),w=e.useRef(P);e.useEffect(()=>{w.current=P},[P]);const y=e.useCallback(()=>{w.current()},[]);e.useEffect(()=>{if(s.current){let N=!0;m.current=new ResizeObserver(()=>{if(N){N=!1;return}w.current()}),m.current.observe(s.current)}return()=>{var N;(N=m.current)==null||N.disconnect(),m.current=null}},[]),e.useEffect(()=>{const N=e.Children.count(i);(We(u.current)||u.current!==N)&&(u.current=e.Children.count(i),l(),w.current(!1))},[i,l]),e.useEffect(()=>{l()},[h,l]),e.useImperativeHandle(n,()=>({refreshOverflow:y}),[y]);const A=e.useMemo(()=>{const N=[sr];return a&&N.push(a),N.join(" ")},[a]);return h?t===Ze.Horizontal?c.jsx(_r,{scrollStep:g,className:A,children:i}):c.jsx(Wr,{scrollStep:g,className:A,children:i}):c.jsx("div",{className:A,children:i})}));Br.displayName="ToolbarScrollable";const qi="sf-toolbar-item",Mt=e.memo(e.forwardRef((o,n)=>{const{className:s="",children:t,...r}=o,i=e.useRef(null),a=e.useMemo(()=>{const l=[qi];return s&&l.push(s),l.join(" ")},[s]);return e.useImperativeHandle(n,()=>({element:i.current})),c.jsx("div",{ref:i,className:a,...r,children:t})}));Mt.displayName="ToolbarItem";const Gi="sf-toolbar-item",Zi="sf-toolbar-separator",zr=e.memo(e.forwardRef((o,n)=>{const{className:s="",...t}=o,r=e.useRef(null),i=e.useMemo(()=>{const a=[Gi,Zi];return s&&a.push(s),a.join(" ")},[s]);return e.useImperativeHandle(n,()=>({element:r.current})),c.jsx("div",{ref:r,className:i,...t})}));zr.displayName="ToolbarSeparator";const Qi="sf-toolbar-item",Ji="sf-toolbar-spacer",ys=e.memo(e.forwardRef((o,n)=>{const{className:s="",...t}=o,r=e.useRef(null),i=e.useMemo(()=>{const a=[Qi,Ji];return s&&a.push(s),a.join(" ")},[s]);return e.useImperativeHandle(n,()=>({element:r.current})),c.jsx("div",{ref:r,className:i,...t})}));ys.displayName="ToolbarSpacer";const In="sf-toolbar-items",el="sf-popup-up-icon",tl="sf-popup-down-icon",nl="sf-popup-open",sl="sf-toolbar-hor-nav",rl="sf-nav-active",ol="sf-toolbar-popup-items",il="sf-hidden-popup",ll="sf-toolbar-extended-items",al="sf-extended-nav",cl="sf-toolbar-popup-overflow",Pn="sf-toolbar-separator",un="sf-toolbar-spacer",ns="sf-toolbar-item",ul="sf-toolbar-popup-icon sf-icon",Ur=e.memo(e.forwardRef((o,n)=>{const{toolbarRef:s,orientation:t,overflowMode:r,isToolbarRefReady:i,children:a,className:l,collision:m,isPopupVisible:u,onPopupOpenChange:f,onOverflowChange:h}=o,p=e.useCallback(B=>e.Children.toArray(B).filter(K=>e.isValidElement(K)&&(K.type===Mt||K.type===zr||K.type===ys)).map((K,G)=>e.cloneElement(K,{key:K.key||G})),[]),g=e.useMemo(()=>p(a),[a,p]),E=e.useRef(null),C=e.useRef(e.Children.count(a)),v=e.useRef([...p(a)]),P=e.useRef([]),w=e.useRef(null),y=e.useRef(null),{dir:A}=$e(),[N,V]=e.useState([...v.current]),[L,D]=e.useState([]),[S,T]=e.useState(!1),[x,M]=e.useState(u),[k,_]=e.useState(!1),[Z,ie]=e.useState({maxHeight:""}),he=e.useCallback(B=>{let K=0;return B&&(K=t===Ze.Vertical?B.offsetHeight:B.offsetWidth),K},[t]),Y=e.useCallback(B=>{let K=0;return B&&(K=t===Ze.Vertical?B.offsetTop:B.offsetLeft),K},[t]),H=e.useCallback(()=>w.current?he(w.current):t===Ze.Horizontal?40:48,[he,t]),I=e.useCallback(()=>s.current?s.current.offsetHeight:0,[r]),z=e.useCallback(()=>{let B=0;if(s.current){const K=window.getComputedStyle(s.current),G=parseFloat(K.width),b=parseFloat(K.borderRightWidth);B=G+b*2}return B},[]),oe=e.useCallback(()=>{var B;if(s.current&&((B=y.current)!=null&&B.element)){const K=y.current.element,G=s.current,b=K.offsetTop+K.offsetHeight+(G.getBoundingClientRect().top||0),U=window.scrollY||0;if(t===Ze.Horizontal&&window.innerHeight+U<b&&G.offsetTop<K.offsetHeight&&r===Ue.Popup){let te=K.offsetHeight-(b-window.innerHeight-U+5);for(let ue=0;ue<K.childElementCount;ue++){const Ce=K.children[parseInt(ue.toString(),10)];if(Ce.offsetTop+Ce.offsetHeight>te){te=Ce.offsetTop;break}}ie(ue=>({...ue,maxHeight:`${te}px`}))}else if(t===Ze.Vertical){const te=G.getBoundingClientRect();ie(ue=>({...ue,maxHeight:`${te.top+G.offsetHeight}px`,bottom:"0"}))}}},[r,t]),Q=e.useCallback(()=>{M(!1),ie({maxHeight:""})},[]),R=e.useCallback(B=>{if(s.current&&B&&hs(s.current)){const K=[...N],G=[...L],b=Array.from(B.children),U=he(s.current),te=window.getComputedStyle(B),ue=parseInt(t===Ze.Vertical?te.paddingTop:te.paddingLeft,10);if(A==="rtl"&&t===Ze.Horizontal){const Ce=parseInt(te.gap,10)||0,j=b.length;let ae=0;b.forEach(W=>{ae+=he(W)}),ae+=ue*2+Ce*(j-1);const xe=ae>U,ce=G.length>0||xe?H():0,ye=U-ce;if(ae>ye){let W=ae;for(let X=j-1;X>=0;X--){const de=b[parseInt(X.toString(),10)];if(W>ye||de.classList.contains(Pn)){const ge=he(de);W-=ge+(X===0?0:Ce),G.unshift(K[parseInt(X.toString(),10)]),K.pop()}else break}}}else{let Ce=he(b[b.length-1]),j=Y(b[b.length-1]);const ae=j+Ce+ue>U,xe=G.length>0||ae?H():0,ce=U-xe;for(let ye=b.length-1;ye>=0;ye--){const W=b[parseInt(ye.toString(),10)];if(Ce=he(W),j=Y(W),j+Ce+ue>ce||W.classList.contains(Pn))G.unshift(K[parseInt(ye.toString(),10)]),K.pop();else break}}v.current=K,P.current=G}},[t,he,Y,H,N,L,A]),J=e.useCallback(()=>{N!==v.current&&(V(B=>B.length!==v.current.length?[...v.current]:B),D(B=>B.length!==P.current.length?[...P.current]:B))},[N]),ne=e.useCallback(()=>{if(s.current&&!k){const B=s.current.querySelector(`.${In}`);r===Ue.Popup&&M(K=>K&&!1),R(B),J(),_(P.current.length>0)}},[R,k,J,r]),se=e.useRef(ne);e.useLayoutEffect(()=>{se.current=ne},[ne]);const le=e.useCallback(B=>{let K=0;if(B){const G=Array.from(B.children),b=window.getComputedStyle(B),U=parseInt(b.gap,10)||0,te=parseInt(t===Ze.Vertical?b.paddingTop:b.paddingLeft,10);G.forEach(ue=>{K+=(ue.classList.contains(un)?0:he(ue))+U}),G.length>0&&(K-=U),K+=te*2}return K},[he,t]),we=e.useCallback((B,K)=>{var Ce;const G=[].slice.call(K.querySelectorAll(`.${ns}`)),b=[...N],U=[...L],te=(Ce=s.current)==null?void 0:Ce.querySelector(`.${In}`),ue=parseInt(window.getComputedStyle(te).gap,10)||0;for(let j=0;j<G.length;j++){const ae=G[parseInt(j.toString(),10)],xe=ae.classList.contains(un),ce=b.length>0,ye=(xe?0:he(ae))+(ce?ue:0);let W=B>ye;if(xe||ae.classList.contains(Pn)){let X=ye,de=j+1;for(;de<G.length;){const ge=G[parseInt(de.toString(),10)],Se=ge.classList.contains(un);if(X+=(Se?0:he(ge))+(ce?ue:0),!ge.classList.contains(un)&&!ge.classList.contains(Pn))break;de++}W=B>X}if(W)b.push(U[0]),U.shift(),B-=ye;else break}v.current=b,P.current=U},[he,N,L]),Pe=e.useCallback(()=>{var B;if(s.current&&((B=y.current)!=null&&B.element)){const K=s.current.querySelector(`.${In}`),G=he(K),b=le(K),U=G-b,te=parseInt(window.getComputedStyle(K).gap,10)||0,ue=he(y.current.element.querySelector(`.${ns}`))+te,Ce=U>ue,j=[].slice.call(y.current.element.querySelectorAll(`.${ns}`));let ae=0;j.forEach(ce=>{ae+=ce.classList.contains(un)?0:he(ce)}),ae+=j.length*te,U+H()>ae?(v.current=[...g],P.current=[]):Ce&&we(U,y.current.element)}},[he,le,we]),ze=e.useCallback(()=>{r===Ue.Popup&&x&&M(!1)},[r,x]),O=()=>{M(B=>!B)},q=e.useCallback(()=>{ne()},[ne]);e.useEffect(()=>{if(r===Ue.Popup||r===Ue.Extended){const B=K=>{if(r===Ue.Popup&&y.current&&y.current.element){const G=!Tt(K.target,".sf-popup"),b=y.current.element.classList.contains(nl);G&&b&&M(!1)}};return document.addEventListener("click",B),document.addEventListener("scroll",B,!0),()=>{document.removeEventListener("click",B),document.removeEventListener("scroll",B,!0)}}},[r]),e.useEffect(()=>{f(x)},[x,f]),e.useEffect(()=>{M(B=>B!==u?u:B)},[u]),e.useEffect(()=>{h()},[N,h]),e.useLayoutEffect(()=>{s.current&&i&&!S&&(se.current(),T(!0))},[i,S]),e.useEffect(()=>{if(s.current){let B=!0;return E.current||(E.current=new ResizeObserver(()=>{if(B){B=!1;return}se.current()}),E.current.observe(s.current)),()=>{var K;(K=E.current)==null||K.disconnect(),E.current=null}}},[]),e.useLayoutEffect(()=>{k&&(Pe(),J(),M(B=>B&&P.current.length<=0?!1:B),_(!1))},[k,Pe,J]),e.useLayoutEffect(()=>{if(!S)return;const B=g.length;if(C.current!==B){C.current=B,v.current=[...g],P.current=[],V([...v.current]),D([]),M(!1),T(!1);return}const G=new Map(g.map(U=>[U.key,U])),b=U=>U.map(te=>G.get(te.key)||te);V(b),D(b)},[g,S]),e.useImperativeHandle(n,()=>({refreshOverflow:q}),[q]);const me=e.useMemo(()=>{const B=[In];return L.length>0&&B.push(cl),B.join(" ")},[L]),ee=e.useMemo(()=>{const B=[sl];return r===Ue.Extended&&B.push(al),x&&B.push(rl),B.join(" ")},[r,x]),fe=e.useMemo(()=>{const B=[ol];return r===Ue.Extended&&B.push(ll),l&&B.push(l),k&&B.push(il),B.join(" ")},[r,l,k]);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:me,children:N}),L.length>0&&c.jsx("div",{ref:w,className:ee,tabIndex:0,role:"button","aria-haspopup":"true","aria-label":"overflow","aria-expanded":x?"true":"false",onClick:O,children:c.jsx("div",{className:`${x?el:tl} ${ul}`,children:x?c.jsx(Sr,{}):c.jsx(Bn,{})})}),L.length>0&&c.jsx(Nt,{ref:y,className:fe,relateTo:s.current,offsetY:t===Ze.Vertical?0:I(),open:x,onOpen:oe,onClose:Q,targetType:"container",collision:{Y:m?ot.None:ot.None,X:ot.None},position:A==="rtl"?{X:"left",Y:"top"}:{X:"right",Y:"top"},width:r===Ue.Extended&&t===Ze.Horizontal?z():void 0,offsetX:r===Ue.Extended&&t===Ze.Horizontal?0:void 0,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},style:Z,onClick:ze,children:L})]})}));Ur.displayName="ToolbarPopup";var Ue;(function(o){o.Scrollable="Scrollable",o.Popup="Popup",o.MultiRow="MultiRow",o.Extended="Extended"})(Ue||(Ue={}));const dl="sf-toolbar",fl="sf-toolbar-vertical",ml="sf-toolbar-items",hl="sf-rtl",rr="sf-hscroll-nav",dn="sf-toolbar-hor-nav",ss="sf-toolbar-popup-items",pl="sf-toolbar-extended",gl="sf-toolbar-multirow",El="sf-tbar-extended",Tl="sf-toolbar-popup",Yr=e.memo(e.forwardRef((o,n)=>{const{keyboardNavigation:s=!0,children:t,className:r="",collision:i=!0,orientation:a=Ze.Horizontal,overflowMode:l=Ue.Scrollable,scrollStep:m=void 0,...u}=o,f=e.useRef(null),h=e.useRef({toolbar:[],popup:[]}),p=e.useRef(null),g=e.useRef(null),E=e.useRef(null),{dir:C}=$e(),[v,P]=e.useState(!1),[w,y]=e.useState(!1),A=e.useCallback(R=>R.hasAttribute("disabled")||R.getAttribute("aria-disabled")==="true"||R.classList.contains("sf-disabled"),[]),N=e.useCallback((R,J,ne)=>{if(!R.length)return-1;const se=R.length;let le=J,we=0;for(;we<se;){if(le=(le+ne+se)%se,!A(R[le]))return le;we++}return-1},[A]),V=e.useCallback(()=>{if(s&&f.current){const R=se=>f.current?Array.from(f.current.querySelectorAll(`.${se} .sf-btn`)):[];h.current.toolbar=R(ml),(l===Ue.Extended||l===Ue.Popup)&&(h.current.popup=R(ss));let J=0;p.current&&(J=h.current.toolbar.indexOf(p.current),J=J===-1?0:J);const ne=[...h.current.toolbar,...h.current.popup];J>=0&&J<ne.length&&A(ne[J])&&(J=N(ne,-1,1)),ne.forEach((se,le)=>{se.tabIndex=le===J?0:-1,le===J&&(p.current=se)})}},[s,l,A,N]),L=e.useCallback(R=>{const J=!!Tt(R,"."+ss);return{isToolbar:!J,items:J?h.current.popup:h.current.toolbar,currentIndex:J?h.current.popup.indexOf(R):h.current.toolbar.indexOf(R)}},[]),D=e.useCallback(R=>!We(Tt(R,"."+ss)),[]),S=e.useCallback(R=>!We(Tt(R,"."+dn)),[]),T=e.useCallback((R,J)=>{const ne=J?h.current.toolbar:h.current.popup;if(R>-1&&R<ne.length){ne.forEach(le=>{le.tabIndex=-1});const se=ne[parseInt(R.toString(),10)];se.tabIndex=0,se.focus(),J&&(p.current=se)}},[]),x=e.useCallback((R,J)=>{const{isToolbar:ne,items:se,currentIndex:le}=L(R);if(!se.length)return;let we;switch(J){case"next":we=N(se,le,1);break;case"previous":we=N(se,le,-1);break;case"first":we=N(se,-1,1);break;case"last":we=N(se,se.length,-1);break}we!==-1&&T(we,ne)},[L,T,N]),M=e.useCallback((R,J)=>{if(a===Ze.Horizontal){const ne=R.classList.contains(dn),se=R.classList.contains(rr);if(J==="ArrowRight"&&f.current===R){T(0,!0);return}(J==="ArrowRight"||J==="ArrowLeft")&&!ne&&!se&&x(R,J==="ArrowRight"?"next":"previous")}},[T,x,a]),k=e.useCallback((R,J)=>{const ne=a===Ze.Vertical,se=D(R),le=S(R);J==="ArrowUp"&&!le&&(ne||se)?x(R,"previous"):J==="ArrowDown"&&(le&&w&&h.current.popup.length>0?T(0,!1):(ne||se)&&x(R,"next"))},[D,S,w,T,x,a]),_=e.useCallback((R,J)=>{x(R,J==="Home"?"first":"last")},[x]),Z=e.useCallback(R=>{const J=R.classList.contains(dn),ne=R.classList.contains(rr),se=f.current;if(!ne&&!J&&se===R&&h.current.toolbar)if(p.current&&!A(p.current))p.current.focus();else{const le=N(h.current.toolbar,-1,1);le!==-1&&T(le,!0)}},[T,A,N]),ie=e.useCallback(R=>{R.classList.contains(dn)&&y(ne=>!ne)},[]),he=e.useCallback(()=>{l===Ue.Popup&&w&&y(!1)},[w,l]),Y=e.useCallback(R=>{if(!f.current||!s||["INPUT","TEXTAREA","SELECT"].includes(R.target.tagName))return;const J=R.target;R.preventDefault();const se={ArrowRight:()=>M(J,R.key),ArrowLeft:()=>M(J,R.key),ArrowUp:()=>k(J,R.key),ArrowDown:()=>k(J,R.key),Home:()=>_(J,R.key),End:()=>_(J,R.key),Tab:()=>Z(J),Enter:()=>ie(J),Escape:()=>he()}[R.key];se&&se()},[s,M,k,_,Z,ie,he]),H=e.useCallback(R=>{if(!s||["INPUT","TEXTAREA","SELECT"].includes(R.target.tagName))return;const J=l===Ue.Popup&&w;R.key==="Tab"&&R.target.classList.contains(dn)&&J&&y(!1),(R.key==="ArrowDown"||R.key==="ArrowUp"||R.key==="End"||R.key==="Home")&&R.preventDefault()},[s,l,w]),I=e.useCallback(R=>{y(R)},[]),z=e.useCallback(()=>{l===Ue.Scrollable&&g.current?g.current.refreshOverflow():(l===Ue.Popup||l===Ue.Extended)&&E.current&&E.current.refreshOverflow()},[l]);e.useLayoutEffect(()=>{At("toolbar"),P(!0)},[]);const oe=e.useMemo(()=>{const R=["sf-control",dl,"sf-lib"];switch(C==="rtl"&&R.push(hl),l){case Ue.MultiRow:R.push(gl);break;case Ue.Popup:R.push(Tl);break;case Ue.Extended:R.push(pl),w&&R.push(El);break}return a===Ze.Vertical&&R.push(fl),r&&R.push(r),R.join(" ")},[r,C,a,w,l]),Q={keyboardNavigation:s,collision:i,orientation:a,overflowMode:l,scrollStep:m};return e.useImperativeHandle(n,()=>({...Q,refreshOverflow:z,element:f.current})),c.jsx("div",{ref:f,className:oe,role:"toolbar","aria-orientation":a.toLowerCase(),onKeyDown:H,onKeyUp:Y,...u,children:(()=>{switch(l){case Ue.Scrollable:return c.jsx(Br,{ref:g,toolbarRef:f,orientation:a,scrollStep:m,onOverflowChange:V,className:r,children:t},`scrollable-${a}-toolbar`);case Ue.MultiRow:return c.jsx(Fr,{onOverflowChange:V,children:t});case Ue.Popup:case Ue.Extended:return c.jsx(Ur,{ref:E,toolbarRef:f,isToolbarRefReady:v,orientation:a,overflowMode:l,collision:i,isPopupVisible:w,onPopupOpenChange:I,onOverflowChange:V,className:r,children:t},`${l===Ue.Popup?"popup":"extended"}-${a}-toolbar`)}})()})}));Yr.displayName="Toolbar";const Kr=e.forwardRef((o,n)=>{var O,q,me;const{children:s,className:t="",icon:r,iconPosition:i=Ke.Left,items:a=[],popupWidth:l="auto",animation:m={show:{name:"SlideDown",duration:100,timingFunction:"ease"},hide:{name:"SlideUp",duration:100,timingFunction:"ease"}},disabled:u=!1,lazyOpen:f=!1,itemTemplate:h,target:p,relateTo:g,color:E,variant:C,size:v=_t.Medium,onClose:P,onOpen:w,onSelect:y,...A}=o,N=e.useRef(null),V=e.useRef(null),L=e.useRef(null),D=e.useRef([]),[S,T]=e.useState(null),[x,M]=e.useState(!1),[k,_]=e.useState(a),{dir:Z}=$e(),[ie,he]=e.useState(!1);e.useEffect(()=>{he(!0)},[]);const Y=e.useRef(!0),H=e.useCallback((ee,fe)=>{ee.disabled||(M(!1),y&&y({event:fe,item:ee}))},[y]),I=(ee,fe)=>{Y&&fe(B=>ee.length!==B.length||ee.some((G,b)=>{const U=B[b];return G.id!==(U==null?void 0:U.id)||G.text!==(U==null?void 0:U.text)||G.url!==(U==null?void 0:U.url)||G.disabled!==(U==null?void 0:U.disabled)||typeof G.icon=="string"?G.icon!==(U==null?void 0:U.icon):!e.isValidElement(G.icon)})?ee:B)};e.useEffect(()=>(I(a,_),()=>{Y.current=!1}),[a]),e.useEffect(()=>{At("dropDownButton")},[]);const z=e.useMemo(()=>k.map((ee,fe)=>!ee.disabled&&!ee.hasSeparator?fe:-1).filter(ee=>ee>=0),[k]),oe=e.useCallback((ee,fe)=>{const B=z.length;if(!B)return-1;const K=z.indexOf(ee);if(K<0)return z[fe?0:B-1];const G=(K+(fe?1:-1)+B)%B;return z[G]},[z]),Q=e.useCallback(ee=>ee!=null&&z.includes(ee)?ee:null,[z]),R=e.useCallback(ee=>{var B;const fe=Q(ee);T(fe),fe!=null&&((B=D.current[fe])==null||B.focus())},[Q]);e.useEffect(()=>{T(ee=>Q(ee))},[k,Q]),e.useEffect(()=>{const ee=B=>{var U,te;const K=(U=N.current)==null?void 0:U.element,G=(te=V.current)==null?void 0:te.element,b=B.target;K&&G&&!K.contains(b)&&!G.contains(b)&&(M(!1),P&&x&&P(B))},fe=B=>{var K,G;((B.altKey||B.metaKey)&&B.key==="ArrowUp"||B.key==="Escape"||B.key==="Esc")&&(B.preventDefault(),B.stopPropagation(),M(!1),P==null||P(B),(G=(K=N.current)==null?void 0:K.element)==null||G.focus())};return x&&(document.addEventListener("mousedown",ee),document.addEventListener("keydown",fe)),()=>{document.removeEventListener("mousedown",ee),document.removeEventListener("keydown",fe)}},[x,P]);const J={iconPosition:i,icon:r,target:p,popupWidth:l,items:a,lazyOpen:f,relateTo:g,itemTemplate:h,color:E,variant:C,size:v},ne=((O=m.show)==null?void 0:O.name)!==void 0?{name:(q=m.show)==null?void 0:q.name,duration:m.show.duration,timingFunction:m.show.timingFunction}:null,se=ee=>{var fe,B;if(x)M(!1),P&&P(ee);else{if(ne){const G=zt(ne);if(G.animate){const b=(B=(fe=V.current)==null?void 0:fe.element)==null?void 0:B.children[0];b&&G.animate(b,{begin:U=>{const te=U==null?void 0:U.element;if(te&&te.parentElement){const ue=te.parentElement,Ce=ue.style.display;ue.style.display="block",ue.style.maxHeight=ue.offsetHeight+"px",ue.style.display=Ce}}})}}M(!0),w&&w(ee);const K=Q(S);R(K)}};e.useImperativeHandle(n,()=>{var ee;return{...J,toggle:se,element:(ee=N.current)==null?void 0:ee.element}},[J]);const le=e.useCallback(ee=>{var fe,B,K,G;switch(ee.key){case"ArrowDown":{if(ee.preventDefault(),ee.stopPropagation(),ee.altKey||ee.metaKey)se(ee);else{const b=oe(S??-1,!0);R(b)}break}case"ArrowUp":{if(ee.preventDefault(),ee.stopPropagation(),ee.altKey||ee.metaKey)M(!1),P==null||P(ee),(B=(fe=N.current)==null?void 0:fe.element)==null||B.focus();else{const b=oe(S??-1,!1);R(b)}break}case"Home":{x&&(ee.preventDefault(),R(z[0]??null));break}case"End":{x&&(ee.preventDefault(),R(z[z.length-1]??null));break}case"Enter":case" ":{if(ee.preventDefault(),x){const b=Q(S);b!=null&&H(k[b],ee)}else se(ee);break}case"Escape":case"Esc":{ee.preventDefault(),x&&(M(!1),P==null||P(ee),(G=(K=N.current)==null?void 0:K.element)==null||G.focus());break}}},[x,S,z,oe,Q,se,M,P,N,R,H,k]),we=e.useCallback(ee=>{if(h)return h(ee);const fe=c.jsxs(c.Fragment,{children:[ee.icon&&c.jsx("span",{className:"sf-menu-icon",children:typeof ee.icon=="string"?c.jsx("span",{className:ee.icon}):ee.icon}),c.jsx("span",{children:ee.text})]});return ee.url?c.jsx("a",{href:ee.url,className:"sf-menu-link",children:fe}):fe},[h]),Pe=e.useCallback((ee,fe)=>{fe.stopPropagation();const B=fe.currentTarget,K=D.current.findIndex(G=>G===B);R(K),H(ee,fe)},[H,R]),ze=e.useCallback(()=>c.jsx("ul",{role:"menu",tabIndex:0,"aria-label":"dropdown menu",ref:L,onKeyDown:le,onMouseDown:ee=>ee.preventDefault(),children:k.map((ee,fe)=>{const B=S===fe,K=`sf-item sf-ellipsis ${ee.hasSeparator?"sf-separator":""} ${ee.disabled?"sf-disabled":""} ${B?"sf-focused":""}`;return c.jsx("li",{ref:G=>{D.current[fe]=G},className:K,role:ee.hasSeparator?"separator":"menuitem","aria-label":ee.text,"aria-disabled":ee.disabled?"true":"false",onClick:ee.disabled||ee.hasSeparator?void 0:G=>Pe(ee,G),children:!ee.hasSeparator&&we(ee)},ee.id||`item-${fe}`)})}),[k,we,Pe,S,R,le]);return c.jsxs(c.Fragment,{children:[c.jsx(nt,{ref:N,className:`${t} sf-dropdown-btn sf-drp-btn-${v.toLowerCase().substring(0,2)} ${x?"sf-active":""}`,icon:r,color:E,dropIcon:!0,variant:C,size:v,iconPosition:i,disabled:u,onKeyDown:le,onClick:ee=>{ee.preventDefault(),se(ee)},"aria-haspopup":"true","aria-expanded":x?"true":"false",...A,children:s}),ie&&(x||!f)&&typeof document<"u"&&jt.createPortal(c.jsx(Nt,{open:x,ref:V,targetRef:p||N.current,relateTo:g||((me=N.current)==null?void 0:me.element),position:{X:"left",Y:"bottom"},animation:m,collision:Z==="rtl"?{X:ot.Fit,Y:ot.Flip}:{X:ot.Flip,Y:ot.Flip},width:l,className:`sf-dropdown-popup sf-drp-btn-${v.toLowerCase().substring(0,2)} ${l!=="auto"?"sf-dropdown-popup-width":""}`,onClose:()=>{var ee;M(!1),(ee=N.current)!=null&&ee.element&&N.current.element.focus()},onOpen:()=>{var ee;(ee=L.current)==null||ee.focus()},children:ze()}),document.body)]})});e.memo(Kr);const Xr=o=>{const{onClick:n,ariaLabel:s,title:t,disabled:r=!1,icon:i=c.jsx(xo,{}),text:a,color:l,variant:m,className:u}=o,{locale:f}=$e(),{getString:h}=st(f||"en-US");return De.isDevice?c.jsx(nt,{icon:i,color:l||Ct.Secondary,variant:m||Je.Standard,className:u||d.TODAY_BUTTON,onClick:n,"aria-label":s||h("today"),title:t||h("today"),disabled:r}):c.jsx(nt,{icon:i,variant:m||Je.Outlined,color:l||Ct.Secondary,className:u||d.TODAY_BUTTON,onClick:n,"aria-label":s||h("today"),title:t,disabled:r,children:a||h("today")})},qr=o=>{const{onClick:n,ariaLabel:s,title:t,disabled:r=!1,icon:i=c.jsx(Cr,{}),color:a,variant:l,className:m}=o,{locale:u}=$e(),{getString:f}=st(u||"en-US");return c.jsx(nt,{className:m||d.PREVIOUS_ICON,icon:i,color:a||Ct.Secondary,variant:l||Je.Standard,onClick:n,"aria-label":s||f("previous"),title:t,disabled:r})},Gr=o=>{const{onClick:n,ariaLabel:s,title:t,disabled:r=!1,icon:i=c.jsx(Tr,{}),color:a,variant:l,className:m}=o,{locale:u}=$e(),{getString:f}=st(u||"en-US");return c.jsx(nt,{className:m||d.NEXT_ICON,icon:i,color:a||Ct.Secondary,variant:l||Je.Standard,onClick:n,"aria-label":s||f("next"),title:t,disabled:r})},Cl=(o,n)=>{const{onClick:s,ariaLabel:t,title:r,disabled:i=!1,dateRangeContent:a,showCalendar:l=!1,ariaExpanded:m,color:u,variant:f,icon:h=c.jsx(Bn,{viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true"}),onKeyDown:p,className:g}=o;return c.jsx(nt,{ref:n,onClick:E=>{E.stopPropagation(),s==null||s(E)},"aria-haspopup":"dialog","aria-label":t,"aria-expanded":m!==void 0?m:l,className:g||d.DATEPICKER_BUTTON,color:u||Ct.Secondary,variant:f||Je.Standard,iconPosition:Ke.Right,title:r,disabled:i,onKeyDown:p,icon:h,children:a})},Ds=e.forwardRef(Cl);Ds.displayName="DateRangeButton";const Zr=o=>{var h;const{items:n,currentView:s,onSelect:t,ariaLabel:r,title:i,disabled:a=!1,className:l,variant:m=Je.Outlined,color:u=Ct.Secondary}=o,f=((h=n.find(p=>p.id===s))==null?void 0:h.text)||s;return c.jsx("div",{onClick:p=>p.stopPropagation(),children:c.jsx(Kr,{items:n,variant:m,className:l||d.VIEW_BUTTON,color:u,onSelect:t,"aria-label":r,title:i,disabled:a,children:f})})};Xr.displayName="TodayButton";qr.displayName="PreviousButton";Gr.displayName="NextButton";Zr.displayName="ViewButton";const vl=({view:o,availableViews:n,onViewButtonClick:s,onPreviousClick:t,onNextClick:r,onTodayClick:i,onDateDropdownClick:a,dateRangeText:l,showCalendar:m=!1,selectedDate:u=new Date,firstDayOfWeek:f=0,calendarView:h=Hn.Month,handleCalendarChange:p,renderDates:g,customizeHeader:E})=>{var M,k;const C=e.useRef(null),v=e.useRef(null);vs(v,!!m,()=>{m&&a&&a()});const P=(n||[]).map(_=>({id:_.name,text:_.displayName})),w=e.useCallback(_=>{var ie;const Z=(ie=_.item)==null?void 0:ie.id;Z&&s(Z)},[s]),y=P.map(_=>`${_.id}:${_.text}`).join("|"),N=g&&g.length>=2?`${(M=g[0])==null?void 0:M.toDateString()} - ${(k=g[g.length-1])==null?void 0:k.toDateString()}`:l;let V=l;const L=_=>[_.today,_.previous,_.next,_.dateRange,c.jsx(ys,{},"spacer"),_.viewSwitcher].filter(Boolean),D=_=>{var Z;return{today:(_==null?void 0:_.todayProps)!==null&&c.jsx(Mt,{children:c.jsx(Xr,{onClick:i,...(_==null?void 0:_.todayProps)||{}})},"today"),previous:(_==null?void 0:_.previousProps)!==null&&c.jsx(Mt,{children:c.jsx(qr,{onClick:t,...(_==null?void 0:_.previousProps)||{}})},"previous"),next:(_==null?void 0:_.nextProps)!==null&&c.jsx(Mt,{children:c.jsx(Gr,{onClick:r,...(_==null?void 0:_.nextProps)||{}})},"next"),dateRange:(_==null?void 0:_.dateRangeProps)!==null&&c.jsx(Mt,{children:c.jsx(Ds,{ref:C,onClick:a,ariaLabel:N,dateRangeContent:V,showCalendar:m,onKeyDown:ie=>{ie.key==="Escape"&&m&&(a==null||a())},...(_==null?void 0:_.dateRangeProps)||{}})},"dateRange"),viewSwitcher:(_==null?void 0:_.viewSwitcherProps)!==null&&((n==null?void 0:n.length)??0)>1&&c.jsx(Mt,{children:c.jsx(Zr,{items:P,currentView:o,onSelect:w,ariaLabel:((Z=n==null?void 0:n.find(ie=>ie.name===o))==null?void 0:Z.displayName)??o,...(_==null?void 0:_.viewSwitcherProps)||{}})},"viewSwitcher")}};let S,T=Ue.Popup;const x=D();if(E){const _=E({}),Z=e.isValidElement(_)?_.props:{},ie=D(Z),he={overflowMode:(Z==null?void 0:Z.overflowMode)??Ue.Popup,today:ie.today,previous:ie.previous,next:ie.next,dateRange:ie.dateRange,viewSwitcher:ie.viewSwitcher,children:L(ie)},Y=E(he);if(Y&&e.isValidElement(Y)){const H=Y.props;if(T=(H==null?void 0:H.overflowMode)??Ue.Popup,H!=null&&H.dateRangeTemplate&&g&&g.length>=2&&(V=H.dateRangeTemplate({startDate:g[0],endDate:g[g.length-1],view:o})),H!=null&&H.children)H.children===he.children?S=L(D(H)):S=H.children;else{const I=D(H);S=L(I)}}else S=L(x)}else S=L(x);return c.jsxs("div",{ref:v,className:d.SCHEDULER_TOOLBAR_CONTAINER,children:[c.jsx(Yr,{overflowMode:T,style:{width:"auto"},children:S},`tb-${y}-${l}`),m&&C.current&&c.jsx(Nt,{open:!0,relateTo:C.current.element,position:{X:"left",Y:"bottom"},collision:{X:ot.Fit,Y:ot.None},actionOnScroll:vr.Hide,onClose:a,className:d.CALENDAR_POPUP_CONTAINER,viewPortElementRef:v,onKeyDown:_=>{_.key==="Escape"&&(a==null||a())},children:c.jsx(Ro,{className:d.SCHEDULER_CALENDAR,value:u,onChange:p,showTodayButton:!0,firstDayOfWeek:f,start:h,depth:h})})]})};Ds.__docgenInfo={description:"DateRange button component",methods:[],displayName:"DateRangeButton"};const Qr=(o,n,s)=>{const[t,r]=e.useState(!1),[i,a]=e.useState(null),l=yl(t),m=e.useRef(null),u=e.useRef(null),f=e.useRef(null),h=e.useRef(null),p=e.useCallback(()=>{r(!1)},[s]);Jr(p),e.useEffect(()=>{i&&(u.current=i.closest(".sf-scheduler"))},[i]);const g=e.useCallback(A=>{l&&typeof l=="object"&&"current"in l&&(l.current=A),m.current=A},[l]),E=e.useCallback(()=>{var A,N;(A=f.current)==null||A.hide(),(N=h.current)==null||N.hide()},[]),C=e.useCallback((A,N)=>{var V;(V=f.current)==null||V.handleCellClick(A,N)},[]),v=e.useCallback((A,N)=>{var V;(V=f.current)==null||V.handleEventClick(A,N)},[]),P=e.useCallback(()=>{E()},[]),w=e.useCallback(A=>{o&&o(A),!A.cancel&&A&&A.element&&(A.nativeEvent&&A.nativeEvent.stopPropagation(),C(A,A.element))},[o,C]),y=e.useCallback(A=>{n&&n(A),!A.cancel&&A&&A.data&&A.event.currentTarget&&v(A.data,A.event.currentTarget)},[n,v]);return{visible:t,setVisible:r,target:i,setTarget:a,containerRef:l,popupElement:m,schedulerElement:u,handleClose:p,handleRef:g,cellEditRef:f,eventEditRef:h,handleCellClick:C,handleEventClick:v,handleEditEvent:P,closeAllPopups:E,onCellClickHandler:w,onEventClickHandler:y}},Jr=o=>{e.useEffect(()=>{const n=s=>{s.key==="Escape"&&o()};return document==null||document.addEventListener("keydown",n),()=>{document==null||document.removeEventListener("keydown",n)}},[o])},yl=o=>{const n=e.useRef(null),s=e.useRef(null);return e.useEffect(()=>{if(o&&n.current){s.current=document==null?void 0:document.activeElement;const t=n.current.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'),r=t[0],i=t[t.length-1],a=l=>{i&&(document==null?void 0:document.activeElement)===i&&!l.shiftKey&&(l.preventDefault(),r.focus()),r&&(document==null?void 0:document.activeElement)===r&&l.shiftKey&&(l.preventDefault(),i.focus())};return document==null||document.addEventListener("keydown",a),()=>{var l;document==null||document.removeEventListener("keydown",a),(l=s.current)!=null&&l.focus&&s.current.focus()}}return()=>{}},[o]),n};class dt{static calculateEventPosition(n,s,t,r){const i=n.event.isAllDay&&n.event.isBlock?"0px":this.calculateTopPosition(n.startDate,s,t),a=this.calculateHeight(n,s,t,r);let l=96,m=n.event.isBlock?"1px":"0%";n.totalOverlapping>1&&(l=(l-n.totalOverlapping)/n.totalOverlapping,m=`${n.positionIndex*l+n.positionIndex}%`);const u=n.event.isBlock?"calc(100% - 2px)":`${l}%`;return{top:i,height:a,width:u,left:m}}static getOverflowDirection(n,s,t,r){var g,E;if(!n.totalSegments&&!t&&!r||!((g=n.event)!=null&&g.startTime)||!((E=n.event)!=null&&E.endTime)||!(s!=null&&s.length))return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:!1,isOverflowBottom:!1};const i=F.normalizeDate(n.event.startTime),a=F.normalizeDate(n.event.endTime),l=F.normalizeDate(s[0]),m=F.normalizeDate(s[s.length-1]);let u=n.isFirstDay===!1,f=n.isLastDay===!1;if(!i||!a||!l||!m)return{isOverflowLeft:!1,isOverflowRight:!1,isOverflowTop:u,isOverflowBottom:f};const h=i.getTime()<l.getTime(),p=a.getTime()>m.getTime();return t&&r&&(i.setHours(t[0],t[1],0,0),a.setHours(r[0],r[1],0,0),!u&&i>n.event.startTime&&(u=!0),!f&&a<n.event.endTime&&(f=!0)),{isOverflowLeft:h,isOverflowRight:p,isOverflowTop:u,isOverflowBottom:f}}static calculatePositionStyles(n,s,t,r,i){return n.totalSegments?{top:`${n.positionIndex*(Wn+hn)}px`,width:this.calculateEventWidth(n,s)}:!n.event.isBlock&&n.positionIndex!==void 0&&(n.event.isAllDay||n.isMonthEvent)?{top:`${n.positionIndex*(Wn+hn)}px`}:t&&r&&i?this.calculateEventPosition(n,t,r,i):{}}static calculateTopPosition(n,s,t){const r=F.getStartEndHours(t),i=r.getHours()*Xe+r.getMinutes(),l=n.getHours()*Xe+n.getMinutes()-i,u=ir/(s.interval/s.slotCount),f=l*u;return`${Math.max(0,f)}px`}static calculateHeight(n,s,t,r){const i=new Date(n.startDate),a=new Date(n.endDate);n.event.isBlock&&n.event.isAllDay&&(i.setHours(0,0,0,0),a.setDate(a.getDate()+1),a.setHours(0,0,0,0));const l=s.interval/s.slotCount,{schedulerStartMinutes:m,schedulerEndMinutes:u}=F.getSchedulerStartAndEndMinutes(t,r),f=i.getHours()*Xe+i.getMinutes(),h=Math.max(f,m),p=u-h;let g;if(F.isSameDay(i,a)){const C=i.getDate()!==a.getDate()?No:a.getHours()*Xe+a.getMinutes(),v=Math.min(C,u)-h;g=Math.max(1,Math.ceil(v/l));const P=Math.ceil(p/l);g=Math.min(g,P)}else g=Math.min(p/l);return`${g*ir-2}px`}static calculateEventWidth(n,s){const t=F.normalizeDate(n.event.startTime),r=F.normalizeDate(n.event.endTime),i=F.normalizeDate(s[0]),a=F.normalizeDate(s[s.length-1]),{isOverflowLeft:l,isOverflowRight:m}=this.getOverflowDirection(n,s);if(s.length<=7){const{visibleDayCount:u,startDayIndex:f}=F.getVisibleAndStartDays(s,t,r,n.event);if(u>0&&f!==-1)return`calc(${u*100}% - 4px)`}if(l&&m)return`${s.length*100}%`;if(l){const u=r.getTime()<=a.getTime()?r:a;return`${(Math.floor((u.getTime()-i.getTime())/os)+1)*100}%`}else return m?`${(Math.floor((a.getTime()-t.getTime())/os)+1)*100}%`:`${n.totalSegments?n.totalSegments*100:100}%`}static setIndexPosition(n,s,t){const r=F.generateDateKey(s),i=n.get(r)||[];for(;i.length<=t;)i.push(!1);return i.splice(t,1,!0),n.set(r,i),n}}const Vn=o=>{const n=o.closest(".sf-scheduler");if(n){const s=n.querySelector("."+d.SELECTED_CELL);s&&(s.classList.remove(d.SELECTED_CELL),s.removeAttribute("tabindex"))}o.classList.add(d.SELECTED_CELL),o.tabIndex=0,o.focus()},fs=(o,n,s)=>{if(!o||n<0||s<0)return null;const r=o.querySelectorAll(`.${d.WORK_CELLS_ROW}`).item(n);return r?r.querySelectorAll(`.${d.WORK_CELLS}`).item(s)??null:null},zn=o=>{const n=o.closest("."+d.SCHEDULER);n&&(n.querySelectorAll("."+d.APPOINTMENT+"."+d.APPOINTMENT_ACTIVE).forEach(t=>{t.classList.remove(d.APPOINTMENT_ACTIVE)}),Vn(n)),o.classList.add(d.APPOINTMENT_ACTIVE)},or=(o,n)=>{const s=n.querySelector("."+d.APPOINTMENT+"."+d.APPOINTMENT_ACTIVE),t=s==null?void 0:s.getAttribute("data-guid");return{data:ke.getEventByGuid(o,t),element:s}},Dl=o=>{var t,r;let n;const s=((t=o==null?void 0:o.getAttribute)==null?void 0:t.call(o,"data-date"))??((r=o.dataset)==null?void 0:r.date)??void 0;if(s){const i=parseInt(s,10);n=new Date(i)}return n},bl=(o,n)=>{const s=Array.isArray(o)?o==null?void 0:o[0]:o,r=s.classList.contains(d.ALL_DAY_CELL)||s.classList.contains(d.WORK_DAYS)||!((n==null?void 0:n.enable)??!0),i=Dl(s);let a;if(r)i&&(a=F.addDays(i,1));else if(i&&n){const l=n.interval/n.slotCount,m=new Date(i);m.setMinutes(m.getMinutes()+l),a=m}return{startTime:i,endTime:a??i,isAllDay:r,element:s}},Wn=24,hn=4,ir=40;class ke{static filterEventsByDateRange(n,s){if(!(n!=null&&n.length)||!(s!=null&&s.length))return[];const t=F.normalizeDate(s[0]),r=F.normalizeDate(s[s.length-1]);return n.filter(i=>{if(!i.startTime||!i.endTime)return!1;const a=F.normalizeDate(i.startTime);return!(F.normalizeDate(i.endTime)<t||a>r)})}static findNonConflictingPosition(n,s,t,r,i){let a=0,l=!1;for(;!l;){l=!0;for(const m of n){const u=F.normalizeDate(m);if(u>=s&&(u<t||u.getTime()===t.getTime()&&r)){const h=F.generateDateKey(m);if((i.get(h)||[]).findIndex((E,C)=>C===a&&E)!==-1){l=!1,a++;break}}}}return a}static mapEventData(n,s){if(!n||n.length===0)return[];const t=s||{id:"Id",subject:"Subject",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",location:"Location",description:"Description",isReadonly:"IsReadonly",isBlock:"IsBlock"};return n.map(r=>{const i={};if(t.id&&Object.prototype.hasOwnProperty.call(r,t.id)&&(i.id=r[t.id]),t.subject&&Object.prototype.hasOwnProperty.call(r,t.subject)&&(i.subject=r[t.subject]),t.startTime&&Object.prototype.hasOwnProperty.call(r,t.startTime)){const m=r[t.startTime];m instanceof Date?i.startTime=m:(typeof m=="string"||typeof m=="number")&&(i.startTime=new Date(m))}if(t.endTime&&Object.prototype.hasOwnProperty.call(r,t.endTime)){const m=r[t.endTime];m instanceof Date?i.endTime=m:(typeof m=="string"||typeof m=="number")&&(i.endTime=new Date(m))}t.isAllDay&&Object.prototype.hasOwnProperty.call(r,t.isAllDay)&&(i.isAllDay=r[t.isAllDay]),t.location&&Object.prototype.hasOwnProperty.call(r,t.location)&&(i.location=r[t.location]),t.description&&Object.prototype.hasOwnProperty.call(r,t.description)&&(i.description=r[t.description]),t.isReadonly&&Object.prototype.hasOwnProperty.call(r,t.isReadonly)&&(i.isReadonly=r[t.isReadonly]),t.isBlock&&Object.prototype.hasOwnProperty.call(r,t.isBlock)&&(i.isBlock=r[t.isBlock]);const a=new Set(Object.values(t)),l=Object.fromEntries(Object.entries(r).filter(([m])=>!a.has(m)));return Object.assign(i,l),i.guid=ke.generateEventGuid(),i})}static sortEventsByStartTimeAndDuration(n){return[...n].sort((s,t)=>{if(!s.event.startTime||!t.event.startTime)return 0;const r=s.event.startTime.getTime()-t.event.startTime.getTime();if(r!==0)return r;const i=s.event.endTime?s.event.endTime.getTime()-s.event.startTime.getTime():0;return(t.event.endTime?t.event.endTime.getTime()-t.event.startTime.getTime():0)-i})}static calculateOverlappingEvents(n,s=!0){if(!n||n.length===0)return[];if(!s)return this.resolveOverlappingEvents(n);const t=this.sortEventsByStartTimeAndDuration(n);return this.identifyOverlapGroups(t)}static identifyOverlapGroups(n){const s=[];for(const t of n){let r=!1;for(const i of s)if(i.some(l=>this.eventsOverlap(t,l))){i.push(t),r=!0;break}r||s.push([t])}return this.convertOverlapGroupsToEventGroups(s)}static convertOverlapGroupsToEventGroups(n){return n.filter(t=>t.length>0).map(t=>{if(t.length===1)return[{...t[0],positionIndex:0,totalOverlapping:1}];const r=[...t].sort((l,m)=>!l.event.startTime||!m.event.startTime?0:l.event.startTime.getTime()-m.event.startTime.getTime()),i=[],a=[];return r.forEach(l=>{let m=i.findIndex(u=>u<=l.event.startTime);m===-1?(m=i.length,i.push(l.event.endTime)):i[parseInt(m.toString(),10)]=l.event.endTime,a.push(m)}),r.map((l,m)=>({...l,positionIndex:a[parseInt(m.toString(),10)],totalOverlapping:i.length}))})}static prioritizeEvents(n){return[...n].sort((s,t)=>{if(s.event.isAllDay&&!t.event.isAllDay)return-1;if(!s.event.isAllDay&&t.event.isAllDay)return 1;if(!s.event.startTime||!t.event.startTime||!s.event.endTime||!t.event.endTime)return 0;const r=s.event.endTime.getTime()-s.event.startTime.getTime(),i=t.event.endTime.getTime()-t.event.startTime.getTime();return r!==i?i-r:s.event.startTime.getTime()-t.event.startTime.getTime()})}static resolveOverlappingEvents(n){if(!n||n.length===0)return[];const s=this.prioritizeEvents(n),t=[],r=new Set;return s.forEach(i=>{if(r.has(i))return;const a=s.filter(m=>i!==m&&!r.has(m)&&this.eventsOverlap(i,m)),l=[{...i,positionIndex:0,totalOverlapping:1}];t.push(l),r.add(i),a.forEach(m=>{r.add(m)})}),t}static eventsOverlap(n,s){return!(n!=null&&n.event.startTime)||!(n!=null&&n.event.endTime)||!(s!=null&&s.event.startTime)||!(s!=null&&s.event.endTime)?!1:n.event.startTime<s.event.endTime&&n.event.endTime>s.event.startTime||s.event.startTime<n.event.endTime&&s.event.endTime>n.event.startTime}static checkEventOverlap(n,s,t=!0,r){const i=t?n.startTime:n[r.startTime],a=t?n.endTime:n[r.endTime];if(!i||!a)return!1;const l=F.normalizeDate(i),m=F.normalizeDate(a);return(s||[]).filter(f=>{if(f.isBlock||!f.startTime||!f.endTime)return!1;const h=F.normalizeDate(f.startTime);return!(F.normalizeDate(f.endTime)<l||h>m)}).some(f=>{const h=f.startTime,p=f.endTime,g=f.isAllDay;return f.id===n.id||f.id===n.Id||f.guid===n.guid||!h||!p?!1:g?i<=p&&a>=h:i<p&&a>h})}static isBlockRange(n,s,t=!0,r){const i=Array.isArray(n)?n:[n];if(i&&i.length===0)return!1;const a=(s==null?void 0:s.filter(l=>l.isBlock))||[];if(a&&a.length===0)return!1;for(const l of a){const m=l.startTime,u=l.endTime;if(!m||!u)continue;const f=l.isAllDay||ke.isMultiDayEvent(l);for(const h of i){const p=t?h.startTime:h[r.startTime],g=t?h.endTime:h[r.endTime];if(!p||!g)continue;let E;if(f){const C=F.normalizeDate(p),v=F.normalizeDate(g),P=F.normalizeDate(m),w=F.normalizeDate(u);E=C<=w&&P<=v}else E=p<u&&g>m;if(E)return!0}}return!1}static splitEventByDay(n,s){const t=[],r=F.normalizeDate(n.startTime),i=F.normalizeDate(n.endTime),a=s.filter(m=>{const u=F.normalizeDate(m);return u>=r&&u<=i}).length;let l=0;return s.forEach((m,u)=>{const f=F.normalizeDate(m);if(f>=r&&f<=i){const h=f.getTime()===r.getTime(),p=f.getTime()===i.getTime(),g=h?new Date(n.startTime):new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),E=p?new Date(n.endTime):new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0),C={event:n,startDate:g,endDate:E,isFirstDay:h,isLastDay:p,segmentIndex:l,totalSegments:a,columnIndex:u};t.push(C),l++}}),t}static isAlldayHasMoreEvents(n,s,t=2){let r=!1;return n.forEach(i=>{const a=F.generateDateKey(i);(s.get(a)||[]).length>t&&(r=!0)}),r}static isMultiDayEvent(n){if(!(n!=null&&n.startTime)||!(n!=null&&n.endTime))return!1;const s=new Date(n.startTime),t=new Date(n.endTime);if(F.isSameDay(s,t))return!1;if(n.isAllDay)return!0;const r=F.normalizeDate(s),i=F.normalizeDate(t),a=Math.round((i.getTime()-r.getTime())/os);return a<=0?!1:a>=2?!0:!F.isMidnight(t)}static getAriaLabel(n){const{subject:s,startTime:t,endTime:r}=n,i=t?t.toString():"",a=r?r.toString():"";return`${s} Begin From ${i} Ends At ${a}`}static generateEventGuid(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}static getEventClassNames(n){const s=[];return n.isBlock?s.push("sf-block-appointment"):(s.push("sf-appointment"),n.isReadonly&&s.push("sf-read-only")),s}static getEventsMap(n,s){const t=new Map;return n.forEach(r=>{const i=F.generateDateKey(r);t.set(i,[])}),s.forEach(r=>{if(!r.startDate)return;const i=F.generateDateKey(r.startDate),a=t.get(i)||[];a&&(a.push(r),t.set(i,a))}),t}static getMaxEventsInCell(n,s){let t=0;return s.forEach(r=>{var l;const i=F.generateDateKey(r),a=(l=n.get(i))==null?void 0:l.filter(m=>!m.event.isBlock);t=Math.max(t,a==null?void 0:a.length)}),t}static processDayEvents(n,s){if(!(n!=null&&n.length)||!(s!=null&&s.length))return[];const t=ke.filterEventsByDateRange(s,n),r=[];let i=new Map;return n.forEach(l=>{const m=F.generateDateKey(l);i.set(m,[])}),F.sortByTimeAndSpan(t).forEach(l=>{if(!l.startTime||!l.endTime)return;const m=ke.getEventClassNames(l),u=F.normalizeDate(l.startTime),f=F.normalizeDate(l.endTime),h=ke.isMultiDayEvent(l),p=h?F.getDaysCount(l.startTime,l.endTime,l.isAllDay):1,g=l.isAllDay?!0:!F.isMidnight(l.endTime),E=l.isBlock?null:ke.findNonConflictingPosition(n,u,f,g,i);if(h)for(const C of n){const v=F.normalizeDate(C);if(!(v>=u&&(v<f||v.getTime()===f.getTime()&&g)))continue;l.isBlock||(i=dt.setIndexPosition(i,C,E));const w=v.getTime()===u.getTime(),y=v.getTime()===f.getTime()&&g,A=Math.floor((v.getTime()-u.getTime())/(1e3*60*60*24)),N=n.findIndex(S=>{const T=F.normalizeDate(S);return T>=u&&(T<f||T.getTime()===f.getTime()&&g)})===n.findIndex(S=>F.normalizeDate(S).getTime()===v.getTime()),V=w?new Date(l.startTime.getTime()):new Date(v.getFullYear(),v.getMonth(),v.getDate(),0,0,0),L=y?new Date(l.endTime.getTime()):new Date(v.getFullYear(),v.getMonth(),v.getDate()+1,0,0,0),D=`${C.toISOString()}-${l.id}`;r.push({event:l,startDate:V,endDate:L,isFirstDay:w,isLastDay:y,isFirstSegmentInRenderRange:N,segmentIndex:A,totalSegments:p,positionIndex:E,eventClasses:m,eventKey:D,isMonthEvent:!0})}else{l.isBlock||(i=dt.setIndexPosition(i,u,E));const C=`${u.toISOString()}-${l.id}`;r.push({event:l,startDate:l.startTime,endDate:l.endTime,positionIndex:E,eventClasses:m,eventKey:C,isMonthEvent:!0})}}),r.sort((l,m)=>{const u=l.positionIndex??0,f=m.positionIndex??0;return u-f})}static cloneEventPosition(n,s,t,r,i=!1,a,l){const m=F.normalizeDate(s.startDate),u=F.normalizeDate(s.endDate),{visibleDayCount:f}=F.getVisibleAndStartDays(s.week,m,u,s.event),h=Math.max(0,t*f-hn);let p,g,E;if(r){const v=n==null?void 0:n.querySelector(`.${d.ALL_DAY_ROW}`);p=v.querySelectorAll(`.${d.ALL_DAY_CELL}`).item(s.columnIndex),g=v.offsetTop}else p=fs(n,s.rowIndex,s.columnIndex),a?g=p.querySelector(`.${d.APPOINTMENT_WRAPPER}`).offsetTop:(g=p==null?void 0:p.offsetTop,E=Math.max(0,l.offsetHeight));const C={top:`${g}px`,width:`${h}px`,height:`${E}px`};if(i){const v=p.parentElement?Math.max(0,p.parentElement.clientWidth-(p.offsetLeft+p.offsetWidth)):0;C.insetInlineStart=`${v}px`}else C.insetInlineStart=`${p.offsetLeft}px`;return C}static splitEventByWeek(n,s){const t=new Date(s.startTime),r=new Date(s.endTime),i=F.normalizeDate(t),a=F.normalizeDate(r),l=[];return n.forEach((m,u)=>{const f=F.normalizeDate(m[0]),h=F.normalizeDate(m[m.length-1]),p=F.addDays(h,1);if(!(t<=p&&r>=f))return;const E=i>=f&&i<=h,C=a>=f&&a<=h,v=E?t:f,P=C?r:p,w=m.map(D=>F.normalizeDate(D).getTime()),y=F.normalizeDate(v).getTime();let A=w.indexOf(y);A===-1&&(A=0);const N=i.getTime()<f.getTime(),V=a.getTime()>h.getTime(),L={event:s,startDate:v,endDate:P,week:m,rowIndex:u,columnIndex:A,isOverflowLeft:N,isOverflowRight:V};l.push(L)}),l}static processCloneEvent(n,s,t,r,i,a,l,m=!1,u,f){const h=l?[s]:F.getRenderWeeks(s,r,i),p=this.splitEventByWeek(h,t),g=ke.isMultiDayEvent(t);return p.forEach(E=>{var C;E.eventStyle=this.cloneEventPosition(n,E,a,l,m,u,f),E.totalSegments=g?F.getDaysCount(E.startDate,E.endDate,(C=E.event)==null?void 0:C.isAllDay):1}),p}static processTimeSlotCloneEvent(n,s,t,r,i,a,l,m=!1){const u=this.splitEventByDay(t,s);return u.forEach(f=>{const h=dt.calculateTopPosition(f.startDate,r,i),p=dt.calculateHeight(f,r,i,a),g=fs(n,0,f.columnIndex);if(f.eventStyle={top:h,height:p,width:`${l}px`},m){const E=g.parentElement?Math.max(0,g.parentElement.clientWidth-(g.offsetLeft+g.offsetWidth)):0;f.eventStyle.right=`${E}px`}else f.eventStyle.left=`${g.offsetLeft}px`}),u}static getEventByGuid(n,s){if(!(!(n!=null&&n.length)||!s))return n.find(t=>(t==null?void 0:t.guid)===s)}}const wl=o=>{const{activeViewProps:n,renderDates:s}=o,{eventSettings:t,readOnly:r,onDataChangeStart:i,onDataChangeComplete:a,onError:l,onDataRequest:m}=n,[u,f]=e.useState(),h=e.useMemo(()=>(t==null?void 0:t.dataSource)instanceof Xn?t.dataSource:Array.isArray(t==null?void 0:t.dataSource)?new Xn(t.dataSource):new Xn([]),[t==null?void 0:t.dataSource]),p=e.useMemo(()=>(t==null?void 0:t.query)instanceof Vs?t==null?void 0:t.query:new Vs,[t==null?void 0:t.query]),g=(x,M)=>{const k=p.clone();return x&&M&&(k.addParams("StartDate",x.toISOString()),k.addParams("EndDate",M.toISOString())),k},E=x=>h.executeQuery(x),C=()=>t.query?t.query.clone().fromTable:null,v=x=>{const M={result:x.result,count:x.count};m&&m(M);const k=M.result,_=ke.mapEventData(k,t.fields);f(_)},P=x=>{l&&l(x)},w=e.useCallback(()=>{if(!s||s.length===0)return;const x=g(s[0],s[s.length-1]);E(x).then(k=>v(k)).catch(k=>P(k))},[s,E,g]),y=x=>(typeof x[t.fields.startTime]=="string"&&(x[t.fields.startTime]=F.getDateFromString(x[t.fields.startTime])),typeof x[t.fields.endTime]=="string"&&(x[t.fields.endTime]=F.getDateFromString(x[t.fields.endTime])),x),A=e.useCallback(x=>{var k;const M={cancel:!1,addedRecords:x.editParams.addedRecords,changedRecords:x.editParams.changedRecords,deletedRecords:x.editParams.deletedRecords};(k=h.dataSource)!=null&&k.offline?(a&&a(M),w()):x.promise.then(()=>{a&&a(M),w()}).catch(_=>{l&&l(_)})},[a,l,w,h]),N=e.useCallback(x=>{const M={addedRecords:[],changedRecords:[],deletedRecords:[]};let k;if(x.addedRecords instanceof Array){for(let Z of x.addedRecords){Z=y(Z);const ie=Ht({},Z,null,!0);M.addedRecords.push(ie)}k=h.saveChanges(M,t.fields.id,C(),g())}else{const Z=x.addedRecords;M.addedRecords.push(Z),k=h.insert(Z,C(),g())}A({cancel:!1,promise:k,editParams:M})},[h,t,C,g,A]),V=e.useCallback(x=>{let M;const k={addedRecords:[],changedRecords:[],deletedRecords:[]};x.deletedRecords.length>1?(k.deletedRecords=k.deletedRecords.concat(x.deletedRecords),M=h.saveChanges(k,t.fields.id,C(),g())):(k.deletedRecords.push(x.deletedRecords[0]),M=h.remove(t.fields.id,x.deletedRecords[0],C(),g())),A({cancel:!1,promise:M,editParams:k})},[h,t,C,g,A]),L=e.useCallback(x=>{let M;const k={addedRecords:[],changedRecords:[],deletedRecords:[]};if(x.changedRecords instanceof Array){for(let Z of x.changedRecords){Z=y(Z);const ie=Ht({},Z,null,!0);k.changedRecords.push(ie)}M=h.saveChanges(k,t.fields.id,C(),g())}else{const Z=x.changedRecords;k.changedRecords.push(Z),M=h.update(t.fields.id,Z,C(),g())}A({cancel:!1,promise:M,editParams:k})},[h,t,C,g,A,y]),D=e.useCallback(async x=>{if(t.allowAdding&&!r){const M=x instanceof Array?x:[x];if(M.length===0)return;const k={cancel:!1,addedRecords:M,changedRecords:[],deletedRecords:[]};i&&i(k),k.promise?k.promise.then(_=>{_&&N(k)}).catch(_=>{l&&l(_)}):N(k)}},[t,r,i,l,N]),S=e.useCallback(async x=>{if(t.allowDeleting&&!r){const M=x instanceof Array?x:[x];if(M.length===0)return;const k={cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:M};i&&i(k),k.promise?k.promise.then(_=>{_&&V(k)}).catch(_=>{l&&l(_)}):V(k)}},[t,r,i,l,V]),T=e.useCallback(async x=>{if(t.allowEditing&&!r){const M=x instanceof Array?x:[x];if(M.length===0)return;const k={cancel:!1,addedRecords:[],changedRecords:M,deletedRecords:[]};i&&i(k),k.promise?k.promise.then(_=>{_&&L(k)}).catch(_=>{l&&l(_)}):L(k)}},[t,r,i,l,L]);return e.useEffect(()=>{w()},[h,p,s]),{eventsData:u,addEvent:D,deleteEvent:S,saveEvent:T}},ms=(o,n="Close")=>c.jsx(nt,{className:`${d.POPUP_CLOSE} ${d.ROUND}`,onClick:o,"aria-label":n,icon:c.jsx($n,{}),color:Ct.Secondary,variant:Je.Standard},"close-btn"),Sl=({visible:o,target:n,schedulerElement:s,popupPosition:t,onClose:r,onOpen:i,children:a})=>{if(!o||!n)return null;const{dir:l}=$e();return De.isDevice?jt.createPortal(c.jsx("div",{className:`${d.CONTROL} ${d.POPUP_WRAPPER} ${d.MOBILE_POPUP}
                ${l==="rtl"?d.RTL:""}`,children:a}),document==null?void 0:document.body):c.jsx(Nt,{open:o,relateTo:n,position:t,collision:{X:ot.Flip,Y:ot.Fit},actionOnScroll:vr.None,autoReposition:!0,onOpen:i,onClose:r,className:`${d.POPUP_WRAPPER}`,viewPortElementRef:s,zIndex:1003,children:a})},Rl=(o,n)=>({show:()=>o(!0),hide:()=>o(!1),element:n.current}),bs=e.forwardRef((o,n)=>{const{onClose:s,onEditEvent:t,onMoreDetails:r}=o,{schedulerRef:i,eventSettings:a,showQuickInfoPopup:l,showDeleteAlert:m,view:u,readOnly:f,timeFormat:h}=Ve(),[p,g]=e.useState({}),[E,C]=e.useState({}),[v,P]=e.useState({}),[w,y]=e.useState(null),[A,N]=e.useState({X:"right",Y:"top"}),[V,L]=e.useState(!1),D=e.useRef(null),S=e.useRef(null),{visible:T,setVisible:x,target:M,setTarget:k,popupElement:_,schedulerElement:Z,handleClose:ie,closeAllPopups:he,handleRef:Y}=Qr(s),{locale:H}=$e();vs(_,T,ie);const{getString:I}=st(H||"en-US");e.useEffect(()=>{V&&(requestAnimationFrame(()=>{Q()}),L(!1))},[V]),e.useImperativeHandle(n,()=>({...Rl(x,_),handleCellClick:(O,q)=>{l&&(g(O),k(q),y("cell"),P({[a.fields.startTime]:O.startTime,[a.fields.endTime]:O.isAllDay?F.addDays(O.endTime,-1):O.endTime,[a.fields.isAllDay]:O.isAllDay}),oe(),x(!0))},handleEventClick:(O,q)=>{l&&(C(O),k(q),y("event"),oe(),x(!0),zn(q))},handleDelete:le}));const z=()=>{N((u==null?void 0:u.toLowerCase())==="day"?{X:"center",Y:"center"}:{X:"right",Y:"top"}),L(!0)},oe=()=>{(D||S)&&ie(),requestAnimationFrame(()=>{Q()})},Q=()=>{w==="cell"?D.current&&D.current.element&&D.current.element.focus():w==="event"&&S.current&&S.current.element&&S.current.element.focus()},R=e.useCallback(O=>{const q=O.value,me={...v,[a.fields.subject]:q};P(me)},[v]),J=e.useCallback(()=>{var q,me;const O={...v,[a.fields.id]:ke.generateEventGuid(),[a.fields.subject]:v[a.fields.subject]||I("newEvent")};(me=(q=i==null?void 0:i.current)==null?void 0:q.addEvent)==null||me.call(q,O),ie(),he()},[v,ie]),ne=e.useCallback(()=>{t(E),ie()},[E,ie,t]),se=e.useCallback(()=>{var q;const O={...p,[a.fields.subject]:(q=D==null?void 0:D.current)==null?void 0:q.value};r(O),ie()},[p,ie,r]),le=e.useCallback(()=>{const O=()=>{var q,me;w==="event"&&E&&((me=(q=i==null?void 0:i.current)==null?void 0:q.deleteEvent)==null||me.call(q,E)),ie(),he()};m==null||m(O),x(!1)},[w,E,ie,he,i,m]),we=O=>q=>{(q.key==="Enter"||q.key===" "&&q.target.type==="button")&&(q.preventDefault(),O())},Pe=()=>{var O;return c.jsxs("div",{ref:Y,className:`${d.QUICK_INFO_WRAPPER} ${d.CELL_POPUP}`,children:[c.jsx("div",{className:d.POPUP_HEADER,children:c.jsx("div",{className:`${d.POPUP_HEADER_WRAP} ${d.CONTENT_RIGHT}`,children:ms(ie,I("close"))})}),c.jsxs("div",{className:`${d.POPUP_CONTENT}`,children:[c.jsx("div",{className:d.POPUP_INPUT_WRAP,children:c.jsx(is,{ref:D,className:d.POPUP_CELL_SUBJECT,placeholder:I("addTitle"),onKeyDown:we(J),onChange:R,value:v[(O=a==null?void 0:a.fields)==null?void 0:O.subject]||"",size:_t.Large})}),p.startTime&&p.endTime&&c.jsxs("div",{className:`${d.CELL_TIME} ${d.DISPLAY_FLEX}`,children:[c.jsx(Gs,{}),c.jsx("span",{className:d.POPUP_TIME_TEXT,children:F.formatCellDateRange(new Date(p.startTime),new Date(p.endTime),H,h)})]})]}),c.jsxs("div",{className:`${d.POPUP_FOOTER} ${d.DISPLAY_FLEX}`,children:[c.jsx(nt,{className:d.POPUP_MORE_DETAILS,onClick:se,color:Ct.Primary,variant:Je.Standard,children:I("moreDetails")}),c.jsx(nt,{className:d.SAVE_EVENT,onClick:J,onKeyDown:we(J),color:Ct.Primary,variant:Je.Standard,children:I("save")})]})]})},ze=()=>c.jsxs("div",{ref:Y,className:`${d.QUICK_INFO_WRAPPER} ${d.EVENT_POPUP}`,children:[c.jsxs("div",{className:`${d.POPUP_HEADER} ${d.POPUP_CELL_HEADER} ${d.DISPLAY_FLEX}`,children:[c.jsx("div",{className:d.POPUP_EVENT_SUBJECT,children:E.subject||I("addTitle")}),c.jsx("div",{className:`${d.POPUP_HEADER_WRAP}`,children:ms(ie,I("close"))})]}),c.jsxs("div",{className:`${d.POPUP_CONTENT}`,children:[E.startTime&&E.endTime&&c.jsxs("div",{className:`${d.CELL_TIME} ${d.DISPLAY_FLEX}`,children:[c.jsx(Gs,{}),c.jsx("span",{className:d.POPUP_TIME_TEXT,children:F.formatPopupDateRange(E,H,h)})]}),E.location&&c.jsxs("div",{className:`${d.LOCATION} ${d.DISPLAY_FLEX}`,children:[c.jsx(si,{}),c.jsx("span",{className:d.POPUP_LOCATION_TEXT,children:E.location})]}),E.description&&c.jsxs("div",{className:`${d.DESCRIPTION} ${d.DISPLAY_FLEX}`,children:[c.jsx(oi,{}),c.jsx("span",{className:d.POPUP_DESCRIPTION_TEXT,children:E.description})]})]}),c.jsxs("div",{className:`${d.POPUP_FOOTER} ${d.DISPLAY_FLEX}`,children:[c.jsx(nt,{ref:S,className:d.EDIT_EVENT,disabled:!!(E!=null&&E.isReadonly)||f,onClick:ne,onKeyDown:we(ne),color:Ct.Primary,variant:Je.Standard,children:I("edit")}),c.jsx(nt,{className:d.DELETE_EVENT,disabled:!!(E!=null&&E.isReadonly)||f,onClick:le,onKeyDown:we(le),color:Ct.Primary,variant:Je.Standard,children:I("delete")})]})]});return c.jsx(Sl,{visible:T,target:M,popupPosition:A,schedulerElement:Z,onClose:ie,onOpen:z,children:w==="cell"?Pe():ze()})});bs.displayName="QuickInfoPopup";bs.__docgenInfo={description:"Combined QuickInfoPopup component that handles both cell and event popups",methods:[],displayName:"QuickInfoPopup"};function xl(){const{renderDates:o}=gt(),{showWeekNumber:n,workDays:s,weekRule:t,firstDayOfWeek:r}=Ve(),{locale:i}=$e(),[a,l]=e.useState(!0),[m,u]=e.useState(!1),f=o.length>0&&n?F.getWeekNumber(o[0],t,r):null,h=e.useCallback(E=>{u(E)},[]),p=e.useCallback(()=>{l(E=>!E)},[]);return{headerCells:o.map((E,C)=>{const v=F.isSameDay(E,new Date),P=F.isWeekend(E,s),w=ft(E,{type:"date",skeleton:"E",locale:i}),y=ft(E,{type:"date",skeleton:"d",locale:i}),A=["sf-header-cells",v?"sf-current-day":"",P?"sf-weekend":""].filter(Boolean).join(" ");return{date:E,dayName:w,dateNumber:y,isToday:v,isWeekend:P,className:A,key:`sf-header-cells-${C}`}}),isAllDayCollapsed:a,showAllDayToggle:m,weekNumber:f,toggleAllDayCollapse:p,handleMoreEventsChange:h}}function ws(){const{onViewChange:o,onSelectedDateChange:n,getAvailableViews:s}=Ve();return{handleDateClick:e.useCallback((r,i)=>{r.preventDefault(),r.stopPropagation(),pt.isDayViewAvailable(s)&&(n({value:i}),o({value:"Day"}))},[n,o])}}const Nl=()=>{const[o,n]=e.useState({date:null,events:[],visible:!1,target:null}),s=e.useRef(null),t=e.useRef(null),{locale:r}=$e(),{handleDateClick:i}=ws(),{quickPopupRef:a}=Ve();e.useEffect(()=>{o.target&&(t.current=o.target.closest(".sf-scheduler"))},[o.target]);const l=()=>{n({date:null,events:[],target:null,visible:!1})};Jr(l);const m=(h,p)=>{var g;(g=a.current)==null||g.handleEventClick(h,p)},u=(h,p)=>{p&&(i(h,o.date),l())},f=(h,p,g)=>{n({date:h,events:p,target:g,visible:!0})};return{date:o.date,events:o.events,visible:o.visible,target:o.target,popupElement:s,schedulerElement:t,locale:r,handleClose:l,handleEventClick:m,handleNavigation:u,open:f}},Ss=e.forwardRef((o,n)=>{const{date:s,events:t,visible:r,target:i,popupElement:a,schedulerElement:l,locale:m,handleClose:u,handleEventClick:f,handleNavigation:h,open:p}=Nl(),{eventTemplate:g,getAvailableViews:E}=Ve(),C=pt.isDayViewAvailable(E),{getString:v}=st(m||"en-US");e.useImperativeHandle(n,()=>({element:a.current,open:p})),vs(a,r,u);const P=e.useCallback(y=>g?g(y):c.jsx("div",{className:`${d.SUBJECT} ${d.ELLIPSIS}`,children:y.subject||v("addTitle")}),[g]),w=()=>c.jsxs("div",{ref:a,className:d.MORE_EVENT_POPUP,children:[c.jsxs("div",{className:d.MORE_EVENT_HEADER,children:[c.jsxs("div",{className:`${d.MORE_EVENT_DATE_HEADER} ${C?d.LINK:""}`,onClick:y=>h(y,C),tabIndex:0,children:[ft(s,{format:"E",calendar:"gregorian",locale:m})," ",ft(s,{format:"d",calendar:"gregorian",locale:m})]}),c.jsx("div",{className:"sf-more-event-close",children:ms(u,v("close"))})]}),c.jsx("div",{className:d.MORE_EVENT_CONTENT,children:t.map(y=>c.jsx("div",{className:d.APPOINTMENT,onClick:A=>f(y,A.currentTarget),onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&(A.preventDefault(),f(y,A.currentTarget))},"data-id":`Appointment_${y.id}`,"data-guid":y.guid,role:"button",tabIndex:0,children:P(y)},`eventId-${y.id}`))})]});return!r||!i?null:De.isDevice?jt.createPortal(c.jsx("div",{className:`${d.CONTROL} ${d.MORE_POPUP_WRAPPER} ${d.MOBILE_POPUP}`,children:w()}),document==null?void 0:document.body):c.jsx(Nt,{open:r,relateTo:i,position:{X:"right",Y:"top"},collision:{X:ot.Flip,Y:ot.Flip},autoReposition:!0,onClose:u,className:d.MORE_POPUP_WRAPPER,viewPortElementRef:l||null,zIndex:1e3,children:w()})});Ss.displayName="MorePopup";Ss.__docgenInfo={description:"MorePopup component for displaying additional events in month view",methods:[],displayName:"MorePopup"};var xt;(function(o){o.Left="left",o.Right="right",o.Up="up",o.Down="down"})(xt||(xt={}));const Al=(o,n)=>{const{schedulerRef:s,keyboardNavigation:t,handleTodayClick:r,eventSettings:i,readOnly:a,showDeleteAlert:l,showQuickInfoPopup:m,getAvailableViews:u,handleCurrentViewChange:f,handlePreviousClick:h,handleNextClick:p}=o,g=(L,D)=>{L.getAttribute("tabindex")!=="0"&&L.setAttribute("tabindex","0"),L.focus(),D.preventDefault()},E=L=>{var T;const D=(T=s.current)==null?void 0:T.element,S=D==null?void 0:D.querySelector(`.${d.CONTENT_TABLE} .${d.WORK_CELLS}`);S&&(g(S,L),S.classList.add(d.SELECTED_CELL))},C=L=>{r&&(r(),L.preventDefault())},v=L=>{h&&(h(),L.preventDefault(),L.stopPropagation())},P=L=>{p&&(p(),L.preventDefault(),L.stopPropagation())},w=L=>{const D=L.code.replace("Digit",""),S=parseInt(D,10)-1;if(isNaN(S)||S<0)return;const T=u==null?void 0:u();if(!(!T||T.length===0)&&S<T.length){const x=T[parseInt(S.toString(),10)];f&&(f(x.name),L.preventDefault(),L.stopPropagation())}},y=L=>{var T,x,M,k,_;let D=document==null?void 0:document.activeElement;const S=(T=s.current)==null?void 0:T.element;if((!D||!((x=D.classList)!=null&&x.contains(d.APPOINTMENT))||Tt(D,"."+d.POPUP_WRAPPER))&&(D=or(n||[],S).element),D&&D.classList.contains(d.APPOINTMENT)){if(zn(D),a||i&&!i.allowDeleting)return;if(m&&((k=(M=o.quickPopupRef)==null?void 0:M.current)!=null&&k.element))(_=o.quickPopupRef)==null||_.current.handleDelete();else if(l){const Z=or(n||[],S).data,ie=Array.isArray(Z)?Z:[Z];l(()=>{ie.forEach(Y=>{var H,I;(I=(H=s==null?void 0:s.current)==null?void 0:H.deleteEvent)==null||I.call(H,Y)})})}L.preventDefault()}},A=(L,D,S,T,x,M)=>{let k=D,_=S;switch(L){case xt.Left:{if(S>0)_=S-1;else if(D>0){k=D-1;const Z=x(k);_=Math.max(0,((Z==null?void 0:Z.length)??1)-1)}break}case xt.Right:{S<((M==null?void 0:M.length)??0)-1?_=S+1:D<T.length-1&&(k=D+1,_=0);break}case xt.Up:{if(D===0)return null;k=D-1;const Z=x(k);_=Math.min(S,Math.max(0,((Z==null?void 0:Z.length)??1)-1));break}case xt.Down:{if(D>=T.length-1)return null;k=D+1;const Z=x(k);_=Math.min(S,Math.max(0,((Z==null?void 0:Z.length)??1)-1));break}}return{nextRow:k,nextCol:_}},N=(L,D)=>{var I,z,oe;const S=(I=s.current)==null?void 0:I.element,T=(oe=(z=D.target).closest)==null?void 0:oe.call(z,"."+d.WORK_CELLS_ROW),x=S.querySelectorAll(`.${d.WORK_CELLS_ROW}`),M=Array.prototype.indexOf.call(x,T),k=Q=>{var R;return(R=x.item(Q))==null?void 0:R.querySelectorAll(`.${d.WORK_CELLS}`)},_=k(M),Z=Array.prototype.indexOf.call(_,D.target);let ie=M,he=Z;const Y=A(L,M,Z,x,k,_);if(!Y)return;ie=Y.nextRow,he=Y.nextCol;const H=fs(S,ie,he);H&&(Vn(H),D.preventDefault(),D.stopPropagation())};return L=>{var S,T,x,M;if(!t)return;const D=L.target;if(!(D&&["INPUT","TEXTAREA","SELECT"].indexOf(D.tagName)>-1&&D.closest(`.${d.POPUP_WRAPPER}`))){if(L.shiftKey&&L.altKey&&L.code==="KeyY"){C(L);return}if(L.altKey&&L.code>="Digit1"&&L.code<="Digit6"){w(L);return}switch(L.key){case"Home":{E(L);break}case"ArrowUp":{!L.ctrlKey&&!L.metaKey&&(S=D==null?void 0:D.closest)!=null&&S.call(D,"."+d.WORK_CELLS)&&N(xt.Up,L);break}case"ArrowDown":{!L.ctrlKey&&!L.metaKey&&(T=D==null?void 0:D.closest)!=null&&T.call(D,"."+d.WORK_CELLS)&&N(xt.Down,L);break}case"Delete":{y(L);break}case"ArrowLeft":{L.ctrlKey||L.metaKey?v(L):(x=D==null?void 0:D.closest)!=null&&x.call(D,"."+d.WORK_CELLS)&&N(xt.Left,L);break}case"ArrowRight":{L.ctrlKey||L.metaKey?P(L):(M=D==null?void 0:D.closest)!=null&&M.call(D,"."+d.WORK_CELLS)&&N(xt.Right,L);break}}}}},eo=e.createContext(void 0),Ll=({children:o})=>{const[n,s]=e.useState({visible:!1,guid:null,segments:[],isDayEvent:!1}),t=e.useCallback(a=>{s({visible:!0,guid:a==null?void 0:a.guid,segments:(a==null?void 0:a.segments)??[],isDayEvent:!!(a!=null&&a.isDayEvent)})},[]),r=e.useCallback(()=>{s({visible:!1,guid:null,segments:[],isDayEvent:!1})},[]),i=e.useMemo(()=>({...n,show:t,hide:r}),[n,t,r]);return c.jsx(eo.Provider,{value:i,children:o})},Rs=()=>{const o=e.useContext(eo);if(!o)throw new Error("useCloneEventContext must be used within CloneEventProvider");return o},kl=o=>{const{event:n,eventStyle:s,totalSegments:t,isOverflowLeft:r=!1,isOverflowRight:i=!1}=o,{timeFormat:a}=Ve(),{locale:l}=$e(),m=E=>ft(E??new Date,{type:"time",skeleton:"short",format:a,locale:l}),u=E=>c.jsx("div",{className:`sf-indicator sf-icons sf-${E}-icon`,children:E==="left"?c.jsx(Ts,{}):c.jsx(Cs,{})}),f=E=>c.jsx("div",{className:d.TIME,children:E}),g=t?(()=>{const{subject:E,isAllDay:C,startTime:v,endTime:P}=n,w=r?u("left"):!C&&f(m(v)),y=i?u("right"):!C&&f(m(P));return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[w,c.jsx("div",{className:`${d.SUBJECT} ${d.TEXT_CENTER} ${d.ELLIPSIS}`,children:E||"Add title"}),y]})})():(()=>{const{subject:E,startTime:C,isAllDay:v}=n;return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[!v&&f(m(C)),c.jsx("div",{className:`${d.SUBJECT}`,children:E||"Add title"})]})})();return c.jsx("div",{className:`${d.APPOINTMENT} ${d.EVENT_CLONE}`,style:s,children:g})},Ol=o=>{const{timeFormat:n,startHourTuple:s,endHourTuple:t}=Ve(),{renderDates:r}=gt(),{locale:i}=$e(),a=(f,h)=>{let p=n;p||(p=Ao({type:"time",skeleton:"short",format:n},!1));const g=ft(f,{type:"time",format:p,locale:i}),E=ft(h,{type:"time",format:p,locale:i});return`${g} - ${E}`},l=f=>{const{event:h}=f,p=h.startTime&&h.endTime?a(h.startTime,h.endTime):"";return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[c.jsx("div",{className:`${d.SUBJECT}`,children:h.subject||"Add title"}),h.location&&c.jsx("div",{className:`${d.EVENT_LOCATION} ${d.ELLIPSIS}`,children:h.location}),c.jsx("div",{className:`${d.EVENT_TIME} ${d.ELLIPSIS}`,children:p})]})},m=f=>{const{isOverflowTop:h,isOverflowBottom:p}=dt.getOverflowDirection(f,r,s,t);return c.jsxs(e.Fragment,{children:[h&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.UP_ARROW_ICON}`,children:c.jsx(wr,{})}),l(f),p&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.DOWN_ARROW_ICON}`,children:c.jsx(br,{})})]})},u=o.totalSegments&&o.totalSegments>1||s||t?m(o):l(o);return c.jsx("div",{className:`${d.APPOINTMENT} ${d.EVENT_CLONE}`,style:o.eventStyle,children:u})},Il=()=>{var r,i,a,l;const o=Rs(),{schedulerRef:n}=Ve();e.useEffect(()=>{const m=f=>{var g,E,C,v;const h=(f==null?void 0:f.detail)||{},p=(g=n.current)==null?void 0:g.element;p&&(h!=null&&h.container)&&(h.container===p||p.contains(h.container))&&o.show({guid:(E=h.payload)==null?void 0:E.guid,segments:(C=h.payload)==null?void 0:C.segments,isDayEvent:(v=h.payload)==null?void 0:v.isDayEvent})},u=f=>{var g;const h=(f==null?void 0:f.detail)||{},p=(g=n.current)==null?void 0:g.element;p&&(h!=null&&h.container)&&(h.container===p||p.contains(h.container))&&o.hide()};return window==null||window.addEventListener("showCloneEvent",m),window==null||window.addEventListener("hideCloneEvent",u),()=>{window==null||window.removeEventListener("showCloneEvent",m),window==null||window.removeEventListener("hideCloneEvent",u)}},[n,o]);const s=o.isDayEvent?(i=(r=n.current)==null?void 0:r.element)==null?void 0:i.querySelector(`.${d.DAY_CLONE_CONTAINER}`):(l=(a=n.current)==null?void 0:a.element)==null?void 0:l.querySelector(`.${d.TIME_SLOT_CLONE_CONTAINER}`),t=c.jsx(c.Fragment,{children:o.visible&&o.segments.map((m,u)=>o.isDayEvent?c.jsx(kl,{...m},`${m==null?void 0:m.guid}-${u}`):c.jsx(Ol,{...m},`${m==null?void 0:m.guid}-${u}`))});return s?jt.createPortal(t,s):null},Pl=o=>{const{visible:n,onConfirm:s,onCancel:t,title:r,message:i,confirmText:a,showCancel:l=!0}=o,{locale:m}=$e(),{getString:u}=st(m||"en-US");return c.jsx(mn,{header:r||u("deleteEvent"),open:n,style:{maxWidth:"400px"},animation:{effect:"Zoom",duration:400,delay:1},footer:c.jsxs(c.Fragment,{children:[c.jsx(nt,{onClick:s,variant:Je.Standard,children:a||u("delete")}),l&&c.jsx(nt,{onClick:t,variant:Je.Standard,children:u("cancel")})]}),onClose:t,children:c.jsx("div",{children:i||u("confirmDeleteMessage")})})},to=e.createContext(null),xs=()=>{const o=e.useContext(to);if(!o)throw new Error("useEditorContext must be used within EditorProvider");return o},Ml=({editorState:o,children:n})=>c.jsx(to.Provider,{value:o,children:n}),_l=o=>{const{locale:n}=$e(),{getString:s}=st(n||"en-US"),{schedulerRef:t,showDeleteAlert:r,eventSettings:i,eventOverlap:a,confirmationDialog:l,onEditorSubmit:m}=Ve(),{eventsData:u}=$t(),{data:f,action:h,originalData:p,startDateOnly:g,startTimeOnly:E,endDateOnly:C,endTimeOnly:v,slotDuration:P,validateRequiredFields:w}=xs(),y=e.useCallback(()=>{var x,M,k,_,Z,ie;let D,S;if(f!=null&&f.isAllDay){const he=g?F.normalizeDate(g):void 0,Y=C?F.normalizeDate(C):he;D=he,S=Y}else{const he=(Y,H)=>F.combineDateAndTime(Y,H);if(D=he(g,E)??(f==null?void 0:f.startTime),S=he(C,v)??(f==null?void 0:f.endTime),D&&S&&S<=D){const Y=new Date(D);Y.setMinutes(Y.getMinutes()+P),S=Y}}const T={[((x=i==null?void 0:i.fields)==null?void 0:x.subject)||"subject"]:(f==null?void 0:f.subject)||s("newEvent"),[((M=i==null?void 0:i.fields)==null?void 0:M.startTime)||"startTime"]:D,[((k=i==null?void 0:i.fields)==null?void 0:k.endTime)||"endTime"]:S,[((_=i==null?void 0:i.fields)==null?void 0:_.isAllDay)||"isAllDay"]:!!(f!=null&&f.isAllDay),[((Z=i==null?void 0:i.fields)==null?void 0:Z.location)||"location"]:(f==null?void 0:f.location)||"",[((ie=i==null?void 0:i.fields)==null?void 0:ie.description)||"description"]:(f==null?void 0:f.description)||""};if(h==="Edit"&&p){const he=new Set(["id","subject","startTime","endTime","isAllDay","location","description","isReadonly","isBlock"]),Y=new Set(Object.values(i==null?void 0:i.fields).filter(I=>{var z;return I!==((z=i==null?void 0:i.fields)==null?void 0:z.id)}));return{...Object.fromEntries(Object.entries(p).filter(([I])=>!he.has(I)&&!Y.has(I))),...T,[i.fields.id]:p.id}}else return{...T,[i.fields.id]:ke.generateEventGuid()}},[f==null?void 0:f.isAllDay,g,E,C,v,P,f==null?void 0:f.startTime,f==null?void 0:f.endTime,i,f==null?void 0:f.subject,f==null?void 0:f.location,f==null?void 0:f.description,h,p]),A=e.useCallback(D=>!a&&ke.checkEventOverlap(D,u,!1,i.fields)?(l==null||l.show({title:s("eventOverlap"),message:s("overlapAlert"),confirmText:s("ok"),showCancel:!1,onConfirm:()=>l.hide()}),!1):ke.isBlockRange(D,u,!1,i.fields)?(l==null||l.show({title:s("alert"),message:s("blockAlert"),confirmText:s("ok"),showCancel:!1,onConfirm:()=>l.hide()}),!1):!0,[a,u,i,l]),N=e.useCallback(()=>{var T,x,M,k;const D=w(s);if(D){l==null||l.show({title:s("alert"),message:D,confirmText:s("ok"),showCancel:!1,onConfirm:()=>l.hide()});return}let S=y();if(m){const _={data:S,cancel:!1,requestType:h==="Edit"?"Edit":"Add",originalData:h==="Edit"?p:void 0};if(m(_),_.cancel)return;S=_.data}A(S)&&(h==="Edit"&&p?(x=(T=t==null?void 0:t.current)==null?void 0:T.saveEvent)==null||x.call(T,S):(k=(M=t==null?void 0:t.current)==null?void 0:M.addEvent)==null||k.call(M,S),o())},[w,y,A,h,p,t,o,l]),V=e.useCallback(()=>{if(!p)return;const D=()=>{var S,T;(T=(S=t==null?void 0:t.current)==null?void 0:S.deleteEvent)==null||T.call(S,p)};o(),r==null||r(D)},[p,t,o,r]),L=e.useCallback(()=>o(),[o]);return{handleSave:N,handleDelete:V,handleCancel:L,buildEventData:y,validateEventConflicts:A}},lr=[{name:"subject",visible:!0,className:d.SUBJECT_CONTAINER},{name:"location",visible:!0,className:d.LOCATION_CONTAINER},{name:"startDate",visible:!0,className:d.START_DATE_CONTAINER},{name:"startTime",visible:!0,className:d.START_TIME_CONTAINER},{name:"endDate",visible:!0,className:d.END_DATE_CONTAINER},{name:"endTime",visible:!0,className:d.END_TIME_CONTAINER},{name:"isAllDay",visible:!0,className:d.ALL_DAY_CONTAINER},{name:"description",visible:!0,className:d.DESCRIPTION_CONTAINER},{name:"repeatMode",visible:!0,className:d.REPEAT_MODE}],Hl=[["subject","location"],["startDate","startTime"],["endDate","endTime"],["isAllDay"],["repeatMode"],["description"]],jl=["Never","Daily","Weekly","Monthy","Annually","Custom"],$l=({fields:o})=>{const{locale:n}=$e(),{getString:s}=st(n||"en-US"),{dateFormat:t,timeFormat:r,timeScale:i}=Ve(),{data:a,startDateOnly:l,startTimeOnly:m,endDateOnly:u,endTimeOnly:f,slotDuration:h,repeatModeValue:p,handleSubjectChange:g,handleLocationChange:E,handleDescriptionChange:C,handleStartDateChange:v,handleStartTimeChange:P,handleEndDateChange:w,handleEndTimeChange:y,handleIsAllDayChange:A,handleRepeatModeChange:N,setSlotDuration:V}=xs(),L=e.useMemo(()=>(i==null?void 0:i.interval)/(i==null?void 0:i.slotCount)||30,[i]);e.useEffect(()=>{V==null||V(L)},[L]);const D=(Q={})=>{const R=Q.props??{};return c.jsx(Rt,{name:"subject",children:c.jsx(is,{placeholder:R.placeholder??s("title"),value:R.value??(a==null?void 0:a.subject),onChange:R.onChange??g,className:R.className??d.EVENT_SUBJECT,labelMode:R.labelMode??"Always",...R})})},S=(Q={})=>{const R=Q.props??{};return c.jsx(Rt,{name:"location",children:c.jsx(is,{placeholder:R.placeholder??s("location"),value:R.value??(a==null?void 0:a.location),onChange:R.onChange??E,className:R.className??d.EVENT_LOCATION,labelMode:R.labelMode??"Always",...R})})},T=(Q={})=>{const R=Q.props??{};return c.jsx(Rt,{name:"startDate",children:c.jsx(Ws,{placeholder:R.placeholder??s("startDate"),className:R.className??d.EVENT_START_DATE,labelMode:R.labelMode??"Always",value:R.value||l,format:R.format??t,onChange:R.onChange??v,strictMode:R.strictMode??!0,...R})})},x=(Q={})=>{const R=Q.props??{};return c.jsx(Rt,{name:"startTime",children:c.jsx(ls,{placeholder:R.placeholder??s("startTime"),className:R.className??d.EVENT_START_TIME,labelMode:R.labelMode??"Always",step:R.step??h,value:R.value??m,format:R.format??r,onChange:R.onChange??P,strictMode:R.strictMode??!0,...R})})},M=(Q={})=>{const R=Q.props??{};return c.jsx(Rt,{name:"endDate",children:c.jsx(Ws,{placeholder:R.placeholder??s("endDate"),className:R.className??d.EVENT_END_DATE,labelMode:R.labelMode??"Always",value:R.value??u,format:R.format??t,onChange:R.onChange??w,strictMode:R.strictMode??!0,...R})})},k=(Q={})=>{const R=Q.props??{};return c.jsx(Rt,{name:"endTime",children:c.jsx(ls,{placeholder:R.placeholder??s("endTime"),className:R.className??d.EVENT_END_TIME,labelMode:R.labelMode??"Always",step:R.step??h,value:R.value??f,format:R.format??r,onChange:R.onChange??y,strictMode:R.strictMode??!0,...R})})},_=(Q={})=>{const R=Q.props??{};return c.jsx(Rt,{name:"allDay",children:c.jsx(ko,{label:R.label??s("allDay"),className:R.className??d.EVENT_ALLDAY,checked:R.checked??(a==null?void 0:a.isAllDay),onChange:R.onChange??A,...R})})},Z=(Q={})=>{const R=Q.props??{};return c.jsx(Rt,{name:"repeatMode",children:c.jsx(Lo,{dataSource:jl,value:R.value??p,placeholder:R.placeholder??s("repeatMode"),className:R.className??d.EDITOR_POPUP_REPEAT_MODE,labelMode:"Always",onChange:R.onChange??N,...R})})},ie=(Q={})=>{const R=Q.props??{};return c.jsx("div",{className:d.DESCRIPTION_ROW,children:c.jsx(Rt,{name:"description",children:c.jsx(ui,{placeholder:R.placeholder??s("description"),className:R.className??d.EVENT_DESCRIPTION,labelMode:R.labelMode??"Always",value:R.description??(a==null?void 0:a.description),width:R.width??"100%",resizeMode:R.resizeMode??Ot.Vertical,onChange:R.onChange??C,...R})})})},he={subject:D,location:S,startDate:T,startTime:x,endDate:M,endTime:k,isAllDay:_,repeatMode:Z,description:ie},Y=e.useMemo(()=>!o||o.length===0?lr:o.filter(Q=>Q.visible!==!1),[o]),H=e.useMemo(()=>{const Q=[],R=new Map(Y.map(J=>[J.name,J]));return Hl.forEach(J=>{const ne=J.map(se=>R.get(se)).filter(se=>!!se);ne.length>0&&Q.push(ne)}),Q},[Y]),I=Q=>{var R;return(R=lr.find(J=>J.name===Q))==null?void 0:R.className},z=e.useCallback(Q=>{const R=[d.EDITOR_FIELD_CONTAINER,I(Q.name),Q.className].filter(Boolean).join(" ");if(Q.component)return c.jsx("div",{className:R,children:Q.component},Q.name);const J=he[Q.name];return J?(Q.name==="startTime"||Q.name==="endTime")&&(a!=null&&a.isAllDay)?null:c.jsx("div",{className:R,children:J(Q)},Q.name):null},[a==null?void 0:a.isAllDay,s,he]);return!o||o.length===0?c.jsxs("div",{className:`${d.DIALOG_CONTENT} ${d.DISPLAY_FLEX}`,children:[c.jsxs("div",{className:`${d.TITLE_LOCATION_ROW} ${d.DISPLAY_FLEX} ${d.EDITOR_FIELDS_ROW}`,children:[c.jsx("div",{className:`${d.SUBJECT_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:D()}),c.jsx("div",{className:`${d.LOCATION_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:S()})]}),c.jsxs("div",{className:`${d.START_ROW} ${d.DISPLAY_FLEX} ${d.EDITOR_FIELDS_ROW}`,children:[c.jsx("div",{className:`${d.START_DATE_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:T()}),!(a!=null&&a.isAllDay)&&c.jsx("div",{className:`${d.START_TIME_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:x()})]}),c.jsxs("div",{className:`${d.END_ROW} ${d.DISPLAY_FLEX} ${d.EDITOR_FIELDS_ROW}`,children:[c.jsx("div",{className:`${d.END_DATE_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:M()}),!(a!=null&&a.isAllDay)&&c.jsx("div",{className:`${d.END_TIME_CONTAINER} ${d.EDITOR_FIELD_CONTAINER}`,children:k()})]}),c.jsx("div",{className:`${d.ALL_DAY_TIMEZONE_ROW} ${d.DISPLAY_FLEX}`,children:c.jsx("div",{className:`${d.ALL_DAY_CONTAINER}`,children:_()})}),c.jsx("div",{className:`${d.REPEAT_MODE_ROW} ${d.DISPLAY_FLEX}`,children:c.jsx("div",{className:`${d.REPEAT_MODE}`,children:Z()})}),c.jsx("div",{className:d.DESCRIPTION_ROW,children:c.jsx("div",{className:d.DESCRIPTION_CONTAINER,children:ie()})})]}):c.jsx("div",{className:`${d.DIALOG_CONTENT} ${d.DISPLAY_FLEX}`,children:H.map((Q,R)=>{const J=Q.map(z).filter(Boolean);return J.length?c.jsx("div",{className:`${d.EDITOR_FIELDS_ROW} ${d.DISPLAY_FLEX}`,children:J},`row-${R}`):null})})},Vl=({open:o,onClose:n,fields:s,action:t,children:r,dialogProps:i,className:a,style:l})=>{const{locale:m}=$e(),{getString:u}=st(m||"en-US"),{handleCancel:f,handleDelete:h,handleSave:p}=_l(n),{recurrenceOpen:g,closeRecurrenceEditor:E,baseStart:C}=xs(),v=Oo(C),P=e.useMemo(()=>({repeatMode:v.repeatModeValue,interval:v.repeatCountValue,endType:v.repeatTypeValue,endCount:v.repeatTypeValue==="Count"?v.countValue:void 0,until:v.repeatTypeValue==="Until"?v.untilDate:null,locale:m,startTime:v.baseDate,weekDays:v.repeatModeValue==="Week(s)"?v.selectedWeekDays:void 0,monthDay:(v.repeatModeValue==="Month(s)"||v.repeatModeValue==="Year(s)")&&v.dayWeekMode==="day"?v.monthDateValue:void 0,month:v.repeatModeValue==="Year(s)"?v.monthValue:void 0,weekNumber:(v.repeatModeValue==="Month(s)"||v.repeatModeValue==="Year(s)")&&v.dayWeekMode==="week"?v.weekNumberValue:void 0,weekDay:(v.repeatModeValue==="Month(s)"||v.repeatModeValue==="Year(s)")&&v.dayWeekMode==="week"?v.weekDayValue:void 0}),[v,m]),[w,y]=e.useState("");e.useEffect(()=>{g&&y(v.generateRule(P))},[g,C,P,v]);const A=e.useCallback(L=>{y(L)},[]),N=e.useMemo(()=>i!=null&&i.header?i.header:u(t==="Edit"?"editEvent":"newEvent"),[i==null?void 0:i.header,t,u]),V=e.useMemo(()=>i!=null&&i.footer?i==null?void 0:i.footer:c.jsxs("div",{className:d.DIALOG_FOOTER,children:[t==="Edit"&&c.jsx(nt,{className:d.DELETE_EVENT,variant:Je.Standard,onClick:h,children:u("delete")}),c.jsx(nt,{className:d.SAVE_EVENT,variant:Je.Standard,onClick:p,children:u("save")}),c.jsx(nt,{className:d.CANCEL_EVENT,variant:Je.Standard,onClick:f,children:u("cancel")})]}),[i==null?void 0:i.footer,t,h,p,f]);return c.jsxs(mn,{header:N,open:o,onClose:n,modal:(i==null?void 0:i.modal)??!0,style:{width:"500px",minHeight:"300px",...l},className:`${d.DIALOG} ${d.DIALOG_CONTAINER} ${a||""}`,footer:V,...i,children:[c.jsx("div",{className:d.FORM_CONTAINER,children:r||c.jsx(xr,{rules:{},children:c.jsx($l,{fields:s})})}),g&&c.jsx(mn,{header:u("repeat"),open:o,onClose:E,modal:!0,style:{width:"500px",minHeight:"300px"},className:`${d.DIALOG} ${d.DIALOG_CONTAINER}`,footer:V,children:c.jsx(Io,{value:w,onChange:A,baseStart:C})})]})};function Wl(o,n){switch(n.type){case"setField":return{...o,[n.key]:n.value};case"setMany":return{...o,...n.payload};default:return o}}const Fl=(o,n,s)=>{const[t,r]=e.useState(!1),i={subject:"",location:"",description:"",startTime:void 0,endTime:void 0,isAllDay:!1,action:"Add",originalData:void 0},[a,l]=e.useReducer(Wl,i),m=e.useCallback(j=>l({type:"setField",key:"subject",value:j}),[l]),u=e.useCallback(j=>l({type:"setField",key:"location",value:j}),[l]),f=e.useCallback(j=>l({type:"setField",key:"description",value:j}),[l]),h=e.useCallback(j=>l({type:"setField",key:"startTime",value:j}),[l]),p=e.useCallback(j=>l({type:"setField",key:"endTime",value:j}),[l]),g=e.useCallback(j=>l({type:"setField",key:"isAllDay",value:j}),[l]),E=e.useCallback(j=>l({type:"setField",key:"action",value:j}),[l]),C=e.useCallback(j=>l({type:"setField",key:"originalData",value:j}),[l]),{eventSettings:v}=Ve(),P=e.useCallback(j=>{if(o==null||o(j),j.cancel)return;s==null||s();const ae=j.isAllDay?F.normalizeDate(j.startTime):j.startTime,xe={startTime:ae,endTime:j.isAllDay?ae:j.endTime};l({type:"setMany",payload:{subject:"",location:"",description:"",isAllDay:j.isAllDay,action:"Add",startTime:xe.startTime,endTime:xe.endTime}}),r(!0)},[o,s]),w=e.useCallback(j=>{var W,X,de,ge,Se,Ee;if(n==null||n(j),j.cancel)return;s==null||s();const ae=!!((W=j==null?void 0:j.data)!=null&&W.isAllDay),xe=ae?F.normalizeDate(j.data.startTime):(X=j==null?void 0:j.data)==null?void 0:X.startTime,ce=ae?F.normalizeDate(j.data.endTime):(de=j==null?void 0:j.data)==null?void 0:de.endTime,ye={startTime:xe,endTime:ce};l({type:"setMany",payload:{action:"Edit",originalData:j==null?void 0:j.data,subject:((ge=j==null?void 0:j.data)==null?void 0:ge.subject)??"",location:((Se=j==null?void 0:j.data)==null?void 0:Se.location)??"",description:((Ee=j==null?void 0:j.data)==null?void 0:Ee.description)??"",isAllDay:ae,startTime:ye.startTime,endTime:ye.endTime}}),r(!0)},[n,s]),y=e.useCallback(()=>r(!1),[]),{subject:A,location:N,description:V,startTime:L,endTime:D,isAllDay:S,action:T,originalData:x}=a,[M,k]=e.useState(30),[_,Z]=e.useState(void 0),[ie,he]=e.useState(void 0),[Y,H]=e.useState(void 0),[I,z]=e.useState(void 0),[oe,Q]=e.useState(!1),[R,J]=e.useState("Never"),[ne,se]=e.useState(!1);e.useEffect(()=>{if(!t)return;const j=L?new Date(L):void 0,ae=D?new Date(D):void 0;Z(j?F.normalizeDate(j):void 0),H(ae?F.normalizeDate(ae):void 0),Q(!1),he(L?new Date(L):ie),z(D?new Date(D):I)},[t,L,D]);const le=e.useCallback((j,ae)=>F.combineDateAndTime(j,ae),[]),we=e.useCallback(j=>{Z(j==null?void 0:j.value)},[]),Pe=e.useCallback(j=>{const ae=j==null?void 0:j.value;if(he(ae),!ae)return;const xe=le(_,ae),ce=le(Y??_,I);if(!oe&&F.isMidnight(I)){const ye=new Date(ae);ye.setMinutes(ye.getMinutes()+M),z(ye)}else if(xe&&ce&&ce<=xe){const ye=new Date(ae);ye.setMinutes(ye.getMinutes()+M),z(ye)}},[_,Y,I,oe,M,le]),ze=e.useCallback(j=>{H(j==null?void 0:j.value)},[]),O=e.useCallback(j=>{const ae=j==null?void 0:j.value;z(ae),Q(!!ae)},[]),q=e.useCallback(j=>{if(g(j==null?void 0:j.value),T==="Add"&&(j==null?void 0:j.value)===!1)if(!oe&&F.isMidnight(I)){const ae=ie?new Date(ie):new Date(0);ie||ae.setHours(0,0,0,0),ae.setMinutes(ae.getMinutes()+M),z(ae)}else{const ae=le(_,ie),xe=le(Y??_,I);if(ae&&xe&&xe<=ae){const ce=ie?new Date(ie):new Date(xe);ce.setMinutes(ce.getMinutes()+M),z(ce)}}},[T,oe,I,ie,M,le,_,Y]),me=e.useCallback(j=>{m(j.value)},[]),ee=e.useCallback(j=>{u(j.value)},[]),fe=e.useCallback(()=>{se(!0)},[]),B=e.useCallback(()=>{se(!1)},[]),K=e.useCallback(j=>{const ae=j==null?void 0:j.value;J(ae),ae==="Custom"&&fe()},[J,fe]),G=e.useCallback(j=>{f(j==null?void 0:j.value)},[]),b=e.useCallback(j=>{E("Edit"),m(j==null?void 0:j.subject),u(j==null?void 0:j.location),f(j==null?void 0:j.description),h(j==null?void 0:j.startTime),p(j==null?void 0:j.endTime),g(!!(j!=null&&j.isAllDay)),C(j),r(!0)},[]),U=e.useCallback(j=>{if(E("Add"),m(j[v.fields.subject]??""),u(""),f(""),C(void 0),j!=null&&j.isAllDay){const ae=F.normalizeDate(j.startTime);h(ae),p(ae)}else h(j==null?void 0:j.startTime),p(j==null?void 0:j.endTime);g(!!(j!=null&&j.isAllDay)),r(!0)},[]),te=e.useCallback(j=>{if(!_||!Y)return j("invalidDateValue");if(!S&&(!ie||!I))return j("invalidTimeValue");let ae,xe;return S?(ae=_?F.normalizeDate(_):void 0,xe=Y?F.normalizeDate(Y):void 0):(ae=F.combineDateAndTime(_,ie),xe=F.combineDateAndTime(Y,I)),ae&&xe&&xe<ae?j("invalidDateRange"):null},[_,ie,Y,I,S]),ue=e.useMemo(()=>S?_?F.normalizeDate(_):L:((ae,xe)=>F.combineDateAndTime(ae,xe))(_,ie)??L,[S,_,ie,L]);return{open:t,data:{subject:A,location:N,startTime:L,endTime:D,isAllDay:S,description:V},action:T,originalData:x,setOpen:r,onCellDoubleClickHandler:P,onEventDoubleClickHandler:w,onClose:y,startDateOnly:_,startTimeOnly:ie,endDateOnly:Y,endTimeOnly:I,slotDuration:M,baseStart:ue,repeatModeValue:R,recurrenceOpen:ne,setSlotDuration:k,handleSubjectChange:me,handleLocationChange:ee,handleDescriptionChange:G,handleStartDateChange:we,handleStartTimeChange:Pe,handleEndDateChange:ze,handleEndTimeChange:O,handleIsAllDayChange:q,handleRepeatModeChange:K,onEditEvent:b,onMoreDetails:U,closeRecurrenceEditor:B,validateRequiredFields:te}},Bl=()=>{const o=e.useRef({visible:!1}),n=e.useRef(null),s=e.useCallback(r=>{var i;o.current={...r,visible:!0},(i=n.current)==null||i.call(n,o.current)},[]),t=e.useCallback(()=>{var r;o.current.visible=!1,(r=n.current)==null||r.call(n,{...o.current})},[]);return{show:s,hide:t,setStateUpdater:r=>{n.current=r}}},zl=({children:o,onTooltipOpen:n,content:s,...t})=>{const[r,i]=e.useState(null),{locale:a}=$e(),{getString:l}=st(a),{timeFormat:m}=Ve(),{eventsData:u}=$t(),f=e.useRef(u);e.useEffect(()=>{f.current=u},[u]);const h=g=>{const E=g.closest("."+d.APPOINTMENT);if(!E)return!1;const C=E==null?void 0:E.getAttribute("data-guid"),v=ke.getEventByGuid(f.current,C),P={cancel:!1,data:v};if(n==null||n(P),P.cancel)return!1;if(typeof s=="function"){const w=s({data:v});i(w)}else if(s!=null)i(s);else{const w=p(v);i(w)}return!0},p=e.useCallback(g=>{const E=g.subject??g.description??l("addTitle"),C=F.formatStartAndEndDateRange(g.startTime,g.endTime,a),v=F.formatTimeDisplay(g,a,m);return c.jsxs("div",{className:d.SCHEDULER_TOOLTIP_CONTENT,children:[c.jsx("div",{className:d.SCHEDULER_TOOLTIP_SUBJECT,children:E}),C?c.jsx("div",{className:d.SCHEDULER_TOOLTIP_DATE,children:C}):null,!g.isAllDay&&v?c.jsx("div",{className:d.SCHEDULER_TOOLTIP_TIME,children:v}):null]})},[l,m,a]);return c.jsx(Nr,{onFilterTarget:h,content:c.jsx(c.Fragment,{children:r}),...t,children:o})},no=e.forwardRef((o,n)=>{const{height:s,width:t,selectedDate:r,defaultSelectedDate:i,view:a,defaultView:l,eventSettings:m,timeScale:u,workHours:f,startHour:h,endHour:p,showWeekend:g,firstDayOfWeek:E,workDays:C,showTimeIndicator:v,showWeekNumber:P,dateFormat:w,timeFormat:y,dateHeader:A,cell:N,headerIndent:V,eventOverlap:L,rowAutoHeight:D,readOnly:S,showQuickInfoPopup:T,header:x,keyboardNavigation:M,onDataRequest:k,onSelectedDateChange:_,onViewChange:Z,onCellClick:ie,onCellDoubleClick:he,onEventClick:Y,onEventDoubleClick:H,onDataChangeStart:I,onDataChangeComplete:z,eventDrag:oe,eventResize:Q,onResizeStart:R,onResizing:J,onResizeStop:ne,onDragStart:se,onDrag:le,onDragStop:we,onError:Pe,onMoreEventsClick:ze,eventTooltip:O,onTooltipOpen:q,onEditorSubmit:me,editor:ee,children:fe,className:B,weekRule:K,...G}=Dr(Er,o),b=e.useRef(null),U=e.useRef(null),te=e.useRef(null),ue=Bl(),[Ce,j]=e.useState({visible:!1});e.useEffect(()=>{ue.setStateUpdater(j)},[]);const{cellEditRef:ae,handleClose:xe,onCellClickHandler:ce,onEventClickHandler:ye}=Qr(ie,Y),W=Fl(he,H,xe),{open:X,data:de,originalData:ge,action:Se,onClose:Ee,onCellDoubleClickHandler:Ne,onEventDoubleClickHandler:Re,onMoreDetails:Me,onEditEvent:be}=W,{locale:_e}=$e(),{getString:He}=st(_e||"en-US"),Ie=e.useMemo(()=>pt.getViewsInfo(fe,He),[fe]),{classNames:et,selectedDate:it,view:rt,renderDates:mt,activeViewProps:lt,dateRangeText:Et,showCalendar:Xt,calendarView:gn,handleViewButtonClick:En,handlePreviousClick:qt,handleNextClick:Tn,handleTodayClick:Gt,handleDateDropdownClick:Cn,handleCalendarChange:vn,renderCurrentView:yn}=Ai({className:B,selectedDate:r,defaultSelectedDate:i,view:a,defaultView:l,eventSettings:m,timeScale:u,workHours:f,startHour:h,endHour:p,showWeekend:g,firstDayOfWeek:E,workDays:C,showTimeIndicator:v,showWeekNumber:P,dateFormat:w,timeFormat:y,dateHeader:A,cell:N,headerIndent:V,editor:ee,eventOverlap:L,showQuickInfoPopup:T,header:x,keyboardNavigation:M,rowAutoHeight:D,readOnly:S,onEditorSubmit:me,onDataRequest:k,onSelectedDateChange:_,onViewChange:Z,onCellClick:ce,onCellDoubleClick:Ne,onEventClick:ye,onEventDoubleClick:Re,onMoreEventsClick:ze,onDataChangeStart:I,onDataChangeComplete:z,eventDrag:oe,eventResize:Q,onResizeStart:R,onResizing:J,onResizeStop:ne,onDragStart:se,onDrag:le,onDragStop:we,viewComponents:Ie,weekRule:K}),{eventsData:Pt,addEvent:vt,deleteEvent:Zt,saveEvent:Qt}=wl({activeViewProps:lt,renderDates:mt}),Jt=(Fe,Qe)=>{var nn,kt;if((Sn=>!!Sn&&"guid"in Sn)(Fe)){Qe&&((nn=ae.current)==null||nn.handleEventClick(Fe,Qe));return}Fe&&(Fe!=null&&Fe.element)&&((kt=ae.current)==null||kt.handleCellClick(Fe,Fe==null?void 0:Fe.element))},Wt=(Fe,Qe,Lt)=>{Fe==="Add"?Me(Qe):Fe==="Edit"&&be(Qe)},Ft=Fe=>{var kt;const Qe=Fe&&"current"in Fe?Fe==null?void 0:Fe.current:Fe,Lt=(kt=Qe==null?void 0:Qe.getAttribute)==null?void 0:kt.call(Qe,"data-guid");return ke.getEventByGuid(Pt,Lt)??null},Dn=Fe=>{const Qe=bl(Fe,u);return{startTime:Qe.startTime,endTime:Qe.endTime,isAllDay:Qe.isAllDay,element:Qe.element}},bn=lt.editor??ee??Vl,yt=e.useMemo(()=>({element:b.current,addEvent:vt,deleteEvent:Zt,saveEvent:Qt,openEditor:Wt,closeEditor:()=>{Ee()},getEventDetails:Ft,getCellDetails:Dn,closeQuickInfoPopup:()=>{var Fe;(Fe=ae.current)==null||Fe.hide()},openQuickInfoPopup:Jt}),[vt,Zt,Qt,b.current,Pt,Ee]);e.useEffect(()=>{U.current=yt},[yt]),e.useEffect(()=>{At("scheduler")},[]),e.useImperativeHandle(n,()=>yt,[yt]);const en={...lt,handleCalendarChange:vn,handleViewButtonClick:En,handlePreviousClick:qt,handleNextClick:Tn,handleTodayClick:Gt,schedulerRef:U,morePopupRef:te,quickPopupRef:ae,keyboardNavigation:M,confirmationDialog:ue,showDeleteAlert:Fe=>{ue==null||ue.show({title:He("deleteEvent"),message:He("confirmDeleteMessage"),confirmText:He("delete"),showCancel:!0,onConfirm:()=>{Fe(),ue.hide()}})}},at=O===!0||typeof O=="object",wn=typeof O=="object"?O:void 0,tn=c.jsxs(c.Fragment,{children:[c.jsx("div",{className:d.TABLE_CONTAINER,children:c.jsx("div",{className:d.TABLE_WRAP,children:c.jsxs(Ll,{children:[c.jsx(Il,{}),yn()]})})}),c.jsx(Ss,{ref:te})]});return c.jsx("div",{ref:b,className:et,style:{height:s,width:t},tabIndex:0,role:"application","aria-label":"Scheduler",onKeyDown:Al(en,Pt),...G,children:c.jsx(Po.Provider,{value:en,children:c.jsx(gs.Provider,{value:{renderDates:mt},children:c.jsxs(Es.Provider,{value:{eventsData:Pt},children:[x!==!1&&c.jsx(vl,{view:rt,availableViews:Ie,onViewButtonClick:En,onPreviousClick:qt,onNextClick:Tn,onTodayClick:Gt,onDateDropdownClick:Cn,dateRangeText:Et,showCalendar:Xt,calendarView:gn,selectedDate:it,firstDayOfWeek:lt.firstDayOfWeek,handleCalendarChange:vn,renderDates:mt,customizeHeader:typeof x=="function"?x:void 0}),at?c.jsx(zl,{...wn||{},onTooltipOpen:q,children:tn}):tn,c.jsx(bs,{ref:ae,onClose:xe,onEditEvent:be,onMoreDetails:Me}),c.jsx(Ml,{editorState:W,children:c.jsx(bn,{open:X,onClose:Ee,data:de,action:Se,originalData:ge})}),c.jsx(Pl,{visible:Ce.visible,title:Ce.title,message:Ce.message,confirmText:Ce.confirmText,showCancel:Ce.showCancel,onConfirm:Ce.onConfirm||(()=>ue.hide()),onCancel:ue.hide})]})})})})});no.displayName="Scheduler";no.__docgenInfo={description:`The React Scheduler component that displays a list of events scheduled at specific dates and times, helping users plan and manage their schedule effectively.

\`\`\`typescript
import { Scheduler, DayView, WeekView, WorkWeekView, MonthView } from '@syncfusion/react-scheduler';

<Scheduler>
  <DayView />
  <WeekView />
  <WorkWeekView />
  <MonthView />
</Scheduler>
\`\`\``,methods:[],displayName:"Scheduler"};const Ul=o=>c.jsx(c.Fragment,{children:o.children});Ul.displayName="SchedulerHeader";const Yl=({showTimeIndicator:o,startHour:n,endHour:s,renderDates:t,onPositionUpdate:r})=>{const[i,a]=e.useState(0),[l,m]=e.useState(new Date),[u,f]=e.useState(!1),[h,p]=e.useState(!1),g=e.useRef(null),E=t.length>1,C=!!(t&&t.length>0),v=e.useCallback(()=>{const A=new Date,N=F.getStartEndHours(n),V=F.getStartEndHours(s),L=A.getHours()*Xe+A.getMinutes(),D=N.getHours()*Xe+N.getMinutes(),S=V.getHours()===0&&V.getMinutes()===0?Fs*Xe:V.getHours()*Xe+V.getMinutes();return L>=D&&L<=S},[n,s]),P=e.useCallback(()=>{const A=new Date,N=F.getStartEndHours(n),V=F.getStartEndHours(s),L=(A.getHours()-N.getHours())*Xe+(A.getMinutes()-N.getMinutes()),D=N.getHours()*Xe+N.getMinutes(),T=(V.getHours()===0&&V.getMinutes()===0?Fs*Xe:V.getHours()*Xe+V.getMinutes())-D,x=L/T*100;return Math.max(0,Math.min(100,x))},[n,s]),w=e.useCallback(()=>{const A=new Date,N=v();if(Math.abs(A.getTime()-l.getTime())>=fn&&m(A),h!==N&&p(N),u!==(N&&o)&&f(N&&o),!N)return;const V=P();Math.abs(V-i)>.1&&a(V)},[P,l,u,h,i,o,v]);e.useEffect(()=>{if(o)return w(),g.current=setInterval(()=>{w()},fn),()=>{g.current&&(clearInterval(g.current),g.current=null)}},[o,w]);const y=e.useCallback(()=>{const A=new Date,N=(t==null?void 0:t.length)>0&&t.some(L=>F.isSameDay(L,A));if(!C||!N)return{isMultiDayView:E,hasValidRenderDates:C,columns:[],isCurrentDayRendered:!1};if(!E){const L=t.length===1&&F.isSameDay(t[0],A);return{isMultiDayView:E,hasValidRenderDates:C,columns:[],isCurrentDayRendered:L}}const V=t.map((L,D)=>{const S=F.isSameDay(L,A),T=L<A&&!F.isSameDay(L,A);if(L>A&&!F.isSameDay(L,A)||!S&&!T)return null;const M=100/t.length,k=D*M;return{key:L.getTime(),isCurrentDay:S,leftPosition:k,columnWidth:M}}).filter(Boolean);return{isMultiDayView:E,hasValidRenderDates:C,columns:V,isCurrentDayRendered:N}},[E,C,t]);return e.useEffect(()=>{r&&r(i,u&&h&&y().isCurrentDayRendered)},[i,u,h,r,y]),{position:i,currentTime:l,isVisible:u,isWithinBounds:h,multiDayViewInfo:y(),updatePosition:w}},Kl=o=>{const{onPositionUpdate:n}=o,{renderDates:s}=gt(),{showTimeIndicator:t,startHour:r,endHour:i}=Ve(),{position:a,isVisible:l,isWithinBounds:m,multiDayViewInfo:u}=Yl({showTimeIndicator:t,startHour:r,endHour:i,renderDates:s,onPositionUpdate:n});return!l||!m||!u.isCurrentDayRendered?null:!u.isMultiDayView||!u.hasValidRenderDates?c.jsx("div",{className:d.CURRENT_TIMELINE,style:{top:`${a}%`}}):c.jsx(c.Fragment,{children:u.columns.map(f=>c.jsx("div",{className:f.isCurrentDay?d.CURRENT_TIMELINE:d.PREVIOUS_TIMELINE,style:{top:`${a}%`,width:`${f.columnWidth}%`,insetInlineStart:`${f.leftPosition}%`}},f.key))})},Xl=(o,n,s,t)=>{let r=0,i=!1;for(;!i;){i=!0;for(const a of o){const l=F.normalizeDate(a);if(l>=n&&l<=s){const m=F.generateDateKey(a);if((t.get(m)||[]).findIndex((h,p)=>p===r&&h)!==-1){i=!1,r++;break}}}}return r},ql=(o,n=2)=>{const{eventSettings:s}=Ve(),{renderDates:t}=gt(),{eventsData:r}=$t(),i=e.useMemo(()=>{if(!(t!=null&&t.length)||!(r!=null&&r.length))return[];const g=r.filter(y=>!y.startTime||!y.endTime||y.isBlock?!1:y.isAllDay&&!ke.isMultiDayEvent(y)),E=r.filter(y=>!y.startTime||!y.endTime?!1:s.spannedEventPlacement==="AllDayRow"?!y.isAllDay&&F.isLessthan24Hours(y.startTime,y.endTime)?!1:ke.isMultiDayEvent(y):y.isAllDay&&ke.isMultiDayEvent(y));let C=new Map;t.forEach(y=>{const A=F.generateDateKey(y);C.set(A,[])});const v=[],P=[...g,...E];return F.sortByTimeAndSpan(P).forEach(y=>{if(!y.startTime||!y.endTime)return;const A=F.normalizeDate(y.startTime),N=F.normalizeDate(y.endTime),V=ke.isMultiDayEvent(y),L=V?F.getDaysCount(A,N)+1:1,D=Xl(t,A,N,C),S=["sf-appointment"];if((y.isAllDay||L>1)&&S.push("sf-all-day-appointment"),y.isReadonly&&S.push("sf-read-only"),V)for(const T of t){const x=F.normalizeDate(T);if(x>=A&&x<=N){C=dt.setIndexPosition(C,T,D);const M=x.getTime()===A.getTime(),k=x.getTime()===N.getTime(),_=Math.floor((x.getTime()-A.getTime())/(1e3*60*60*24)),Z=t.findIndex(H=>{const I=F.normalizeDate(H);return I>=A&&I<=N})===t.findIndex(H=>F.normalizeDate(H).getTime()===x.getTime()),ie=M?new Date(y.startTime.getTime()):new Date(x.getFullYear(),x.getMonth(),x.getDate(),0,0,0),he=k?new Date(y.endTime.getTime()):new Date(x.getFullYear(),x.getMonth(),x.getDate(),0,0,0),Y=`${T.toISOString()}-${y.id}`;v.push({event:y,startDate:ie,endDate:he,isFirstDay:M,isLastDay:k,isFirstSegmentInRenderRange:Z,segmentIndex:_,totalSegments:L,positionIndex:D,eventClasses:S,eventKey:Y})}}else{C=dt.setIndexPosition(C,A,D);const T=`${A.toISOString()}-${y.id}`;v.push({event:y,startDate:y.startTime,endDate:y.endTime,positionIndex:D,eventClasses:S,eventKey:T})}}),v.sort((y,A)=>{const N=y.positionIndex??0,V=A.positionIndex??0;return N-V})},[r,t,s.spannedEventPlacement,s.fields]),a=e.useMemo(()=>ke.getEventsMap(t,i),[t,i]),l=e.useMemo(()=>ke.isAlldayHasMoreEvents(t,a,n),[a,n,t]),m=e.useMemo(()=>ke.getMaxEventsInCell(a,t),[a,t]),u=e.useMemo(()=>o?m>n?n-1:n:1/0,[o,m,n]),f=e.useCallback(()=>{const g=ke.getMaxEventsInCell(a,t);return g>3&&!o?g*(Wn+hn):Math.min(3,g)*(Wn+hn)},[o,a,t]),h=e.useCallback(g=>[...a.get(g)||[]].sort((v,P)=>(v.positionIndex??0)-(P.positionIndex??0)).slice(0,u),[a,u]),p=e.useCallback(g=>{const E=a.get(g)||[];return Math.max(0,E.length-u)},[a,u]);return{allDayRowEvents:i,eventsByDate:a,hasEventsExceedingMaxCount:l,maxEventsInAnyColumn:m,visibleEventLimit:u,calculateHeight:f,getVisibleEvents:h,getHiddenEventCount:p}},Gl=o=>{const{eventInfo:n,renderDates:s}=o,t=e.useMemo(()=>({...n.event}),[n]),r=e.useMemo(()=>dt.getOverflowDirection(n,s),[n.event.startTime,n.event.endTime,s,n]),i=e.useMemo(()=>dt.calculatePositionStyles(n,s),[n,s]);return{processedEvent:t,overflowDirection:r,positionStyle:i}};class It{constructor(){Object.defineProperty(this,"isActionPerformed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"removeDocListenersRef",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cellWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scrollInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slotInterval",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isMonthView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isAllDaySource",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"cloneRef",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"eventsData",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"eventSettings",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"minScrollSpeed",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"minScrollThreshold",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"enableScroll",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"currentCell",{enumerable:!0,configurable:!0,writable:!0,value:null})}performAutoScrolling(n,s){var A,N;const{clientX:t,clientY:r}=this.getPointerCoordinates(n);if(t==null||r==null)return;const i=s==null?void 0:s.closest(`.${d.CONTENT_WRAP}, .${d.CONTENT_TABLE}, .${d.WORK_CELLS_CONTAINER}`),a=(A=s==null?void 0:s.closest(`.${d.SCHEDULER}`))==null?void 0:A.querySelector(`.${d.MAIN_SCROLL_CONTAINER}`),l=[i,a].filter(Boolean);if(l.length===0)return;const m=l.find(V=>V.scrollHeight>V.clientHeight)||null,u=l.find(V=>V.scrollWidth>V.clientWidth)||null;if(!m&&!u)return;const f=((N=m||u)==null?void 0:N.closest(`.${d.SCHEDULER}`))||(s==null?void 0:s.closest(`.${d.SCHEDULER}`)),h=f==null?void 0:f.querySelector(`.${d.STICKY_HEADER}, .${d.HEADER_SECTION}, .${d.HEADER_ROW}`),p=m?m.getBoundingClientRect():null,g=u?u.getBoundingClientRect():null,E=(h==null?void 0:h.getBoundingClientRect().bottom)??(p?p.top:g?g.top:0);this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);const C=(V,L=this.minScrollThreshold)=>{if(V>L||V<0)return 0;const D=Math.floor((1-V/L)*this.minScrollSpeed);return isFinite(D)?D:0},v=()=>{let V=0;if(m&&p){const L=Math.max(0,m.scrollHeight-m.clientHeight),D=Math.max(0,r-E),S=Math.max(0,u?u.offsetHeight-u.clientHeight:0,m?m.offsetHeight-m.clientHeight:0),T=p.bottom-S,x=Math.max(0,T-r),M=this.minScrollThreshold+S,k=m.scrollTop<=0,_=Math.ceil(m.scrollTop)>=L;D<this.minScrollThreshold&&!k?V=-C(D):x<M&&!_&&(V=C(x,M))}return V},P=()=>{let V=0;if(u&&g){const L=Math.max(0,u.scrollWidth-u.clientWidth),D=Math.max(0,t-g.left),S=Math.max(0,g.right-t),T=u.scrollLeft<=0,x=u.scrollLeft>=L;D<this.minScrollThreshold&&!T?V=-C(D):S<this.minScrollThreshold&&!x&&(V=C(S))}return V},w=v(),y=P();if(w!==0||y!==0){const V=()=>{let L=!1;if(!(!this.currentCell&&It.currentActionName!=="resize")&&!this.isAllDaySource){if(m&&w!==0){const D=Math.max(0,m.scrollHeight-m.clientHeight),S=Math.max(0,Math.min(D,m.scrollTop+w));S!==m.scrollTop&&(m.scrollTop=S,L=!0)}if(u&&y!==0){const D=Math.max(0,u.scrollWidth-u.clientWidth),S=Math.max(0,Math.min(D,u.scrollLeft+y));S!==u.scrollLeft&&(u.scrollLeft=S,L=!0)}if(!L){this.scrollInterval!=null&&(cancelAnimationFrame(this.scrollInterval),this.scrollInterval=null);return}this.scrollInterval=requestAnimationFrame(V)}};this.scrollInterval=requestAnimationFrame(V)}}getPointerCoordinates(n){if(!n)return{clientX:null,clientY:null};let s=null,t=null;return n.touches&&n.touches.length>0?(s=n.touches[0].clientX,t=n.touches[0].clientY):n.changedTouches&&n.changedTouches.length>0?(s=n.changedTouches[0].clientX,t=n.changedTouches[0].clientY):n.clientX!=null&&n.clientY!=null&&(s=n.clientX,t=n.clientY),{clientX:s,clientY:t}}getContentWrap(n){return n?n.closest(`.${d.CONTENT_WRAP}, .${d.CONTENT_TABLE}, .${d.WORK_CELLS_CONTAINER}, .${d.DATE_HEADER_CONTAINER}`):null}getCurrentTargetDate(n,s){var a,l;if(!n&&!s)return null;let t=null;const r=(a=n||s)==null?void 0:a.closest(`.${d.SCHEDULER}`),i=s==null?void 0:s.closest(`.${d.ALL_DAY_ROW}`);if(r&&i&&s){const u=Array.from(i.querySelectorAll(`.${d.ALL_DAY_CELL}`)).indexOf(s),f=r.querySelector(`.${d.CONTENT_TABLE}, .${d.WORK_CELLS_ROW}`),p=(l=(f?Array.from(f.querySelectorAll(`.${d.WORK_CELLS}`)):[])[u])==null?void 0:l.getAttribute("data-date");p&&(t=Number(p))}return t}getCell(n,s,t){const r=document==null?void 0:document.elementsFromPoint(n,s);for(const i of r){const a=i.classList.contains(`${d.WORK_CELLS}`)||i.classList.contains(`${d.ALL_DAY_CELL}`)?i:null;if(a&&(t||!(this!=null&&this.isAllDaySource)||i.classList.contains(d.ALL_DAY_CELL)))return a}return null}getCellUnderPointer(n){const{clientX:s,clientY:t}=this.getPointerCoordinates(n);return s==null||t==null?null:this.getCell(s,t,!0)}getCellUnderClone(n){if(!this.cloneRef||!n)return null;const s=this.getContentWrap(n),t=s==null?void 0:s.getBoundingClientRect();if(!s||!t)return null;const r=(C,v=0)=>isFinite(C)?C:v,i=s.scrollLeft||0;let a=0,l=0;const m=s.querySelector(`.${d.ALL_DAY_ROW}`);if(!m)return null;const u=Array.from(m.querySelectorAll(`.${d.ALL_DAY_CELL}`));if(u.length===0)return null;const f=u[0],h=Math.max(1,f.offsetWidth||this.cellWidth||1),p=r(parseFloat(this.direction==="rtl"?this.cloneRef.style.right:this.cloneRef.style.left||"0"),0),g=Math.max(1,Math.ceil(this.cloneRef.offsetWidth/h));a=this.direction==="rtl"?t.right-p-this.cloneRef.offsetWidth/g+i:t.left+p+this.cloneRef.offsetWidth/g-i;const E=Math.max(0,f.offsetHeight);return l=t.top+m.offsetTop+E/2,this.getCell(a,l,!1)}cloneFromSource(n,s){const t=n.cloneNode(!0);return t.classList.add(d.DRAG_CLONE,d.NO_POINTER,d.POSITION_ABSOLUTE),s!=null&&s.externalDragAndDrop&&(t.classList.add(d.EXTERNAL_DRAG_CLONE,d.CONTROL),t.style.zIndex=gr(t).toString()),t}suppressEvent(n){var s,t;(this.isActionPerformed||It.currentActionName==="resize")&&(It.currentActionName="",(s=n==null?void 0:n.preventDefault)==null||s.call(n),(t=n==null?void 0:n.stopPropagation)==null||t.call(n))}addDocSuppressors(){const n=["click"],s=t=>this.suppressEvent(t);n.forEach(t=>document==null?void 0:document.addEventListener(t,s,!0)),this.removeDocListenersRef=()=>{this.removeDocListenersRef&&(n.forEach(t=>document==null?void 0:document.removeEventListener(t,s,!0)),this.removeDocListenersRef=void 0)}}updateDatasource(n,s,t,r){var a;const i={};if(Array.isArray(this.eventsData)||n||this.eventSettings){const l=this.eventSettings.fields;i[l.id]=n.id,i[l.subject]=n.subject,i[l.startTime]=s,i[l.endTime]=t,i[l.isAllDay]=n.isAllDay,(a=r==null?void 0:r.current)!=null&&a.saveEvent&&r.current.saveEvent(i)}return i}setCursorClass(n){document!=null&&document.body&&(document.body.classList.remove(d.SCHEDULER_CURSOR_MOVE,d.SCHEDULER_CURSOR_NOT_ALLOWED,d.SCHEDULER_CURSOR_DEFAULT),n==="move"?document.body.classList.add(d.SCHEDULER_CURSOR_MOVE):n==="notAllowed"?document.body.classList.add(d.SCHEDULER_CURSOR_NOT_ALLOWED):document.body.classList.add(d.SCHEDULER_CURSOR_DEFAULT))}}Object.defineProperty(It,"currentActionName",{enumerable:!0,configurable:!0,writable:!0,value:""});function Zl({ref:o,data:n,containerProps:s}){const t=Ve(),{timeScale:r,startHour:i,endHour:a,schedulerRef:l,eventSettings:m,showWeekend:u,workDays:f,onDragStart:h,onDrag:p,onDragStop:g,eventOverlap:E,confirmationDialog:C,eventDrag:v}=t,P=e.useMemo(()=>({...n,startTime:new Date(n==null?void 0:n.startTime),endTime:new Date(n==null?void 0:n.endTime)}),[n]),{getString:w}=st(),y=v,{dir:A}=$e(),{eventsData:N}=$t(),{renderDates:V}=gt(),L=Rs(),D=e.useRef(null),S=D,T=e.useRef(null),x=e.useRef({}),M=e.useRef({minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}),k=e.useRef(null),_=e.useRef(0),Z=e.useRef(0),ie=e.useRef(!0),he=e.useRef(null),Y=e.useRef(!1),H=e.useRef(null),I=e.useRef(null),z=e.useRef(!1);Vt(D,{tapHold:()=>{ie.current=!1}}),e.useEffect(()=>{r&&T.current&&(T.current.slotInterval=r.interval/r.slotCount)},[r]);const oe=e.useCallback(W=>{D.current=W,typeof o=="function"?o(W):o&&(o.current=W)},[o,L]),Q=e.useCallback(W=>{if(!W||!T.current)return{};const X=T.current.getContentWrap(W),de=X?X.getBoundingClientRect():null,ge=W.getBoundingClientRect(),Se=de?Math.round(ge.left-de.left+((X==null?void 0:X.scrollLeft)||0)):W.offsetLeft,Ee=de?Math.round(ge.top-de.top+((X==null?void 0:X.scrollTop)||0)):W.offsetTop;return{left:Se,top:Ee}},[L]),R=e.useCallback(()=>{var W,X;_.current=0,Z.current=0,x.current={},he.current=null,Y.current=!1,T.current&&(T.current.setCursorClass("default"),T.current.isActionPerformed=!1,T.current.enableScroll=!0,T.current.scrollInterval!=null&&(cancelAnimationFrame(T.current.scrollInterval),T.current.scrollInterval=null),(X=(W=T.current)==null?void 0:W.removeDocListenersRef)==null||X.call(W)),k.current!=null&&(cancelAnimationFrame(k.current),k.current=null),M.current={minutesPerPixel:0,dragAnchorOffsetPx:null,dragAnchorOffsetX:null,finalDragStartTime:null,finalDragEndTime:null}},[]);e.useEffect(()=>()=>{R()},[R]);const J=()=>{if(k.current=null,!T.current||T.current.scrollInterval==null)return;const W=x.current.lastDragEvent;if(W){let X=T.current.getCellUnderPointer(W);if(!X){const de=W.target||null;X=Ce(de)}if(X&&T.current.currentCell){let de=new Date(Number(X.getAttribute("data-date")));T.current.isAllDaySource&&(de=F.normalizeDate(de)),!T.current.isMonthView&&!T.current.isAllDaySource&&(K(X),M.current.finalDragStartTime&&(de=M.current.finalDragStartTime)),q(de)}}T.current&&T.current.scrollInterval!=null&&(k.current=requestAnimationFrame(J))},ne=e.useCallback(W=>{if(!T.current)return;const X=y.externalDragAndDrop&&T.current.getCellUnderPointer(W)||D.current;T.current.performAutoScrolling(W,X),T.current.scrollInterval!==null&&k.current===null&&!T.current.isMonthView&&(k.current=requestAnimationFrame(J))},[Q]),se=W=>{const X=T.current.getContentWrap(W);if(T.current.isAllDaySource=z.current=W.classList.contains(`${d.ALL_DAY_APPOINTMENT}`),T.current.isAllDaySource){const de=ke.getEventByGuid(N,n.guid);de.endTime=new Date(F.normalizeDate(de.endTime).getTime()+T.current.slotInterval*fn)}if(X){const de=X.querySelector(`.${d.WORK_CELLS}[data-date], .${d.ALL_DAY_CELL}`);de&&(_.current=de.offsetHeight??0,T.current.cellWidth=de.offsetWidth??0)}return M.current.minutesPerPixel=_.current>0?T.current.slotInterval/_.current:0,T.current.isMonthView=!!(W!=null&&W.closest(`.${d.MONTH_VIEW}`)),W.draggable=!1,X},le=(W,X)=>{var de;if(T.current.cloneRef=W,y!=null&&y.externalDragAndDrop){T.current.isMonthView&&W.classList.add(`${d.MONTH_EVENT}`);const ge=T.current.isMonthView||T.current.isAllDaySource;ge||(W.style.height=D.current.style.height),W.style.width=`${ge?D.current.clientWidth:T.current.cellWidth}px`}else W.style.width="1px",W.style.height="1px";(de=y.externalDragAndDrop&&(document==null?void 0:document.querySelector(y.eventDragArea))||X||(document==null?void 0:document.body))==null||de.appendChild(W)},we=()=>{var de,ge,Se,Ee;const W=(ge=T.current)==null?void 0:ge.getContentWrap((de=T.current)==null?void 0:de.currentCell);return((Se=W==null?void 0:W.closest)==null?void 0:Se.call(W,`.${d.TABLE_WRAP}`))||H.current||((Ee=l.current)==null?void 0:Ee.element)||null},Pe=(W,X)=>{const de=we();if(!de)return;const ge={container:de,payload:{guid:n.guid,segments:W,isDayEvent:X}};window==null||window.dispatchEvent(new CustomEvent("showCloneEvent",{detail:ge}))},ze=()=>{T.current.currentCell=H.current=null;const W=document==null?void 0:document.querySelectorAll(`.${d.SCHEDULER}`);W.length&&W.forEach(X=>window==null?void 0:window.dispatchEvent(new CustomEvent("hideCloneEvent",{detail:{container:X}})))},O=W=>{if(!W)return 0;let X=Math.max(0,W.endTime.getTime()-W.startTime.getTime());return X===0&&W.startTime.getTime()===W.endTime.getTime()&&(X=T.current.slotInterval*fn),X},q=(W,X,de)=>{var Me,be;const ge=y.externalDragAndDrop,Se=ke.getEventByGuid(N,n.guid);if(!Se||!T.current)return;let Ee=V;if(W){const _e=O(Se);Se.startTime=new Date(W),Se.endTime=new Date(Se.startTime.getTime()+_e)}if(ge&&W){const _e=F.normalizeDate(X??W).getTime();(!Ee.some(Ie=>F.normalizeDate(Ie).getTime()===_e)||t.view!==I.current)&&(t.selectedDate=X??W,Ee=F.getRenderDates(I.current,t.selectedDate,t,X,de))}const Ne=T.current.isMonthView||T.current.isAllDaySource;if(Ne||!r.enable){const _e=ke.processCloneEvent(ge?H.current:(Me=l.current)==null?void 0:Me.element,Ee,Se,u,f,T.current.cellWidth,T.current.isAllDaySource,A==="rtl",T.current.isMonthView,D.current);ge?Pe(_e,Ne):L==null||L.show({guid:n.guid,segments:_e,isDayEvent:Ne});return}const Re=ke.processTimeSlotCloneEvent(ge?H.current:(be=l.current)==null?void 0:be.element,Ee,Se,r,i,a,T.current.cellWidth,A==="rtl");ge?Pe(Re,!1):L==null||L.show({guid:n.guid,segments:Re,isDayEvent:!1})},me=W=>{var Se,Ee,Ne;if(!D.current||((Se=W.sender)==null?void 0:Se.type)==="touchmove"&&ie.current)return null;(Ne=(Ee=T.current)==null?void 0:Ee.cloneRef)!=null&&Ne.parentElement&&T.current.cloneRef.parentElement.removeChild(T.current.cloneRef),T.current=new It,T.current.eventSettings=m,T.current.eventsData=N,T.current.direction=A,T.current.slotInterval=(r==null?void 0:r.interval)/(r==null?void 0:r.slotCount),I.current=t.view;const X=D.current,de=se(X),ge=T.current.cloneFromSource(X,v);return le(ge,de),ge},ee=W=>{var ge,Se,Ee,Ne;if(!T.current)return;x.current={};const X=T.current;X.isActionPerformed=!0,G(W),X.addDocSuppressors(),(ge=D.current)==null||ge.classList.add(d.DRAGGING),T.current.setCursorClass("move"),x.current.lastDragEvent=W.event,fe(W);const de={...W,data:n};if(h==null||h(de),de.cancel){W.cancel=!0,U(),R(),T.current=null;return}if(v){const Re=v;Re.interval&&(Y.current=X.slotInterval!==Re.interval,X.slotInterval=Re.interval),X.enableScroll=((Se=Re.scroll)==null?void 0:Se.enable)??!0,X.minScrollSpeed=((Ee=Re.scroll)==null?void 0:Ee.scrollBy)??X.minScrollSpeed,X.minScrollThreshold=((Ne=Re.scroll)==null?void 0:Ne.timeDelay)??X.minScrollThreshold,he.current=Re.excludeSelectors??null}},fe=W=>{try{const X=D.current;if(!X)return;const de=T.current.getContentWrap(X),ge=de==null?void 0:de.getBoundingClientRect(),{clientY:Se,clientX:Ee}=T.current.getPointerCoordinates(W.event);if(!de||!ge||Se==null&&Ee==null)return;const Ne=X.getBoundingClientRect(),Re={top:de.scrollTop||0,left:de.scrollLeft||0};M.current.dragAnchorOffsetPx=Se!=null?Se-ge.top+Re.top-(Ne.top-ge.top+Re.top):null,M.current.dragAnchorOffsetX=Ee!=null?Ee-ge.left+Re.left-(Ne.left-ge.left+Re.left):null}catch{M.current.dragAnchorOffsetPx=M.current.dragAnchorOffsetX=null}},B=W=>{var X;!((X=T.current)!=null&&X.isAllDaySource)&&T.current.enableScroll&&ne(W.event)},K=W=>{var Se;if(!((Se=T.current)!=null&&Se.cloneRef&&W&&T.current))return;const X=T.current,de=X.getContentWrap(W);if((de==null?void 0:de.getBoundingClientRect())&&n){let Ee=Number(W.getAttribute("data-date"));if(!Ee||isNaN(Ee))return;X.isAllDaySource&&(Ee=Number(F.normalizeDate(new Date(Ee))));let Ne=new Date;if(t.view===I.current)if(z.current&&!X.isAllDaySource)Ne=new Date(Ee);else if(Y.current&&!X.isAllDaySource&&!X.isMonthView){const be=x.current.lastDragEvent,_e=be?X.getPointerCoordinates(be):{clientY:null},He=de==null?void 0:de.getBoundingClientRect(),Ie=M.current.minutesPerPixel;let et=Ee;if(He&&_e.clientY!=null&&Ie>0){let it=Math.max(0,Math.round((_e.clientY-He.top+de.scrollTop)*Ie));const rt=Math.max(0,X.slotInterval||0);rt>0&&(it=Math.floor(it/rt)*rt);const{schedulerStartMinutes:mt}=F.getSchedulerStartAndEndMinutes(i,a),lt=new Date(Ee);lt.setHours(0,0,0,0),et=lt.getTime()+(mt+it)*6e4,et=et-Z.current}else et=Ee-Z.current;Ne=new Date(et)}else X.isAllDaySource===z.current&&(Ee=Ee-Z.current),Ne=new Date(Ee);else Ne=new Date(Ee),y.externalDragAndDrop&&I.current==="Month"&&F.setHours(Ne,P.startTime);if(isNaN(Ne.getTime()))return;M.current.finalDragStartTime=new Date(Ne);const Re=ke.getEventByGuid(N,n.guid),Me=O(Re);M.current.finalDragEndTime=new Date(M.current.finalDragStartTime.getTime()+Me)}},G=W=>{const X=T.current.getCellUnderPointer(W.event);if(X&&T.current&&X&&n){const de=X.getAttribute("data-date");if(!de||isNaN(Number(de)))return;const ge=ke.getEventByGuid(N,n.guid);if(!ge)return;const Se=new Date(ge.startTime).getTime();Z.current=Number(de)-Se}},b=W=>{var de,ge,Se,Ee,Ne,Re,Me,be,_e,He,Ie,et,it;if(!T.current)return;let X=T.current.getCellUnderPointer(W.event);if(X||(X=Ce(W.target)),y.externalDragAndDrop&&(ze(),t.view!==I.current&&(T.current.cellWidth=((ge=(de=W.target.closest(`.${d.SCHEDULER}`))==null?void 0:de.querySelector(`.${d.WORK_CELLS}[data-date], .${d.ALL_DAY_CELL}`))==null?void 0:ge.clientWidth)??D.current.clientWidth),T.current.isMonthView=!!((Se=X||W.target)!=null&&Se.closest(`.${d.MONTH_VIEW}`)),(Ee=X||W.target)!=null&&Ee.closest(`.${d.DAY_VIEW}`)?I.current="Day":(Ne=X||W.target)!=null&&Ne.closest(`.${d.WEEK_VIEW}`)?I.current="Week":(Re=X||W.target)!=null&&Re.closest(`.${d.WORK_WEEK_VIEW}`)?I.current="WorkWeek":T.current.isMonthView&&(I.current="Month")),T.current.currentCell=X,T.current.isMonthView||(T.current.isAllDaySource=n.isAllDay=((Me=X||W.target)==null?void 0:Me.classList.contains(d.ALL_DAY_CELL))||!!((be=W.target)!=null&&be.closest(`.${d.DATE_HEADER_CONTAINER}`))),X){T.current.setCursorClass("move"),B(W),y.externalDragAndDrop&&(H.current=X.closest(`.${d.SCHEDULER}`),T.current.cloneRef.classList.add(d.DRAG_CLONE));let rt=new Date(Number(X.getAttribute("data-date"))),mt=rt,lt=rt;if(T.current.isMonthView){const Et=(_e=X.closest(`.${d.CONTENT_TABLE}`))==null?void 0:_e.querySelectorAll(`.${d.WORK_CELLS}`);rt=new Date(Number((He=Et[0])==null?void 0:He.getAttribute("data-date"))),lt=new Date(Number((Ie=Et[(Et==null?void 0:Et.length)-1])==null?void 0:Ie.getAttribute("data-date")))}x.current.lastDragEvent=W.event,K(X),M.current.finalDragStartTime&&(mt=M.current.finalDragStartTime),q(mt,rt,lt)}else y.externalDragAndDrop&&((it=(et=W.target)==null?void 0:et.closest)!=null&&it.call(et,`.${d.SCHEDULER_TOOLBAR_CONTAINER}, .${d.STICKY_HEADER}, .${d.HEADER_SECTION},
                .${d.HEADER_ROW}, .${d.LEFT_INDENT}`)&&(document!=null&&document.body)?T.current.setCursorClass("notAllowed"):document!=null&&document.body&&T.current.setCursorClass("default"),T.current.cloneRef.classList.remove(d.DRAG_CLONE));p==null||p({...W,data:n})},U=()=>{var W,X,de,ge;(W=D.current)==null||W.removeAttribute("aria-grabbed"),(X=D.current)==null||X.classList.remove(d.DRAGGING),T.current.setCursorClass("default"),(ge=(de=T.current)==null?void 0:de.cloneRef)!=null&&ge.parentElement&&T.current.cloneRef.parentElement.removeChild(T.current.cloneRef)},te=()=>{T.current&&(T.current.cloneRef=null)},ue=W=>{var ge,Se,Ee,Ne,Re,Me;let X=null,de=null;if((ge=T.current)!=null&&ge.isAllDaySource?X=((Ee=T.current)==null?void 0:Ee.getCellUnderClone((Se=T.current)==null?void 0:Se.cloneRef))||((Ne=T.current)==null?void 0:Ne.getCellUnderPointer(W.event)):X=(Re=T.current)==null?void 0:Re.getCellUnderPointer(W.event),X||(X=Ce(W.target)),X){const be=X.getAttribute("data-date");de=be?Number(be):(Me=T.current)==null?void 0:Me.getCurrentTargetDate(W.target,X)}return{cell:X,finalDropTimestamp:de}},Ce=W=>{if(!W)return null;const X=W.closest(`.${d.DATE_HEADER_CONTAINER}`);if(X){const de=W.closest(`.${d.HEADER_CELLS}`),ge=X.querySelector(`.${d.HEADER_ROW}`),Se=X.querySelector(`.${d.ALL_DAY_ROW}`);if(ge&&Se){const Ee=Array.from(ge.querySelectorAll(`.${d.HEADER_CELLS}`)),Ne=Array.from(Se.querySelectorAll(`.${d.ALL_DAY_CELL}`));let Re=-1;if(de)Re=Ee.indexOf(de);else for(let Me=0;Me<Ee.length;Me++)if(Ee[Me].contains(W)){Re=Me;break}if(Re>=0&&Ne[Re])return Ne[Re];if(Ne.length)return Ne[0]}}return W.closest(`.${d.WORK_CELLS}, .${d.DAY_WRAPPER}, .${d.ALL_DAY_CELL}`)},j=(W,X)=>{var Re,Me,be;const de=new Date(W.startTime),ge=new Date(W.endTime),Se=Math.max(0,ge.getTime()-de.getTime());let Ee=new Date(X);(Re=T.current)!=null&&Re.isAllDaySource?F.setHours(Ee,de):(Me=T.current)!=null&&Me.isMonthView?(Ee=F.normalizeDate(Ee),F.setHours(Ee,de)):(X=X-Z.current,Ee=new Date(X));const Ne=new Date(Ee.getTime()+Se);return(be=T.current)!=null&&be.isAllDaySource&&F.setHours(Ne,ge),{originalStart:de,originalEnd:ge,durationMs:Se,newStartTime:Ee,newEndTime:Ne}},ae=(W,X,de,ge)=>{if(!T.current)return;const Se=T.current.updateDatasource(W,X,de,l);R(),ge.cancel=!0,g==null||g({...ge,data:Se})},xe=e.useCallback(W=>{if(!he.current)return!0;const X=he.current.split(",");for(const de of X)if(W!=null&&W.classList.contains(de.trim()))return!1;return!0},[]),ce=W=>{if(!T.current)return;if(U(),W.element){const Ee=W.element.closest(`.${d.TABLE_WRAP}`);Ee&&(T.current.cloneRef=Ee.querySelector(`.${d.APPOINTMENT}.${d.EVENT_CLONE}`))}const{cell:X,finalDropTimestamp:de}=ue(W);te(),y.externalDragAndDrop?ze():L==null||L.hide();const ge=Array.isArray(n)?n[0]:n,Se=(Ee,Ne)=>{const Re=ke.getEventByGuid(N,n.guid);Re&&(Re.startTime=P.startTime,Re.endTime=P.endTime),R(),W.cancel=!0,Ee!==null&&Ne!==null&&(C==null||C.show({title:w(Ee),message:w(Ne),confirmText:w("ok"),showCancel:!1,onConfirm:()=>C.hide()})),g==null||g({...W,data:ge}),T.current=null};if(!X){Se(null,null);return}if(xe(X)){let Ee,Ne;if(M.current.finalDragStartTime&&M.current.finalDragEndTime)Ee=M.current.finalDragStartTime,Ne=M.current.finalDragEndTime;else if(X&&de){const{newStartTime:Re,newEndTime:Me}=j(ge,de);Ee=Re,Ne=Me}if(Ee&&Ne){const Re={...ge,startTime:Ee,endTime:Ne};if(!E&&ke.checkEventOverlap(Re,N,!0)){Se("eventOverlap","overlapAlert");return}if(ke.isBlockRange(Re,N,!0)){Se("alert","blockAlert");return}z.current&&T.current.isMonthView&&(n.isAllDay=!0),ae(ge,Ee,Ne,W);return}}else{const Ee=ke.getEventByGuid(N,n.guid);Ee.startTime=ge.startTime,Ee.endTime=ge.endTime}R(),g==null||g({...W,data:n}),T.current=null};Yt(S,{clone:!0,cursorAt:y!=null&&y.externalDragAndDrop?{left:-20,top:-20}:{left:-5,top:-5},dragArea:(y==null?void 0:y.eventDragArea)??`.${d.CONTENT_WRAP}, .${d.CONTENT_TABLE}`,abort:`.${d.EVENT_RESIZE_CLASS}, .${d.LEFT_RESIZE_HANDLER}, .${d.RIGHT_RESIZE_HANDLER}, .${d.TOP_RESIZE_HANDLER}, .${d.BOTTOM_RESIZE_HANDLER}, .${d.BLOCK_APPOINTMENT}`,distance:5,helper:W=>me(W),onDragStart:W=>ee(W),onDrag:W=>b(W),onDragStop:W=>ce(W),enableTailMode:y==null?void 0:y.externalDragAndDrop});const ye={...s||{},onClick:W=>{var X,de,ge;(X=T.current)==null||X.suppressEvent(W),!((de=T.current)!=null&&de.isActionPerformed)&&((ge=s==null?void 0:s.onClick)==null||ge.call(s,W))}};return{mergedRef:oe,composedProps:ye}}const Un=e.memo(e.forwardRef((o,n)=>{const{children:s,data:t,className:r,containerProps:i}=o,{mergedRef:a,composedProps:l}=Zl({ref:n,data:t,containerProps:i});return c.jsx("div",{ref:a,className:r,...l,children:s})}));Un.displayName="DraggableEvent";Un.__docgenInfo={description:"",methods:[],displayName:"DraggableEvent"};function Ql(o){var O,q,me,ee;const{onResizeStart:n,onResizing:s,onResizeStop:t,timeScale:r,startHour:i,endHour:a,schedulerRef:l,eventSettings:m,showWeekend:u,workDays:f,eventOverlap:h,confirmationDialog:p}=Ve(),{eventsData:g}=$t(),{renderDates:E}=gt(),C=Rs(),{dir:v}=$e(),P=e.useRef(null),w=e.useRef(null),y=10,A=e.useRef(new Date),N=e.useRef(0),V=e.useRef(0),L=e.useRef(0),D=e.useRef(0),S=e.useRef(Ke.Right),T=e.useRef(void 0),x=e.useRef(void 0),M=e.useRef(null),k=e.useRef(void 0),{getString:_}=st(),Z=e.useRef(null);e.useEffect(()=>()=>{ne(),he(),w.current=null,P.current=null},[]);const ie=()=>{je.add(document,"mousemove",se,!0),je.add(document,"touchmove",se,{capture:!0,passive:!1}),je.add(document,"mouseup",le,!0),je.add(document,"touchend",le,{capture:!0})},he=()=>{je.remove(document,"mousemove",se),je.remove(document,"touchmove",se),je.remove(document,"mouseup",le),je.remove(document,"touchend",le)},Y=()=>{document.body.style.userSelect="none",document.body.style.cursor=S.current===Ke.Left||S.current===Ke.Right?"ew-resize":"ns-resize"},H=()=>{document.body.style.userSelect="",document.body.style.cursor=""},I=(fe,B)=>{const K=(B==null?void 0:B.offsetWidth)||0,G=fe.classList.contains(d.ALL_DAY_APPOINTMENT),b=!!fe.closest(`.${d.MONTH_VIEW}`),U=w.current.slotInterval;T.current=o!=null&&o.startTime?new Date(o.startTime):void 0,x.current=o!=null&&o.endTime?new Date(o.endTime):void 0,Ht(w.current,{cellWidth:K,isAllDaySource:G,isMonthView:b,slotInterval:U,interval:U},null,!0)},z=()=>{if(!P.current||!(P.current.offsetParent||P.current.parentElement))return;const B=w.current.cloneFromSource(P.current);w.current.cloneRef=B},oe=e.useCallback((fe,B)=>{var ue;const K=B.nativeEvent,G=(ue=B.target)==null?void 0:ue.closest(`.${d.APPOINTMENT}`);if(!G)return;w.current=new It,w.current.slotInterval=r!=null&&r.interval&&(r!=null&&r.slotCount)?r.interval/r.slotCount:30,w.current.eventSettings=m,w.current.eventsData=g,w.current.isActionPerformed=!1,S.current=fe,w.current.direction=v,P.current=G,L.current=G.offsetTop,D.current=G.offsetHeight;const b=w.current.getCellUnderPointer(B.nativeEvent);I(G,b),S.current===Ke.Top?A.current=T.current:S.current===Ke.Bottom&&(A.current=x.current);const U=Q(K),te=w.current.getPointerCoordinates(K);te.clientX!=null&&(N.current=te.clientX),te.clientY!=null&&(V.current=te.clientY),k.current=K,n==null||n(U),!U.cancel&&(U.interval&&(w.current.slotInterval=U.interval),Z.current={startTime:new Date(o.startTime),endTime:new Date(o.endTime)},ie())},[n,E,o]),Q=fe=>({event:fe,cancel:!1,startTime:T.current,endTime:x.current,data:P.current?o:void 0,interval:w.current.slotInterval}),R=fe=>(w.current.performAutoScrolling(fe,P.current),w.current.scrollInterval!==null&&M.current===null&&(M.current=requestAnimationFrame(ze)),!1),J=(fe,B)=>{if(!w.current.isActionPerformed){if(Math.hypot(fe,B)<y)return;const G=P.current;if(!G)return;w.current.isActionPerformed=!0,w.current.addDocSuppressors(),G.classList.add(d.RESIZING),z(),document!=null&&document.body&&Y()}},ne=()=>{M.current!=null&&(cancelAnimationFrame(M.current),M.current=null)},se=e.useCallback(fe=>{var ue,Ce;if(!w.current)return;const B=w.current.getPointerCoordinates(fe),K=B.clientX-N.current,G=B.clientY-V.current;if(J(K,G),!w.current.isActionPerformed)return;k.current=fe;const b=Q(fe);if(s==null||s(b),b.cancel)return;It.currentActionName="resize",b.startTime&&(T.current=b.startTime),b.endTime&&(x.current=b.endTime);const U=P.current;w.current.isAllDaySource||R(fe);const te=w.current.getCellUnderPointer(fe);w.current.cloneRef&&U&&r.enable&&!(w.current.isAllDaySource||w.current.isMonthView)&&we(te),Pe(te),(ue=fe.preventDefault)==null||ue.call(fe),(Ce=fe==null?void 0:fe.stopPropagation)==null||Ce.call(fe)},[(O=w.current)==null?void 0:O.isActionPerformed,P.current,E,o,N.current,V.current,S.current,(q=w.current)==null?void 0:q.cloneRef,s]),le=e.useCallback(fe=>{var te,ue;if((te=P.current)==null||te.classList.remove(d.RESIZING),w.current.scrollInterval&&cancelAnimationFrame(w.current.scrollInterval),w.current.scrollInterval=null,ne(),he(),document!=null&&document.body&&H(),w.current.cloneRef=null,(ue=C==null?void 0:C.hide)==null||ue.call(C),!w.current.isActionPerformed){w.current.isActionPerformed=!1;return}w.current.isActionPerformed=!1;const B=Q(fe);if(t==null||t(B),B.cancel){const Ce=B.data;Ce&&(T.current=Ce.startTime,x.current=Ce.endTime);return}const K=Array.isArray(o)?o[0]:o,G={...K,startTime:new Date(K.startTime),endTime:new Date(K.endTime)};if(S.current===Ke.Top)F.setHours(G.startTime,A.current);else if(S.current===Ke.Bottom){const Ce=F.isMidnight(G.endTime),j=F.isMidnight(A.current);F.setHours(G.endTime,A.current);const ae=Ce&&!j?-1:!Ce&&j?1:0;G.endTime=F.addDays(G.endTime,ae)}if(w.current.isAllDaySource||w.current.isMonthView){const Ce=w.current.getCellUnderPointer(fe),j=(Ce==null?void 0:Ce.getAttribute("data-date"))??w.current.getCurrentTargetDate(fe.target,Ce);if(!j)return;let xe=new Date(Number(j));if(S.current===Ke.Right){const ce=F.normalizeDate(G.startTime);xe.getTime()<ce.getTime()&&(xe=ce),F.setYear(G.endTime,xe)}else if(S.current===Ke.Left){const ce=F.normalizeDate(G.endTime);xe.getTime()>ce.getTime()&&(xe=ce),F.setYear(G.startTime,xe)}}const b={...G,startTime:G.startTime,endTime:G.endTime},U=(Ce,j)=>{var xe;const ae=ke.getEventByGuid(g,o.guid);ae&&Z.current&&(ae.startTime=new Date(Z.current.startTime),ae.endTime=new Date(Z.current.endTime)),p==null||p.show({title:_(Ce),message:_(j),confirmText:_("ok"),showCancel:!1,onConfirm:()=>p.hide()}),(xe=w.current)==null||xe.updateDatasource(ae,ae.startTime,ae.endTime,l),w.current=null};if(!h&&ke.checkEventOverlap(b,g,!0)){U("eventOverlap","overlapAlert");return}if(ke.isBlockRange(b,g,!0)){U("alert","blockAlert");return}w.current.updateDatasource(G,G.startTime,G.endTime,l),w.current=null},[(me=w.current)==null?void 0:me.isActionPerformed,P.current,w,(ee=w.current)==null?void 0:ee.cloneRef,se,t]),we=fe=>{const B=fe==null?void 0:fe.getAttribute("data-date");if(!B)return;const K=new Date(Number(B));let G=K.getHours()*Xe+K.getMinutes();const b=T.current?new Date(T.current):void 0,U=x.current?new Date(x.current):void 0;let te=!1,ue=!1;if(P.current.querySelector(".sf-indicator")&&(te=P.current.querySelector(".sf-indicator").classList.contains("sf-up-icon"),ue=P.current.querySelector(".sf-indicator").classList.contains("sf-down-icon")),S.current===Ke.Top){const Ce=U.getHours()*Xe+U.getMinutes();(ue||Ce>G||Ce===0)&&(b.setHours(K.getHours(),K.getMinutes()),A.current=b)}else if(S.current===Ke.Bottom){G=G+w.current.slotInterval;const Ce=b.getHours()*Xe+b.getMinutes();(te||Ce<G)&&(U.setHours(K.getHours(),K.getMinutes()+w.current.slotInterval),A.current=U)}},Pe=fe=>{var te,ue,Ce,j;if(!o.guid)return;const B=ke.getEventByGuid(g,o.guid);if(!B)return;const K={...B,startTime:new Date(B.startTime),endTime:new Date(B.endTime)},G=((te=w.current)==null?void 0:te.isMonthView)||((ue=w.current)==null?void 0:ue.isAllDaySource);if(!G&&r.enable){const ae={...K};if(S.current===Ke.Top)F.setHours(ae.startTime,A.current);else if(S.current===Ke.Bottom){const ce=F.isMidnight(ae.endTime),ye=F.isMidnight(A.current);F.setHours(ae.endTime,A.current);const W=ce&&!ye?-1:!ce&&ye?1:0;ae.endTime=F.addDays(ae.endTime,W)}const xe=ke.processTimeSlotCloneEvent((Ce=l.current)==null?void 0:Ce.element,E,ae,r,i,a,w.current.cellWidth,v==="rtl");C==null||C.show({guid:o.guid,segments:xe,isDayEvent:!1});return}let b=null;if(fe){const ae=fe.getAttribute("data-date");b=ae?new Date(Number(ae)):null}if(!b&&fe){const ae=w.current.getCurrentTargetDate(fe,fe);b=ae!=null?new Date(ae):null}if(b){const ae=F.normalizeDate(K.startTime),xe=F.normalizeDate(K.endTime);S.current===Ke.Right?(b.getTime()<ae.getTime()&&(b=ae),F.setYear(K.endTime,b)):S.current===Ke.Left&&(b.getTime()>xe.getTime()&&(b=new Date(xe)),F.setYear(K.startTime,b))}const U=ke.processCloneEvent((j=l.current)==null?void 0:j.element,E,K,u,f,w.current.cellWidth,w.current.isAllDaySource,v==="rtl",w.current.isMonthView,P.current);C==null||C.show({guid:o.guid,segments:U,isDayEvent:G})},ze=()=>{if(M.current=null,!w.current||w.current.scrollInterval==null)return;const fe=k.current;if(fe){let B=w.current.getCellUnderPointer(fe);if(!B){const K=fe.target||null;B=K==null?void 0:K.closest(`.${d.WORK_CELLS}, .${d.DAY_WRAPPER}, .${d.ALL_DAY_CELL}`)}B&&(w.current.cloneRef&&!(w.current.isAllDaySource||w.current.isMonthView)&&we(B),Pe(B))}w.current&&w.current.scrollInterval!=null&&(M.current=requestAnimationFrame(ze))};return{resizeStart:oe,onClick:fe=>{var B;(B=w.current)!=null&&B.suppressEvent&&w.current.suppressEvent(fe)}}}const Mn=typeof document<"u"&&typeof window<"u",_n=o=>{var n,s;o==null||o.stopPropagation(),o!=null&&o.nativeEvent&&((s=(n=o.nativeEvent).stopImmediatePropagation)==null||s.call(n))},Jl=o=>{switch(o){case Ke.Top:return d.TOP_RESIZE_HANDLER;case Ke.Bottom:return d.BOTTOM_RESIZE_HANDLER;case Ke.Left:return d.LEFT_RESIZE_HANDLER;default:return d.RIGHT_RESIZE_HANDLER}},ar=({dir:o,resizeStart:n,showResizeHandle:s})=>De.isDevice&&!s?null:c.jsxs("div",{className:`${d.EVENT_RESIZE_CLASS} ${Jl(o)}`,onMouseDown:t=>{_n(t),n==null||n(o,t)},onTouchStart:t=>{_n(t),n==null||n(o,t)},children:[o===Ke.Top||o===Ke.Bottom?c.jsx("div",{className:d.VERTICAL_RESIZE_INNER}):c.jsx("div",{className:d.HORIZONTAL_RESIZE_INNER}),De.isDevice&&s&&c.jsx("div",{className:d.MOB_RESIZE_DOT,onMouseDown:t=>{_n(t),n==null||n(o,t)},onTouchStart:t=>{_n(t),n==null||n(o,t)}})]}),pn=e.memo(({isVertical:o=!1,data:n,children:s,hasPrevious:t,hasNext:r})=>{const{eventResize:i}=Ve();if(!i)return c.jsx(c.Fragment,{children:s});const{resizeStart:a}=Ql(n),l=e.useRef(null),m=e.useRef(null),[u,f]=e.useState(!1);Vt(m,{tapHold:()=>{De.isDevice&&f(!0)}}),e.useEffect(()=>{const E=m.current;if(!E)return;const C=v=>{v.preventDefault()};return E.addEventListener("contextmenu",C,!0),()=>{E.removeEventListener("contextmenu",C,!0)}},[]);const h=e.useCallback((E,C)=>{if(a(E,C),!De.isDevice)return;const v=()=>{f(!1),Mn&&(document.removeEventListener("mouseup",v,!0),document.removeEventListener("touchend",v,!0))};Mn&&(document.addEventListener("mouseup",v,{capture:!0,once:!0}),document.addEventListener("touchend",v,{capture:!0,once:!0}))},[a]);e.useEffect(()=>{if(!De.isDevice||!u)return;const E=C=>{const v=C.target;l.current&&v&&!l.current.contains(v)&&f(!1)};return Mn&&(document.addEventListener("mousedown",E,!0),document.addEventListener("touchstart",E,!0)),()=>{Mn&&(document.removeEventListener("mousedown",E,!0),document.removeEventListener("touchstart",E,!0))}},[u]);const p=o?Ke.Top:Ke.Left,g=o?Ke.Bottom:Ke.Right;return c.jsxs("div",{className:`${d.RESIZE_CONTAINER}`,ref:E=>{l.current=E,m.current=E?E.closest(`.${d.APPOINTMENT}`):null},children:[!t&&c.jsx(ar,{dir:p,resizeStart:h,showResizeHandle:u}),s,!r&&c.jsx(ar,{dir:g,resizeStart:h,showResizeHandle:u})]})});pn.displayName="ResizeHandlers";const Fn=o=>{const{weekRenderDates:n,isBlockedEvent:s,...t}=o,{renderDates:r}=gt(),{timeFormat:i,eventTemplate:a,onEventClick:l,onEventDoubleClick:m,eventDrag:u,eventResize:f=!0,quickPopupRef:h,readOnly:p}=Ve(),{locale:g}=$e(),{getString:E}=st(g||"en-US"),C=e.useRef(null),{processedEvent:v,overflowDirection:P,positionStyle:w}=Gl({eventInfo:t,renderDates:n||r}),{isOverflowLeft:y,isOverflowRight:A}=P,N=e.useCallback(H=>{if(s){H==null||H.preventDefault(),H==null||H.stopPropagation();return}if(zn(H.currentTarget),H.stopPropagation(),l){const I={event:H,data:t.event,element:H.currentTarget};l(I)}},[l,v]),V=e.useCallback(H=>{var I;if(t.event.isReadonly||p||s){H==null||H.preventDefault(),H==null||H.stopPropagation();return}if(H.stopPropagation(),m){(I=h==null?void 0:h.current)==null||I.hide();const z={event:H,data:t.event,element:H.currentTarget};m(z)}},[m,v]),L=H=>ft(H??new Date,{type:"time",skeleton:"short",format:i,locale:g}),D=H=>c.jsx("div",{className:`sf-indicator sf-icons sf-${H}-icon`,children:H==="left"?c.jsx(Ts,{}):c.jsx(Cs,{})}),S=H=>c.jsx("div",{className:d.TIME,children:H}),T=e.useCallback(()=>{const{subject:H,isAllDay:I,startTime:z,endTime:oe}=v;if(!t.totalSegments)return null;const Q=()=>y?D("left"):!I&&S(L(z)),R=()=>A?D("right"):!I&&S(L(oe));return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[Q(),c.jsx("div",{className:`${d.SUBJECT} ${d.TEXT_CENTER} ${d.ELLIPSIS}`,children:H||E("addTitle")}),R()]})},[v,t,g,i,y,A]),x=e.useCallback(()=>{const{subject:H,startTime:I,isAllDay:z}=v;return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[!z&&S(L(I)),c.jsx("div",{className:`${d.SUBJECT} ${d.ELLIPSIS}`,children:H||E("addTitle")})]})},[v]),M=e.useCallback(()=>{const{subject:H}=v;return c.jsx("div",{className:d.APPOINTMENT_DETAILS,children:c.jsx("div",{className:`${d.SUBJECT}`,children:H||E("addTitle")})})},[v]),k=e.useCallback(()=>a?a(v):s?M():t.totalSegments?T():x(),[a,v,T,x,M,t,y,A]),_={...t.eventStyle||{},...w},Z=t.eventClasses.join(" "),ie={"data-id":v.id,"aria-label":ke.getAriaLabel(v),"data-guid":t.event.guid,role:"button",tabIndex:0,onClick:N,onDoubleClick:V,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&(H.stopPropagation(),N(H))},style:_},he=k(),Y=!s&&!t.event.isReadonly&&!p;return u!=null&&u.enable&&Y?c.jsx(Un,{data:v,className:Z,containerProps:ie,ref:C,children:f&&Y?c.jsx(pn,{data:v,hasPrevious:y,hasNext:A,children:he}):c.jsx(c.Fragment,{children:he})}):c.jsx("div",{ref:C,className:Z,...ie,children:f&&Y?c.jsx(pn,{data:v,hasPrevious:y,hasNext:A,children:he}):c.jsx(c.Fragment,{children:he})})};Fn.displayName="DayEvent";const Yn=()=>{const{timeScale:o,onCellClick:n,onCellDoubleClick:s,readOnly:t,quickPopupRef:r}=Ve(),i=e.useCallback((u,f,h)=>{const p=new Date(f);return!o.enable||h?(f.setHours(0,0,0,0),p.setDate(p.getDate()+1),p.setHours(0,0,0,0),h=!0):p.setTime(f.getTime()+o.interval/o.slotCount*fn),{cancel:!1,nativeEvent:u.nativeEvent,startTime:f,endTime:p,isAllDay:!!h,element:u.currentTarget}},[o]),a=e.useCallback((u,f,h)=>{var p,g;if(!((p=u.target)!=null&&p.classList.contains(d.DATE_HEADER)||(g=u.target)!=null&&g.classList.contains(d.HEADER_DATE)||t)&&(Vn(u.currentTarget),n)){const E=i(u,f,h);if(n(E),E.cancel)return}},[n,i]),l=e.useCallback((u,f,h)=>{var p;if(!t&&(Vn(u.currentTarget),s)){(p=r==null?void 0:r.current)==null||p.hide();const g=i(u,f,h);if(s(g),g.cancel)return}},[s,i]);return{handleCellClick:a,handleCellDoubleClick:l,handleKeyDown:(u,f)=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),a(u,f))}}},so=o=>{const{date:n,visibleEvents:s,hiddenEventCount:t,onMoreIndicatorClick:r}=o,{timeScale:i}=Ve(),{locale:a}=$e(),{getString:l}=st(a||"en-US"),{handleCellClick:m,handleCellDoubleClick:u}=Yn(),f=()=>t<=0?null:c.jsx("div",{className:`${d.MORE_INDICATOR} ${d.LINK}`,onClick:p=>{p==null||p.stopPropagation(),p==null||p.preventDefault(),r()},role:"button",tabIndex:0,"aria-label":`${t} more events`,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p==null||p.stopPropagation(),p==null||p.preventDefault(),r())},children:De.isDevice?`+${t}`:`+${t} ${l("more")}`}),h=()=>s.map(p=>{const{totalSegments:g,isFirstSegmentInRenderRange:E,event:C,eventKey:v}=p;return g&&g>1&&E||(!g||g<=1)&&C.isAllDay&&!C.isBlock?c.jsx(Fn,{...p},v):null});return c.jsx("div",{className:d.ALL_DAY_CELL,"data-date":n.getTime(),onClick:p=>m(p,n,!0),onDoubleClick:p=>u(p,n,!0),onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),m(p,n,!0))},children:i.enable&&c.jsxs(c.Fragment,{children:[h(),f()]})},F.generateDateKey(n))};so.displayName="AllDayRowCell";const Ns=e.forwardRef((o,n)=>{const{isCollapsed:s,onCollapseChange:t,onMoreEventsChange:r}=o,{renderDates:i}=gt(),{timeScale:a}=Ve(),l=e.useRef(null),m=3,[u,f]=e.useState("auto"),{eventsByDate:h,hasEventsExceedingMaxCount:p,calculateHeight:g,getVisibleEvents:E,getHiddenEventCount:C}=ql(s,m),v=e.useCallback(()=>{t&&t()},[t]);e.useImperativeHandle(n,()=>({hasMoreEvents:p})),e.useEffect(()=>{r&&r(p)},[p,r]),e.useEffect(()=>{if(l.current)if(!a.enable)f("auto");else{const y=g();f(`${y}px`)}},[s,h,g]);const P=["sf-all-day-row",s?"sf-all-day-collapsed":"",p?"sf-has-more-events":""].filter(Boolean).join(" "),w=y=>{const A=F.generateDateKey(y),N=E(A),V=C(A);return c.jsx(so,{date:y,visibleEvents:N,hiddenEventCount:V,onMoreIndicatorClick:v},A)};return c.jsx("div",{ref:l,className:P,style:{height:u},children:i.map(w)})});Ns.displayName="AllDayRow";Ns.__docgenInfo={description:"",methods:[],displayName:"AllDayRow"};const ro=()=>{const{timeScale:o,dateHeader:n,headerIndent:s}=Ve(),{handleDateClick:t}=ws(),{locale:r}=$e(),{getString:i}=st(r||"en-US"),{headerCells:a,isAllDayCollapsed:l,showAllDayToggle:m,weekNumber:u,toggleAllDayCollapse:f,handleMoreEventsChange:h}=xl(),{handleCellClick:p,handleCellDoubleClick:g}=Yn(),E=v=>c.jsx("div",{className:v.className,onClick:P=>p(P,v.date,!0),onDoubleClick:P=>g(P,v.date,!0),children:n?n({date:v.date}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:d.HEADER_DAY,children:v.dayName}),c.jsx("div",{className:`${d.HEADER_DATE} ${v.isToday?d.TODAY:""}`,onClick:P=>t(P,v.date),children:v.dateNumber})]})},v.key),C=()=>c.jsx("div",{className:d.ALL_DAY_APPOINTMENT_SECTION,onClick:f,role:"button",tabIndex:0,"aria-label":i(l?"expandAllDaySection":"collapseAllDaySection"),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&f()},children:c.jsx(Bn,{className:l?d.APPOINTMENT_EXPAND:d.APPOINTMENT_COLLAPSE})});return c.jsxs("div",{className:d.HEADER_SECTION,children:[o.enable&&c.jsxs("div",{className:d.LEFT_INDENT,children:[s?s({weekNumber:u}):c.jsx(c.Fragment,{children:u&&c.jsx("div",{className:d.WEEK_NUMBER,children:c.jsx("div",{title:`Week ${u}`,children:u})})}),m&&C()]}),c.jsx("div",{className:d.RIGHT_SECTION,children:c.jsx("div",{className:d.DATE_HEADER_CONTAINER,children:c.jsxs("div",{className:d.DATE_HEADER,children:[c.jsx("div",{className:d.HEADER_ROW,children:a.map(v=>E(v))}),c.jsx("div",{className:d.DAY_CLONE_CONTAINER}),c.jsx(Ns,{isCollapsed:l,onCollapseChange:f,onMoreEventsChange:h})]})})})]})};ro.displayName="DateHeader";const ea=o=>{const{currentTime:n=new Date,currentTimePosition:s=0,isTimeWithinBounds:t=!1}=o,{startHour:r,endHour:i,timeFormat:a,timeScale:l}=Ve(),{locale:m}=$e(),{hours:u,minutes:f}=F.parseTimeString(r),{hours:h,minutes:p}=F.parseTimeString(i),[g,E]=e.useState(null),[C,v]=e.useState(0),P=e.useMemo(()=>{const y=[],A=u*Xe+f,N=h*Xe+p;let V=A;for(;V<N;){for(let L=0;L<l.slotCount;L++){const D=V+L*(l.interval/l.slotCount);if(D>=N)break;const S=Math.floor(D/Xe),T=Math.floor(D%Xe),x=new Date;x.setHours(S,T,0,0);const M=L===0,k=L===l.slotCount-1,Z=D+l.interval/l.slotCount>=N,ie={date:x,type:M?"majorSlot":"minorSlot"};y.push({key:`${S}-${T}`,date:x,isMajorSlot:M,isLastSlotOfInterval:k,isLastSlotBeforeEnd:Z,label:ft(x,{type:"time",skeleton:"h",format:a,locale:m}),templateProps:ie,index:y.length})}V+=l.interval}return v(y.length),y},[u,f,h,p,a,l,m]);e.useEffect(()=>{if(!t){g!==null&&E(null);return}const y=100/C,A=Math.floor(s/y);A!==g&&E(A)},[s,g,C,t]);const w=ft(n,{type:"time",skeleton:"short",format:a,locale:m});return{timeSlots:P,totalSlots:C,hiddenSlotIndex:g,currentTimeString:w}},oo=o=>{const{currentTime:n,currentTimePosition:s=0,isTimeWithinBounds:t=!1}=o,{showTimeIndicator:r,timeScale:i}=Ve(),{timeSlots:a,hiddenSlotIndex:l,currentTimeString:m}=ea({currentTime:n,currentTimePosition:s,isTimeWithinBounds:t}),u=()=>a.map(f=>c.jsx("div",{className:`${d.TIME_SLOTS} ${f.isLastSlotOfInterval||f.isLastSlotBeforeEnd?"sf-time-cells":""} ${l===f.index?"sf-hide-children":""}`,children:f.isMajorSlot?i.majorSlot?i.majorSlot(f.templateProps):c.jsx("span",{children:f.label}):i.minorSlot?i.minorSlot(f.templateProps):null},f.key));return c.jsx("div",{className:d.LEFT_INDENT,children:c.jsxs("div",{className:d.TIME_CELLS_WRAP,children:[c.jsx("div",{className:d.SCHEDULER_TABLE,children:u()}),r&&t&&c.jsx("div",{className:d.CURRENT_TIME,style:{top:`${s}%`},children:m})]})})};oo.displayName="TimeCells";const ta=o=>{const{renderDates:n,workDays:s,workHours:t,cell:r,timeScale:i,startHour:a,endHour:l}=o,{hours:m,minutes:u}=F.parseTimeString(a||"00:00"),{hours:f,minutes:h}=l==="24:00"?{hours:24,minutes:0}:F.parseTimeString(l||"24:00"),p=E=>r?r({date:E,type:"workCell"}):null;return{workCellRows:e.useMemo(()=>{const E=[];if(i.enable){const C=m*Xe+u,v=f*Xe+h;let P=C;for(;P<v;){for(let w=0;w<i.slotCount;w++){const y=P+w*(i.interval/i.slotCount);if(y>=v)break;const A=Math.floor(y/Xe),N=Math.floor(y%Xe),L=!(w===i.slotCount-1),D=`${A}-${N}`,S=`${A}:${N.toString().padStart(2,"0")}`,T=n.map(x=>{const M=new Date(x);M.setHours(A,N,0,0);const k=F.isWorkHour(M,t,s),_=F.isSameDay(x,new Date),Z=F.isWeekend(x,s),ie=["sf-work-cells",L?"sf-alternate-cells":"",_?"sf-today":"",Z?"sf-weekend":"",k?"sf-work-hours":""].filter(Boolean).join(" ");return{date:M,className:ie,key:`${x.getTime()}-${A}-${N}`,dataAttributes:{date:M.getTime()},isWorkHour:k,isToday:_,isWeekend:Z,isAlternate:L}});E.push({key:D,dataAttribute:S,cells:T})}P+=i.interval}}else{const C=n.map(v=>{const P=new Date(v);P.setHours(0,0,0,0);const w=F.isSameDay(v,new Date),y=F.isWeekend(v,s),A=["sf-work-cells","sf-timescale-disabled-cell",w?"sf-today":"",y?"sf-weekend":""].filter(Boolean).join(" ");return{date:P,className:A,key:`${v.getTime()}-timescale-disabled`,dataAttributes:{date:P.getTime(),dateKey:F.generateDateKey(v)},isToday:w,isWeekend:y}});E.push({key:"disabled-timescale-row",cells:C})}return E},[n,i,m,u,f,h,s,t]),renderCellTemplate:p}},io=()=>{const{renderDates:o}=gt(),{workDays:n,workHours:s,cell:t,timeScale:r,startHour:i,endHour:a}=Ve(),{workCellRows:l,renderCellTemplate:m}=ta({renderDates:o,workDays:n,workHours:s,cell:t,timeScale:r,startHour:i,endHour:a}),{handleCellClick:u,handleCellDoubleClick:f,handleKeyDown:h}=Yn();return c.jsx("div",{className:d.CONTENT_TABLE,children:l.map(p=>c.jsx("div",{className:d.WORK_CELLS_ROW,"data-date":p.dataAttribute,children:p.cells.map(g=>c.jsx("div",{className:g.className,"data-date":g.dataAttributes.date,"data-date-key":g.dataAttributes.dateKey,onClick:E=>u(E,g.date),onDoubleClick:E=>f(E,g.date),onKeyDown:E=>{h(E,g.date)},children:m(g.date)},g.key))},p.key))})};io.displayName="WorkCells";const rs=118,cr=2,na=()=>{const{eventSettings:o,eventOverlap:n,timeFormat:s,timeScale:t,startHour:r,endHour:i,maxEventsPerRow:a=3,startHourTuple:l,endHourTuple:m}=Ve(),{renderDates:u}=gt(),{eventsData:f}=$t(),{locale:h,dir:p}=$e(),g=e.useCallback((C,v)=>{const P=(A,N)=>{if(l&&m){const V=F.normalizeDate(A),L=F.normalizeDate(F.isMidnight(N)?F.addDays(N,-1):N);return V==null||V.setHours(l[0],l[1],0,0),L==null||L.setHours(m[0],m[1],0,0),N>V&&A<L}else return!0};if(t!=null&&t.enable){const A=o.spannedEventPlacement||"AllDayRow",N=[];let V=v.filter(k=>!k.isAllDay&&!k.isBlock&&ke.isMultiDayEvent(k));A==="AllDayRow"&&(V=V.filter(k=>F.isLessthan24Hours(k.startTime,k.endTime))),V.forEach(k=>{const _=ke.splitEventByDay(k,[C]);N.push(..._.filter(Z=>P(Z.startDate,Z.endDate)))});const D=v.filter(k=>!k.isAllDay&&!k.isBlock&&!ke.isMultiDayEvent(k)&&F.isSameDay(new Date(k.startTime),C)&&P(k.startTime,k.endTime)).map(k=>({event:k,startDate:k.startTime,endDate:k.endTime}));N.push(...D);const S=ke.calculateOverlappingEvents(N,n),T=v.filter(k=>k.isBlock&&F.isSameDay(new Date(k.startTime),C)),x=[],M=(k,_={})=>{const{event:Z}=k;if(!Z.startTime||!Z.endTime)return;const ie=dt.calculateEventPosition(k,t,r,i),he=`${C.toISOString()}-${Z.id}`,Y=F.formatTimeDisplay(Z,h,s),H=ke.getEventClassNames(Z),I={width:ie.width||"96%",height:`${ie.height}`,top:ie.top||"0px"};p==="rtl"?I.right=ie.left||"0%":I.left=ie.left||"0%",x.push({event:Z,timeDisplay:Y,eventKey:he,eventClasses:H,eventStyle:I,..._})};return S.forEach(k=>{k.forEach(_=>{M(_,{totalOverlapping:_.totalOverlapping,totalSegments:_.totalSegments,isFirstDay:_.isFirstDay,isLastDay:_.isLastDay,positionIndex:_.positionIndex,segmentIndex:_.segmentIndex})})}),T.forEach(k=>{const _={event:k,startDate:k.startTime,endDate:k.endTime};M(_)}),x}const w=ke.processDayEvents(u,v),y=[];return w.forEach(A=>{if(!F.isSameDay(A.startDate,C)||!P(A.startDate,A.endDate))return;const N=`${A.startDate.toISOString()}-${A.event.id}`,V=F.formatTimeDisplay(A.event,h,s),L=dt.calculatePositionStyles(A,u).width,D=A.positionIndex??0,S={height:`${rs}px`,top:`${D*(rs+cr)}px`,width:L||"96%"};p==="rtl"?S.right="0%":S.left="0%",y.push({...A,timeDisplay:V,eventKey:N,eventStyle:S})}),y},[o,n,t,r,i,u,p,h,s]);return{dayWrappers:e.useMemo(()=>!u||u.length===0||!f||f.length===0?null:u.map(C=>{const v=F.generateDateKey(C),P=g(C,f);let w;return t.enable||(w=a*(rs+cr)),{key:v,dateTimestamp:C.getTime(),events:P,moreIndicatorTopPx:w}}),[u,o,n,t,s,r,i,h,f])}},ur=24,sa=124,dr=4,As=(o,n)=>{const{height:s,rowAutoHeight:t,numberOfWeeks:r,eventSettings:i,schedulerRef:a}=Ve(),{eventsData:l}=$t(),m=e.useMemo(()=>ke.processDayEvents(o,l),[l,o]),u=e.useMemo(()=>ke.getEventsMap(o,m),[o,m]),f=e.useMemo(()=>{var T,x,M,k,_,Z,ie,he,Y,H,I,z;const y=ke.getMaxEventsInCell(u,o),A=((M=(x=(T=a==null?void 0:a.current)==null?void 0:T.element)==null?void 0:x.querySelector("."+d.MONTH_VIEW+" ."+d.APPOINTMENT))==null?void 0:M.offsetHeight)??ur,N=((Z=(_=(k=a==null?void 0:a.current)==null?void 0:k.element)==null?void 0:_.querySelector("."+d.MONTH_VIEW+" ."+d.DATE_HEADER))==null?void 0:Z.offsetHeight)??0;let V=((Y=(he=(ie=a==null?void 0:a.current)==null?void 0:ie.element)==null?void 0:he.querySelector("."+d.MONTH_VIEW+" ."+d.WORK_CELLS_ROW))==null?void 0:Y.offsetHeight)??sa;const L=oe=>oe*A+(oe>0?oe-1:0)*dr;if(!t||y===0){if(y>=3){const oe=Math.min(y,n),Q=L(oe)+N+(y>n?A:0)+dr;return`${Math.max(Q,V)}px`}return`${V}px`}const D=((z=(I=(H=a==null?void 0:a.current)==null?void 0:H.element)==null?void 0:I.querySelector("."+d.SCHEDULER_TOOLBAR_CONTAINER))==null?void 0:z.offsetHeight)??0,S=L(y)+N+(t&&(i!=null&&i.ignoreWhitespace)?0:ur);if(s!=="auto"&&r&&t){const oe=parseInt(s,10)-D;V=parseInt(Math.abs(oe/r).toFixed(2),10)}return`${Math.max(S,V)}px`},[o,u,t,r]),h=e.useCallback(y=>{const A=g(y);return t?A:A.slice(0,n)},[u,n,t]),p=e.useCallback(y=>u.get(y).find(V=>V.event.isBlock&&(V.event.isAllDay||F.isFullDayEvent(V.startDate,V.endDate))),[u,n]),g=e.useCallback(y=>{var V;return[...(V=u.get(y))==null?void 0:V.filter(L=>!L.event.isBlock)].sort((L,D)=>(L.positionIndex||0)-(D.positionIndex||0))},[u]),E=e.useCallback(y=>{var N;if(p(y))return 0;const A=(N=u.get(y))==null?void 0:N.filter(V=>!V.event.isBlock);return Math.max(0,A.length-n)},[u,n]),C=e.useCallback(y=>E(y)>0,[E]),v=e.useCallback(y=>u.get(y).some(N=>N.event.isBlock&&!N.event.isAllDay&&!F.isFullDayEvent(N.startDate,N.endDate)),[u]),P=e.useCallback(y=>u.get(y).some(N=>N.event.isBlock&&(N.event.isAllDay||F.isFullDayEvent(N.startDate,N.endDate))),[u]);return{getVisibleEvents:h,getAlldayBlockEvent:p,getHiddenEventCount:E,getAllEventsForDate:g,hasMoreIndicator:C,hasBlockIndicator:v,hasAllDayBlock:P,calculatedRowHeight:f,sortEventsByTime:y=>y.sort((A,N)=>new Date(A.startTime).getTime()-new Date(N.startTime).getTime())}};function lo(o){const{onMoreEventsClick:n,morePopupRef:s}=Ve();return{handleMoreClick:e.useCallback((r,i)=>{var a;if(r&&typeof r.stopPropagation=="function"&&r.stopPropagation(),i&&r.target){const l=F.generateDateKey(i),u=o(l).map(h=>h.event),f={cancel:!1,data:u};if(n&&n(f),f.cancel)return;(a=s==null?void 0:s.current)==null||a.open(i,u,r.target)}},[o,n,s])}}const ao=o=>{const{date:n,count:s,onMoreClick:t,topPx:r}=o,{locale:i}=$e(),{getString:a}=st(i||"en-US"),l=r!==void 0?{top:`${r}px`}:void 0,m=u=>{if(u.key==="Enter"||u.key===" "){const f={...u,currentTarget:u.currentTarget,type:"click"};t(f,n)}};return c.jsxs("div",{className:`${d.MORE_INDICATOR} ${d.LINK}`,style:l,onClick:u=>t(u,n),onKeyDown:m,tabIndex:0,role:"button",children:["+",s," ",!De.isDevice&&`${a("more")}`]})},co=e.memo(()=>{const{eventTemplate:o,onEventClick:n,onEventDoubleClick:s,eventDrag:t,eventResize:r=!0,maxEventsPerRow:i=3,timeScale:a,readOnly:l,quickPopupRef:m,startHourTuple:u,endHourTuple:f}=Ve(),{dayWrappers:h}=na(),{locale:p}=$e(),{getString:g}=st(p||"en-US"),{renderDates:E}=gt(),{getAllEventsForDate:C,getHiddenEventCount:v}=As(E,i),{handleMoreClick:P}=lo(C),w=S=>{if(a.enable){const{isOverflowTop:T,isOverflowBottom:x}=dt.getOverflowDirection(S,E,u,f);return c.jsxs(e.Fragment,{children:[T&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.UP_ARROW_ICON}`,children:c.jsx(wr,{})}),y(S),x&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.DOWN_ARROW_ICON}`,children:c.jsx(br,{})})]})}else{const{isOverflowLeft:T,isOverflowRight:x}=dt.getOverflowDirection(S,E);return c.jsxs(e.Fragment,{children:[T&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.LEFT_ARROW_ICON}`,children:c.jsx(Ts,{})}),y(S),x&&c.jsx("div",{className:`${d.INDICATOR} ${d.ICONS} ${d.RIGHT_ARROW_ICON}`,children:c.jsx(Cs,{})})]})}},y=S=>{const{event:T,timeDisplay:x}=S;return c.jsxs("div",{className:d.APPOINTMENT_DETAILS,children:[c.jsx("div",{className:`${d.SUBJECT}`,children:T.subject||g("addTitle")}),!T.isBlock&&T.location&&c.jsx("div",{className:`${d.EVENT_LOCATION} ${d.ELLIPSIS}`,children:T.location}),!T.isBlock&&c.jsx("div",{className:`${d.EVENT_TIME} ${d.ELLIPSIS}`,children:x})]})},A=S=>o?o(S.event):S.totalSegments||u||f?w(S):y(S),N=(S,T)=>{if(T.event.isBlock){S==null||S.preventDefault(),S==null||S.stopPropagation();return}if(zn(S.currentTarget),n){const x={event:S,data:T.event,element:S.currentTarget};n(x)}},V=(S,T)=>{var x;if(T.event.isReadonly||l||T.event.isBlock){S==null||S.preventDefault(),S==null||S.stopPropagation();return}if(s){(x=m==null?void 0:m.current)==null||x.hide();const M={event:S,data:T.event,element:S.currentTarget};s(M)}},L=(S,T)=>{(S.key==="Enter"||S.key===" ")&&N(S,T)};if(!h)return c.jsx("div",{className:d.EVENT_CONTAINER});const D=!(a&&a.enable);return c.jsx("div",{className:d.EVENT_CONTAINER,children:h.map(S=>{const T=S.events.filter(Y=>!Y.event.isBlock),x=S.events.filter(Y=>Y.event.isBlock),M=D?T.slice(0,i):T,k=new Date(S.dateTimestamp),_=F.generateDateKey(k),Z=D?v(_):0,ie=M.filter(Y=>Y.totalSegments&&Y.totalSegments>1&&Y.isFirstSegmentInRenderRange||!Y.totalSegments||Y.totalSegments<=1),he=D?ie:[...x,...ie];return c.jsxs("div",{className:d.DAY_WRAPPER,"data-date":S.dateTimestamp,children:[he.map(Y=>{const{isOverflowTop:H,isOverflowBottom:I}=dt.getOverflowDirection(Y,E,u,f),z=Y.eventClasses.join(" "),oe={style:Y.eventStyle,"data-id":String(Y.event.id),"data-guid":Y.event.guid,"aria-label":ke.getAriaLabel(Y.event),tabIndex:0,onClick:J=>N(J,Y),onDoubleClick:J=>V(J,Y),onKeyDown:J=>L(J,Y)},Q=A(Y),R=!Y.event.isBlock&&!Y.event.isReadonly&&!l;return t!=null&&t.enable&&R?c.jsx(Un,{data:Y.event,className:z,containerProps:oe,children:r&&R?c.jsx(pn,{isVertical:a.enable,data:Y.event,hasPrevious:H,hasNext:I,children:Q}):c.jsx(c.Fragment,{children:Q})},Y.eventKey):c.jsx("div",{className:z,...oe,children:r&&R?c.jsx(pn,{isVertical:a.enable,data:Y.event,hasPrevious:H,hasNext:I,children:Q}):c.jsx(c.Fragment,{children:Q})},Y.eventKey)}),D&&Z>0&&c.jsx(ao,{date:new Date(S.dateTimestamp),count:Z,onMoreClick:P,topPx:S.moreIndicatorTopPx})]},S.key)})})});co.displayName="TimeSlotEvent";const ra=o=>{const{timeScale:n}=Ve(),[s,t]=e.useState(0),[r,i]=e.useState(new Date),[a,l]=e.useState(!1),m=e.useCallback((h,p)=>{t(h),i(new Date),l(p)},[]),u=e.useMemo(()=>{let h="";switch(o){case"Day":h=d.DAY_VIEW;break;case"Week":h=d.WEEK_VIEW;break;case"WorkWeek":h=d.WORK_WEEK_VIEW;break}return h},[o]),f=e.useMemo(()=>`${n.enable?"":"sf-timescale-disabled"}`,[n.enable]);return{currentTime:r,currentTimePosition:s,isTimeWithinBounds:a,viewClassName:u,contentSectionClassName:f,handleTimePositionUpdate:m}},Kn=o=>{const{viewType:n}=o,{timeScale:s,showTimeIndicator:t}=Ve(),{currentTime:r,currentTimePosition:i,isTimeWithinBounds:a,viewClassName:l,contentSectionClassName:m,handleTimePositionUpdate:u}=ra(n);return c.jsx("div",{className:`${d.VERTICAL_VIEW} ${l}`,children:c.jsxs("div",{className:d.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[c.jsx("div",{className:d.STICKY_HEADER,children:c.jsx(ro,{})}),c.jsxs("div",{className:`${d.CONTENT_SECTION} ${m}`,children:[s.enable&&c.jsx(oo,{currentTime:r,currentTimePosition:i,isTimeWithinBounds:a}),c.jsxs("div",{className:d.WORK_CELLS_CONTAINER,children:[c.jsx("div",{className:d.TIME_SLOT_CLONE_CONTAINER}),c.jsxs("div",{className:d.CONTENT_WRAP,children:[c.jsx(co,{}),c.jsx(io,{})]}),t&&s.enable&&c.jsx(Kl,{onPositionUpdate:u})]})]})]})})};Kn.displayName="VerticalView";const oa=()=>c.jsx(Kn,{viewType:"Day"});oa.displayName="DayView";const ia=()=>c.jsx(Kn,{viewType:"Week"});ia.displayName="WeekView";const la=()=>c.jsx(Kn,{viewType:"WorkWeek"});la.displayName="WorkWeekView";function aa(){const{locale:o}=$e(),{firstDayOfWeek:n,showWeekend:s,workDays:t}=Ve(),r=e.useCallback(()=>{const a=[],l="gregorian",m=De.isDevice?"abbreviated":"wide",u=`days.stand-alone.${m}`;let f;if(!o||o==="en"||o==="en-US")f=Ut(u,Mo(l));else{const h=`main.${o}.dates.calendars.${l}.days.format.${m}`;f=Ut(h,_o)}for(const h of Object.keys(f))a.push(Ut(h,f));return Array.from({length:7},(h,p)=>{const g=(p+n)%7;return a[g>=0&&g<a.length?g:0]})},[n,o]);return{weekdayHeaderCells:e.useCallback(()=>{const a=r(),l=new Date().getDay();if(s)return a.map((m,u)=>{const h=(u+n)%7===l;return{day:m,isCurrentDay:h,className:`sf-header-cells ${h?"sf-current-day":""}`,key:`header-${u}`}});{const m=[];for(let u=0;u<7;u++){const f=(u+n)%7;if(t.includes(f)){const h=f===l;m.push({day:a[u>=0&&u<a.length?u:0],isCurrentDay:h,className:`sf-header-cells ${h?"sf-current-day":""}`,key:`header-${u}`})}}return m}},[n,s,t,r])()}}const uo=()=>{const{showWeekNumber:o,weekDay:n}=Ve(),{weekdayHeaderCells:s}=aa(),t=r=>c.jsx("div",{className:r.className,children:n?n({day:r.day}):c.jsx("div",{className:d.HEADER_DAY,children:r.day})},r.key);return c.jsxs("div",{className:d.HEADER_SECTION,children:[o&&c.jsx("div",{className:d.LEFT_INDENT}),c.jsx("div",{className:d.RIGHT_SECTION,children:c.jsx("div",{className:d.DATE_HEADER_CONTAINER,children:c.jsx("div",{className:d.DATE_HEADER,children:c.jsx("div",{className:d.HEADER_ROW,children:s.map(r=>t(r))})})})})]})};uo.displayName="WeekDayHeader";function ca(){const{numberOfWeeks:o,interval:n,showTrailingAndLeadingDates:s=!0,showWeekend:t,workDays:r,weekRule:i,firstDayOfWeek:a}=Ve(),{renderDates:l}=gt(),{weeksToRender:m,weekNumbers:u}=e.useMemo(()=>{if(!l||l.length===0)return{weeksToRender:[],weekNumbers:[]};const g=[],E=[],C=t?Ho:r==null?void 0:r.length;for(let v=0;v<l.length;v+=C){const P=l.slice(v,v+C);if(P.length>0){g.push(P);const w=F.getWeekNumber(P[0],i,a);E.push(w)}}return{weeksToRender:g,weekNumbers:E}},[l,t,r,i,a]),f=e.useMemo(()=>!s&&!(o||n>1),[s,o,n]),h=e.useMemo(()=>o?{"--week-count":o}:void 0,[o]),p=e.useMemo(()=>[o&&"sf-custom-weeks",f&&"sf-hide-dates"].filter(Boolean).join(" "),[o,f]);return{weekNumbers:u,weeksToRender:m,contentTableStyle:h,additionalClass:p,hideOtherMonths:f}}function ua(o){const{weekRenderDates:n,rowIndex:s}=o,{selectedDate:t,workDays:r,showWeekend:i,maxEventsPerRow:a=3}=Ve(),{locale:l}=$e(),{renderDates:m}=gt(),{getAllEventsForDate:u}=As(m,a),{handleMoreClick:f}=lo(u),h=e.useCallback(E=>{let C="sf-work-cells";return F.isWorkDay(E,r)&&(C+=" sf-work-days"),F.isToday(E)&&(C+=" sf-current-date"),F.isSameMonth(E,t)||(C+=" sf-other-month"),C},[r,t]),p=e.useCallback(E=>E.getDate()===1&&!De.isDevice?ft(E,{type:"dateTime",format:"MMM d",locale:l}):ft(E,{type:"dateTime",format:"d",locale:l}),[l]);return{workCells:e.useCallback(()=>(i?n:n.filter(C=>F.isWorkDay(C,r))).map((C,v)=>({date:C,className:h(C),dateTimestamp:C.getTime(),displayText:p(C),key:`date-${s}-${v}`})),[n,h,p,i,r,s])(),handleMoreClick:f}}const da=o=>{const{weekRenderDates:n,hideOtherMonths:s,rowIndex:t,onHeightCalculated:r}=o,{maxEventsPerRow:i=2,cellHeader:a,cell:l,rowAutoHeight:m,getAvailableViews:u}=Ve(),{workCells:f,handleMoreClick:h}=ua(o),{handleCellClick:p,handleCellDoubleClick:g,handleKeyDown:E}=Yn(),{handleDateClick:C}=ws(),{getVisibleEvents:v,getAlldayBlockEvent:P,getHiddenEventCount:w,hasMoreIndicator:y,hasBlockIndicator:A,hasAllDayBlock:N,calculatedRowHeight:V}=As(n,i),L=T=>c.jsx(ao,{date:T,count:w(F.generateDateKey(T)),onMoreClick:h}),D=T=>{const x=F.generateDateKey(T),M=v(x);if(N(x)){const k=P(x);if(k&&(k.totalSegments&&k.totalSegments>1&&k.isFirstSegmentInRenderRange||!k.totalSegments||k.totalSegments<=1))return c.jsx(Fn,{...k,weekRenderDates:n,isBlockedEvent:!0},k.eventKey||k.event.guid)}return M.map(k=>{const{totalSegments:_,isFirstSegmentInRenderRange:Z,event:ie,eventKey:he}=k;return!ie.isBlock&&(_&&_>1&&Z||!_||_<=1)?c.jsx(Fn,{...k,weekRenderDates:n},he||k.event.guid):null})},S=()=>c.jsx("div",{className:`${d.ICONS} ${d.BLOCK_INDICATOR}`,children:c.jsx(ti,{})});return e.useEffect(()=>{r(t,V)},[V]),c.jsx("div",{className:d.WORK_CELLS_ROW,style:{height:m||i>=3?V:""},children:f.map(T=>{if(s&&T.className.includes("sf-other-month"))return c.jsx("div",{className:T.className},T.key);const x=F.generateDateKey(T.date),M=pt.isDayViewAvailable(u);return c.jsxs("div",{className:T.className,"data-date":T.dateTimestamp,onClick:k=>p(k,T.date,!0),onDoubleClick:k=>g(k,T.date,!0),onKeyDown:k=>{E(k,T.date)},children:[c.jsxs("div",{className:d.DATE_HEADER_CONTAINER,children:[c.jsx("div",{className:d.DATE_HEADER,children:a?a({date:T.date}):c.jsx("span",{className:M?d.LINK:"",onClick:k=>C(k,T.date),children:T.displayText})}),A(x)&&S()]}),c.jsxs("div",{className:d.APPOINTMENT_WRAPPER,children:[D(T.date),!m&&y(x)&&L(T.date)]}),l&&l({date:T.date,type:"monthCell"})]},T.key)})})},fa=()=>{const{showWeekNumber:o,numberOfWeeks:n,rowAutoHeight:s}=Ve(),{weekNumbers:t,weeksToRender:r,contentTableStyle:i,additionalClass:a,hideOtherMonths:l}=ca(),m=e.useRef(new Array(r.length).fill("124px")),[u,f]=e.useState([]),h=e.useCallback((g,E)=>{m.current[Number(g)]!==E&&(m.current[Number(g)]=E,f([...m.current]))},[r.length]);e.useEffect(()=>{m.current=new Array(r.length).fill("124px")},[r.length]);const p=e.useCallback(()=>t==null?void 0:t.map((g,E)=>c.jsx("div",{className:d.WEEK_NUMBER,title:`Week ${g}`,style:{height:s?u[Number(E)]:""},children:g},`week-${E}`)),[u,t]);return c.jsxs(c.Fragment,{children:[o&&c.jsx("div",{className:`sf-left-indent ${n?"sf-custom-weeks":""}`,style:n?{"--week-count":n}:void 0,children:c.jsx("div",{className:d.WEEK_NUMBER_WRAPPER,children:p()})}),c.jsxs("div",{className:`sf-content-table ${a}`,style:i,children:[c.jsx("div",{className:d.DAY_CLONE_CONTAINER}),r.map((g,E)=>c.jsx(da,{weekRenderDates:g,hideOtherMonths:l,rowIndex:E,onHeightCalculated:h},`week-${E}`))]})]})},ma=()=>c.jsx("div",{className:`${d.VERTICAL_VIEW} ${d.MONTH_VIEW}`,children:c.jsxs("div",{className:d.MAIN_SCROLL_CONTAINER,tabIndex:0,children:[c.jsx("div",{className:d.STICKY_HEADER,children:c.jsx(uo,{})}),c.jsx("div",{className:d.CONTENT_SECTION,children:c.jsx("div",{className:d.WORK_CELLS_CONTAINER,children:c.jsx(fa,{})})})]})});ma.displayName="MonthView";export{oa as D,xr as F,si as L,ma as M,Ue as O,no as S,ls as T,ia as W,la as a,Ul as b,Mt as c,is as d,ys as e,Vt as f,Vl as g,Rt as h,ui as i};
